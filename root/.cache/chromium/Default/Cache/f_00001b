/*
 * Copyright (c) 2011-12, Synchronoss Technologies, Inc.   All rights reserved.
 *
 * Source Code Disclaimer
 * All information contained as well as referred to in deliverable is the Intellectual Property of 
 * Synchronoss Technologies, Inc. and are proprietary and confidential to Synchronoss Technologies, Inc. 
 * This deliverable is being provided for the sole purpose of developing a proof of concept for the next 
 * generation connection management software ("Solution"). Any other use of this information is strictly 
 * prohibited.  Prior to commercial deployment of the final Solution, the user must obtain a license to 
 * this IP from Synchronoss Technologies, Inc. 2011 Copyright Synchronoss Technologies, Inc.  
 * All Rights Reserved
 */
(function(a,b){a.vzw={};a.vzw.getUsageMsg=function(e){var d=e.getBody(),c=[{k:"Est",v:"Estimated"},{k:"Dom",v:"Domestic"},{k:"Intl",v:"International"}];b(c).each(function(g,f){d=d.replace(f.k,f.v)});return d};a.vzw.renderNetworkHomeTypeMarkup=function(g){var e=(""||g).toLowerCase(),c=g,d=false,f=[{hnt:"evdo rev 0",markup:"Mobile Broadband (EVDO-Rev-0)"},{hnt:"evdo rev a",markup:"Mobile Broadband (EVDO-Rev-A)"},{hnt:"evdo rev b",markup:"Mobile Broadband (EVDO-Rev-B)"},{hnt:"lte",markup:"Mobile Broadband (4G-LTE)"}];jQuery(f).each(function(i,h){if(!d){if(e===h.hnt){c=h.markup;d=true}}});return c};a.vzw.renderNetworkServingTypeMarkup=function(f,h){var e=(""||f).toLowerCase(),c=h.toString().toLowerCase(),d=f,g=false,i=[{nst:"1xrtt",rt:"no,false",markup:'<strong><span style="color:Red; font-weight:normal;">National</span>Access</strong> (1xRTT)',nm:"Verizon (1xRTT)"},{nst:"1xrtt",rt:"yes,domestic,true",markup:'<strong><span style="color:Red; font-weight:normal;">National</span>Access</strong> (1xRTT) Extended Network',nm:"Verizon (1xRTT) Extended Network"},{nst:"1xrtt",rt:"international",markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (1xRTT) Roaming',nm:"Global Data (1xRTT)"},{nst:"evdo rev 0",rt:"no,false",markup:"Mobile Broadband (EVDO-Rev-0)",nm:"Verizon (EVDO-Rev-0)"},{nst:"evdo rev 0",rt:"yes,domestic,true",markup:"Mobile Broadband (EVDO-Rev-0) Extended Network",nm:"Verizon (Rev-0) Extended Network"},{nst:"evdo rev 0",rt:"international",markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (EVDO-REV-0) Roaming',nm:"Global Data (EVDO-Rev-0)"},{nst:"evdo rev a",rt:"no,false",markup:"Mobile Broadband (EVDO-Rev-A)",nm:"Verizon (EVDO-Rev-A)"},{nst:"evdo rev a",rt:"yes,domestic,true",markup:"Mobile Broadband (EVDO-Rev-A) Extended Network",nm:"Verizon (Rev-A) Extended Network"},{nst:"evdo rev a",rt:"international",markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (EVDO-REV-A) Roaming',nm:"Global Data (EVDO-Rev-A)"},{nst:"evdo rev b",rt:"no,false",markup:"Mobile Broadband (EVDO-Rev-B)",nm:"Verizon (EVDO-Rev-B)"},{nst:"evdo rev b",rt:"yes,domestic,true",markup:"Mobile Broadband (EVDO-Rev-B) Extended Network",nm:"Verizon (Rev-B) Extended Network"},{nst:"evdo rev b",rt:"international",markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (EVDO-REV-B) Roaming',nm:"Global Data (EVDO-Rev-B)"},{nst:"evdo ehrpd",rt:"no,false",markup:"Mobile Broadband (EVDO-EHRPD)",nm:"Verizon (EVDO-EHRPD)"},{nst:"evdo ehrpd",rt:"yes,domestic,true",markup:"Mobile Broadband (EVDO-EHRPD) Extended Network",nm:"Verizon (EHRPD) Extended Network"},{nst:"evdo ehrpd",rt:"international",markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (EVDO-EHRPD) Roaming',nm:"Global Data (EVDO-EHRPD)"},{nst:"lte",rt:"no,false",markup:"Mobile Broadband (4G-LTE)",nm:"Verizon (4G-LTE)"},{nst:"lte",rt:"yes,domestic,true",markup:"Mobile Broadband (4G-LTE) Extended Network",nm:"Verizon (4G-LTE) Extended Network"},{nst:"lte",rt:"international",markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (4G-LTE) Roaming',nm:"Global Data (4G-LTE)"},{nst:"gprs",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (GPRS) Roaming',nm:"Global Data (GPRS)"},{nst:"edge",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (EDGE) Roaming',nm:"Global Data (EDGE)"},{nst:"umts",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (UMTS) Roaming',nm:"Global Data (UMTS)"},{nst:"hsdpa",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (HSDPA) Roaming',nm:"Global Data (HSDPA)"},{nst:"hsupa",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (HSUPA) Roaming',nm:"Global Data (HSUPA)"},{nst:"hsxpa",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (HSXPA) Roaming',nm:"Global Data (HSXPA)"},{nst:"hspa+dc",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (HSPA+DC) Roaming',nm:"Global Data (HSPA+DC)"},{nst:"hspa+",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (HSPA) Roaming',nm:"Global Data (HSPA+)"},{nst:"hspa",rt:null,markup:'<strong><span style="color:Red; font-weight:normal;">Global</span>Access</strong> (HSPA) Roaming',nm:"Global Data (HSPA)"}];b(i).each(function(l,j){if(!g){if(j.nst==e){if(j.rt===null||j.rt.indexOf(c)>=0){d=j.nm;g=true}}}});return d}})(window,jQuery);
var $SCOPECONFIG={startupcheck:false,autointerval:0,manaulcheck:true,startupfilter:"NO-3G",manualfilter:"",G_ENHANCEDCOMPS:[],G_ENHCOMPINDEX:0,G_UPDATESTATUS:0,G_ENHUPDTNGCOMPID:"",checkAtstartup:false,UPDTNG_IDLE:0,UPDTNG_WDGT:1,UPDTNG_ENHAPP:2,UPDTNG_FIRMWARE:3,isRoaming:false,isUpdtating:false,isInstalling:false,totalInstalltime:0,elapsedInstallTime:0,G_OTA_INST_TIMER:0,skipIdleCnt:0,deviceId:""};var $SCOPE={UNKNOWN:0,INITIALIZING:1,FETCHINGSCOPE:2,VERIFYINGMNOTTV:3,VERIFYINGMNO:4,FETCHINGSTRUCTURE:5,FETCHINGSTRUCTURECHANGED:6,FETCHINGCONFIG:7,FETCHINGCONFIGCHANGED:8,DONE:999,FAILED:998,SUCCESS:0,NOSCOPE:-5000,NOMEMBERSHIP:-5001,NOSTRUCTURE:-5002,MISSINGCONFIG:-5003,NOCONFIG:-5004,NOURL:-5005,TIMEOUT:-5006,NOCONFIG2:-5007,NOCONFIG3:-5008,MAX_DURATION:60,SERVERS:["http://scope.smartmobility.activationnow.com/gateway/rest/retrievescope","http://scope-dev.activationnow.com/gateway/rest/retrievescope","http://scope-uat.activationnow.com/gateway/rest/retrievescope"],SCOPE_URI:"http://scope.smartmobility.activationnow.com/gateway/rest/retrievescope",COOKIE_EXPIRATION:60,Scope:function(n,j,b,i,c,l,p,o,e){var h=this,g=p,d=null,a;if(typeof e=="string"){if(e=="Prod"){$SCOPE.SCOPE_URI=$SCOPE.SERVERS[0]}else{if(e=="Dev"){$SCOPE.SCOPE_URI=$SCOPE.SERVERS[1]}else{if(e=="Test"){$SCOPE.SCOPE_URI=$SCOPE.SERVERS[2]}}}}if(typeof p==="object"){var a,k=[],m=$SCOPE.xmlencodescope;d=p;k.push('<ui type="cid">'+n+"</ui>");for(a in p){if(!p[a]){continue}var f=p[a];k.push('<ui type="'+a+'">'+m(f)+"</ui>")}g=k.join("")}a="UI_"+hex_md5(new Date);h.id=a;h.cid=n;h.component=j;h.subcomponent=b;h.comversion=i;h.platform=c;h.platformversion=l;h.uniqueIds=g;h._uniqueIds=d;h._callback=o;h.uniqueIdsHash=$SCOPE.computeIdHash(h);h.mnoUri="";h.scopeHash="";h.suidUri="";h.suid="";h.ttv="";h.structureHash="";h.configUri="";h.url="";h.config="";h.state=$SCOPE.UNKNOWN;h.error=$SCOPE.UNKNOWN;h._it=0;$SCOPE.Scope.prototype.callback=$SCOPE.callback;$SCOPE.Scope.prototype.hasUI=$SCOPE.hasUI;$SCOPE.Scope.prototype.goScope=$SCOPE.goScope;$SCOPE.Scope.prototype.parseScope=$SCOPE.parseScope;$SCOPE.Scope.prototype.verifyMembership=$SCOPE.verifyMembership;$SCOPE.Scope.prototype.checkMembership=$SCOPE.checkMembership;$SCOPE.Scope.prototype.verifyMNO=$SCOPE.verifyMNO;$SCOPE.Scope.prototype.goStructure=$SCOPE.goStructure;$SCOPE.Scope.prototype.hasStructureChanged=$SCOPE.hasStructureChanged;$SCOPE.Scope.prototype.fetchStructure=$SCOPE.fetchStructure;$SCOPE.Scope.prototype.parseStructure=$SCOPE.parseStructure;$SCOPE.Scope.prototype.buildFilters=$SCOPE.buildFilters;$SCOPE.Scope.prototype.goConfig=$SCOPE.goConfig;$SCOPE.Scope.prototype.hasConfigChanged=$SCOPE.hasConfigChanged;$SCOPE.Scope.prototype.parseConfig=$SCOPE.parseConfig;$SCOPE.Scope.prototype.init=$SCOPE.init;$SCOPE.Scope.prototype.initFromCookies=$SCOPE.initFromCookies;$SCOPE.Scope.prototype.redirect=$SCOPE.redirect;if(jQuery.browser.msie&&window.XDomainRequest){$SCOPE.Scope.prototype.msieDOM=$SCOPE.msieDOM}h.timer=window.setTimeout(function(){h.error=$SCOPE.TIMEOUT;h.callback($SCOPE.FAILED)},$SCOPE.MAX_DURATION*1000);h.init()},computeIdHash:function(d){var a="",e=[],c=((d._uniqueIds===null)?d.uniqueIds:d._uniqueIds),b;e.push($SCOPE.SCOPE_URI);e.push(d.cid);e.push(d.component);e.push(d.subcomponent);e.push(d.comversion);e.push(d.platform);e.push(d.platformversion);if(typeof c==="object"){for(b in c){e.push(b+c[b])}}else{e.push(c)}a=hex_md5(e.join(""));return a},init:function(){var a=this;a._it++;if(a._it<3){a.callback($SCOPE.INITIALIZING);a.initFromCookies();if(a.hasUI()===true){a.verifyMembership();return}else{a.goScope()}}else{if(a._it===3){a.callback($SCOPE.FAILED)}}},initFromCookies:function(){var a=this;a.mnoUri=$U.readCookie(a.uniqueIdsHash+".mno");a.scopeHash=$U.readCookie(a.uniqueIdsHash+".scopeHash");a.suidUri=$U.readCookie(a.uniqueIdsHash+".suidUri");a.suid=$U.readCookie(a.uniqueIdsHash+".suid");a.ttv=$U.readCookie(a.uniqueIdsHash+".ttv");a.configUri=$U.readCookie(a.uniqueIdsHash+".cfg");a.url=$U.readCookie(a.uniqueIdsHash+".ui");a.structureHash=$U.readCookie(a.uniqueIdsHash+".structureHash");a.configHash=$U.readCookie(a.uniqueIdsHash+".configHash")},hasUI:function(){return this.url.length?true:false},goScope:function(){var c=this,b=$SCOPE.SCOPE_URI,a="";c.callback($SCOPE.FETCHINGSCOPE);a='<retrievescope xmlns="http://www.synchronoss.com/scope/api/RetrieveScopeRequestV1.00.xsd"><id>'+c.id+"</id><component>"+c.component+"</component><subcomponent>"+c.subcomponent+"</subcomponent><componentversion>"+c.comversion+"</componentversion><uniqueids>"+c.uniqueIds+"</uniqueids><platform><os>"+c.platform+"</os><version>"+c.platformversion+"</version><hw>n/a</hw><model>n/a</model></platform></retrievescope>";window.ajax("POST",b,a,function(e,f,d){c.error=$SCOPE.SUCCESS;c.parseScope(e);if(c.error===$SCOPE.SUCCESS){$U.createCookie(c.uniqueIdsHash+".scopeHash",b+"."+hex_md5(d.responseText),$SCOPE.COOKIE_EXPIRATION)}else{c.init()}},function(d){c.error=$SCOPE.NOSCOPE;c.init()},false,window.picaso.defaultAjaxTimeout)},verifyMembership:function(){var a=this;allowed=a.checkMembership(a,function(){window.setTimeout(function(){a.goStructure()},25)},function(){$U.resetCookies(a.uniqueIdsHash);a.init()});return},checkMembership:function(f,g,c){f.callback($SCOPE.VERIFYINGMNOTTV);if(f.ttv.length>0){var d=new Date(),b=new Date(),a=new Date(f.ttv),e=function(){$SCOPE.error=$SCOPE.SUCCESS;g()},h=function(){f.error=$SCOPE.NOMEMBERSHIP;c()};b.setDate(d.getDate()+2);if(d<a&&(a<b)){e()}else{f.verifyMNO(f,e,h)}}else{$U.resetCookies(f.uniqueIdsHash);f.init()}return},endslash:function(a){if(a.charAt(a.length-1)!="/"){return"/"}return""},verifyMNO:function(c,d,a){var b=c.suidUri+$SCOPE.endslash(c.suidUri)+c.suid+".xml."+c.scopeHash;c.callback($SCOPE.VERIFYINGMNO);window.ajax("GET",b,"",function(f,g,e){d()},function(e){if(e.status==200){d()}else{a()}},false,window.picaso.defaultAjaxTimeout);return},goStructure:function(){var a=this;if(a.structureHash.length>0){a.hasStructureChanged(a)}else{a.fetchStructure(a)}return},hasStructureChanged:function(b){var a=b.structureHash;if(typeof a!=="string"||a.length<1){$U.resetCookies(b.uniqueIdsHash);b.init()}b.callback($SCOPE.FETCHINGSTRUCTURECHANGED);window.ajax("GET",a,"",function(){b.error=$SCOPE.SUCCESS;b.hasConfigChanged(b)},function(){b.error=$SCOPE.NOSTRUCTURE;b.init()},false,window.picaso.defaultAjaxTimeout)},fetchStructure:function(b){var a=b.mnoUri+$SCOPE.endslash(b.mnoUri)+"structure.xml";b.callback($SCOPE.FETCHINGSTRUCTURE);window.ajax("GET",a,"",function(d,e,c){b.error=$SCOPE.SUCCESS;b.parseStructure(d);if(b.error===$SCOPE.SUCCESS){b.structureHash=hex_md5(c.responseText);$U.createCookie(b.uniqueIdsHash+".structureHash",a+"."+b.structureHash,$SCOPE.COOKIE_EXPIRATION)}else{$U.eraseCookie(b.uniqueIdsHash+".structureHash");b.init()}},function(c){b.error=$SCOPE.NOSTRUCTURE;b.init()},false,window.picaso.defaultAjaxTimeout)},hasConfigChanged:function(b){var a=b.configHash;if(typeof a!=="string"||a.length<1){$U.resetCookies(b.uniqueIdsHash);b.init()}b.callback($SCOPE.FETCHINGCONFIGCHANGED);window.ajax("GET",a,"",function(d,e,c){b.error=$SCOPE.SUCCESS;b.redirect(b.url)},function(c){if(b.configUri&&b.configUri.length>0){b.goConfig(null,b.configUri)}else{b.fetchStructure(b)}},false,window.picaso.defaultAjaxTimeout)},callback:function(b){var a=this;if(b===$SCOPE.FAILED||b===$SCOPE.DONE){window.clearTimeout(a.timer);a._it=999}a.state=b;if(a._callback){a._callback(b,a.error,a)}},parseScope:function(g){try{var e=this,f=jQuery(g).find("responseheader"),h=f?jQuery(f).eq(0):false,i=f?jQuery("nack",f).length:0,b=jQuery(g).find("suid").eq(0),a=jQuery(g).find("ttv").eq(0);if(i>0){e.error=$SCOPE.NOSCOPE;$U.resetCookies(e.uniqueIdsHash);return}e.mnoUri=h?jQuery(h).attr("mnoUri"):"";e.scopeHash=h?jQuery(h).attr("scopeHash"):"";e.suidUri=h?jQuery(h).attr("suidUri"):"";e.suid=h?jQuery(b).text():"";e.ttv=h?jQuery(a).text():"";window.setTimeout(function(){e.verifyMembership()},25)}catch(c){e.error=$SCOPE.NOSCOPE;$U.resetCookies(e.uniqueIdsHash)}},parseStructure:function(e){var c=this,d=jQuery(e).find("file:contains(config.xml)");if(d){var b=c.buildFilters("config.xml"),a,f;for(f in b){for(a=0;a<d.length;a++){if(b[f]===jQuery(d).eq(a).text().toLowerCase()){c.error=$SCOPE.SUCCESS;c.goConfig(jQuery(d).eq(a).text());return}}}}c.error=$SCOPE.MISSINGCONFIG},buildFilters:function(e){var h=this,d=h.component.toLowerCase(),b=(""+h.subcomponent).toLowerCase(),a=h.comversion.toLowerCase(),c=h.platform.toLowerCase(),g=h.platformversion.toLowerCase(),f=[];if(b!==""&&b!=="undefined"){f.push(d+"."+b+"/"+a+"/"+c+"/"+g+"/"+e);f.push(d+"."+b+"/"+a+"/"+c+"/"+e);f.push(d+"."+b+"/"+a+"/"+e);f.push(d+"."+b+"/"+c+"/"+g+"/"+e);f.push(d+"."+b+"/"+c+"/"+e);f.push(d+"."+b+"/"+e)}f.push(d+"/"+a+"/"+c+"/"+g+"/"+e);f.push(d+"/"+a+"/"+c+"/"+e);f.push(d+"/"+a+"/"+e);f.push(d+"/"+c+"/"+g+"/"+e);f.push(d+"/"+c+"/"+e);f.push(d+"/"+e);return f},goConfig:function(d,a){var c=this,b=(d===null)?a:c.mnoUri+$SCOPE.endslash(c.mnoUri)+d;c.configUri=b;c.callback($SCOPE.FETCHINGCONFIG);window.ajax("GET",b,"",function(f,g,e){c.error=$SCOPE.SUCCESS;c.parseConfig(f);if(c.error===$SCOPE.SUCCESS){$U.createCookie(c.uniqueIdsHash+".configHash",b+"."+hex_md5(e.responseText),$SCOPE.COOKIE_EXPIRATION)}},function(e){c.error=$SCOPE.NOCONFIG;c.init()},false,window.picaso.defaultAjaxTimeout);return},parsestartupflag:function(c){var a=jQuery("item",c);if(a!=null){var b=false;a.each(function(d,f){var e=jQuery("name",this).text();switch(e){case"ScopeCheck":var g=jQuery("value",this);g.each(function(i,k){var l=jQuery(k).attr("divid");switch(l){case"Startup":var h=jQuery(k).text();if(h&&h==true){$SCOPECONFIG.startupcheck=true}b=true;break}if(b==true){return false}});break}if(b==true){return false}})}if($SCOPECONFIG.startupcheck==true){$U.createCookie("startupscopecheck","true",$SCOPE.COOKIE_EXPIRATION)}else{$U.eraseCookie("startupscopecheck")}},parseConfig:function(e){var d=this,f=jQuery(e).find("component > name:contains("+d.component+") + subcomponent");if(f){d.config=e;d.parsestartupflag(e);var a;for(a=0;a<f.length;a++){var c=d.subcomponent.length>0?jQuery(f).eq(a).find("name:contains("+d.subcomponent+") + item"):f;if(c&&c.length>0){var g;for(g=0;g<c.length;g++){var b=jQuery(c).eq(g).find("service:contains(Redirect) + name + revision + default");if(b&&b.length>0){d.error=$SCOPE.SUCCESS;d.redirect(jQuery(b).eq(0).text());return}}}}}d.error=$SCOPE.NOCONFIG2;d.init()},redirect:function(a){var b=this;if(!a||a.length<1){b.error=$SCOPE.NOCONFIG3;b.init();return}b.url=a;b.error=$SCOPE.SUCCESS;if(b.mnoUri&&b.mnoUri.length>0){$U.createCookie(b.uniqueIdsHash+".mno",b.mnoUri,$SCOPE.COOKIE_EXPIRATION)}if(b.scopeHash&&b.scopeHash.length>0){$U.createCookie(b.uniqueIdsHash+".scopeHash",b.scopeHash,$SCOPE.COOKIE_EXPIRATION)}if(b.suidUri&&b.suidUri.length>0){$U.createCookie(b.uniqueIdsHash+".suidUri",b.suidUri,$SCOPE.COOKIE_EXPIRATION)}if(b.suid&&b.suid.length>0){$U.createCookie(b.uniqueIdsHash+".suid",b.suid,$SCOPE.COOKIE_EXPIRATION)}if(b.ttv&&b.ttv.length>0){$U.createCookie(b.uniqueIdsHash+".ttv",b.ttv,$SCOPE.COOKIE_EXPIRATION)}if(b.url&&b.url.length>0){$U.createCookie(b.uniqueIdsHash+".ui",b.url,$SCOPE.COOKIE_EXPIRATION)}if(b.configUri&&b.configUri.length>0){$U.createCookie(b.uniqueIdsHash+".cfg",b.configUri,$SCOPE.COOKIE_EXPIRATION)}b.callback($SCOPE.DONE)},xmlencodescope:function(d){var b=[],a=d.length,e;for(e=0;e<a;e++){var c=d[e];switch(c){case"&":b.push("&amp;");break;case"<":b.push("&lt;");break;case">":b.push("&gt;");break;case'"':b.push("&quot;");break;case"'":b.push("&apos;");break;default:b.push(c);break}}return b.join("")},xmlencode:function(d){var b=[],a=d.length,e;for(e=0;e<a;e++){var c=d.charAt(e);switch(c){case"&":b.push("&amp;");break;case"<":b.push("&lt;");break;case">":b.push("&gt;");break;case'"':b.push("&quot;");break;case"'":b.push("&apos;");break;default:b.push(c);break}}return b.join("")}};
function reallyHasSim(){return simpin_condata_simpresent}function checkForSimLock(b){var c=jQuery("id",b).eq(0).text(),a=jQuery("discovery>services>v1>lockstatus>uri",b).text();if(typeof a=="string"&&a.length>0){$SIM.clear();$SIM.hasSim=reallyHasSim;$SIM.uri=a;$SIM.id=c}else{$SIM.hasSim=function(){return false};jQuery("#sim").show()}if($SIM.hasSim()&&$SIM.onHasSim){$SIM.onHasSim()}}var $SIM={onHasSim:null,onSimSuccess:null,onSimError:null,data:"",lastActionStatusRead:false,clear:function(){$SIM.hasSim=function(){return false};$SIM.uri=""},hasSim:function(){return false},lastAction:null,lockStatus:function(){if($SIM.hasSim()){return(jQuery("p-answer>lockstatus>status",$SIM.data).text()||"")}else{return"no sim"}},clearLastActionStatus:function(){$SIM.lastActionStatusRead=true},lastActionStatus:function(){if($SIM.lastActionStatusRead){return""}else{return(jQuery("p-answer>lockstatus>actionstatus",$SIM.data).text()||"")}},realLockStatus:function(){return(jQuery("p-answer>lockstatus>status",$SIM.data).text()||"")},isLockEnabled:function(){var a=false;if($SIM.hasSim()){var b=jQuery("p-answer>lockstatus>status",$SIM.data).text();if(b){if(-1==b.indexOf("disabled")){a=true}}}else{a=false}return a},lockType:function(){if($SIM.hasSim()){return(jQuery("p-answer>lockstatus>type",$SIM.data).text()||"")}else{return""}},attempts:function(){return(jQuery("p-answer>lockstatus>unlockattempts",$SIM.data).text()||"0")},maxattempts:function(){return(jQuery("p-answer>lockstatus>maxunlockattempts",$SIM.data).text()||"0")},id:"",uri:"",request:function(g,d,e,f,h){var b=$SIM.onSimSuccess,a=$SIM.onSimError;var c=function(){$SIM.lastActionStatusRead=false;var j="",i=$SIM.uri,k=$SIM.id;if(i==""||k==""){return}j='<picaso version="1.0.0"><p-question><uri>'+i+"</uri><time>"+$U.NOW()+"</time><id>SmartMobility</id><component>PSC</component><subcomponent>UI</subcomponent><target>"+k+"</target>";if(typeof g=="string"&&g!=""){j+="<action>"+g+"</action>";$SIM.lastAction=g}if(typeof d=="string"&&d!=""){j+="<type>"+d+"</type>"}if(typeof e=="string"&&e!=""){j+="<code>"+e+"</code>"}if(typeof f=="string"&&f!=""){j+="<newcode>"+f+"</newcode>"}j+="</p-question></picaso>";window.ajax("POST",i,j,function(m,n,l){$SIM.data=m;if(jQuery.browser.msie){CollectGarbage()}$SIM.lastActionStatusRead=false;if(b){b(m,h)}},function(l,n,m){$SIM.data="";window.setTimeout(function(){$SIM.request(g,d,e,f,h)},1500);if(a){a(l)}},false,window.picaso.defaultAjaxTimeout)};if(g=="lock"){window.notifyUpdating();if(window.hostMgr.resetting!=""){window.setTimeout(c,3000)}else{c()}}else{c()}}};
function network_updateui(e,b){if(e!=null){var a=b.techCode(e.network.serving.type);if(a==""){document.getElementById("network-name-label").innerHTML="No Networks Available";document.getElementById("network-type-label").innerHTML="";document.getElementById("network-signal-label").innerHTML="";jQuery("#first-network-row").removeClass("selected")}else{var c=window.vzw.renderNetworkServingTypeMarkup(e.network.serving.type,e.network.serving.roaming.type);document.getElementById("network-name-label").innerHTML=c;var d="band ";if(a=="4"){d+="fourg"}else{if(a=="3"){d+="threeg"}else{if(a=="3r"){d+="threeg"}else{if(a=="1x"){d+="onex"}else{if(a=="gsm"){d+="gsm"}}}}}if(c.indexOf("Global")!=-1){d+=" roam globe"}if(jQuery.inArray(e.network.serving.roaming.indicator,["0","2","65","67","68","69","70","72","73","74","75","76","77","79"])>=0){d+=" roam"}if(jQuery.inArray(e.network.serving.roaming.indicator,["69","70","74","75","77","79"])>=0){d+=" globe"}c='<a class="'+d+'" href="javascript:void(0);return false;" style="cursor:default;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>';document.getElementById("network-type-label").innerHTML=c;document.getElementById("network-signal-label").innerHTML='<a class="'+b.getBarsClass(e.signal)+'" href="javascript:void(0);return false;" style="cursor:default;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>';jQuery("#first-network-row").addClass("selected")}}};
function checkForUsage(b){var c=jQuery("id",b),a=jQuery("userservice>type:contains(20)+uri",b);if(c&&c.length>0&&a&&a.length>0){$USAGE.id=jQuery("id:first",b).text();$USAGE.request(a.eq(0).text(),c.eq(0).text(),null,function(e){var f=jQuery("plan>type",e);if(f&&f.length>0){var d=f.eq(0).text();if(typeof d=="string"&&d.length>0){$USAGE.dataPlan.type=d}else{$USAGE.dataPlan.type="unknown"}}else{$USAGE.dataPlan.type="unknown"}if($USAGE.dataPlan.type!="unknown"){$USAGE.dataPlan.size=jQuery("plan>size",e).text();$USAGE.dataPlan.cap=jQuery("plan>cap",e).text();$USAGE.dataPlan.accountexpiration=jQuery("plan>accountexpiration",e).text();$USAGE.dataPlan.resetdate=jQuery("plan>resetdate",e).text();$USAGE.dataPlan.aserviceexpiration=jQuery("plan>aserviceexpiration",e).text()}if($USAGE.onUsagePlan){$USAGE.onUsagePlan($USAGE.dataPlan)}},function(d){if($USAGE.onUsagePlan){$USAGE.onUsagePlan("unknown")}});return}return}var $USAGE={id:"",dataPlan:{type:"",size:-1,cap:-1,accountexpiration:"",resetdate:"",aserviceexpiration:""},onUsagePlan:function(a){},request:function(c,f,e,b,a){var d="";d=ajaxPreamble(c,f,null);window.ajax("POST",c,d,function(h,i,g){if(jQuery.browser.msie){CollectGarbage()}if(b){b(h)}},function(g){if(a){a(g)}},false,window.picaso.defaultAjaxTimeout);return}};
(function(a,b){a.hostMgr={discovery:"",resetting:""};a.recdOneDiscoveryResponse=false;a.parseDiscoveryResponse=function(e){a.recdOneDiscoveryResponse=true;var c=[];var d=false;b("p-answer",e).each(function(){var g=new PicasoDevice();g.load(this);c.push(g);if(!a.picaso.enhancedInstall&&g.component.indexOf("hostmgr")>=0){a.picaso.enhancedInstall=true;a.picasoUI.onEhnInstall()}if(g.component.indexOf("hostmgr")>=0){d=true;a.hostMgr.discovery=g.services("discovery").uri;a.hostMgr.resetting=g.userService("26").uri;var f=g.userService("27");a.hostMgr.nmea=f?f.uri:null;if(a.G_NOTI_FILESERVICE==""){a.G_NOTI_FILESERVICE=b("userservice>type:contains(25)+uri:first",e).text()}}});if(a.AttachFlags.notification){$NOTI.parseDiscovery(e)}if(d){a.picasoUI.onEnhDiscoveryResponse(c)}else{a.picasoUI.DiscoverEnhanceComps(c)}return c};a.ajaxPreamble=function(d,f,e){var c='<picaso version="1.0.0"><p-question><uri>'+d+"</uri><time>"+$U.NOW()+"</time><id>"+window.G_APPNAME+"</id><component>PSC</component><subcomponent>UI</subcomponent><target>"+f+"</target>";if(typeof e==="string"&&e.length>0){c+="<action>"+e+"</action>"}c+="</p-question></picaso>";return c};a.ajaxPreamble2=function(d){var c='<picaso version="1.0.0"><p-question><uri>'+d+"</uri><time>"+$U.NOW()+"</time><id>"+window.G_APPNAME+"</id><component>PSC</component><subcomponent>UI</subcomponent>";c+="</p-question></picaso>";return c};a.PicasoDevice=function(){var c={time:new Date(),id:"",component:"",subcomponents:[],is:function(e){var d=false;b(this.subcomponents).each(function(h,g){if(!d){var i=g.toLowerCase(),f=e.toLowerCase();d=(f==i)}});return d},version:"",services:function(d){return this._services[d]},_services:{},userService:function(d){return d==0?null:this._userservices[d]},_userservices:{},_customservices:[],cert:"",uniqueIds:[],uidHash:0,platform:{ostype:"",osversion:"",hw:"",model:""},scope:"",knownComponents:[],displayNames:{id:"",name:""},_data:null,_msgKey:"0",getMsgKey:function(){return this._msgKey},_msgKeyTimer:0,_msgMonitoring:false,_msgKeyMonitor:function(){var h=getDevice(),g=h._services.messaging.uri;if(typeof g=="string"&&g.length>0){var f=(new Date()).valueOf();g=g.replace("messaging",h.id+"/MessagingSendKey")}else{return}var i=a.ajaxPreamble(g,h.id,null),e=0;$U.log("SEEKING msgKey now "+g);a.ajax("POST",g,i,function(d){try{h._msgKey=b("token:first",d).text();turnOnSmsSendButton();e=b("expiration:first",d).text();$U.log("msgKey is now "+h._msgKey+" expires "+e);e=e*60*1000;if(e>20000){e-=20000}if(e<20000){e=10000}h._msgKeyTimer=a.setTimeout(h._msgKeyMonitor,e)}catch(j){h._msgKey="0";turnOffSmsSendButton();$U.log("CATCH msgKey error - retry");h._msgKeyTimer=a.setTimeout(h._msgKeyMonitor,1000)}},function(d){h._msgKey="0";turnOffSmsSendButton();$U.log("NO msgKey error - retry");h._msgKeyTimer=a.setTimeout(h._msgKeyMonitor,1000)},true,a.picaso.defaultAjaxTimeout)},load:function(f){var e=this;if(!f||b(f).length<=0){return}e.id=b("id:first",f).text();e.component=b("component",f).text();e.subcomponents=[];b("subcomponent",f).each(function(){e.subcomponents.push(b(this).text())});e.version=b("discovery>version",f).text();e._services=[];b(["discovery","condata","messaging","gps","lockstatus","management","condata","storage","notifications","engdata"]).each(function(h,g){e._services[g]={uri:b("v1>"+g+">uri:first",f).text(),stream:(b("v1>"+g+">stream:first",f).text()||false)}});e._userservices={};b("services>v1>discovery>userservice",f).each(function(){var g=b("type",this).text(),h={type:g,uri:b("uri",this).text(),description:b("description:first",this).text(),tooltip:b("tooltip",this).text(),requiresAuth:b("requiresauth",this).text()};if(g!=0){e._userservices[g]=h}else{e._customservices.push(h)}});e.cert=b("discovery>cert",f).text();e.uniqueIds=[];b("discovery>uniqueids>ui",f).each(function(){e.uniqueIds.push({type:b(this).attr("type"),val:b(this).text()})});var d=b("platform",f);e.platform.ostype=b("os>type",d).text();e.platform.osversion=b("os>version",d).text();e.platform.hw=b("hw",d).text();e.platform.model=b("model",d).text();e.scope=b("discovery>scope",f).text();e.knownComponents=[];b("knowncomponents>knowncomponent",f).each(function(){e.knownComponents.push({discovery:b(this).attr("discovery"),val:b(this).text()})});e.displayNames.id=b("displaynames>id",f).text();e.displayNames.name=b("displaynames>name",f).text();e._data=f},update:function(d){if(this.id==d.id){delete this.knownComponents;this.knownComponents=d.knownComponents}},errorcount:0,poll:function(){var g=this,e=g._services.discovery.uri,h=a.ajaxPreamble(e,g.id,null),f=function(){g.errorcount++;if(g.errorcount<3){return false}try{if(a.getDevice()&&a.getDevice()._services.discovery.uri==e){$U.log("detaching device after detecting different discovery URI.");a.detachDevice(g);a.picasoUI.onDeviceRemoved(g)}}catch(d){a.detachDevice(g);a.picasoUI.onDeviceRemoved(g)}return true};ajax("POST",e,h,function(j){var i=false,d=parseDiscoveryResponse(j);b(d).each(function(k,l){if(!i&&l.id==g.id){i=true;g.update(l);a.picasoUI.onDevicePoll(g,l)}if(l.component.toLowerCase()==="oimanager"){a.picasoUI.onOiManager(l)}});if(i){g.errorcount=0;window.setTimeout(function(){g.poll()},a.picaso.discoveryPollDelay)}else{if(!f()){window.setTimeout(function(){g.poll()},a.picaso.discoveryPollDelay)}}},f,false,a.picaso.defaultAjaxTimeout)}};return c};a.PicasoCondataSupport=function(d,e,f){var c=this;this._device=d;this._fnSuccess=e;this._fnError=f;this._errorCount=0;this.sendAction=function(h){var g=d._services.condata.uri,i=a.ajaxPreamble(g,d.id,h);a.ajax("POST",g,i,function(k){var j;c._errorCount=0;c._data=k;c.parse(k,c);if(c._fnSuccess&&c._device.id==c._device.condata.id){j=c._fnSuccess(c._device,k)}else{if(c._fnError){c._errorCount++;j=c._fnError(null,c._device)}}},function(k){var j;c._errorCount++;if(c._fnError){j=c._fnError(k,c._device)}},false,a.picaso.conDataTimeout)};this.post=function(){var g=d._services.condata.uri,h=a.ajaxPreamble(g,d.id,null);a.ajax("POST",g,h,function(j){var i;c._errorCount=0;c._data=j;c.parse(j,c);if(c._fnSuccess&&c._device.id==c._device.condata.id){i=c._fnSuccess(c._device,j)}else{if(c._fnError){c._errorCount++;i=c._fnError(null,c._device)}}if(i&&c._device&&c._device.condata){window.setTimeout(function(){c.post()},a.picaso.condataDelay)}},function(j){var i;c._errorCount++;if(c._fnError){i=c._fnError(j,c._device)}if(i&&c._device&&c._device.condata){window.setTimeout(function(){c.post()},a.picaso.condataDelay)}},true,a.picaso.conDataTimeout)};this.parse=function(n,m){var k=(m||{}),p=b("p-answer:first",n);if(p){var r=b("condata",p);k.time=b("time:first",p).text();k.id=b("id:first",p).text();k.rac=b("rac",r).text();k.power=b("power",r).text();delete k.state;k.state={};var q=b("state",r);k.state.value=b("value:first",q).text();k.state.description=b("description:first",q).text();k.state.percentage=b("percentage",q).text();delete k.state.substate;k.state.substate={};var u=b("substate",q);k.state.substate.value=(b("value",u).text()||"");k.state.substate.description=b("description:first",u).text();delete k.state.error;k.state.error={};k.state.error.value=b("error>value",q).text();k.state.error.description=b("error>description:first",q).text();delete k.state.error.suberror;k.state.error.suberror={};k.state.error.suberror.value=b("error>suberror>value",q).text();k.state.error.suberror.description=b("error>suberror>description:first",q).text();k.signal=[];b("signal>parameter",r).each(function(A,B){var z={};z.type=b(this).attr("type");z.percent=b("percent",B).text();z.db=b("db",B).text();z.dbm=b("dbm",B).text();z.bars=b("bars",B).text();z.rssi=b("rssi",B).text();k.signal.push(z)});delete k.network;k.network={};k.network.serving={};var v=b("network>serving",r);k.network.serving.name=b("name",v).text();k.network.serving.type=b("type",v).eq(0).text();k.network.serving.id=b("id",v).text();k.network.serving.server=b("server",v).text();k.network.serving.servertype=b("servertype",v).text();k.network.serving.additionalid=[];b("additionalid",v).each(function(A,B){var z={};z.type=b(this).attr("type");z.text=b(this).text();k.network.serving.additionalid.push(z)});k.network.serving.encryption=b("encryption",v).text();k.network.serving.roaming={};var w=b("roaming",v);k.network.serving.roaming.type=b("type",w).eq(0).text();k.network.serving.roaming.indicator=b("indicator",w).eq(0).text();k.network.serving.roaming.indicatordescription=b("indicatordescription:first",w).text();k.network.serving.roaming.roaminglistversion=b("roaminglistversion",w).eq(0).text();k.network.home={};var j=b("network>home",r);k.network.home.name=b("name",j).text();k.network.home.type=b("type",j).text();k.network.home.id=b("id",j).text();k.actions=b("actions:first",r).text();delete k.connection;k.connection={};k.connection.type=b("connection>type",r).text();k.connection.address={};var s=b("connection>address",r);k.connection.address.ipv4={};k.connection.address.ipv4.ip=b("ipv4>ip",s).text();k.connection.address.ipv4.subnet=b("ipv4>subnet",s).text();k.connection.address.ipv4.gateway=b("ipv4>gateway",s).text();k.connection.address.ipv4.dns=b("ipv4>dns",s).text();k.connection.address.ipv4.dhcp=b("ipv4>dhcp",s).text();k.connection.address.ipv4.wins=b("ipv4>wins",s).text();k.connection.address.ipv6={};k.connection.address.ipv6.ip=b("ipv6>ip",s).text();k.connection.address.ipv6.prefix=b("ipv6>prefix",s).text();k.connection.address.ipv6.router=b("ipv6>router",s).text();k.connection.address.ipv6.dns=b("ipv6>dns",s).text();k.connection.address.ipv6.dhcp=b("ipv6>dhcp",s).text();k.connection.address.ipv6.wins=b("ipv6>wins",s).text();delete k.updates;k.updates={};var i=b("updates",r);k.updates.updating=b("updating",i).text();k.updates.progresspercentage=b("progresspercentage",i).text();k.updates.progressstatus=b("progressstatus",i).text();k.updates.roaminglist=b("roaminglist",i).text();k.updates.firmware=b("firmware",i).text();k.updates.deviceconfig=b("deviceconfig",i).text();delete k.rx;k.rx={};k.rx.technology=b("rx:first",r).attr("technology");k.rx.session={};var h=b("rx",r),g=b("session",h);k.rx.session.bytes=b("bytes",g).text();k.rx.session.packets=b("packets",g).text();k.rx.session.byterate=b("byterate",g).text();k.rx.session.errors=b("errors",g).text();k.rx.session.discards=b("discards",g).text();k.rx.cumulative={};k.rx.cumulative.bytes=b("cumulative>bytes",h).text();k.rx.cumulative.packets=b("cumulative>packets",h).text();k.rx.life={};k.rx.life.bytes=b("life>bytes",h).text();k.rx.life.packets=b("life>packets",h).text();k.rx.since={};k.rx.life.bytes=b("since>bytes",h).text();k.rx.life.packets=b("since>packets",h).text();delete k.tx;k.tx={};k.tx.technology=b("tx:first",r).attr("technology");k.tx.session={};var l=b("tx",r),o=b("session",l);k.tx.session.bytes=b("bytes",o).text();k.tx.session.packets=b("packets",o).text();k.tx.session.byterate=b("byterate",o).text();k.tx.session.errors=b("errors",o).text();k.tx.session.discards=b("discards",o).text();k.tx.cumulative={};k.tx.cumulative.bytes=b("cumulative>bytes",l).text();k.tx.cumulative.packets=b("cumulative>packets",l).text();k.tx.life={};k.tx.life.bytes=b("life>bytes",l).text();k.tx.life.packets=b("life>packets",l).text();k.tx.since={};k.tx.life.bytes=b("since>bytes",l).text();k.tx.life.packets=b("since>packets",l).text();delete k.uptime;k.uptime={};var t=b("uptime",r);k.uptime.connection=b("connection",t).text();k.uptime.device=b("device",t).text();k.uptime.lifetime=b("lifetime",t).text();k.uptime.factoryreset=b("factoryreset",t).text();k.uptime.lastactivation=b("lastactivation",t).text();k.activationstatus=b("activationstatus:first",r).text()}return k};this.post()};return a})(window,jQuery);var $U={GetURLParameter:function(a){var d=window.location.search.substring(1);var c=d.split("&");for(var b=0;b<c.length;b++){var e=c[b].split("=");if(e[0]==a){return e[1]}}},msieDOM:function(b){var c=new ActiveXObject("Microsoft.XMLDOM");c.async="false";try{c.loadXML(b.responseText)}catch(a){c=b.responseText}return c},NOW:function(){var b=new String();var c=new Date();var f=c.getUTCMonth()+1;if(f<10){f="0"+f}var e=c.getUTCDate();if(e<10){e="0"+e}var g=c.getUTCHours();if(g<10){g="0"+g}var d=c.getUTCMinutes();if(d<10){d="0"+d}var a=c.getUTCSeconds();if(a<10){a="0"+a}b=c.getUTCFullYear()+"-"+f+"-"+e+"T"+g+":"+d+":"+a+"."+c.getUTCMilliseconds()+"Z";return b},GetDomainName:function(a){var c=a,e=c.split("/"),b,d;if(e.length>2){b=e[2].split(":")}else{if(e.length>1){b=e[1]}else{b=e[0]}}d=b[0];return d},GetPortNumber:function(a){var d=a,e=d.split("/"),c,b;if(e.length>2){c=e[2].split(":")}else{if(e.length>1){c=e[1]}else{c=e[0]}}b=c.length>1?c[1]:"80";return b},IsCrossDomain:function(a,b){if(a.indexOf("/")==0||b.indexOf("/")==0){return false}return(($U.GetDomainName(a)!=$U.GetDomainName(b))||($U.GetPortNumber(a)!=$U.GetPortNumber(b)))},cookieEnabled:function(){var a=(navigator.cookieEnabled)?true:false;if(location.protocol.indexOf("file")>=0){a=false;$U.cookieEnabled=a;return a}if(typeof navigator.cookieEnabled=="undefined"&&!a){document.cookie="testcookie";a=(document.cookie.indexOf("testcookie")!=-1)?true:false}$U.cookieEnabled=a;return a},createCookie:function(c,d,e){var a="";if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}if($U.cookieEnabled){document.cookie=c+"="+d+a+"; path=/"}},readCookie:function(b){if($U.cookieEnabled){var e=b+"=",a=document.cookie.split(";"),d;for(d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}}return""},eraseCookie:function(a){$U.createCookie(a,"",-1)},resetCookies:function(f){if($U.cookieEnabled){var b=document.cookie.split(";"),e;for(e=0;e<b.length;e++){var g=b[e];while(g.charAt(0)==" "){g=g.substring(1,g.length)}if(f==""||g.indexOf(f)==0){var a=g.indexOf("="),d=g.substring(0,a);$U.eraseCookie(d)}}}},supportsLocalStorage:function(){var a=false;try{a=(window.localStorage!==null&&(typeof window.localStorage!=="undefined"))}catch(b){a=false}$U.supportsLocalStorage=a;if(a){jQuery(".nolocalstorage").hide()}else{jQuery(".nolocalstorage").show()}return a},setLsItem:function(a,b){if($U.supportsLocalStorage){window.localStorage.setItem(a,b)}},getLsItem:function(b){var a="";if($U.supportsLocalStorage){a=window.localStorage.getItem(b)}return a},removeLsItem:function(a){if($U.supportsLocalStorage){window.localStorage.removeItem(a)}},setStorage:function(a,b,c){if($U.supportsLocalStorage){$U.setLsItem(a,b)}else{$U.createCookie(a,b,c)}},getStorage:function(a){if($U.supportsLocalStorage){return $U.getLsItem(a)}else{return $U.readCookie(a)}},removeStorage:function(a){if($U.supportsLocalStorage){$U.removeLsItem(a)}else{$U.eraseCookie(a)}},hasStorage:function(){if($U.supportsLocalStorage){return true}return $U.cookieEnabled},logMessages:[],log:function(a){var b=function(c){try{$U.logMessages.push({msg:c,time:new Date()});if($U.logMessages.length>75){$U.logMessages.shift()}}catch(e){}try{if(!window.console||window.console=="undefined"){window.console={log:function(){}}}window.console.log(c)}catch(d){alert("log error: "+d)}};if(jQuery.browser.msie&&jQuery.browser.version<=8){$U.log=function(c){try{$U.logMessages.push({msg:c,time:new Date()});if($U.logMessages.length>75){$U.logMessages.shift()}}catch(d){}}}else{$U.log=b}},showpanel:function(){try{if(jQuery(".mbm-content").is(":visible")==false){jQuery("#toggle").toggleClass("toggle-collapse");jQuery(".mbm-content").toggle(true);setDisclosureIconTitle(jQuery("#toggle"));if(window.SmartMobility&&window.SmartMobility.resize){window.SmartMobility.resize()}}}catch(a){}},hidepanel:function(){try{if(jQuery(".mbm-content").is(":visible")==true){jQuery("#toggle").toggleClass("toggle-collapse");jQuery(".mbm-content").toggle(false);setDisclosureIconTitle(jQuery("#toggle"));if(window.SmartMobility&&window.SmartMobility.IsEmbeddedIE){window.SmartMobility.resize()}}}catch(a){}},xmlencode:function(d){var b=[],a=d.length,f;for(f=0;f<a;f++){var e=d.charAt(f);switch(e){case"&":b.push("&amp;");break;case"<":b.push("&lt;");break;case">":b.push("&gt;");break;case'"':b.push("&quot;");break;case"'":b.push("&apos;");break;default:b.push(e);break}}return b.join("")}};$U.cookieEnabled();$U.supportsLocalStorage();var $PICASO=(function(c,f){c.picaso={condataDelay:1000,discoveryPollDelay:6000,defaultAjaxTimeout:5000,discoveryTimeout:3000,conDataTimeout:3000,gpsDelay:5000,gpsTimeout:5000,smsDelay:10000,smsTimeout:5000,notificationDelay:2000,mgmtDelay:8000,attachedDevices:[],enhancedInstall:false,rxtx:null};c.getDevice=function(e){if(typeof e==="number"){if(e>=0&&e<c.picaso.attachedDevices.length){return c.picaso.attachedDevices[e]}}else{if(typeof e==="object"){return c.findDeviceById(e.id)}else{if(typeof e==="string"){return c.findDeviceById(e)}}}if(c.picaso.attachedDevices.length>0){return c.picaso.attachedDevices[0]}return null};c.picasoUI={onDevicePoll:function(h,e){},onDeviceAttached:function(e){},onDeviceRemoved:function(e){},onConData:function(e,h){return true},onConDataError:function(h,e){return true},onHasSim:function(){},onSimSuccess:function(e,h,i){},onSimError:function(e){},onUsagePlan:function(h,e){},onLandingPageDisplay:function(){},onGPSData:function(e){},onSMSData:function(e){},onManagementApiSuccess:function(e){},onManagementApiError:function(e){},onManagementApiFwSuccess:function(e){},onManagementApiFwError:function(e){},onRxTxPulse:function(h,e){},onOiManager:function(e){},onEhnInstall:function(){},onEnhDiscoveryResponse:function(e){},DiscoverEnhanceComps:function(e){}};try{$SIM.onHasSim=function(){if(c.picasoUI.onHasSim){$U.log("calling onHasSim");c.picasoUI.onHasSim()}};$SIM.onSimSuccess=function(i,e){var h=c.findDeviceById(f("p-answer>id:first",i).text());if(h){if(h.simlock){h.simlock.pending=false;h.simlock.data=i}}if(c.picasoUI.onSimSuccess){c.picasoUI.onSimSuccess(h,i,e)}};$SIM.onSimError=function(e){if(c.picasoUI.onSimError){$U.log("calling onSimError");c.picasoUI.onSimError(e)}}}catch(b){}try{$USAGE.onUsagePlan=function(e){var h=c.findDeviceById($USAGE.id);if(c.picasoUI.onUsagePlan){c.picasoUI.onUsagePlan(h,e)}}}catch(d){}if(jQuery.browser.msie){var g;for(g in c.picaso){var a=0.98;if(jQuery.browser.version<=7){a=2}if(typeof c.picaso[g]==="number"){c.picaso[g]*=a}else{break}}}c.beginSearch=function(i){var e=["lte","wimax","gsm","cdma"],h="";if(c.picaso.attachedDevices.length>0){return}if(typeof i==="string"){h=i}else{if(i!=null){f(i).each(function(l,j){if(c.picaso.attachedDevices.length>0){return}window.setTimeout(function(){c.beginSearch(j)},250)});return}}ajax("POST",h.replace("/discovery","")+"/discovery","id="+window.G_APPNAME,function(l){var j=parseDiscoveryResponse(l);var k={};f(j).each(function(n,m){var p=m,q=[],o=function(){var r=0;if(q.length<=0){f(p.knownComponents.reverse()).each(function(u,t){var w=t.discovery;if(location.host==""||w.indexOf(location.host)<0){if(k[w]!=w){k[w]=w;ajax("GET",w,"id="+window.G_APPNAME,function(v){var s=parseDiscoveryResponse(v);f(s).each(function(z,A){if(A.component.toLowerCase().indexOf("wireless")>=0){f(A.subcomponents).each(function(y,x){var B=x.toLowerCase();f(e).each(function(D,C){if(B.indexOf(C)>=0){r++;q.push(A)}})})}if(A.component.toLowerCase()==="oimanager"){c.picasoUI.onOiManager(A)}});if(getDevice()==null){attachDevice(selectBestDevice(e,q))}},function(){},false,c.picaso.defaultAjaxTimeout)}}})}else{if(getDevice()==null){attachDevice(selectBestDevice(e,q))}}};if(p.component.toLowerCase()==="oimanager"){c.picasoUI.onOiManager(p)}if(p.component.toLowerCase().indexOf("wireless")>=0){f(p.subcomponents).each(function(t,r){var u=r.toLowerCase();f(e).each(function(s,v){if(u.indexOf(v)>=0){g++;q.push(p)}})});o()}else{o()}})},function(j){},true,c.picaso.defaultAjaxTimeout)};c.selectBestDevice=function(e,h){var i=null;f(e).each(function(l,j){if(!i){f(h).each(function(k,m){if(!i&&m.is(j)){i=m}})}});return i};c.findDeviceById=function(i){var e=false,h=null;f(c.picaso.attachedDevices).each(function(l,j){if(!e&&j&&i==j.id){e=true;h=j}});return h};c.AttachFlags={condata:true,simlock:true,usage:true,gps:true,sms:true,notification:true,mgmt:true};c.attachDevice=function(h){var e=false;if(!h){return}if(picaso.rxtx==null){picaso.rxtx=new PicasoRxTx(100,c.picasoUI.onRxTxPulse);picaso.rxtx.init()}f(c.picaso.attachedDevices).each(function(j,i){if(!e&&h&&i&&h.id==i.id){e=true}});if(!e){c.picaso.attachedDevices.push(h);if(!h.condata&&c.AttachFlags.condata){h.condata=new c.PicasoCondataSupport(h,c.picasoUI.onConData,c.picasoUI.onConDataError)}else{}c.picasoUI.onDeviceAttached(h);if(c.AttachFlags.simlock){h.simlock={pending:true};checkForSimLock(h._data)}if(c.AttachFlags.usage){h.usagePlan={pending:true};checkForUsage(h._data)}if(c.AttachFlags.gps){$GPS.OnDataReceived=c.picasoUI.onGPSData;checkForGpsSupport(h._data)}if(c.AttachFlags.sms){$SMS.OnDataReceived=c.picasoUI.onSMSData;checkForMessagingSupport(h._data)}if(c.AttachFlags.mgmt){if($MANAGE.hTimer){c.clearTimeout($MANAGE.hTimer)}$MANAGE.hTimer=0;$MANAGE.uri="";$MANAGE.id="";$MANAGE.onManagementApiSuccess=c.picasoUI.onManagementApiSuccess;$MANAGE.onManagementApiError=c.picasoUI.onManagementApiError;$MANAGE.onManagementApiFwSuccess=c.picasoUI.onManagementApiFwSuccess;$MANAGE.onManagementApiFwError=c.picasoUI.onManagementApiFwError;checkForManagementApiSupport(h._data)}h.poll()}};c.detachDevice=function(h){if(!h){return}try{h._msgMonitoring=false;if(h._msgKeyTimer!=0){c.clearTimeout(h._msgKeyTimer)}h._msgKeyTimer=0}catch(i){}var j=-1;f(c.picaso.attachedDevices).each(function(e,k){if(j<0&&k.id==h.id){j=e}});if(j>=0){c.picaso.attachedDevices.splice(j,1)}if((h.id==$MANAGE.id)||!getDevice()){if(picaso.rxtx){picaso.rxtx.release()}delete picaso.rxtx;picaso.rxtx=null;$MANAGE.noDevice()}c.picasoUI.onDeviceDetached(h)};c.responseRecieved=function(e){try{jQuery(c.ajaxRequests).each(function(j,i){if(i.url==e&&!i.response){i.response=new Date();return}})}catch(h){}};c.errorReceived=function(e){try{jQuery(c.ajaxRequests).each(function(j,i){if(i.url==e&&!i.error){i.error=new Date();return}})}catch(h){}};c.ajaxRequests=[];c.ajax=function(e,h,m,p,q,i,o){if(window.SmartMobility&&window.SmartMobility.onAjax){window.SmartMobility.onAjax()}if(h.indexOf("?")<0){h+="?"}var n=new Date();h+="&c="+n.valueOf();delete n;c.ajaxRequests.push({url:h,time:new Date(),method:e,response:false,error:false});if(c.ajaxRequests.length>25){c.ajaxRequests.shift()}if(o===null){o=c.picaso.defaultAjaxTimeout}if(h.indexOf("127.0.0.1")>=0){o*=6}else{if(jQuery.browser.widget){o*=2}}if(e=="POST"&&(m==null||m.length<=0)){m=c.ajaxPreamble2(h)}if(jQuery.browser.msie){if(
/*!window.SmartMobility.IsEmbeddedIE && */
jQuery.browser.msie&&jQuery.browser.version>=8&&window.XDomainRequest){if($U.IsCrossDomain(window.location.href,h)){var j=new XDomainRequest();j.open(e,h);j.timeout=o;j.onprogress=function(){};j.onerror=function(){c.errorReceived(h);if(q){q(j,"error")}if(jQuery.browser.msie){CollectGarbage()}};j.ontimeout=function(){c.errorReceived(h);if(q){q(j,"timeout")}if(jQuery.browser.msie){CollectGarbage()}};j.onload=function(){c.responseRecieved(h);if(p){p($U.msieDOM(j),"",j)}if(jQuery.browser.msie){CollectGarbage()}};j.send(m);return}}else{if(jQuery.browser.version>=7){var l=null;if(window.ActiveXObject){l=new ActiveXObject("MSXML2.XMLHTTP.3.0")}var r=function(){if(l.readyState==4){if(l.status>=200&&l.status<400){c.responseRecieved(h);if(p){p($U.msieDOM(l),"",l)}}else{c.errorReceived(h);if(q){q(l,"error")}if(jQuery.browser.msie){CollectGarbage()}}}else{}};if(l!=null){l.onreadystatechange=r;try{l.open(e,h,true);l.send(m)}catch(k){if(q){q(l)}}}else{alert("AJAX (XMLHTTP) not supported.")}return}}}jQuery.ajax({url:h,type:e,data:m,contentType:"text/plain",context:document.body,dataType:"xml",timeout:o,success:function(t,u,s){c.responseRecieved(h);if(p){p(t,u,s)}},error:function(s,u,t){c.errorReceived(h);if(q){q(s)}}})};c.notifyUpdating=function(){if(c.hostMgr.resetting!=""){ajax("GET",c.hostMgr.resetting,"",function(e){},function(e){},false,c.picaso.defaultAjaxTimeout)}};return c})(window,jQuery);
function GPSDevice(d,c,a,b){this.id=d;this.name=c;this.url=a;this.data=b;this.timer=null;this.errorcount=0;this.discovery=null}function checkForGpsSupport(c){var d=jQuery("id",c),a=jQuery("services>v1>gps>uri",c);if(d&&d.length>0&&a&&a.length>0){var b=new GPSDevice(jQuery(d).eq(0).text(),jQuery("displaynames>name",c).eq(0).text(),jQuery(a).eq(0).text(),null);b.discovery=c;$GPS.addDevice(b);return b}return null}var $GPS={OnDataReceived:function(a){},devices:{},bnmeaChecked:false,addDevice:function(c){var a=$GPS.devices[c.id];if(a!=null&&a.timer!=null){window.clearTimeout(a.timer);a.timer=null}$GPS.devices[c.id]=c;if(c.data==null){var b=function(){var i=c.id,f=c.url,h=c.id,g=null,e=function(k){var j=$GPS.devices[i];if(j!=null){j.data=k;j.errorcount=0;j.timer=window.setTimeout(b,window.picaso.gpsDelay);if($GPS.OnDataReceived){$GPS.OnDataReceived(j)}}},d=function(k){var j=$GPS.devices[i];if(j!=null){j.errorcount++;if(j.errorcount<3){j.timer=window.setTimeout(b,window.picaso.gpsDelay);return}j.timer=null;$U.log("GPS disabling timer due to error ("+(k?k.status:0)+") for "+i)}};$GPS.request(f,h,g,e,d)};window.setTimeout(b,window.picaso.gpsDelay);if(!$GPS.bnmeaChecked){$GPS.nmeaCheck();$GPS.bnmeaChecked=true}}},clearDevices:function(){var b;for(b in $GPS.devices){var a=$GPS.devices[b];if(a!=null&&a.timer!=null){window.clearTimeout(a.timer)}}$GPS.devices=[];$GPS.bnmeaChecked=false;$GPS.nmeaRetry=0},signal_status:function(d){var e="0",c=jQuery('gps>signal>parameter[type="signal strength"]',d);if(c&&c.length>0){var a=0,b=jQuery("percent",c.eq(0));if(b&&b.length>0){a=b.eq(0).text()}if(a>=80){e="5"}else{if(a>=60){e="4"}else{if(a>=40){e="3"}else{if(a>=20){e="2"}else{if(a>=1){e="1"}else{e="0"}}}}}}return e},session_status:function(c){var a="off",b=jQuery("gps>state>value",c);if(b&&b.length>0){a=jQuery(b).eq(0).text()}return a},device_status:function(c){var a="off",b=jQuery("gps>state>description",c);if(b&&b.length>0){a=jQuery(b).eq(0).text()}return a},isLbsOff:function(b){var a=$GPS.session_status(b);return(a=="off")},request:function(c,f,e,b,a){var d=ajaxPreamble(c,f,((typeof e=="string"&&e.length>0)?e:null));ajax("POST",c,d,function(g){if(b){b(g)}},function(g){if(a){a(g)}},true,window.picaso.gpsTimeout);return},getUserConfig:function(c,e,b,a){var d=ajaxPreamble(c,e,null);ajax("POST",c,d,function(g,h,f){if(b){b(g)}},function(f){if(a){a(f)}},true,window.picaso.gpsTimeout)},setGpsAuto:function(e,a,h,g,c,b){var f=ajaxPreamble(e,h,((typeof g=="string"&&g.length>0)?g:null));var d=function(I,w,n,A){if(jQuery.browser.msie){$U.log("UI is running in IE browser");var q=new ActiveXObject("Microsoft.XMLDOM");q.async=false;q.loadXML(I);var J=q.documentElement;var s=0,r=J.getElementsByTagName("name");for(s=0;s<r.length;s++){if(r[s].text=="GpsAutoStart"){r=r[s].parentNode;var z=r.parentNode;if(z!=null){z.removeChild(r);r=J.getElementsByTagName("name");s=-1;$U.log("GpsAutoStart already existed in settings - REMOVING")}}}var m=q.createElement("item"),D=q.createElement("service"),B=q.createTextNode("ConnectivityData"),j=q.createElement("name"),v=q.createTextNode("GpsAutoStart"),i=q.createElement("value"),G=q.createTextNode(g),C=q.createElement("revision"),F=q.createTextNode("0");D.appendChild(B);m.appendChild(D);j.appendChild(v);m.appendChild(j);i.appendChild(G);m.appendChild(i);C.appendChild(F);m.appendChild(C);var o=J.getElementsByTagName("subcomponent");if(o.length>0){o[0].appendChild(m)}I=J.xml}else{var k=jQuery.parseXML(I);var l=jQuery("name:contains(GpsAutoStart)+value",k).text();if(typeof l=="string"&&l.length>0){jQuery("name:contains(GpsAutoStart)+value",k).text(g);I=xmlToString(k);$U.log("GpsAutoStart ADD "+g)}else{var E=jQuery("<myxml/>"),t="<service>ConnectivityData</service><name>GpsAutoStart</name><value>"+g+"</value><revision>0</revision>";var H=document.createElement("item");jQuery(H).html(t);jQuery("subcomponent:first",k).append(H);I=xmlToString(k);$U.log("GpsAutoStart APPEND "+g)}}if(typeof I=="string"){if(I.length>0){if(I.indexOf("<?")<0){I='<?xml version="1.0" encoding="UTF-8"?>'+I}$U.log("GpsAutoStart XML "+I)}else{return}}else{return}ajax("POST",w,I,function(p){if(c){c(p)}},function(p){if(p.status==200){if(c){c(data)}}else{if(b){b(p)}}},true,window.picaso.gpsTimeout)};ajax("POST",e,f,function(j,k,i){d(i.responseText,a,c,b)},function(i){if(b){b(i)}},true,window.picaso.gpsTimeout);return},nmeaCheckTimeout:5000,nmeaRetry:0,nmeaCheck:function(){try{var a=getDevice();if(a){if(hostMgr&&hostMgr.nmea){ajax("POST",hostMgr.nmea,"",function(d,f,c){var e=jQuery("DeviceNmeaPort:first",d).text();jQuery("#nmealocation").val(e);if(e.indexOf("none")>=0){$GPS.nmeaRetry++;if($GPS.nmeaRetry<6){window.setTimeout(function(){$GPS.nmeaCheck()},$GPS.nmeaCheckTimeout)}}},function(c){window.setTimeout(function(){$GPS.nmeaCheck()},$GPS.nmeaCheckTimeout)},true,window.picaso.gpsTimeout)}else{window.setTimeout(function(){$GPS.nmeaCheck()},$GPS.nmeaCheckTimeout)}}else{window.setTimeout(function(){$GPS.nmeaCheck()},$GPS.nmeaCheckTimeout)}}catch(b){window.setTimeout(function(){$GPS.nmeaCheck()},$GPS.nmeaCheckTimeout)}}};
var G_last_serviceid=null;var Utf8={encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a[d];if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a[d+1];b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a[d+1];c3=a[d+2];b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};function d2h(a){if(a<16){return"0"+a.toString(16)}else{return a.toString(16)}}function h2d(a){return parseInt(a,16)}function stringToHex(d){var e=Utf8.encode(d);var f="";var b=0;var g;var a=e.length;for(;b<a;b+=1){g=e.charCodeAt(b);f+=d2h(g)}return f}function hexToString(b){var d=[];var a;var c=0;var e;for(a=0;a<b.length;a+=2){e=b.charAt(a)+b.charAt(a+1);d.push(h2d(e))}str=Utf8.decode(d);return str}function MessageT(h,a,g,c,f,e,i,k,d,j,b,l){this.data=null;this.isSender=h;this.otherParty=a;this.getDate=g;this.getReceiveDate=function(){return this.getDate()};this.getSendDate=function(){return this.getDate()};this.getId=function(){return c};this.getTo=function(){return f};this.getFrom=function(){return e};this.getBody=function(){return stringToHex(i)};this.getSubject=function(){return stringToHex(k)};this.getPriority=function(){return(l||"")};this.getCc=function(){return d};this.getBcc=function(){return j};this.isRead=function(){return true};this.markRead=function(){};this.folderType=function(){return b};this.send=function(s,m){var r,p=null;for(r in $SMS.mFolders){p=$SMS.mFolders[r];if(!p){continue}if(p.url){break}}if(p!=null){var q=function(n){if(s){s(n)}},o=function(n){if(m){m(n)}else{alert("Failed to send message.\n\n"+n.responseText)}};if(this.getBody().indexOf("POUND_DATA")<0){$SMS.m_sentout.push(this)}$SMS.request(p.url,p.id,"send",p.smsData,q,o,this)}};this.deleteMsg=function(p,q,v,u){var s,o=null;for(s in $SMS.mFolders){o=$SMS.mFolders[s];if(!o){continue}if(o.url){break}}if(o!=null){var m=function(n){if(v){v(n)}},t=function(n,w){if(u){u(n,w)}else{alert("Failed to delete message.\n\n"+n.responseText)}},r=new MessageT(null,null,null,p,"","","","","","",q);$SMS.request(o.url,o.id,"delete",o.smsData,m,t,r)}}}function Message(a){this.data=a;this.isSender=function(){var b=this.folderType();if(b.toLowerCase().indexOf("inbox")>=0){$SMS.MyId=this.getTo();this.isSender=function(){return false};return false}else{$SMS.MyId=this.getFrom();this.isSender=function(){return true};return true}};this.otherParty=function(){if(this.isSender()){return this.getTo()}return this.getFrom()};this.getDate=function(){var c=this.hasReceiveDate(),e=this.getReceiveDate(),d=this.getSendDate(),b;if((d==null||d=="NaN")&&(e!=null&&e!="NaN")){this.getDate=function(){return e};return e}else{if(e==null||e=="NaN"){this.getDate=function(){return d};return d}}b=(c?e:d);this.getDate=function(){return b};return b};this.hasReceiveDate=function(){var b=this._fld("receivedate");if(b){return true}return false};this.getReceiveDate=function(){var b=this._fld("receivedate");if(b){return new Date(toDate(b))}else{return new Date()}};this.getSendDate=function(){var b=this._fld("senddate");if(b){return new Date(toDate(b))}return new Date()};this.getId=function(){return this._fld("id")};this.getTo=function(){return this._fld("to")};this.getFrom=function(){return this._fld("from")};this.getPriority=function(){return this._fld("priority")};this.getBody=function(){return hexToString(this._fld("body"))};this.getSubject=function(){return hexToString(this._fld("subject"))};this.getCc=function(){return this._fld("cc")};this.getBcc=function(){return this._fld("bcc")};this.isRead=function(){return !(this._fld("state>value")=="unread")};this.markRead=function(){var e,c=null;for(e in $SMS.mFolders){c=$SMS.mFolders[e];if(!c){continue}if(c.url){break}}if(c!=null){var d=function(f){},b=function(f){};$SMS.request(c.url,c.id,"mark",c.smsData,d,b,this)}};this._fld=function(b){var c=jQuery(b,this.data);if(c&&c.length>0){return jQuery(c).eq(0).text()}return null};this.folderType=function(){var b=jQuery("summary>foldertype",jQuery(this.data).parent());if(b&&b.length>0){return jQuery(b).eq(0).text()}return""};this.deleteMsg=function(d,e,j,i){var g,c=null;for(g in $SMS.mFolders){c=$SMS.mFolders[g];if(!c){continue}if(c.url){break}}if(c!=null){var b=function(k){if(j){j(k)}},h=function(k,l){if(i){i(k,l)}else{alert("Failed to delete message.\n\n"+k.responseText)}},f=new MessageT(null,null,null,d,"","","","","","",e);$SMS.request(c.url,c.id,"delete",c.smsData,b,h,f)}}}function SmsBucketHolder(a){this.otherParty=a;this.messages=[];this.newest=function(){return this.messages[this.messages.length-1].getDate()}}function fnSortForRecent(d,c){if(typeof d=="object"&&d.constructor.toString().indexOf("SmsBucketHolder")>=0&&typeof c=="object"&&c.constructor.toString().indexOf("SmsBucketHolder")>=0){var f=new Date(d.newest()),e=new Date(c.newest());return e-f}}function Sms(c,a,b){this.id=c;this.url=a;this.data=b;this.timer=null;this.smsData=-1;this.serviceData=[];this.getSmsData=function(){if(this.smsData>-1){return this.serviceData[this.smsData]}return null};this.messages=function(){var d=this.getSmsData();if(!d){return null}return jQuery("message",d)};this.networkMessages=[];this.messageArray=function(){var d=new Array(),e=this.messages();this.networkMessages=[];if(e!=null){var f,g;for(g=0;g<e.length;g++){f=new Message(jQuery(e).eq(g));if(((f.getFrom()==window.G_PHONENUM)||("1"+f.getFrom()==window.G_PHONENUM))&&((f.getTo()==window.G_PHONENUM)||("1"+f.getTo()==window.G_PHONENUM))){this.networkMessages.push(f)}else{if(f.getBody()!="POUND_DATA"&&f.getFrom()!=f.getTo()){d.push(f)}else{if((f.getBody()=="POUND_DATA")&&((f.getFrom()==window.G_PHONENUM)||("1"+f.getFrom()==window.G_PHONENUM))&&(f.getTo()=="900080004008")){f.deleteMsg(f.getId(),f.folderType(),null,function(h,i){$U.log("failed to delete pound_data.")})}}}}if(d.length>0){d.sort(fnSort)}if(this.networkMessages.length>0){this.networkMessages.sort(fnSort)}}return d}}function fnSort(d,c){if(typeof d=="object"&&d.constructor.toString().indexOf("Message")>=0&&typeof c=="object"&&c.constructor.toString().indexOf("Message")>=0){var f=new Date(d.getDate()),e=new Date(c.getDate());return f-e}else{if(typeof d=="object"&&d.constructor.toString().indexOf("Sms")>=0&&typeof c=="object"&&c.constructor.toString().indexOf("Sms")>=0){return d.id-c.id}}return d-c}function checkForMessagingSupport(c){var h=jQuery("id",c),a=jQuery("services>v1>messaging>uri",c);turnOffSmsSendButton();if(h&&h.length>0&&a&&a.length>0){try{var g=getDevice(jQuery("id:first",c).text());if(g!=null&&!g._msgMonitoring){g._msgMonitoring=true;g._msgKeyMonitor()}}catch(f){$U.log("error starting msg key.")}var b=new Sms(jQuery(h).eq(0).text(),jQuery(a).eq(0).text(),null);$SMS.addMessaging(b);return b}return null}var $SMS={MyId:"",m_timer:0,m_timerfn:null,m_sentout:[],m_blacklist:[],m_newbucket:"",OnDataReceived:function(a){},SmsBuckets:new SmsBucketHolder(""),SmsBucketsArray:[],mFolders:[],addMessaging:function(b){$SMS.mFolders[b.id]=b;if(b.data==null){var c=function(i){var j=b.id,f=b.url,h=b.id,g=null,e=function(l){var k=$SMS.mFolders[j];if(k!=null){k.smsData=i;k.serviceData[i]=l;k.timer=window.setTimeout(function(){c(i)},window.picaso.smsDelay);if($SMS.OnDataReceived){$SMS.OnDataReceived(k)}}},d=function(l){var k=$SMS.mFolders[j];if(k!=null){k.timer=null}};$SMS.summaryCmd(f,h,i,e,d)},a=function(){var i=b.id,f=b.url,h=b.id,g=null,e=function(m){var l=$SMS.mFolders[i];if(l!=null){var j=null,n=jQuery('messaging>summary>servicetype:contains("sms")',m);l.data=m;if(n&&n.length>0){var k=jQuery(n).eq(0).parents("messaging");if(k&&k.length>0){j=jQuery(k).eq(0).attr("serviceid")}window.setTimeout(function(){c(j)},50)}}},d=function(k){var j=$SMS.mFolders[i];if(j!=null){j.timer=null}};window.clearTimeout($SMS.m_timer);$SMS.m_timer=0;$SMS.summaryCmd(f,h,null,e,d)};$SMS.m_timerfn=a;$SMS.m_timer=window.setTimeout(a,6000)}},refresh:function(){if($SMS.m_timerfn){var a=$SMS.m_timerfn;if($SMS.m_timer!=0){window.clearTimeout($SMS.m_timer)}$SMS.m_timer=window.setTimeout(a,50)}},noDevice:function(){if($SMS.m_timer!=0){window.clearTimeout($SMS.m_timer)}$SMS.m_timer=0;$SMS.clearFolders()},clearFolders:function(){$SMS.mFolders=[]},summaryCmd:function(d,e,c,b,a){$SMS.request(d,e,"retrieve",c,b,a)},request:function(b,h,c,j,a,l,k){var d='<picaso version="1.0.0"><p-question><uri>'+b+"</uri><time>"+$U.NOW()+"</time><id>"+window.G_APPNAME+"</id><component>PSC</component><subcomponent>UI</subcomponent><target>"+h+"</target>";if(typeof c=="string"&&c.length>0){if(c=="mark"){d+="<action>retrieve</action>"}else{d+="<action>"+c+"</action>"}}if(typeof j=="string"&&j.length>0){d+="<serviceid>"+j+"</serviceid>";G_last_serviceid=j}else{if(typeof G_last_serviceid=="string"&&G_last_serviceid.length>0){d+="<serviceid>"+G_last_serviceid+"</serviceid>"}else{d+="<serviceid>0</serviceid>"}}if(typeof c=="string"&&c=="send"&&typeof k=="object"){var i=[];i.push("<from>"+$SCOPE.xmlencode(k.getFrom())+"</from>");i.push("<to>"+$SCOPE.xmlencode(k.getTo())+"</to>");i.push("<cc>"+$SCOPE.xmlencode(k.getCc())+"</cc>");i.push("<bcc>"+$SCOPE.xmlencode(k.getBcc())+"</bcc>");i.push("<replyto></replyto>");i.push("<subject>"+$SCOPE.xmlencode(k.getSubject())+"</subject>");i.push("<body>"+$SCOPE.xmlencode(k.getBody())+"</body>");i.push("<priority>"+$SCOPE.xmlencode(k.getPriority()||"")+"</priority>");try{var f=getDevice().getMsgKey();if((typeof f=="string")&&(f!="0")){$U.log("SEND message with msgKey "+f);i.push("<sendkey>"+f+"</sendkey>")}}catch(g){}d+=i.join("");i=[]}else{if(typeof c=="string"&&(c=="delete"||c=="mark")&&typeof k=="object"){var i=[];i.push("<msgid>"+$SCOPE.xmlencode(k.getId())+"</msgid>");if(c!="mark"){i.push("<foldertype>"+$SCOPE.xmlencode(k.folderType())+"</foldertype>")}d+=i.join("");i=[]}}d+="</p-question></picaso>";ajax("POST",b,d,function(e){if(a){a(e)}},function(e){if(l){l(e)}},false,window.picaso.smsTimeout);return}};function toDate(g){var j,i,f,c,a,b,e=new Date();if(typeof g=="string"&&g.length>20){j=g.substr(0,4);i=g.substr(5,2);f=g.substr(8,2);c=g.substr(11,2);a=g.substr(14,2);b=g.substr(17,2);e.setUTCFullYear(j,i-1,f);e.setUTCHours(c,a,b,0);return e}return new Date(e)};
var g_noti_enhancedinstall=false;var $NOTI={mNidsHandled:[],mNidsToDo:[],onNotificationsAvailable:null,onNotification:function(c){var a=$NOTI.mNidsHandled[(c?c.getNid():"x")];if(!a&&c){if(!$NOTI.mNidsToDo[c.getNid()]){$U.log("Notification.onNotification "+c.getNid()+" is new.");$NOTI.mNidsToDo[c.getNid()]=c;return $NOTI.default_OnNotification(c)}}c=null;return},renderGenNotification:null,renderGenPrompt:null,renderGenCredentialRequest:null,renderUriNotification:null,default_OnNotification:function(b){if((window.landingUI===undefined)&&((jQuery(".mbm-content").is(":visible")==false)||(VZW.Modal.modal==null))){var d=b.getDisplayType();if(d&&typeof d=="object"){var c;for(c=0;c<d.length;c++){switch(d[c]){case"gen.notification":var k=b.getDivId("timeout"),h='<div class=""><span class="msg-top"></span><div class="message-content"><p><h3>NOTIFICATION</h3><br />'+b.getDivId("body")+'</div><span class="msg-btm"></span></p><a class="button" id="btnDismiss"><span class="gray">DISMISS</span></a><br /></div>',a=b.getNid();$U.log("showing "+b.getNid());$U.showpanel();if($NOTI.renderGenNotification){h=$NOTI.renderGenNotification(b)}if(!$NOTI.mNidsHandled[a]){jQuery("#divnotifbtn").empty();$NOTI.mNidsHandled[a]=b;$NOTI.mNidsToDo[b.getNid()]={displayed:true};jQuery("#span_notif").html(b.getDivId("body"));jQuery("#notification-spot").show();if(jQuery.browser.safari){VZW.Modal.modal=1;jQuery("#notification-spot").attr("style","display: block; ");jQuery("#overlay").attr("style","display: block; visibility: visible; zoom: 1; opacity: 0.75; width: 100%; height: 666px; left: 0px; ");jQuery("#notif-panel").attr("style","visibility: visible; zoom: 1; opacity: 1; margin-left: -330px; left: 50%; top: 299px; margin-top: -160px; position: absolute; display: block; width: 660px; ")}else{$("show_notif").click()}if(k.length>0&&!b.closeTimer){b.closeTimer=window.setTimeout(function(){$("notifclose").fireEvent("click");jQuery("#notification-spot").hide();if(window.SmartMobility&&window.SmartMobility.IsEmbeddedIE){window.SmartMobility.resize()}},Number(k));return true}}return false;break;case"gen.prompt":var k=b.getDivId("timeout"),h='<section class=""><h2>NOTIFICATION</h2><br />'+b.getDivId("body")+"<br /><br />",a=b.getNid(),f=b.buttons();var l=1;var g=b.getDivId("noXclose");$U.log("showing "+b.getNid());$U.showpanel();if($NOTI.renderGenPrompt){h=$NOTI.renderGenPrompt(b)}if(!$NOTI.mNidsHandled[a]){var m="",i;jQuery("#divnotifbtn").empty();for(i=f.length-1;i>=0;i--){if(f[i].action.indexOf("()")>0||f[i].action.indexOf(";")>0){var o=f[i].action,p=o.split(";"),e;for(e=0;e<p.length;e++){if(p[e].indexOf("self.close()")>=0){p[e]=p[e].replace("self.close()","$('notifclose').fireEvent('click');")}if(p[e].indexOf("parent.location=")>=0){p[e]=p[e].replace("parent.location=","$NOTI.execute(");p[e]+=",function(){$('notifclose').fireEvent('click');})"}}o=p.join(";");if(i==0){m+='<a class="button notifbtn" onclick="'+o+'"><span class="red">'+f[i].text+"</span></a>"}else{m+='<a class="button notifbtn" onclick="'+o+'"><span class="gray">'+f[i].text+"</span></a>"}l=0}else{if(l){m+='<a class="button notifbtn" href="#" onclick="$NOTI.execute('+f[i].action+",function(){$('notifclose').fireEvent('click');})><span class=\"red\">"+f[i].text+"</span></a>"}else{m+='<a class="button notifbtn" href="#" onclick="$NOTI.execute('+f[i].action+",function(){$('notifclose').fireEvent('click');})><span class=\"gray\">"+f[i].text+"</span></a>"}l=0}}jQuery("#divnotifbtn").append(m);jQuery("#divnotifbtn").show();jQuery("#notifclose").hide();$NOTI.mNidsHandled[a]=b;$NOTI.mNidsToDo[b.getNid()]={displayed:true};jQuery("#span_notif").html(b.getDivId("body"));if(g.length>0&&g=="true"){jQuery("#notif_action").hide()}else{jQuery("#notif_action").show()}jQuery("#notification-spot").show();if(jQuery.browser.safari){VZW.Modal.modal=1;jQuery("#notification-spot").attr("style","display: block; ");jQuery("#overlay").attr("style","display: block; visibility: visible; zoom: 1; opacity: 0.75; width: 100%; height: 666px; left: 0px; ");jQuery("#notif-panel").attr("style","visibility: visible; zoom: 1; opacity: 1; margin-left: -330px; left: 50%; top: 299px; margin-top: -160px; position: absolute; display: block; width: 660px; ")}else{$("show_notif").click()}if(k.length>0&&!b.closeTimer){b.closeTimer=window.setTimeout(function(){$("notifclose").fireEvent("click");jQuery("#notification-spot").hide();if(window.SmartMobility&&window.SmartMobility.IsEmbeddedIE){window.SmartMobility.resize()}},Number(k));return true}}break;case"gen.credentialrequest":var k=b.getDivId("timeout"),h='<section class=""><h2>AUTHORIZATION REQUIRED</h2><br />'+b.getDivId("body")+"<br /><br />",f=b.buttons(),a=b.getNid();$U.log("showing "+b.getNid());$U.showpanel();if($NOTI.renderGenCredentialRequest){h=$NOTI.renderGenCredentialRequest(b)}if(!$NOTI.mNidsHandled[a]){$U.log("Handling notification type: "+d[c]);var m="",i;for(i=0;i<f.length;i++){m+='<a class="button notifbtn" target="_blank" href="#" onclick="$NOTI.execute('+f[i].action+",function(){$('notifclose').fireEvent('click');})><span class=\"red\">"+f[i].text+"</span></a>"}jQuery("#divnotifbtn").append(m);jQuery("#divnotifbtn").show();jQuery("#notifclose").hide();$NOTI.mNidsHandled[a]=b;$NOTI.mNidsToDo[b.getNid()]={displayed:true};jQuery("#span_notif").html(b.getDivId("body"));jQuery("#notification-spot").show();if(jQuery.browser.safari){VZW.Modal.modal=1;jQuery("#notification-spot").attr("style","display: block; ");jQuery("#overlay").attr("style","display: block; visibility: visible; zoom: 1; opacity: 0.75; width: 100%; height: 666px; left: 0px; ");jQuery("#notif-panel").attr("style","visibility: visible; zoom: 1; opacity: 1; margin-left: -330px; left: 50%; top: 299px; margin-top: -160px; position: absolute; display: block; width: 660px; ")}else{$("show_notif").click()}if(k.length>0&&!b.closeTimer){b.closeTimer=window.setTimeout(function(){$("notifclose").fireEvent("click");jQuery("#notification-spot").hide();if(window.SmartMobility&&window.SmartMobility.IsEmbeddedIE){window.SmartMobility.resize()}},Number(k));return true}}break;case"uri.notification":var a=b.getNid();$U.log("showing "+b.getNid());$U.showpanel();if(!$NOTI.mNidsHandled[a]){$U.log("Handling notification type: "+d[c]);$NOTI.mNidsHandled[a]=b;$NOTI.mNidsToDo[b.getNid()]={displayed:true};if($NOTI.renderUriNotification){$NOTI.renderUriNotification(b)}}break;default:if(!$NOTI.blacklist[d[c]]){$U.log("notification type "+d[c]+" is unsupported.");$NOTI.blacklist[d[c]]=true}continue}}}}else{window.setTimeout(function(){$NOTI.default_OnNotification(b)},4000)}},blacklist:{},parseDiscovery:function(f){var e=jQuery("knowncomponent:contains(notifier_)",f);if(e&&e.length>0){}var b=jQuery("notifications>uri",f),h;if(b&&b.length>0){for(h=0;h<b.length;h++){var c=jQuery(b).eq(h),d=jQuery(c).text(),a=jQuery(c).parents("p-answer"),g=a?jQuery("id:first",a).text():null;if(g==null){continue}$NOTI.notificationDestinations[g]={id:g,uri:d,valid:true}}if(b.length>0){window.setTimeout($NOTI.kickoff,2300)}}},kickoff:function(){var g,c=200;if(!getDevice()&&$NOTI._timer>0){$U.log("Removing notification timer.");window.clearInterval($NOTI._timer);$NOTI._timer=-1;$NOTI.notificationDestinations=[];return}if($NOTI._timer<0){$NOTI._timer=window.setInterval($NOTI.reportNotifications,picaso.notificationDelay)}for(g in $NOTI.notificationDestinations){var e=$NOTI.notificationDestinations[g];if(e&&e.valid){var b=getDevice(),a=b?b.id:"nodevice";var d=e.uri,f=e.id;fn=function(h,i){window.setTimeout(function(){$NOTI.request(h,i,$NOTI.parseNotificationResponse)},c)};if(a==f){fn(d,f);c+=1300}}}},_timer:-1,reportNotifications:function(){if($NOTI.onNotification){var c,b=$NOTI.notifications;for(c=0;c<b.length;c++){var a=b.shift();$NOTI.onNotification(a)}}else{if($NOTI.onNotificationsAvailable&&$NOTI.notifications.length>0){$NOTI.onNotificationsAvailable()}}window.setTimeout($NOTI.kickoff,2000)},notificationDestinations:[],notifications:[],parseNotificationResponse:function(a){var d=jQuery("notification",a),e;if(!d){return}for(e=0;e<d.length;e++){var b=jQuery(d).eq(e),c=new $NOTI.Notification();c._data=b;$NOTI.notifications.push(c)}},Notification:function(){this._data=null;this.getNid=function(){var a="";if(this._data){var b=jQuery("nid",this._data);if(b&&b.length>0){a=jQuery(b).eq(0).text()}}return a},this.getDisplayType=function(){var a=[];if(this._data){var b=jQuery("displaytype",this._data),c;for(c=0;c<b.length;c++){a.push(jQuery(b).eq(c).text())}}return a},this.getDivId=function(e){var c="";if(this._data){var f=jQuery("data",this._data),g;for(g=0;g<f.length;g++){var b=jQuery(f).eq(g).attr("divid");if(b&&(b==e)){c=jQuery(f).eq(g).text();break}}}return c},this.buttons=function(){var b=[];if(this._data){var e=jQuery("data",this._data),h,c=null,a=null;for(h=0;h<e.length;h++){var g=jQuery(e).eq(h),f=jQuery(g).attr("divid");if(f.indexOf("button")>=0&&f.indexOf("text")>0){c=jQuery(g).text()}else{if(f.indexOf("button")>=0&&f.indexOf("action")>0){a=jQuery(g).text()}}if(c&&a){b.push({text:c,action:a});c=null;a=null}}}return b}},request:function(c,e,b,a){if(g_noti_enhancedinstall){return}var d="";d=ajaxPreamble(c,e,null);ajax("POST",c,d,function(g,h,f){if(b){b(g)}},function(f,h,g){if(a){a(f)}},true,picaso.defaultAjaxTimeout);return},execute:function(c,b,a){var e=c;var d="null";var f="";var g="";if(e){f=e.split("?")}if(f.length){e=f[0];g=f[1]}if(typeof e!="string"||!e){if(a){a("")}if(jQuery.browser.safari){VZW.Modal.modal=null;jQuery("#notification-spot").attr("style","display: none; ")}return}ajax("POST",e,g,function(i,j,h){if(b){b(i)}},function(h,j,i){if(a){a(h)}},false,picaso.defaultAjaxTimeout);if(jQuery.browser.safari){VZW.Modal.modal=null;jQuery("#notification-spot").attr("style","display: none; ")}return}};
function checkForManagementApiSupport(a){if($MANAGE.hTimer==0){$MANAGE.id=jQuery("id:first",a).text();if(getDevice().id==$MANAGE.id){$MANAGE.uri=jQuery("management>uri",a).text()}else{$MANAGE.id=""}if(typeof $MANAGE.uri=="string"&&$MANAGE.uri!=""){jQuery(".ManagementApi").show()}$MANAGE.firmwareUpdateUri=jQuery("userservice>type:contains(19)+uri",a).text();$MANAGE.kickoff()}return}var $MANAGE={id:"",uri:"",firmwareUpdateUri:"",data:"",deferred:false,onManagementApiSuccess:null,onManagementApiError:null,onManagementApiFwSuccess:null,onManagementApiFwError:null,hTimer:0,noDevice:function(){var a=$MANAGE;$U.log("Clearing mgmt timer and resetting: "+a.id);if(a.hTimer){window.clearTimeout(a.hTimer)}a.hTimer=0;a.id="";a.uri="";a.firmwareUpdateUri=""},kickoff:function(){if($MANAGE.hTimer){window.clearTimeout($MANAGE.hTimer)}$MANAGE.hTimer=0;if($MANAGE.uri!=""){$MANAGE.hTimer=window.setTimeout(function(){$MANAGE.request(null)},2000)}},request:function(e){var b=$MANAGE.onManagementApiSuccess,a=$MANAGE.onManagementApiError;if($MANAGE.hTimer){window.clearTimeout($MANAGE.hTimer)}$MANAGE.hTimer=0;var d="",c=$MANAGE.uri,f=$MANAGE.id;if(c==""||f==""){return}d=ajaxPreamble(c,f,((typeof e=="string"&&e!="")?e:null));ajax("POST",c,d,function(h,i,g){$MANAGE.data=h;if(b){b(h)}if($MANAGE.uri!=""&&$MANAGE.id!=""){$MANAGE.hTimer=window.setTimeout(function(){$MANAGE.request(null)},picaso.mgmtDelay)}},function(g,i,h){$MANAGE.data="";if(a){a(g)}if($MANAGE.uri!=""&&$MANAGE.id!=""){$MANAGE.hTimer=window.setTimeout(function(){$MANAGE.request(null)},picaso.mgmtDelay)}},true,picaso.defaultAjaxTimeout)},firmwareUpdate:function(e){var b=$MANAGE.onManagementApiFwSuccess,a=$MANAGE.onManagementApiFwError;var d="",c=$MANAGE.firmwareUpdateUri,f=$MANAGE.id;if(c==""||f==""){return}deferred=false;d=ajaxPreamble(c,f,((typeof e=="string"&&e!="")?e:null));ajax("POST",c,d,function(h,i,g){if(b){b(h)}if($MANAGE.uri!=""&&$MANAGE.id!=""){$MANAGE.hTimer=window.setTimeout(function(){$MANAGE.request()},picaso.mgmtDelay)}},function(g,i,h){if(a){a(g)}if($MANAGE.uri!=""&&$MANAGE.id!=""){$MANAGE.hTimer=window.setTimeout(function(){$MANAGE.request()},picaso.mgmtDelay)}},true,picaso.defaultAjaxTimeout)}};
var PicasoRxTx=(function(){var a=function(b,c){this._nsize=b;this._rqueue=[];this._tqueue=[];this._n=0;this._pulseN=0;this._timer=0;this._onPulse=c;this.rates={maxRx:0,maxTx:0,Rx:0,Tx:0,totalRx:0,totalTx:0};this.init=function(){var i=0,h=this._rqueue,e=this._tqueue,g=this.rates,d=this._nsize;delete this._rqueue;delete this._tqueue;e=[];h=[];for(i=(0-d+1);i<=0;i++){h.push([i,null]);e.push([i,null])}this._rqueue=h;this._tqueue=e;this._n=d;this._pulseN=d;g.maxRx=0;g.maxTx=0;g.Rx=0;g.Tx=0;g.totalRx=0;g.totalTx=0;if(this._timer==0){var f=this;this._timer=window.setInterval(function(){f.pulse()},1000)}};this.push=function(d,g,f,h){var k=this._rqueue,i=this._tqueue,l=this.rates,e,j;k.push([0,d]);i.push([0,g]);k.splice(0,1);i.splice(0,1);for(j=0,e=(0-this._nsize+1);e<=0&&j<k.length&&j<i.length;e++,j++){k[j][0]=e;i[j][0]=e}l.Rx=d;l.Tx=g;if(Number(d)>Number(l.maxRx)){l.maxRx=d}if(Number(g)>Number(l.maxTx)){l.maxTx=g}l.totalRx=f;l.totalTx=h;this._n++};this.txchanged=function(){return true};this.rxchanged=function(){return true};this.pulse=function(){if(this._n==this._pulseN){var d=this.rates;this.push(d.Rx,d.Tx,d.totalRx,d.totalTx)}this._pulseN=this._n;if(this._onPulse){this._onPulse(this,this.rates)}};this.release=function(){if(this._timer!=0){window.clearInterval(this._timer)}this._timer=0;try{delete this}catch(d){}};this.formatRate=function(f){if(f==null){return"0 bps"}var e="",d=f*8;if(d>1073741824){e=Number(d/1073741824).toFixed(1)+" gbps"}else{if(d>1048576){e=Number(d/1048576).toFixed(1)+" mbps"}else{if(d>1024){e=Number(d/1024).toFixed(1)+" kbps"}else{e=d+" bps"}}}return e};this.formatRateAs=function(g,f){if(g==null){return"0 bps"}var e="",d=g*8;if(f==3){e=Number(d/1073741824).toFixed(1)+" gbps"}else{if(f==2){e=Number(d/1048576).toFixed(1)+" mbps"}else{if(f==1){e=Number(d/1024).toFixed(1)+" kbps"}else{e=d+" bps"}}}return e};this.formatRateType=function(f){if(f==null){return 0}var e="",d=f*8;if(d>1073741824){e=3}else{if(d>1048576){e=2}else{if(d>1024){e=1}else{e=0}}}return e};this.formatBytes=function(e){if(e==null){return"0 Bytes"}var d="";if(e>1073741824){d=Number(e/1073741824).toFixed(1)+" GB"}else{if(e>1048576){d=Number(e/1048576).toFixed(1)+" MB"}else{if(e>1024){d=Number(e/1024).toFixed(1)+" KB"}else{d=e+" Bytes"}}}return d};return this};return a})();
(function(a,b){a.landing={pending:false,cfguri:"",uri:"",seturi:"",data:null,cfgdata:null,displayInitialPage:function(){var d=true;var c=a.landing.findUserAutoconnectSetting();if(c==false){return d}if(a.landing.perPC()&&a.landing.displayed()==false){return d}if($U.supportsLocalStorage){if($U.getLsItem("landing")==null){d=false}}else{if($U.readCookie("landing")){d=false}}return d},findUserAutoconnectSetting:function(){var c=false;var d="";if(a.landing.data){var e=b("item",a.landing.data);if(e){e.each(function(f,h){var g=b("name",this).text();switch(g){case"AutoConnect":d=b("value",this).text();break}})}c=d!=""?true:false}return c},displayed:function(){var c=false;if(a.landing.data){c=(b("item>service:contains(LandingDevice)+name:contains(Displayed)+value:contains(true)",a.landing.data).text()=="true")}return c},landingPageType:function(){if(a.landing.pending){return 0}else{var c="off";var c,e=b("item>service:contains(UI)+name:contains(LandingPageType)+revision+default",a.landing.cfgdata);if(e&&e.length>0){var d=b(e).text();switch(d){case"per device":a.landing.perPC=function(){return true};break;case"per computer":a.landing.perDevice=function(){return true};break;case"off":a.landing.perPC=function(){return true};a.landing.perDevice=function(){return true};break;default:case"both":break}}a.landing.landingPageType=c;return c}},init:function(){var c=function(){var e=null,d=null;if(e=a.getDevice()){if(e.userService("1")&&e.userService("1").uri&&e.userService("5")&&e.userService("5").uri&&e.userService("6")&&e.userService("6").uri){d={configUri:e.userService("1").uri,userUri:e.userService("5").uri,updateUri:e.userService("6").uri}}}else{a.landing.pending=true}if(d&&d.configUri){a.landing.cfguri=d.configUri;a.ajax("GET",d.configUri,"c="+Math.random(),function(g,h,f){a.landing.pending=(g===null?true:false);a.landing.cfgdata=g;if(typeof a.landing.landingPageType==="function"){a.landing.landingPageType()}},function(f){a.landing.pending=false;a.landing.cfgdata=null},false,5000)}else{window.setTimeout(c,1000);return}if(d&&d.userUri){a.landing.uri=d.userUri;a.landing.seturi=d.updateUri;a.ajax("GET",d.userUri,"c="+Math.random(),function(i,f,h){a.landing.pending=(i===null?true:false);a.landing.data=i;if(jQuery.browser.msie&&jQuery.browser.version>9&&$U.IsCrossDomain(window.location.href,a.landing.uri)){if(h!=null&&h.responseText){try{if(h.responseText!==""){var g=jQuery(h.responseText).last();a.landing.data=g}}catch(j){}}}if(typeof a.landing.landingPageType==="function"){a.landing.landingPageType()}},function(f){a.landing.pending=false;a.landing.data=null},false,5000)}else{window.setTimeout(c,1000)}};window.setTimeout(c,250)},getBlank:function(){return'<picaso_config version="1.0"><picaso_user_settings version="1.0"><component><name>wireless</name><subcomponent><name>CDMA-GSM-LTE</name><item><service>placeholder</service><name>noname</name><value>false</value><revision>0</revision></item></subcomponent></component></picaso_user_settings></picaso_config>'},RefreshInternalConfig:function(d){if(a.landing.pending){window.setTimeout(a.landing.RefreshInternalConfig,1000)}var e=null,c=null;if(e=a.getDevice()){c={configUri:e.userService("1").uri,userUri:e.userService("5").uri,updateUri:e.userService("6").uri}}if(c&&c.configUri){a.landing.pending=true;a.landing.cfguri=c.configUri;a.ajax("GET",c.configUri,"c="+Math.random(),function(f){a.landing.cfgdata=f},function(f){},false,5000)}if(c&&c.userUri){a.landing.pending=true;a.landing.uri=c.userUri;a.landing.seturi=c.updateUri;a.ajax("GET",c.userUri,"c="+Math.random(),function(i,f,h){a.landing.pending=false;a.landing.data=i;if(jQuery.browser.msie&&jQuery.browser.version>9&&$U.IsCrossDomain(window.location.href,a.landing.uri)){if(h!=null&&h.responseText){try{if(h.responseText!==""){var g=jQuery(h.responseText).last();a.landing.data=g}}catch(j){}}}if(d){d()}},function(f){a.landing.pending=false},false,5000)}},perPC:function(){if(!$U.cookieEnabled&&!$U.supportsLocalStorage){var c=b("item>service:contains(LandingDevice)+name:contains(HideNoCookies)+value",a.landing.data).text();if(c=="true"){return true}else{return false}}return($U.supportsLocalStorage?($U.getLsItem("landing")!==null?true:false):($U.readCookie("landing")?true:false))},perDevice:function(){var c=b("item>service:contains(LandingDevice)+name:contains(Displayed)+value",a.landing.data).text();return(c=="true"?true:false)},wasEULAAccepted:function(){var c=b("item>service:contains(EULAAgreement)+name:contains(EULAAccepted)+value",a.landing.data).text();return(c=="true"?true:false)},OnEULAAccepted:function(c){if(!this.perPC()){if($U.supportsLocalStorage){$U.setLsItem("landing",$U.NOW())}else{$U.createCookie("landing",$U.NOW(),365*3)}}var y=jQuery(this.data),g=jQuery("picaso_config",y),o=jQuery("item>service:contains(EULAAgreement)+name+value",g),r=jQuery("<new_settings/>"),i="<item><service>EULAAgreement</service><name>EULAAccepted</name><value>true</value><revision>0</revision></item>",p=jQuery(i),x="",w="";if(jQuery.browser.msie&&jQuery.browser.version<10){var k=this.data;k.async=false;var h=k.createElement("item"),q=k.createElement("service"),m=k.createTextNode("EULAAgreement"),f=k.createElement("name"),l=k.createTextNode("EULAAccepted"),e=k.createElement("value"),t=k.createTextNode("true"),n=k.createElement("revision"),s=k.createTextNode("0");q.appendChild(m);h.appendChild(q);f.appendChild(l);h.appendChild(f);e.appendChild(t);h.appendChild(e);n.appendChild(s);h.appendChild(n);var u=k.documentElement;var j=u.getElementsByTagName("subcomponent");if(j.length>0){j[0].appendChild(h)}x=u.xml}else{if(!(jQuery.browser.msie&&jQuery.browser.version<10)){jQuery("component>subcomponent:first",this.data).append(p);if(w&&w.length>0){jQuery("component>subcomponent:first",this.data).append(w)}jQuery(r).append(g);x=jQuery(r).html()}}try{var d=jQuery.parseXML(x)}catch(v){$U.log("eula settings are not valid XML.  "+v);x=""}if(x==""){$U.log("eula page data is empty.");x=a.landing.getBlank()}a.ajax("POST",this.seturi,'<?xml version="1.0" encoding="UTF-8"?>'+x,function(z){a.landing.pending=false;$U.log("updated EULA accepted settings.");if(c){c()}},function(z){a.landing.pending=false;$U.log("error updating EULA accepted settings: "+z.status);if(c){c()}},false,5000)},updateSettings:function(c){if(!this.perPC()){if($U.supportsLocalStorage){$U.setLsItem("landing",$U.NOW())}else{$U.createCookie("landing",$U.NOW(),365*3)}}var I=jQuery(this.data),v=jQuery("<new_settings/>"),k="<item><service>LandingDevice</service><name>Displayed</name><value>true</value><revision>0</revision></item>",t=jQuery(k),H="",E=jQuery("#chkHideNoLocalStorageOrCookies:checked()"),B="<item><service>LandingDevice</service><name>HideNoCookies</name><value>true</value><revision>0</revision></item>",G="";var i=jQuery("picaso_config",I);if(i.length==0){i=I}var s=jQuery("item>service:contains(LandingDevice)+name+value",i);if(E&&E.length>0){G=jQuery(B)}if(jQuery.browser.msie&&jQuery.browser.version<10){var m=this.data;m.async=false;var j=m.createElement("item"),u=m.createElement("service"),q=m.createTextNode("LandingDevice"),h=m.createElement("name"),n=m.createTextNode("Displayed"),g=m.createElement("value"),y=m.createTextNode("true"),r=m.createElement("revision"),w=m.createTextNode("0");u.appendChild(q);j.appendChild(u);h.appendChild(n);j.appendChild(h);g.appendChild(y);j.appendChild(g);r.appendChild(w);j.appendChild(r);var D=m.documentElement;var f=false;var p=D.getElementsByTagName("item");for(var o=0;o<p.length;++o){var C=p[o];if(C!==null){for(var e=0;C.childNodes&&e<C.childNodes.length;++e){var A=C.childNodes[e];if(A.text==="Displayed"){var z=A.nextSibling;while(z){if(z.nodeName==="value"){z.text="true";f=true;break}z=z.previousSibling}if(f==true){break}}}if(f==true){break}}}if(f==false){var l=D.getElementsByTagName("subcomponent");if(l.length>0){l[0].appendChild(j)}if(E&&E.length>0){var x=m.createElement("item");u=m.createElement("service"),q=m.createTextNode("LandingDevice"),h=m.createElement("name"),n=m.createTextNode("HideNoCookies"),g=m.createElement("value"),y=m.createTextNode("true"),r=m.createElement("revision"),w=m.createTextNode("0");u.appendChild(q);x.appendChild(u);h.appendChild(n);x.appendChild(h);g.appendChild(y);x.appendChild(g);r.appendChild(w);x.appendChild(r);var D=m.documentElement;var l=D.getElementsByTagName("subcomponent");if(l.length>0){l[0].appendChild(x)}}}H=D.xml}else{if(s&&s.length>0){s.text("true");if(G.length>0){jQuery("component>subcomponent:first",this.data).append(G)}jQuery(v).append(i);H=jQuery(v).html()}else{if(!(jQuery.browser.msie&&jQuery.browser.version<10)){jQuery("component>subcomponent:first",this.data).append(t);if(G&&G.length>0){jQuery("component>subcomponent:first",this.data).append(G)}jQuery(v).append(i);H=jQuery(v).html()}}}try{var d=jQuery.parseXML(H)}catch(F){$U.log("landing settings are not valid XML.  "+F);H=""}if(H==""){$U.log("landing page data is empty.");H=a.landing.getBlank()}a.ajax("POST",this.seturi,'<?xml version="1.0" encoding="UTF-8"?>'+H,function(J){a.landing.pending=false;$U.log("updated landing settings.");if(c){c()}},function(J){a.landing.pending=false;$U.log("error updating landing settings: "+J.status);if(c){c()}},false,5000)},updateAutoconnectSetting:function(e,M){var t="false";if(e>0){t="true"}var j="none";var d=jQuery(this.data),P=jQuery("<new_settings/>"),V="<item><service>ConnectivityData</service><name>AutoConnect</name><value>"+(e>0?"true":"false")+"</value><revision>0</revision></item>",I=jQuery(V),l="<item><service>ConnectivityData</service><name>AutoConnectFilter</name><value>"+(e===0||e===1?"none":"InternationalRoam")+"</value><value>"+(e===0||e===1?"none":"LocalRoam")+"</value><revision>0</revision></item>",f=jQuery(l),Q="<item><service>ConnectivityData</service><name>PromptBeforeRoaming</name><value>false</value><revision>0</revision></item>",q=jQuery(Q),Y="",c=jQuery("#chkHideNoLocalStorageOrCookies:checked()"),w="<item><service>ConnectivityData</service><name>HideNoCookies</name><value>true</value><revision>0</revision></item>",v="";var p=jQuery("picaso_config",d);if(p.length==0){p=d}var F=jQuery("item>service:contains(ConnectivityData)+name:contains(AutoConnect)+value",p);var U=jQuery("item>service:contains(ConnectivityData)+name:contains(AutoConnectFilter)+value",p);var u=jQuery("item>service:contains(ConnectivityData)+name:contains(PromptBeforeRoaming)+value",p);if(e==1){l="<item><service>ConnectivityData</service><name>AutoConnectFilter</name><value>none</value><revision>0</revision></item>";f=jQuery(l)}var G=d;if(jQuery.browser.msie&&jQuery.browser.version<10){var E=this.data;E.async=false;var s=E.documentElement;var h=false;var i=E.createElement("item"),r=E.createElement("service"),L=E.createTextNode("ConnectivityData"),Z=E.createElement("name"),A=E.createTextNode("AutoConnect"),B=E.createElement("value"),y=E.createTextNode(t),O=E.createElement("revision"),aa=E.createTextNode("0");r.appendChild(L);i.appendChild(r);Z.appendChild(A);i.appendChild(Z);B.appendChild(y);i.appendChild(B);O.appendChild(aa);i.appendChild(O);var x=s.getElementsByTagName("item");for(var J=0;J<x.length;++J){var H=x[J];if(H!==null){for(var X=0;H.childNodes&&X<H.childNodes.length;++X){var T=H.childNodes[X];if(T.text==="AutoConnect"){var S=T.nextSibling;while(S){if(S.nodeName==="value"){S.text=t;h=true;break}S=S.previousSibling}if(h==true){break}}}if(h==true){break}}}if(h==false){var z=s.getElementsByTagName("subcomponent");if(z.length>0){z[0].appendChild(i)}}Y=s.xml}else{if(F&&F.length>0){var n=false;var g=e>0?"true":"false";jQuery("item",d).each(function(ac){var ad=jQuery("name",this).text();switch(jQuery("name",this).text()){case"AutoConnect":jQuery("value",this).text(g);n=true;break}});if(n==false){jQuery("component>subcomponent:first",this.data).append(I)}if(v.length>0){jQuery("component>subcomponent:first",this.data).append(v)}jQuery(P).append(p);Y=jQuery(P).html();d=jQuery(P)}else{if(!(jQuery.browser.msie&&jQuery.browser.version<10)){jQuery("component>subcomponent:first",this.data).append(I);if(v&&v.length>0){jQuery("component>subcomponent:first",this.data).append(v)}jQuery(P).append(p);Y=jQuery(P).html();d=jQuery(P)}}}if(e>0){if(jQuery.browser.msie&&jQuery.browser.version<10){var E=this.data;E.async=false;var s=E.documentElement;var h=false;var i=E.createElement("item"),r=E.createElement("service"),L=E.createTextNode("ConnectivityData"),Z=E.createElement("name"),A=E.createTextNode("AutoConnectFilter"),o=E.createElement("value"),ab=E.createTextNode(e===1||e===0?"none":"InternationalRoam"),m=E.createElement("value"),K=E.createTextNode(e===1||e===0?"none":"LocalRoam"),O=E.createElement("revision"),aa=E.createTextNode("0");r.appendChild(L);i.appendChild(r);Z.appendChild(A);i.appendChild(Z);o.appendChild(ab);i.appendChild(o);if(e===2){m.appendChild(K);i.appendChild(m)}O.appendChild(aa);i.appendChild(O);var C=e===1||e===0?"none":"InternationalRoam";var N=false;var x=s.getElementsByTagName("item");var W=false;for(var J=0;J<x.length;++J){var H=x[J];if(H!==null){for(var X=0;H.childNodes&&X<H.childNodes.length;++X){var T=H.childNodes[X];if(T.text==="AutoConnectFilter"){var k=H.firstChild;while(k){if(k.nodeName==="value"){k.text=C;h=true;C=e===1||e===0?"none":"LocalRoam";if(N){W=true;break}N=true}k=k.nextSibling}if(W==false&&C!=="none"){H.appendChild(m)}if(h==true){break}}}if(h==true){break}}}if(h==false){var z=s.getElementsByTagName("subcomponent");if(z.length>0){z[0].appendChild(i)}}Y=s.xml}else{if(U&&U.length>0){var n=false;var g=e===true?"true":"false";var C=e===1||e===0?"none":"InternationalRoam";jQuery("item",d).each(function(ac){var ad=jQuery("name",this).text();switch(jQuery("name",this).text()){case"AutoConnectFilter":n=true;jQuery("value",this).each(function(ae){this.textContent=C;C=e===1||e===0?"none":"LocalRoam"});break}});if(n==false){jQuery("component>subcomponent:first",d).append(f)}if(v.length>0){jQuery("component>subcomponent:first",d).append(v)}Y=jQuery(d).html();G=jQuery(d)}else{if(!(jQuery.browser.msie&&jQuery.browser.version<10)){jQuery("component>subcomponent:first",d).append(f);if(v&&v.length>0){jQuery("component>subcomponent:first",d).append(v)}jQuery(P).append(p);Y=jQuery(P).html();G=jQuery(P)}}}}if(e===1){if(jQuery.browser.msie&&jQuery.browser.version<10){var E=this.data;E.async=false;var s=E.documentElement;var h=false;var i=E.createElement("item"),r=E.createElement("service"),L=E.createTextNode("ConnectivityData"),Z=E.createElement("name"),A=E.createTextNode("PromptBeforeRoaming"),B=E.createElement("value"),y=E.createTextNode("false"),O=E.createElement("revision"),aa=E.createTextNode("0");r.appendChild(L);i.appendChild(r);Z.appendChild(A);i.appendChild(Z);B.appendChild(y);i.appendChild(B);O.appendChild(aa);i.appendChild(O);var z=s.getElementsByTagName("subcomponent");if(z.length>0){z[0].appendChild(i)}Y=s.xml}else{if(u&&u.length>0){var n=false;var g="false";jQuery("item",G).each(function(ac){var ad=jQuery("name",this).text();switch(jQuery("name",this).text()){case"PromptBeforeRoaming":jQuery("value",this).text(g);n=true;break}});if(n==false){jQuery("component>subcomponent:first",this.data).append(q)}if(v.length>0){jQuery("component>subcomponent:first",this.data).append(v)}jQuery(P).append(p);Y=jQuery(P).html()}else{if(!(jQuery.browser.msie&&jQuery.browser.version<10)){jQuery("component>subcomponent:first",G).append(q);if(v&&v.length>0){jQuery("component>subcomponent:first",G).append(v)}jQuery(P).append(p);Y=jQuery(P).html()}}}}try{var D=jQuery.parseXML(Y)}catch(R){$U.log("autoconnect settings are not valid XML.  "+R);Y=""}if(Y==""){$U.log("landing page data is empty.");Y=a.landing.getBlank()}a.ajax("POST",this.seturi,'<?xml version="1.0" encoding="UTF-8"?>'+Y,function(ac){$U.log("updated autoconnect settings.");if(M){M()}},function(ac){$U.log("error updating autoconnect settings: "+ac.status);if(M){M()}},false,5000)}};a.landing.init();return})(window,jQuery);
var initialEnableState=false;var initialLockNowState=false;function simpin_isLocked(){return initialLockNowState}function simpin_logicalXOR(d,c){return(d||c)&&!(d&&c)}function simpin_setInstructionText_Enabled(){document.getElementById("simpin-settings-state-info").innerHTML="SIM Lock is Enabled. Uncheck this checkbox to Disable SIM Lock"}function simpin_setInstructionText_Disabled(){document.getElementById("simpin-settings-state-info").innerHTML="SIM Lock is Disabled. Check this checkbox to Enable SIM Lock"}function simpin_init(){simpin_setApplyChangesButtonState(false);simpin_setcheckboxstate("#simlockenable",true);simpin_setcheckboxstate("#simlocklock",false);simpin_setcheckboxstate("#simlockchange",false);simpin_setInstructionText_Enabled();jQuery("#simlocklock-div").hide();jQuery("#simlockchange-div").hide();$SIM.request(null,null,null,null,simpin_finish_init);window.setTimeout(simpin_again,500)}function simpin_again(){if(!$SIM.data||isOfType("String",$SIM.data)){$SIM.request(null,null,null,null,simpin_finish_init);window.setTimeout(simpin_again,1000)}}function simpin_validateCodeField(b){var g=jQuery(b);var f;var c;var d;var a;var e=/^\d{0,8}$/;if(g){f=g.attr("value");if(f){c=f.replace(/[^\d.]/g,"");if(c.length>8){c=c.substring(0,8)}if(c!=f){g.attr("value",c)}}}}function simpin_checkui_input(){simpin_checkui();if(event.keyCode==13){jQuery("#simlockapplychanges").click()}}function simpin_checkui(){var e=false;var f=jQuery("#simlockenable");var c=jQuery("#simlocklock");var g=jQuery("#simlockchange");var b=false;simpin_validateCodeField("#oldpin-input");simpin_validateCodeField("#newpin-input");simpin_validateCodeField("#confirmpin-input");var d=jQuery("#oldpin-input").attr("value");var h=jQuery("#newpin-input").attr("value");var a=jQuery("#confirmpin-input").attr("value");if(initialEnableState&&f.attr("checked")){jQuery("#simlocklock-div").show();jQuery("#simlockchange-div").show()}else{jQuery("#simlocklock-div").hide();jQuery("#simlockchange-div").hide()}if(g.attr("checked")){jQuery("#newpin-input-box").show();jQuery("#confirmpin-input-box").show();b=true}else{jQuery("#newpin-input-box").hide();jQuery("#confirmpin-input-box").hide();jQuery("#newpin-input").attr("value","");jQuery("#confirmpin-input").attr("value","")}if(simpin_logicalXOR(initialEnableState,f.attr("checked"))){e=true}if(simpin_logicalXOR(initialLockNowState,c.attr("checked"))){e=true}if(b){if((h.length>=4)||(a.length>=4)){if(h==a){e=true}}}if(e){if(b){document.getElementById("enter-old-pin").innerHTML="Enter Old PIN"}else{document.getElementById("enter-old-pin").innerHTML="Enter PIN"}jQuery("#enter-current-pin").show()}else{jQuery("#enter-current-pin").hide();jQuery("#enter-current-pin").attr("value","")}if(d&&(d.length>=4)){e=true}else{e=false}simpin_setApplyChangesButtonState(e)}function simpin_enableclick(a){simpin_checkui()}function simpin_setcheckboxstate(c,b){var a=jQuery(c);if(b){a.attr("checked",false)}else{a.attr("checked","checked")}a.click()}function simpin_finish_init(){initialEnableState=$SIM.isLockEnabled();if($SIM.lockStatus()=="locked"){initialLockNowState=true}else{initialLockNowState=false}simpin_setcheckboxstate("#simlockenable",initialEnableState);simpin_setcheckboxstate("#simlocklock",initialLockNowState);if(initialEnableState){simpin_setInstructionText_Enabled()}else{simpin_setInstructionText_Disabled()}simpin_checkui();if(g_LaunchSetting==2){jQuery("#sim_settings_scrn").show()}}function simpin_setenablestate(c,b,d){var a="enable";if(!c){a="disable"}$SIM.request(a,"user",b,null,d)}function simpin_resetLockingFlag(){G_locking=false;window.renderUIState(null)}function simpin_setlockstate(c,b,d){var a="lock";if(!c){a="unlock"}else{}$SIM.request(a,"user",b,null,d)}function simpin_checkForError(h){var c;if(h=="badcode"){var f=$SIM.lockType();if(f=="user"){var e=$SIM.attempts();var b=$SIM.maxattempts();var d=parseInt(b,10)-parseInt(e,10);var g=" PIN. ";var a=" attempts";if(d==1){a=" attempt"}c="<br/><br/>Incorrect"+g+d+a+" remaining.";document.getElementById("simpin-settings-error-message").innerHTML=c;jQuery("#simpin-settings-error-message").addClass("red-text");jQuery("#simpin-settings-error-message").show()}else{hideMenu()}}}function simpin_applychanges_locknow(){var f=$SIM.lastActionStatus();if((f=="success")||(f=="")){var e=jQuery("#simlockenable");var b=e.attr("checked");var c=jQuery("#oldpin-input").attr("value");var a=jQuery("#simlocklock");var d=a.attr("checked");if(b&&(simpin_logicalXOR(initialLockNowState,d))){document.getElementById("simpin-settings-error-message").innerHTML="<br/><br/>Locking SIM&#8230";jQuery("#simpin-settings-error-message").addClass("red-text");jQuery("#simpin-settings-error-message").show();simpin_setlockstate(d,c,simpin_applychanges_changepin)}else{simpin_applychanges_changepin()}}else{simpin_checkForError(f);jQuery("#oldpin-input").attr("value","");simpin_checkui()}}function simpin_applychanges(){$SIM.clearLastActionStatus();simpin_setApplyChangesButtonState(false);var b=jQuery("#oldpin-input").attr("value");var c=jQuery("#simlockenable");var a=c.attr("checked");if(simpin_logicalXOR(initialEnableState,a)){simpin_setenablestate(a,b,simpin_applychanges_locknow)}else{simpin_applychanges_locknow()}}function simpin_applychanges_changepin(){var c=jQuery("#oldpin-input").attr("value");var d=jQuery("#simlockenable");var b=d.attr("checked");var f=jQuery("#newpin-input").attr("value");var a=jQuery("#confirmpin-input").attr("value");var e=false;if(b){if((f.length>=4)||(a.length>=4)){if(f==a){e=true}}}if(e){document.getElementById("simpin-settings-error-message").innerHTML="<br/><br/>Changing SIM PIN&#8230";jQuery("#simpin-settings-error-message").addClass("red-text");jQuery("#simpin-settings-error-message").show();$SIM.request("change","user",c,f,simpin_finish_applychanges)}else{$SIM.lastActionStatusRead=false;simpin_finish_applychanges()}}function simpin_hideInfoMessage(){document.getElementById("simpin-settings-error-message").innerHTML="";jQuery("#simpin-settings-error-message").hide()}function simpin_finish_applychanges(){var b=$SIM.lastActionStatus();var a=$SIM.lockStatus();if((b=="success")||(b=="")){window.setTimeout(function(){simpin_hideInfoMessage()},4000);jQuery("#oldpin-input").attr("value","");jQuery("#newpin-input").attr("value","");jQuery("#confirmpin-input").attr("value","");simpin_init();if(a=="locked"){initialLockNowState=true}else{initialLockNowState=false;if($SIM.lastAction=="lock"){initialLockNowState=true}}if(initialLockNowState){G_locking=true;window.setTimeout(function(){simpin_resetLockingFlag()},60000);window.renderUIState(null);hideMenu()}}else{simpin_checkForError(b);jQuery("#oldpin-input").attr("value","");simpin_checkui()}}function simpin_setUnlockButtonState(b){var a=jQuery("#simlock-unlock-button");if(b){a.html('<span class="red">Unlock</span>');a.unbind("click");a.click(function(){simpin_mainunlock()});a.removeClass("disabled")}else{a.html('<span class="gray">Unlock</span>');a.unbind("click");a.addClass("disabled")}}function simpin_setApplyChangesButtonState(b){var a=jQuery("#simlockapplychanges");if(b){a.html('<span class="red">Apply</span>');a.unbind("click");a.click(function(){simpin_applychanges()});a.removeClass("disabled");jQuery("#simpin-settings-error-message").hide()}else{a.html('<span class="gray">Apply</span>');a.unbind("click");a.addClass("disabled")}}function simpin_mainunlock(){var a=jQuery("#enter-pin").attr("value");var c=jQuery("#enter-puk").attr("value");var b=$SIM.lockType();if(b=="network"){$SIM.request("unlock",b,c,a,simpin_finish_applychanges)}else{$SIM.request("unlock",b,a,null,simpin_finish_applychanges)}jQuery("#enter-pin").attr("value","");jQuery("#enter-puk").attr("value","")}function simpin_checkUnlockButtonState_input(){simpin_checkUnlockButtonState();if(event.keyCode==13){jQuery("#simlock-unlock-button").click()}}function simpin_checkUnlockButtonState(){var d=false;simpin_validateCodeField("#enter-pin");simpin_validateCodeField("#enter-puk");var a=jQuery("#enter-pin").attr("value");var c=jQuery("#enter-puk").attr("value");var b=$SIM.lockType();if(b=="network"){if(a&&(a.length>=4)){if(c&&(c.length>=4)){d=true}}}else{if(a&&(a.length>=4)){d=true}}simpin_setUnlockButtonState(d)}function isOfType(a,b){var c=Object.prototype.toString.call(b).slice(8,-1);return b!==undefined&&b!==null&&c===a}function simpin_checkmainui(){if($SIM==null){return true}if(isOfType("String",$SIM.data)){return true}var a=$SIM.realLockStatus();if((a=="unknown")||(a=="unlocked")||(a=="disabled")||(a=="no sim")){return true}var h=false;var d;var c=$SIM.attempts();var i=$SIM.maxattempts();var e=parseInt(i,10)-parseInt(c,10);var b=" attempts";if(e==1){b=" attempt"}var f="PIN";document.getElementById("simpinAttempts").innerHTML=document.getElementById("state-description").innerHTML;var g=$SIM.lockType();if(g=="user"){f=" PIN. ";jQuery("#enter-puk-box").hide();jQuery("#simpinAttempts").removeClass("red-text");document.getElementById("simpinAttempts").innerHTML="PIN Locked"}else{if(g=="network"){f=" PUK. ";jQuery("#enter-puk-box").show();jQuery("#simpinAttempts").removeClass("red-text");document.getElementById("simpinAttempts").innerHTML="PUK Locked"}}if(g=="device"){jQuery("#enter-sim-pin-table").hide();document.getElementById("simpinAttempts").innerHTML=document.getElementById("state-description").innerHTML+"<br/>Device is PUK locked. Please contact Verizon Support at 800-922-0204.";jQuery("#simpinAttempts").addClass("red-text")}else{jQuery("#enter-sim-pin-table").show();if(c!=0){d="Incorrect"+f+e+b+" remaining.";document.getElementById("simpinAttempts").innerHTML=d;jQuery("#simpinAttempts").addClass("red-text")}else{jQuery("#simpinAttempts").removeClass("red-text")}}simpin_checkUnlockButtonState();return h}var simpin_condata_simpresent=true;function simpin_checksimicon(d){var c=true;var b=false;var a=$SIM.realLockStatus();if(d!=null){if(!d.state||!d.state.substate||d.state.substate.value=="nosim"){c=false}}if(a=="no sim"){c=false}else{if(a=="unavailable"){b=true}}if(c){if(b){jQuery("#sim").attr("title","SIM Error");jQuery("#sim").addClass("q");jQuery("#sim").removeClass("x");jQuery("#sim").show()}else{jQuery("#sim").hide();jQuery("#sim").removeClass("x");jQuery("#sim").removeClass("q")}simpin_condata_simpresent=true}else{jQuery("#sim").attr("title","No SIM");jQuery("#sim").addClass("x");jQuery("#sim").removeClass("q");jQuery("#sim").show();simpin_condata_simpresent=false}};
var G_locking=false;var G_cd=null;var G_GOTADEVICE=false;var G_fmUpdating=false;var G_fmDidUpdate=false;var G_OIManager_Errors=0;(function(d,e){var a=[];d.G_VERSION="1.57.14";d.G_SCOPEPARAMS={company:"VZW",component:"psc",subcomponent:"ui",version:d.G_VERSION,devcomponent:"",devsubcomponent:"",autoScopeTimer:10,hautoScopeTimer:0};d.G_DISCOVERYHOME="";d.G_SCOPE=null;d.G_REVISION="$Revision: 527678 $";d.G_APPNAME="vmbm";d.G_SMSID=-1;d.G_PHONENUM="";d.G_TERMINALURL="";d.G_DIAGNOSTICLOGURL="";d.G_SESSIONHISTORYURL="";d.uiconst={enableLandingPageSupport:true,condataErrCount:3,connectionTimerHandle:0,connectionTime:{read:false,value:"00:00:00:00",state:"",lastRead:new Date()}};d.G_STATEDESCRIPTIONS={connected:"Connected to network",dormant:"Connected to network",connecting:"Connecting to network",disconnecting:"Disconnecting from network",idle:"Ready to connect",searching:"Searching for network",inactive:"Network is not allowed",updating:"Performing update",unavailable:"Unavailable"};G_READMESSAGES=[];G_USAGETEXTS=[];G_firsttime=true;G_HOSTURL=window.location.href;G_VPN_MANAGEMENT_URL="";d.G_ENHCONNECTED="";d.uiRevision=function(){var f=d.G_REVISION;f=f.replace(/\$/g,"");f=f.replace("Revision: ","");f=f.replace(" ","");f=parseInt(f,10).toString(36).toUpperCase();d.uiRevision=f;return f};d.G_VERSION+="."+d.uiRevision();e.browser.chrome=e.browser.webkit&&!!window.chrome;e.browser.safari=e.browser.webkit&&!window.chrome;e.browser.opera=(navigator.appName=="Opera");e.browser.widget=function(){if(window.SmartMobility&&window.SmartMobility.getIFrame){e.browser.widget=true}else{e.browser.widget=false}};e.browser.widget();d.G_SETTINGURL="null";d.G_VPN_SETTINGURL="null";d.G_NOTI_FILESERVICE="";d.G_RETRY_LANDINGS=false;var c=false;d.initDeviceHandler=function(){checkMenuStates();setDisclosureIconTitle(jQuery("#toggle"));d.G_DISCOVERYHOME=$U.GetURLParameter("discover");e("#device_contact").html('<span class="thinking">searching...</span>');var l="http://",f=[(location.href.indexOf(".htm")>=0?location.origin:location.href)];if((d.SmartMobility&&d.Cocoa)||(d.picaso&&d.picaso.enhancedInstall)){if(f[0].indexOf("192.168.32.2")<0){f.push(l+"192.168.32.2")}}f.push(l+"127.0.0.1:4330");e(a).each(function(o,m){f.unshift(m)});if($U.hasStorage){var i=$U.getStorage("previous_device");if(typeof i=="string"&&i.length>0){f.unshift(i.replace("/discovery",""))}}var h=0,g=0;fnSearch=function(){h++;if(h<4){if(!c){beginSearch(f)}else{window.clearInterval(g)}}h--};d.AttachFlags.usage=true;d.AttachFlags.simlock=true;d.AttachFlags.condata=true;d.picasoUI.onEhnInstall=function(){onInstallHide()};d.picasoUI.onDevicePoll=function(o,m){if(o.id==m.id){renderAboutInfo(m)}};d.picasoUI.onConData=function(p,q){var s=null,o=null;if((p!==null&&p.condata.state.value==="connected")&&(d.landingUI&&d.landingUI.state===d.landingUI.states.download&&d.landingUI.downloadLaunched===false)){d.landingUI.state.onConnected(p,q)}else{s=(p?p.condata:null)}o=d.uiconst;if(!d.getDevice()){return false}if(!s){return true}var m=picaso.rxtx;if(m){m.push(s.rx.session.byterate,s.tx.session.byterate,s.rx.session.bytes,s.tx.session.bytes)}o.connectionTime.read=false;o.connectionTime.value=s.uptime.connection;o.connectionTime.lastRead=new Date();G_cd=s;try{if(G_cd&&G_cd.connection&&G_cd.connection.address&&G_cd.connection.address.ipv4){jQuery("#device-phone-ip-text1").html("IPv4 Address "+G_cd.connection.address.ipv4.ip)}}catch(r){}o.connectionTime.state=s.state.value;if(o.connectionTime.state=="dormant"){o.connectionTime.state="connected"}d.renderUIState(s);renderAboutInfo(p);updateCheckForUpdate();return true};d.SSTip=new InfoTip();d.signalstrengthToolTip=function(p){var o=d.SSTip,m=p.network.serving.roaming.type;o.NetworkHome=p.network.home.name;o.SignalStrength=(p.signal[0].type.indexOf("percent")>0)?""+p.signal[0].percent+"%  ("+p.signal[0].dbm+" dBm)":p.signal[0].dbm+" dBm";o.NetworkType=p.network.serving.type;o.IsRoaming=(m=="international"||m=="domestic"||m=="yes")?true:false;o.RoamingNetwork=p.network.serving.name;o.IsEncrypted=((p.network.serving.encryption||"").length>0);o.EncryptionType=p.network.serving.encryption||"";o.IpV4=p.connection.address.ipv4.ip;o.IpV6=p.connection.address.ipv6.ip;o.TxRate=p.tx.session.byterate;o.RxRate=p.rx.session.byterate;o.deviceState=p.state.description;return o.toString()};d.wasConnected=false;d.renderUIState=function(p){var r=false;var m=d.uiconst;var t=e("#btnConnect");var w=1;if(p&&!p.actions){p.actions="unknown"}var v=e("#aConnect");v.unbind("click");if(p&&p.actions.indexOf("activate")>=0){var s=p,u=function(){s.sendAction("activate");invokeURL("")};v.unbind("click");v.click(u);e("#connection-timer").hide();m.connectionTime.value="00:00:00:00";p.uptime.connection="00:00:00:00";e("#connection-timer").text("00:00:00:00");m.connectionTime.read=true;if(t.text()!="Activate"){invokeURL("")}t.text("Activate");t.attr("class","red");t.show();e(".tied2connect span").hide();e(".col4").removeClass("counter");e("#state-description").text(d.getStateDescription(p.state.value,p.state.substate.value,p.state.description));e("#state-description").show();e("#enter-sim-pin").hide();d.picasoUI.showNoNetworkState()}else{if(p&&p.actions.indexOf("connect")>=0){e(".tied2connect span").show();if(p.actions.indexOf("disconnect")>=0){var s=p,u=function(){s.sendAction("disconnect")};t.text("Disconnect");t.attr("title","Click to disconnect");t.attr("class","red");e(".col4").addClass("counter");e("#state-description").hide();e("#connection-timer, #btnConnect").show();v.unbind("click");v.click(u);var x=e(".connection-action .button.connect");if(x.hasClass("connect")){e(".connection-action .button.connect span").empty();e(".connection-action .button.connect span").append("Disconnect");x.addClass("disconnect");x.removeClass("connect")}var o=d.vzw.renderNetworkServingTypeMarkup(p.network.serving.type,p.network.serving.roaming.type);var q="";po=picaso.rxtx;if(po){e("#connection-timer").attr("title","Connected to "+p.network.serving.name+"\nSent: "+po.formatBytes(po.rates.totalTx)+"\nReceived: "+po.formatBytes(po.rates.totalRx))}else{e("#connection-timer").attr("title","Connected to "+p.network.serving.name)}}else{var s=p,u=function(){d.uiconst.connectionTime.value="00:00:00:00";p.uptime.connection="00:00:00:00";e("#connection-timer").text("00:00:00:00");s.sendAction("connect");$NOTI._timer=window.setTimeout($NOTI.kickoff,100)};r=true;v.unbind("click");v.click(u);e("#connection-timer").hide();m.connectionTime.value="00:00:00:00";p.uptime.connection="00:00:00:00";e("#connection-timer").text("00:00:00:00");m.connectionTime.read=true;t.text("Connect");t.attr("class","red");t.attr("title","Click to connect");t.show();e(".col4").removeClass("counter");e("#state-description").text(d.getStateDescription(p.state.value,p.state.substate.value,p.state.description));e("#state-description").show();var x=e(".connection-action .button.disconnect");if(x.hasClass("disconnect")){e(".connection-action .button.disconnect span").empty();e(".connection-action .button.disconnect span").append("Connect");x.addClass("connect");x.removeClass("disconnect")}}d.updnwtype(p.network);e("#signal_strength").show();e("#signal_strength").html('<a class="'+d.getBarsClass(p.signal)+'" href="#" style="cursor:default;">Signal Strength</a>');if(e("#signal_strength").is(":visible")){if(sigHoverWatcher.isHoveringOver()==false){jQuery("#signal_strength").attr("title",signalstrengthToolTip(p))}}e("#enter-sim-pin").hide();checkInternetConnection()}else{if(!(p&&p.state)||G_locking||G_fmUpdating){e("#connection-timer").hide();t.text("Connect");t.attr("title","Button is disabled");e("#connection-timer, #btnConnect").attr("class","gray");t.attr("class","disabled gray");e(".col4").removeClass("counter");if(G_fmUpdating){e("#state-description").text("Update In Progress. Do not unplug device.")}else{e("#state-description").text("Searching for device")}e("#state-description").show();d.picasoUI.showNoNetworkState();e(".tied2connect span").hide();w=3}else{e(".col4").removeClass("counter");e("#connection-timer").hide();t.attr("class","disabled gray");t.attr("title","Button is disabled");if(p&&p.state&&p.state.substate){e("#state-description").text(d.getStateDescription(p.state.value,p.state.substate.value,p.state.description))}e("#state-description").show();e(".tied2connect span").hide();if(d.pastLandingPageCheck&&!simpin_checkmainui()){w=2}else{if(!(p&&p.state)||((p.state.value=="unavailable")||(p.state.value=="searching")||(p.state.value=="not registered")||(p.state.value=="inactive")||(p.state.value=="lowpower")||(p.state.value=="unknown"))){d.picasoUI.showNoNetworkState()}}}}}if(r&&!d.wasConnected){d.baseTotalRX=0;d.baseTotalTX=0}d.wasConnected=r;if(G_locking){w=1;e("#state-description").text("Locking Device...");t.attr("class","disabled gray");t.attr("title","Button is disabled")}if(G_fmUpdating){w=1;e("#state-description").text("Update In Progress. Do not unplug device.");t.attr("class","disabled gray");t.attr("title","Button is disabled")}if(w==1){e("#no-device").hide();e("#enter-sim-pin").hide();if(!d.inLandingPage){e("#ConHdr").show()}else{e("#ConHdr").hide()}}else{if(w==2){e("#no-device").hide();e("#ConHdr").hide();if(!d.inLandingPage){e("#enter-sim-pin").show()}else{e("#enter-sim-pin").hide()}}else{e("#enter-sim-pin").hide();e("#ConHdr").hide();if(!d.inLandingPage||!d.getDevice()){if(!getDevice()){document.getElementById("no-device-state-description").innerHTML="Searching for USB Modem";e("#no-device-state-description+img").attr("title","Insert your USB Modem or disconnect your VPN to return to the Mobile Broadband Manager.");e("#no-device").show()}}else{e("#no-device").hide()}}}simpin_checksimicon(p);network_updateui(p,d);d.picasoUI.positionButtons()};d.picasoUI.onConDataError=function(o,m){if(m.condata._errorCount>d.uiconst.condataErrCount||((m.id!=m.condata.id)&&m.condata&&m.condata.id)){try{window.picaso.attachedDevices=[];c=false}catch(p){$U.log("caught exception in onConDataError handler.")}d.renderUIState(null);e(".col4").removeClass("counter");if(!G_locking&&!G_fmUpdating){e("#state-description").text("Searching for device")}window.setTimeout(function(){initDeviceHandler()},1000);updateCheckForUpdate();return false}return true};d.picasoUI.onDeviceRemoved=function(o){d.SmartMobility.DeviceIsPresent=false;if(o.id==d.THEDEVICE){c=false;d.THEDEVICE=""}jQuery("#device-phone-number-text1").text("---");jQuery("#device-phone-ip-text1").text("---");try{VZW.Modal.close()}catch(m){alertPopup(m)}if(d.landingUI&&(d.landingUI.state.name!=="deviceRemoved")){d.landingUI.previousState=d.landingUI.state;d.landingUI.state=d.landingUI.states.deviceRemoved;d.landingUI.state.render()}window.clearInterval(d.uiconst.connectionTimerHandle);d.uiconst.connectionTimerHandle=0;e("#connection-timer").hide();e("#btnConnect").text("Connect");e("#connection-timer, #btnConnect").attr("class","gray");e("#connection-timer").text("00:00:00:00");e(".col4").removeClass("counter");if(!G_locking&&!G_fmUpdating){e("#state-description").text("Searching for device")}e("#state-description").show();e("#lte_setting").html("");e("#sim_setting").html("");e("#gps_setting").html("");e("#enh_setting").html("");d.picasoUI.showNoNetworkState();$SIM.data="";d.renderUIState(null);$SMS.noDevice();$SMS.SmsBucketsArray=[];d.picasoUI.renderSMSSummary();if(!G_fmUpdating){hideMenu()}checkMenuStates();e("#usagetime").text("-- -- --");e("#ip4address").text("----");e("#ip6address").text("----");e("#about-panel .info-block .number-digits").html("");e("#about-panel .info-block .contact-info").html("");window.setTimeout(function(){initDeviceHandler()},1000)};d.picasoUI.settingsURL=null;d.picasoUI.vpnsettingsURL=null;d.picasoUI.reloadDeviceSettings=function(){var m=(new Date()).valueOf();d.picasoUI.settingsURL=d.G_SETTINGURL+"?parenturl="+G_HOSTURL+"&c=_"+m;if(window.ExternalXSLTSupport){var o=document.getElementById("ifsettings");if(o){if(o.getAttribute("exthref")!=d.picasoUI.settingsURL){o.setAttribute("exthref",d.picasoUI.settingsURL);window.ExternalXSLTSupport.loadXml("ifsettings",d.picasoUI.settingsURL)}}}else{e("#ifsettings").attr("src","");e("#ifsettings").empty();d.setTimeout(function(){e("#ifsettings").attr("src",d.picasoUI.settingsURL)},100)}};d.picasoUI.reloadVPNSettings=function(){var m=(new Date()).valueOf(),o=d.G_NOTI_FILESERVICE;d.picasoUI.vpnsettingsURL=d.G_VPN_SETTINGURL+"?parenturl="+G_HOSTURL+"&c=_"+m;if(o!=""){d.picasoUI.vpnsettingsURL+="&fservice="+o}if(window.ExternalXSLTSupport){var p=document.getElementById("ifvpn");if(p){if(p.getAttribute("exthref")!=d.picasoUI.vpnsettingsURL){p.setAttribute("exthref",d.picasoUI.vpnsettingsURL);window.ExternalXSLTSupport.loadXml("ifvpn",d.picasoUI.vpnsettingsURL)}}}else{e("#ifvpn").attr("src","");e("#ifvpn").empty();d.setTimeout(function(){e("#ifvpn").attr("src",d.picasoUI.vpnsettingsURL)},100)}};d.picasoUI.onDeviceDetached=function(m){d.G_RETRY_LANDINGS=true};d.THEDEVICE="";d.picasoUI.onDeviceAttached=function(s){if(s&&s._data){d.SmartMobility.DeviceIsPresent=true;if(d.THEDEVICE===""){d.THEDEVICE=s.id;d.uiconst.connectionTime.lastRead=new Date()}try{var u=e("discovery userservice uri:first",s._data).text();var p=$U.GetPortNumber(u);var m=$U.GetDomainName(u);if(p!==m){m+=(":"+p)}m="http://"+m;if(location.href.indexOf(":4330")<0&&location.href.indexOf(":4331")<0){m="http://127.0.0.1:4330"}m+="/js_src/picaso_latest.js";e("body").append('<div style="display:none" id="latestrev">'+m+"</div>");e("body").append('<script type="text/javascript" src="'+m+'"><\/script>')}catch(r){$U.log(r+" while checking for latest UI.")}}G_locking=false;if(!d.picaso.enhancedInstall){d.pastLandingPageCheck=false}d.baseTotalRX=0;d.baseTotalTX=0;e("#state-description").text("Starting Device...");e("#state-description").show();d.picasoUI.showNoNetworkState();c=true;var t=[],o=[],q=d.uiconst;if(!$U.hasStorage){a.push(s.services("discovery").uri)}else{$U.setStorage("previous_device",s.services("discovery").uri,365)}e("#lte_setting").html('<a href="#">4G LTE</a>');e("#sim_setting").html('<a href="#">SIM PIN</a>');if(getClientOSName()=="MacOS"){e("#gps_setting").html("")}if(window.picaso.enhancedInstall==false){e("#enh_setting").html('<a href="#">Install Enhanced App</a>')}if(s.userService(7)&&s.userService(7).uri){d.G_SETTINGURL=s.userService(7).uri;d.picasoUI.reloadDeviceSettings()}if(q.connectionTimerHandle===0){q.connectionTimerHandle=window.setInterval(function(){d.updateConnectionTimer()},1000)}q.connectionTime.read=false;q.connectionTime.value="";t.push("Found device: "+s.id+" ("+s.component+")");t.push("Location: "+s.services("discovery").uri);e(s.subcomponents).each(function(x,w){o.push(w)});if(o.length>0){t.push("Subcomponent(s): "+o.join("-"));o=[]}t.push("Version: "+s.version);e(s.uniqueIds).each(function(x,w){o.push(w.type)});if(o.length>0){t.push("Unique Ids: "+o.join(","))}o=[];if(s.platform){t.push("Manufacturer: "+s.platform.hw);t.push("Model: "+s.platform.model);t.push("OS Name: "+s.platform.ostype);t.push("OS Version: "+s.platform.osversion)}if(d.landingUI&&(d.landingUI.state.name==="deviceRemoved")){d.landingUI.state.onContinue();window.picasoUI.onLandingPageDisplay()}else{if(d.G_RETRY_LANDINGS==true&&d.picaso.enhancedInstall==false){d.G_RETRY_LANDINGS=false;if(d.landing){d.landing.init();initLandingPage()}}}};d.picasoUI.onHasSim=function(){$SIM.request("","","","",null);window.setTimeout(simpin_again,500)};d.picasoUI.onSimSuccess=function(m,o,p){if(m){if(m.id==e("p-answer>id:first",o).text()){checkMenuStates()}if(p){p()}}};d.picasoUI.onSimError=function(m){};d.picasoUI.onUsagePlan=function(q,p){if(typeof p.type=="string"){var m="#",o=p.type;if(o=="prepaid"){m="https://vz.smartmobility.activationnow.com/verizon/MyAccount/Prepaid"}else{if(o=="postpaid"){m="https://vz.smartmobility.activationnow.com/verizon/MyAccount/Postpaid"}else{if(o=="payasyougo"){m="https://vz.smartmobility.activationnow.com/verizon/MyAccount/PayAsYouGo"}else{m="https://vz.smartmobility.activationnow.com/verizon/MyAccount/"}}}e("#billinglink").attr("href",m);e("#billinglink").show()}};d.picasoUI.onLandingPageDisplay=function(){d.inLandingPage=true;(function(m,o){m.landingUI={};m.landingUI.restorMainUI=function(){jQuery("#btnClose").hide();jQuery("#ConHdr").addClass("header-border");jQuery("#ConnectUI").attr("style","display:block;");jQuery(".header-icons").attr("style","display:block;");jQuery("#hdrcol3").addClass("header-border");jQuery("#mbmusertools").attr("style","display:block;");jQuery("#CloseHdr").addClass("header-border");jQuery("#btnClose").show();jQuery("#btnClose").attr("style","margin-right:auto;");jQuery("#toggle").show();m.renderUIState(null)};m.landingUI.IsEULASigned=function(){var p=false;p=window.landing.wasEULAAccepted();return p};m.landingUI.previousState;m.landingUI.downloadLaunched=false;m.landingUI.states={EULA:{name:"EULA",render:function(){jQuery(".header-icons").attr("style","display:none;");jQuery("#ConnectUI").attr("style","display:none;");jQuery("#ConHdr").hide();jQuery("#CloseHdr").show();jQuery("#CloseHdr").removeClass("header-border");jQuery("#hdrcol3").removeClass("header-border");jQuery("#ConHdr").removeClass("header-border");jQuery("#mbmusertools").attr("style","display:none;");jQuery("#toggle").hide();jQuery("#btnClose").attr("style","margin-right:-550px;");jQuery("#selmgmnttxt").hide();jQuery("#instoption").hide();jQuery("#autoconprompt").hide();jQuery("#conoptdd").hide();jQuery("#landingContinue").hide();jQuery("#landings_panels").show();jQuery("#closingprompt").hide();jQuery("#eulapage").show();jQuery("#eulaagree").show();jQuery("#eulaagree").attr("style","margin-top:-70px; margin-right:37px;");var p="./i/content/rtf/synchronoss_eula.html";jQuery("#Textarea1").load(p,function(){var r=document.getElementById("msgdiv");var q=jQuery("#Textarea1").html();r.innerHTML=q})},onContinue:function(){jQuery("#eulaagree").prop("onclick",null);function q(){m.landingUI.state=m.landingUI.states.firstTime;m.landingUI.state.render();jQuery("#closingprompt").show()}function p(){jQuery("#eulaagree").hide();jQuery("#eulapage").hide();window.landing.RefreshInternalConfig(q)}window.landing.OnEULAAccepted(p)},onClose:function(){jQuery("#landings_panels").hide();m.inLandingPage=false;m.landingUI.restorMainUI();window.cancelLanding()},onConnected:function(p,q){}},firstTime:{name:"firstTime",render:function(){jQuery(".header-icons").attr("style","display:none;");jQuery("#ConnectUI").attr("style","display:none;");jQuery("#ConHdr").hide();jQuery("#CloseHdr").show();jQuery("#CloseHdr").removeClass("header-border");jQuery("#hdrcol3").removeClass("header-border");jQuery("#ConHdr").removeClass("header-border");jQuery("#mbmusertools").attr("style","display:none;");jQuery("#toggle").hide();jQuery("#btnClose").attr("style","margin-right:-550px;");jQuery("#landings_panels").show();jQuery("#selmgmnttxt").show();jQuery("#instoption").show();jQuery("#autoconprompt").show();jQuery("#conoptdd").show();jQuery("#landingContinue").show();jQuery("#savesettings").hide();jQuery("#lanSAVED").hide();var p=navigator.platform.toLowerCase();if(p.indexOf("win32")>=0){jQuery("#installbusin").show()}else{jQuery("#installbusin").hide()}},onContinue:function(){jQuery("#landingContinue").prop("onclick",null);function r(){var u=jQuery("#enhanced-app").is(":checked");var v=jQuery("#ippassradio").is(":checked");jQuery("#selmgmnttxt").hide();jQuery("#instoption").hide();jQuery("#autoconprompt").hide();jQuery("#autoconmsg").hide();jQuery("#conoptdd").hide();jQuery("#landingContinue").hide();jQuery("#installbusin").hide();if(u===false&&v===false){jQuery("#savesettings").show();jQuery("#lanSAVED").show();jQuery("#SAVEDTimer").click()}else{m.landingUI.state=m.landingUI.states.download;m.landingUI.state.render()}}function p(){window.landing.updateSettings(r)}function q(){window.landing.RefreshInternalConfig(p)}var t=false;var s=document.getElementById("connection");if(s.selectedIndex){t=true}window.landing.updateAutoconnectSetting(s.selectedIndex,q)},onClose:function(){var p=jQuery("#enhanced-app").is(":checked");jQuery("#landings_panels").hide();m.inLandingPage=false;window.landingUI.restorMainUI();window.cancelLanding();window.location.reload()},onConnected:function(p,q){}},nthTime:{name:"nthTime",render:function(){jQuery(".header-icons").attr("style","display:none;");jQuery("#ConnectUI").attr("style","display:none;");jQuery("#ConHdr").hide();jQuery("#CloseHdr").show();jQuery("#CloseHdr").removeClass("header-border");jQuery("#hdrcol3").removeClass("header-border");jQuery("#ConHdr").removeClass("header-border");jQuery("#mbmusertools").attr("style","display:none;");jQuery("#toggle").hide();jQuery("#btnClose").attr("style","margin-right:-550px;");jQuery("#landings_panels").show();jQuery("#selmgmnttxt").show();jQuery("#instoption").show();jQuery("#autoconprompt").hide();jQuery("#conoptdd").hide();jQuery("#landingContinue").show();jQuery("#savesettings").hide();jQuery("#lanSAVED").hide();var p=navigator.platform.toLowerCase();if(p.indexOf("win32")>=0){jQuery("#installbusin").show()}else{jQuery("#installbusin").hide()}},onContinue:function(){var p=jQuery("#enhanced-app").is(":checked");var q=jQuery("#ippassradio").is(":checked");jQuery("#selmgmnttxt").hide();jQuery("#instoption").hide();jQuery("#autoconprompt").hide();jQuery("#autoconmsg").hide();jQuery("#conoptdd").hide();jQuery("#landingContinue").hide();jQuery("#installbusin").hide();window.enableLanding();if(p===false&&q===false){jQuery("#savesettings").show();jQuery("#lanSAVED").show();jQuery("#SAVEDTimer").click()}else{m.landingUI.state=m.landingUI.states.download;m.landingUI.state.render()}},onConnected:function(p,q){},onClose:function(){jQuery("#landings_panels").hide();m.inLandingPage=false;m.landingUI.restorMainUI();window.cancelLanding();window.location.reload()}},download:{name:"download",render:function(){var p=jQuery("#aConnect");var q=getDevice();if(q){m.uiconst.connectionTime.value="00:00:00:00";q.condata.uptime.connection="00:00:00:00";jQuery("#connection-timer").text("00:00:00:00");q.condata.sendAction("connect");$NOTI._timer=window.setTimeout($NOTI.kickoff,100)}jQuery("#lanSAVED").show();var r=jQuery("#enhanced-app").is(":checked");var s=jQuery("#ippassradio").is(":checked");if(jQuery.browser.msie){if(r===true){jQuery("#enhdownloadIE").show()}else{if(s===true){jQuery("#ippassthruIEDownload").show()}}}else{if(jQuery.browser.safari){if(r===true){jQuery("#enhdownloadSafari").show()}else{if(s===true){jQuery("#ippassthruSafariDownload").show()}}}else{if(jQuery.browser.chrome||jQuery.browser.webkit){if(r===true){jQuery("#enhdownloadchrome").show()}else{if(s===true){jQuery("#ippassthruChromeDownload").show()}}}else{if(jQuery.browser.mozilla){if(r===true){jQuery("#enhdownloadMozilla").show()}else{if(s===true){jQuery("#ippassthruMozillaDownload").show()}}}else{if(jQuery.browser.opera){if(r===true){jQuery("#enhdownloadOpera").show()}else{if(s===true){jQuery("#ippassthruOperaDownload").show()}}}}}}}},onContinue:function(){jQuery("#landings_panels").hide();m.landingUI.restorMainUI()},onConnected:function(q,t){var s=jQuery("#enhanced-app").is(":checked");var u=jQuery("#ippassradio").is(":checked");if(s===true){var p;p=document.getElementById("hiddenDownloader");if(p===null){p=document.createElement("iframe");p.id="hiddenDownloader";p.style.visibility="hidden";document.body.appendChild(p)}p.src=getEnhancedInstallerURL()}if(u===true){var r=document.getElementById("hiddenDownloader2");if(r===null){r=document.createElement("iframe");r.id="hiddenDownloader2";r.style.visibility="hidden";document.body.appendChild(r)}r.src="https://vz.smartmobility.activationnow.com/vmbm/2/PANTECH/UML295/ULUT_FOR_UML295.msi"}m.landingUI.downloadLaunched=true},onClose:function(){jQuery("#landings_panels").hide();m.inLandingPage=false;m.landingUI.restorMainUI();window.cancelLanding();var p=location.href;if(window.Cocoa&&window.SmartMobility){window.Cocoa.LaunchURL(p)}else{window.open(p,"_blank")}onCloseMenu()}},deviceRemoved:{name:"deviceRemoved",render:function(){if(m.landingUI.previousState==m.landingUI.states.download){jQuery("#lanSAVED").hide();jQuery("#enhdownload").hide();jQuery("#SAVEDTimer").hide();jQuery("#btnDwnldEnhApp").hide();jQuery("#deviceRemoveSave").show();jQuery("#devRemClose").show()}else{jQuery("#selmgmnttxt").hide();jQuery("#instoption").hide();jQuery("#autoconprompt").hide();jQuery("#conoptdd").hide();jQuery("#landingContinue").hide();jQuery("#deviceRemoveIdle").show();jQuery("#devRemClose").show()}},onContinue:function(){jQuery("#deviceRemoveSave").hide();jQuery("#deviceRemoveIdle").hide();jQuery("#devRemClose").hide();jQuery("#devRemClose").hide();m.landingUI.restorMainUI()},onConnected:function(p,q){},onClose:function(){jQuery("#landings_panels").hide();m.inLandingPage=false;m.landingUI.restorMainUI();window.cancelLanding()}}};m.landingUI.state=m.landingUI.states[(m.landing.displayInitialPage()?"firstTime":"nthTime")]})(d,$);if(d.landingUI&&d.landingUI.state){d.landingUI.state.render()}};d.picasoUI.onGPSData=function(p){if(!p||!p.data){return}var m=getSelectedGpsObject();if(!getDevice()){return}try{if(m!=null&&(m.id!=p.id)){if(p!=null&&p.id!=getDevice().id){window.clearTimeout(p.timer);p.timer=0;return}}}catch(o){return}e("#gps_state").text("GPS State: "+e("gps>state>value:first",m).text()+" for "+e("p-answer>id:first",m).text());checkGpsList();renderGpsUI()};d.picasoUI.onSMSData=function(z){if(!z||!z.data){return}if($SIM.lockStatus()==="locked"){return}e("#messages").show();var y=[],C=z.data,x=z.messages(),t=z.messageArray(),o="";var A=$SMS.MyId;if(!A||(A=="")){A=G_PHONENUM}var m=false;G_USAGETEXTS=[];e(z.networkMessages).each(function(G,F){if((F.otherParty()==A)||(1+F.otherParty()==A)){G_USAGETEXTS.push(F)}});if($U.supportsLocalStorage){if(m===true&&G_USAGETEXTS.length>0){m=false;var w=100;while(w>0){var y="NetMsg"+(w--);$U.removeLsItem(y)}}var w=0;$U.setLsItem("NetMsgCount",G_USAGETEXTS.length);G_USAGETEXTS.each(function(G,F){$U.setLsItem("NetMsg"+ ++w,(F||""))})}if(!(t&&t.length>0)){$SMS.SmsBuckets=new SmsBucketHolder("");$SMS.SmsBucketsArray=[];d.picasoUI.renderSMSSummary();try{if(window.scrollBox1){window.scrollBox1.loadContent('<div class="ie_fix"></div>')}}catch(B){}jQuery("#message-display").hide();jQuery("#con_h2").hide();jQuery("#smsotherparty").empty();jQuery("#newmessage-display").show();jQuery("#outgoing-number-field").show();jQuery("#smslist").attr("currbkt","");jQuery("#newmessage-display").html("")}else{var w,v=[];for(w=0;w<t.length;w++){var r=t[w];var D=r.otherParty();var E=v[D];if(!E){E=new SmsBucketHolder(D);v[D]=E;if(o==""){o=D}}E.messages.push(r)}var s,u=[];for(s in v){u.push(v[s])}var p=[];p.push(v);if(jQuery.browser.msie&&jQuery.browser.version>8){u.sort(fnSortForRecent);p.sort(fnSortForRecent);v.sort(fnSortForRecent)}$SMS.SmsBucketsArray=v;d.picasoUI.renderSMSSummary();var q=e("#smslist").attr("currbkt");if(q==null||q==""){q=0}show_smsconversation(q,null,1)}};d.picasoUI.showNoNetworkState=function(){e(".col4").removeClass("counter");e("#signal_state").hide();e("#extendednw").attr("title","");e("#gps_state").hide();e("#signal_strength").hide();e("#network_tp").html('<a class="no-network" id="network_type" href="">No Network</a>');e(".tied2connect span").hide()};d.picasoUI.positionButtons=function(){var p=jQuery("#aConnect").width();if(p==0){window.setTimeout(d.picasoUI.positionButtons,100)}else{var m=jQuery("#launchVPN");if(m.is(":visible")){p+=m.width();p+=20}var o=120-(p/2);jQuery("#aConnect").attr("style","margin-left: "+o+"px;")}};d.picasoUI.renderSMSSummary=function(){var I=[],F=$SMS.SmsBuckets,m=0,H="";var B=$SMS.SmsBucketsArray,p=Number(e(".msg-icon-no").html()),s=0,G=0;var u=e("#smslist").attr("currbkt");var t=$SMS.m_newbucket;var v=null;I.push('<ul class="message-numbers" >');if(B){var P=0;m=0;for(H in B){var z=B[H];if(u==null||u==""){if(0==P){u=H;e("#smslist").attr("currbkt",u)}}else{if(z.messages&&z.otherParty&&(z.otherParty==u)){u=H;e("#smslist").attr("currbkt",u)}}if(z.messages){var D=z.messages[z.messages.length-1],K=D.getBody(),N=D.getSubject(),E,Q=false;if(K&&K.length>40){K=K.substr(0,40)+"..."}else{if(K){}else{K=""}}if(K.length<1){K=N}if(K&&K.length>40){K=K.substr(0,37)+"..."}else{if(K){}else{K=""}}m=0;for(E=0;E<z.messages.length;E++){var w=z.messages[E];if(!w){continue}if(!(w.isRead()||G_READMESSAGES[w.getId()])){Q=true;s++;m++}G++}if(D.getPriority()>0){if((H==u)||(z.otherParty==u)){I.push('<li class="urgent selected">')}else{I.push('<li class="urgent">')}}else{if((H==u)||(z.otherParty==u)){if(Q){var o=m;if(m>9){o="9+"}I.push('<li class="selected display-count"><div class="msg-number">'+o+"</div>")}else{I.push('<li class="selected">')}}else{if(Q){var o=m;if(m>9){o="9+"}I.push('<li class="display-count"><div class="msg-number">'+o+"</div>")}else{I.push("<li>")}}}var C="";if(z.otherParty.length>20){var A=0;while(A<z.otherParty.length){if(A>0){C+="<br />"}C+=z.otherParty.substr(A,20);A+=20}}else{C=z.otherParty}var J="";if(window.Cocoa&&window.SmartMobility){J="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"}I.push('<a class="message-numbers" onclick="return show_smsconversation(\''+H+'\', event);" href="#">'+J+C+'</a><a class="trash-msg" href="#" onclick="deleteBucket(\''+H+"');\">Trash</a>");I.push("</li>");P++}}}else{document.getElementById("smscount").innerHTML="";document.getElementById("sms-icon-count").innerHTML=""}if(s>p){playSound("sound/SMS.wav")}if(s==0){document.getElementById("smscount").innerHTML="";jQuery(".message-icon").hide();document.getElementById("sms_messages").innerHTML="&nbsp;&nbsp;&nbsp;Messages";document.getElementById("sms-icon-count").innerHTML=""}else{document.getElementById("sms_messages").innerHTML="Messages";if(s>9){document.getElementById("smscount").innerHTML='<div class="msg-number">9+</div>';document.getElementById("sms-icon-count").innerHTML='<div class="msg-icon-no">9+</div>'}else{document.getElementById("smscount").innerHTML='<div class="msg-number">'+s+"</div>";document.getElementById("sms-icon-count").innerHTML='<div class="msg-icon-no">'+s+"</div>"}var q="Messages Unread: "+s+"\nTotal: "+G;e("#messages").attr("title",q)}I.push("</ul>");I.push('<div class="ie_fix"></div>');if(e("#smslist").is(":visible")){if(window.scrollBox2){var M=$("smslist").innerHTML;var L=jQuery(M,"a .message-numbers").text().replace(/ /g,"");var y=jQuery(I.join(""),"a .message-numbers").text().replace(/ /g,"");var r=false;if((jQuery(I.join(""),"li .urgent").length!=jQuery(M,"li .urgent").length)||(jQuery(I.join(""),"li .display-count").length!=jQuery(M,"li .display-count").length)){r=true}try{window.scrollBox2.loadContent(I.join(""))}catch(O){alert(O)}}else{if(window.scrollBox2==null){try{window.scrollBox2=new MooScroll({selector:"#smslist"});window.scrollBox2.loadContent(I.join(""));window.scrollBox2.setSlider(0)}catch(O){alert(O)}}}}var u=e("#smslist").attr("currbkt");if(u!=null){e("#smslist").attr("currbkt",u)}};d.picasoUI.onOiManager=function(o){e("#vpn_setting").html('<a href="#">VPN</a>');if(o.userService(7)){d.G_VPN_SETTINGURL=o.userService(7).uri;e("#ifvpn").attr("src","");if(!e("#vpn_setting").is(":visible")){d.picasoUI.reloadVPNSettings()}}jQuery("#aConnect").attr("style","margin-left: 0;");jQuery("#launchVPN").show();d.picasoUI.positionButtons();var p=o.userService(24);if(p!==null){G_VPN_MANAGEMENT_URL=p.uri;var m=p.uri+"?action=status";d.ajax("GET",m,null,function(r){G_OIManager_Errors=0;var q=jQuery("vpnstatus>state>value",r).text();if(q==="Configured"){jQuery("#vpnButton").addClass("red");jQuery("#vpnButton").removeClass("disabled gray")}else{if(q==="NotConfigured"){jQuery("#vpnButton").addClass("disabled gray");jQuery("#vpnButton").removeClass("red")}else{if(q==="unknown"){jQuery("#vpnButton").addClass("disabled gray");jQuery("#vpnButton").removeClass("red")}else{if(q==="VpnLaunched"){}}}}},function(q){G_OIManager_Errors++;if(G_OIManager_Errors>10){jQuery("#launchVPN").hide();e("#vpn_setting").html("");d.picasoUI.positionButtons()}},false,5000)}};d.picasoUI.onManagementApiSuccess=function(s){if(window.SmartMobility&&(window.SmartMobility.IsEmbeddedIE||window.Cocoa)&&($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_FIRMWARE)){window.SmartMobility.AutoCloseWidgetOnNoDeviceWithFocus=30*60;window.SmartMobility.AutoCloseWidgetOnNoDeviceWithoutFocus=30*60;window.SmartMobility.MinimumManualLaunchRunningTime=30*60}if(s){var m=e("management>current>state>value",s).text(),q=e("management>current>state>description",s).text(),r=e("management>current>name",s).text(),C=e("management>current>time",s).text(),x=e("management>ready>deferred",s).text(),t=e("management>available>deferred",s).text(),w=(dateStringFromTimestamp(C)||""),v=(timeStringFromTimestamp(C)||""),B=e("management>current>description",s).text();var p=x.toLowerCase(),o=t.toLowerCase();if(q.length>0){e("#mgmt_status").text(q)}else{e("#mgmt_status").text(m)}e("#mgmt_src").text("Verizon Wireless");e("#mgmt_name").text(r);e("#mgmt_date").text(w);e("#mgmt_time").text(v);e("#mgmt_desc").text(B);if(o==="true"||p==="true"){$MANAGE.deferred=true}else{$MANAGE.deferred=false}if($SCOPECONFIG.checkAtstartup==false&&d.inLandingPage==false){if(m.indexOf("avai")>=0){if(o==="true"){if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE||$SCOPECONFIG.G_UPDATESTATUS>$SCOPECONFIG.UPDTNG_ENHAPP){$SCOPECONFIG.isUpdtating=false;if($SCOPECONFIG.isRoaming){e("#update_defer_notice").html('<p><font size="2"><b>Device Firmware Download Deferred.</b></font></p>')}else{e("#update_defer_notice").html('<p><font size="2"><b>Click Continue to Download Deferred Device Firmware.</b></font></p>')}EnableUpdateContinue(true);e("#update_status_notice").hide()}}else{$SCOPECONFIG.isUpdtating=true;e("#update_status_text").html('<p><font size="2"><b>New firmware available to be downloaded.</b></font></p>');e("#update_status_notice").hide();EnableUpdateContinue(false)}e("#updateIcon").show();jQuery("#updateIcon").attr("class","update-70");EnableUpdateProgress(false);$SCOPECONFIG.skipIdleCnt=3;$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_FIRMWARE}else{if(m.indexOf("check")>=0){e("#update_status_notice").hide();e("#updateIcon").show();jQuery("#updateIcon").attr("class","update-60");e("#update_status_text").html('<p><font size="2"><b>Checking for new firmware update.</b></font></p>');EnableUpdateProgress(false);$SCOPECONFIG.isUpdtating=true;EnableUpdateContinue(false);$SCOPECONFIG.skipIdleCnt=3;$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_FIRMWARE}else{if(m.indexOf("ready")>=0){if(p==="true"){if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE||$SCOPECONFIG.G_UPDATESTATUS>$SCOPECONFIG.UPDTNG_ENHAPP){$SCOPECONFIG.isUpdtating=false;if($SCOPECONFIG.isRoaming){e("#update_defer_notice").html('<p><font size="2"><b>Install Device Firmware Deferred.</b></font></p>')}else{e("#update_defer_notice").html('<p><font size="2"><b>Click Continue to Install Deferred Device Firmware.</b></font></p>')}EnableUpdateContinue(true);e("#update_status_notice").hide()}}else{$SCOPECONFIG.isUpdtating=true;e("#update_status_notice").hide();e("#update_status_text").html('<p><font size="2"><b>New firmware ready to be installed.</b></font></p>');EnableUpdateContinue(false)}e("#updateIcon").show();jQuery("#updateIcon").attr("class","update-90");EnableUpdateProgress(false);$SCOPECONFIG.skipIdleCnt=3;$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_FIRMWARE}else{if(m.indexOf("download")>=0){$MANAGE.deferred=false;$SCOPECONFIG.isUpdtating=true;notifyUpdating();e("#update_status_notice").hide();jQuery("#updateIcon").attr("class","update-80");e("#update_status_text").html('<p><font size="2"><b>Downloading firmware updates from Verizon Wireless.</b></font></p>');EnableUpdateProgress(true);EnableUpdateContinue(false);var A=e("management>current>state>percentage",s).text(),z=0;if(A&&A.length>0){z=A}else{z=0}e("#updt_progressnum").text(A+"% Complete");e("#updt_indicator").css("width",z+"%");$SCOPECONFIG.skipIdleCnt=3;$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_FIRMWARE}else{if(m.indexOf("install")>=0){$MANAGE.deferred=false;$SCOPECONFIG.isUpdtating=true;$SCOPECONFIG.skipIdleCnt=3;G_fmUpdating=true;G_fmDidUpdate=true;$SCOPECONFIG.deviceId=(getDevice()?getDevice().id:"");notifyUpdating();e("#lte_setting").html("");e("#sim_setting").html("");e("#gps_setting").html("");e("#enh_setting").html("");checkMenuStates();window.renderUIState(null);e("#update_status_notice").show();e("#updateIcon").show();jQuery("#updateIcon").attr("class","update-90");e("#update_status_text").html('<p><font size="2"><b>Updating firmware from Verizon Wireless.</b></font></p>');EnableUpdateProgress(false);EnableUpdateContinue(false);$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_FIRMWARE}else{var u=true;if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_FIRMWARE){if($SCOPECONFIG.skipIdleCnt<3){u=false;$SCOPECONFIG.skipIdleCnt++}}else{$SCOPECONFIG.skipIdleCnt=0}var y=(getDevice()?getDevice().id:"");if(($SCOPECONFIG.deviceId!="")&&($SCOPECONFIG.deviceId!=y)){u=true}if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE||$SCOPECONFIG.G_UPDATESTATUS>$SCOPECONFIG.UPDTNG_ENHAPP){if(m.indexOf("idle")>=0&&u==true){if(G_fmUpdating==true){G_fmDidUpdate=true;G_fmUpdating=false;e("#lte_setting").html('<a href="#">4G LTE</a>');e("#sim_setting").html('<a href="#">SIM PIN</a>');e("#gps_setting").html('<a href="#">GPS</a>');if(getClientOSName()=="MacOS"){e("#gps_setting").html("")}if(window.picaso.enhancedInstall==false){e("#enh_setting").html('<a href="#">Install Enhanced App</a>')}checkMenuStates();window.renderUIState(null);$SCOPECONFIG.deviceId=""}$SCOPECONFIG.isInstalling=false;$SCOPECONFIG.elapsedInstallTime=0;$SCOPECONFIG.isUpdtating=false;e("#update_status_text").html("");EnableUpdateContinue(true);e("#update_status_notice").hide();if($SCOPECONFIG.G_OTA_INST_TIMER!=0){window.clearInterval($SCOPECONFIG.G_OTA_INST_TIMER)}$SCOPECONFIG.G_OTA_INST_TIMER=0;if($U.hasStorage){$U.setStorage("update_elapsed_time",0,365)}EnableUpdateProgress(false);if($SCOPECONFIG.G_UPDATESTATUS>$SCOPECONFIG.UPDTNG_ENHAPP){if($U.hasStorage){$U.setStorage("update_status",$SCOPECONFIG.UPDTNG_IDLE,365)}$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_IDLE;$SCOPECONFIG.skipIdleCnt=0;if(G_fmDidUpdate){G_fmDidUpdate=false;window.location.reload()}}}if(m.indexOf("idle")>=0){EnableUpdateProgress(false);jQuery("#update_status_wait_icon").hide();jQuery("#update_status_text").html("")}e("#updateIcon").hide()}}}}}}}}if(window.SmartMobility&&(window.SmartMobility.IsEmbeddedIE||window.Cocoa)&&($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_FIRMWARE)){window.SmartMobility.AutoCloseWidgetOnNoDeviceWithFocus=30*60;window.SmartMobility.AutoCloseWidgetOnNoDeviceWithoutFocus=30*60;window.SmartMobility.MinimumManualLaunchRunningTime=30*60}};d.picasoUI.onManagementApiError=function(o){var m="Management Error: "+o.responseText;e("#mgmt_state").text(m)};d.picasoUI.onManagementApiFwSuccess=function(o){var m="Management FW Success. "};d.picasoUI.onManagementApiFwError=function(o){var m="Management FW Error: "+o.responseText};d.addToEnhCompList=function(m){var o=-1;if(m){e($SCOPECONFIG.G_ENHANCEDCOMPS).each(function(q,p){if(p&&p.component==m.component){if(e(m.subcomponents).length>0){e(m.subcomponents).each(function(r,s){e(p.subcomponents).each(function(t,u){if(u==s){o=q;return false}});if(o>0){return false}})}else{o=q;return false}}});if(o>-1){$SCOPECONFIG.G_ENHANCEDCOMPS.splice(o,1,m)}else{$SCOPECONFIG.G_ENHANCEDCOMPS.push(m)}}};d.picasoUI.onEnhDiscoveryResponse=function(o){e(o).each(function(q,p){if(p&&(p._userservices[19]||p.services("condata"))){d.addToEnhCompList(p)}});if($SCOPECONFIG.G_ENHUPDTNGCOMPID.length>0){var m=false;e($SCOPECONFIG.G_ENHANCEDCOMPS).each(function(p,q){if(q&&q.id==$SCOPECONFIG.G_ENHUPDTNGCOMPID){m=true;return false}});if(m==false){$SCOPECONFIG.G_ENHUPDTNGCOMPID="";if($SCOPECONFIG.G_UPDATESTATUS!=$SCOPECONFIG.UPDTNG_IDLE){PerformNextUpdate($SCOPECONFIG.G_UPDATESTATUS)}}}};d.picasoUI.DiscoverEnhanceComps=function(o){var m="";if(e($SCOPECONFIG.G_ENHANCEDCOMPS).length==0||$SCOPECONFIG.G_ENHUPDTNGCOMPID.length>0){e(o).each(function(q,p){if(p){e(p.knownComponents).each(function(s,r){if(r&&r.val.indexOf("hostmgr")>=0){m=r.discovery;return false}})}if(m.length>0){ajax("GET",m,"",function(r){d.parseDiscoveryResponse(r)},function(){},false,d.picaso.defaultAjaxTimeout);return false}})}};d.options1={colors:["#000000","#959595"],series:{shadowSize:0,lines:{lineWidth:1}},yaxis:{show:true,min:0,max:100},xaxis:{show:false,position:"bottom",min:0,max:0}};d.baseTotalTX=0;d.baseTotalRX=0;d.plot1={};d.picasoUI.onRxTxPulse=function(q,o){if(e("#connection-statistics").is(":visible")){var p=d.uiconst;if(p.connectionTime.state==="connected"){e("#stats-connection-timer").show();document.getElementById("stats-connection-timer-label").innerHTML="Duration";document.getElementById("stats-ipv4").innerHTML=G_cd.connection.address.ipv4.ip;document.getElementById("stats-ipv6").innerHTML=G_cd.connection.address.ipv6.ip;e("#stats-ipv4").show();e("#stats-ipv6").show()}else{document.getElementById("stats-connection-timer-label").innerHTML="Not Connected";e("#stats-connection-timer").hide();e("#stats-ipv4").hide();e("#stats-ipv6").hide()}var m=picaso.rxtx;if(m&&o){e("#txrate").text(m.formatRate(o.Tx));e("#maxtxrate").text(m.formatRate(o.maxTx));e("#totaltx").text(m.formatBytes(o.totalTx-d.baseTotalTX));e("#rxrate").text(m.formatRate(o.Rx));e("#maxrxrate").text(m.formatRate(o.maxRx));e("#totalrx").text(m.formatBytes(o.totalRx-d.baseTotalRX))}d.options1.xaxis.min=-q._nsize;d.options1.yaxis.max=Math.max(100,1.25*(Number(o.maxRx)>Number(o.maxTx)?Number(o.maxRx):Number(o.maxTx)));if(e("#usage_chart").length>0){d.plot1=e.plot(e("#usage_chart"),[q._rqueue,q._tqueue],options1)}e(".tickLabel").each(function(){var s=m.formatRateType(Number(d.options1.yaxis.max)),r=m.formatRateAs(e(this).text(),s);e(this).text(Number(r.substring(0,r.indexOf(" "))).toFixed(0))})}};d.onResetUsage=function(){d.baseTotalTX=picaso.rxtx.rates.totalTx;d.baseTotalRX=picaso.rxtx.rates.totalRx;picaso.rxtx.release();picaso.rxtx=new PicasoRxTx(100,d.picasoUI.onRxTxPulse);picaso.rxtx.init();picaso.rxtx.rates={maxRx:0,maxTx:0,Rx:0,Tx:0,totalRx:0,totalTx:0}};g=window.setInterval(fnSearch,7000);fnSearch()};d.autoScope=function(h){var g=[];var l=d.G_SCOPEPARAMS,i,f;if(l.hautoScopeTimer==0){window.clearTimeout(l.hautoScopeTimer)}l.hautoScopeTimer=0;l.autoScopeTimer=10;g["user-agent"]=navigator.userAgent;g["app-version"]=navigator.appVersion;g.platform=navigator.platform;i=navigator.platform.toLowerCase();if(i.indexOf("win32")>=0){i+="x86"}else{if(i.indexOf("macintel")>=0){i="mac32x86"}}f=navigator.appVersion.split(" ",1);if(f&&f.length>0){f=f[0]}else{f="0.0.0"}d.G_SCOPE=new $SCOPE.Scope(l.company,l.component,l.subcomponent,l.version,i,f,g,onScopeEvent)};d.hasUniqueIdsChanged=function(i,h){if(!i){return false}var f=false,m=i.uniqueIds,g=[];if(h.length>0){h.splice(0,h.length)}if(m&&m.length>0){var o,l;g.push(i.id);h.devcomponent=d.G_SCOPEPARAMS.devcomponent;h.devsubcomponent=d.G_SCOPEPARAMS.devsubcomponent;e(m).each(function(r,q){var s=q.type,p=q.val;g.push(s+p);h[s]=p});l=hex_md5(g.join(""));if(i.uidHash!=l){i.uidHash=l;f=true}}return f};d.onScopeEvent=function(f,h,l){var o={0:"SUCCESS",1:"INITIALIZING",2:"FETCHINGSCOPE",3:"VERIFYINGMNOTTV",4:"VERIFYINGMNO",5:"FETCHINGSTRUCTURE",6:"FETCHINGSTRUCTURECHANGED",7:"FETCHINGCONFIG",8:"FETCHINGCONFIGCHANGED",998:"FAILED",999:"DONE",5000:"NOSCOPE",5001:"NOMEMBERSHIP",5002:"NOSTRUCTURE",5003:"MISSINGCONFIG",5004:"NOCONFIG",5005:"NOURL",5006:"TIMEOUT",5007:"NOCONFIG2",5008:"NOCONFIG3"};switch(f){case $SCOPE.DONE:var g=d.G_SCOPEPARAMS,q=l.url.toLowerCase();if(g.hautoScopeTimer==0){window.clearTimeout(g.hautoScopeTimer)}g.hautoScopeTimer=0;if(q.indexOf(".js")>=0){if(l.config){var p=l.url+"&discover="+(d.G_DISCOVERYHOME.length>0?d.G_DISCOVERYHOME:"http://"+location.host),m=e("service:contains(AltRedirect) + name + revision + default",l.config),i=e("service:contains(AltRedirectTimeout) + name + revision + default",l.config);if(m.length>0){m=e(m).eq(0).text()}if(i.length>0){i=e(i).eq(0).text()}if(i>0&&(typeof m=="string"&&m.length>0)){window.setTimeout(function(){var r=location.protocol+"//"+location.host+m;r+="?discover="+(d.G_DISCOVERYHOME.length>0?d.G_DISCOVERYHOME:"http://"+location.host);d.safeLocationReplace(r,l)},i)}window.setTimeout(function(){var r=document.createElement("script");r.type="text/javascript";r.src=p;document.body.appendChild(r)},100)}}else{if(l.url.indexOf("/")==0){if(l.url.toLowerCase()==location.pathname.toLowerCase()){break}var q=location.protocol+"//"+location.host+l.url;q+="?discover="+(d.G_DISCOVERYHOME.length>0?d.G_DISCOVERYHOME:"http://"+location.host);d.safeLocationReplace(q,l)}else{if(l.url.toLowerCase().indexOf(location.host.toLowerCase())<0){d.safeLocationReplace(l.url+"?discover="+(d.G_DISCOVERYHOME.length>0?d.G_DISCOVERYHOME:"http://"+location.host),l)}}}if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_WDGT){PerformNextUpdate($SCOPECONFIG.G_UPDATESTATUS)}else{if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE&&$SCOPECONFIG.checkAtstartup){jQuery("#updateIcon").attr("class","update-100");jQuery("#updateIcon").hide();jQuery("#update_status_text").html("");jQuery("#updateIcon").attr("class","update");$SCOPECONFIG.checkAtstartup=false;EnableUpdateContinue(true)}}break;case $SCOPE.FAILED:var g=d.G_SCOPEPARAMS;if(g.hautoScopeTimer==0){window.clearTimeout(g.hautoScopeTimer)}if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_WDGT){PerformNextUpdate($SCOPECONFIG.G_UPDATESTATUS)}else{if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE&&$SCOPECONFIG.checkAtstartup){jQuery("#updateIcon").attr("class","update-100");jQuery("#updateIcon").hide();jQuery("#update_status_text").html("");jQuery("#updateIcon").attr("class","update");$SCOPECONFIG.checkAtstartup=false;EnableUpdateContinue(true)}}break;case $SCOPE.FETCHINGCONFIGCHANGED:if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_WDGT){jQuery("#updateIcon").attr("class","update-20");RefreshUpdateStatus('<p><font size="2"><b>Applying Verizon Mobile Broadband Update ..</b></font></p>')}else{if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE&&$SCOPECONFIG.checkAtstartup){jQuery("#updateIcon").attr("class","update-70");RefreshUpdateStatus('<p><font size="2"><b>Applying Verizon Mobile Broadband Update ..</b></font></p>')}}break;default:break}};d.safeLocationReplace=function(g,i){var f=(location.protocol+"//"+location.host+location.pathname).toLowerCase();if(g.toLowerCase().indexOf(f)==0){var h=g.split("?");h=h[0].toLowerCase();h=h.replace(f,"");if(h.length<=0||h[0]=="?"){return}}var l=i;d.ajax("GET",g,"",function(o,p,m){location.replace(g)},function(o,r,p){if($U.IsCrossDomain(g,location.href)){if(g==l.url){var m=$U.GetDomainName(l.url);q=l.url.replace(m,"127.0.0.1:4330");d.safeLocationReplace(q,l);return}var q="";if(l.url.indexOf("/")==0){q=location.protocol+"//127.0.0.1:4330"+l.url;d.safeLocationReplace(q,l)}else{q=l.url;d.safeLocationReplace(q,l)}}else{}},false,d.picaso.defaultAjaxTimeout)};d.pastLandingPageCheck=false;d.inLandingPage=false;d.initLandingPage=function(){if(!d.uiconst.enableLandingPageSupport){return}window.enableLanding=function(){window.setTimeout(function(){window.landing.updateSettings()},250)};window.cancelLanding=function(){};var g=function(){jQuery(".header-icons").attr("style","display:block;");jQuery("#ConnectUI").attr("style","display:block;");jQuery("#ConHdr").addClass("header-border");jQuery("#CloseHdr").addClass("header-border");jQuery("#CloseHdr").show();jQuery("#mbmusertools").attr("style","display:block;");jQuery("#hdrcol3").addClass("header-border");jQuery("#toggle").show();d.renderUIState(null)};var h=function(){jQuery(".header-icons").attr("style","display:none;");jQuery("#ConnectUI").attr("style","display:none;");jQuery("#CloseHdr").show();jQuery("#CloseHdr").removeClass("header-border");jQuery("#ConHdr").removeClass("header-border");jQuery("#mbmusertools").attr("style","display:none;");jQuery("#toggle").hide();jQuery("#no-device").hide();jQuery("#enter-sim-pin").hide();jQuery("#ConHdr").hide()};window.setTimeout(h,50);var f=function(){d.inLandingPage=true;try{if(!d.picaso.enhancedInstall){if(d.SmartMobility.IsEmbeddedIE||d.Cocoa){d.picaso.enhancedInstall=true}}}catch(o){}try{if(!d.picaso.enhancedInstall&&!d.recdOneDiscoveryResponse){window.setTimeout(f,2000);return}}catch(o){}if(d.picaso.enhancedInstall){d.inLandingPage=false;g();d.pastLandingPageCheck=true;return}var m=window.landing;if(m.pending){window.setTimeout(f,1000)}else{if(!m.perDevice()||!m.perPC()){var i=m.displayInitialPage();window.picasoUI.onLandingPageDisplay();window.SmartMobility.resize();d.pastLandingPageCheck=true}else{var i=m.displayInitialPage();d.inLandingPage=false;g();d.pastLandingPageCheck=true}}};window.setTimeout(f,2000)};d.initSMInterface=function(){if(!d.SmartMobility){d.SmartMobility={AutoCloseWidgetOnNoDeviceWithFocus:11,AutoCloseWidgetOnNoDeviceWithoutFocus:101,MinimumManualLaunchRunningTime:101,UserLaunched:false,DeviceIsPresent:false,IsEmbeddedIE:false,IsRoaming:false,Usage:0,RequestingAlternateConnection:false,DeviceIsConnected:false,resize:function(){},close:function(){},show:function(){}};if(!d.minimumSizes){d.minimumSizes=function(f,m){var l=e("#vzw_window").get(0),g=l?l.clientWidth:0,i=l?l.clientHeight:0;return(g+","+i)}}}if(!e.browser.msie){delete d.initSMInterface}};d.initDebug=function(){if(jQuery("#debug").length>0){window.setInterval(function(){var i,g=[];var f=function(p,l,m){var q;for(q in p){if(q==="attachedDevices"){continue}if(typeof p[q]==="object"){f(p[q],l,m+"."+q)}else{if(typeof p[q]!=="function"){l.push(m+"."+q+": "+p[q]+"  "+typeof p[q])}}}};g.push("ui rev.: "+d.uiRevision+" ("+parseInt(d.uiRevision,36)+")");g.push("Dimensions: "+minimumSizes());g.push("");try{g.push("");g.push("");g.push("")}catch(h){}g.push("");e("#dimensions").html(g.join("<br />"))},1000)}else{if(!jQuery.browser.msie){d.initDebug}}};d.updnwtype=function(h){var o="band ";var l=h.serving.type;var p=window.vzw.renderNetworkServingTypeMarkup(h.serving.type,h.serving.roaming.type);tc=d.techCode(h.serving.type);if(tc=="4"){o+="fourg";l="4G LTE"}else{if(tc=="3"){o+="threeg";l="3G"}else{if(tc=="3r"){o+="threeg";l="3G"}else{if(tc=="1x"){o+="onex"}else{if(tc=="gsm"){o+="gsm"}}}}}if(p.indexOf("Global")!=-1){o+=" roam globe"}if(e.inArray(h.serving.roaming.indicator,["0","2","65","67","68","69","70","72","73","74","75","76","77","79"])>=0){o+=" roam"}if(e.inArray(h.serving.roaming.indicator,["69","70","74","75","77","79"])>=0){o+=" globe"}if(e.inArray(h.serving.roaming.indicator,["65","66","67","69","71","72","74","78","79"])>=0){e("#signal_state").show();e("#extendednw").attr("title",h.serving.roaming.indicatordescription)}else{e("#signal_state").hide();e("#extendednw").attr("title","")}var f=d.uiconst;var m="neither";if(f.connectionTime.state==="connected"){var g=picaso.rxtx;var q=e("#network_tp").attr("totRx");var i=e("#network_tp").attr("totTx");m="neither";if(!q){q=0;i=0}if(g){if(Number(g.rates.totalRx)>Number(q)){if(Number(g.rates.totalTx)>Number(i)){m="both";e("#network_tp").attr("totRx",g.rates.totalRx);e("#network_tp").attr("totTx",g.rates.totalTx)}else{m="up";e("#network_tp").attr("totRx",g.rates.totalRx)}}else{if(g.rates.totalTx>i){m="down";e("#network_tp").attr("totTx",g.rates.totalTx)}}}}e("#network_tp").html('<a class="'+o+'" id="network_type" href="#" style="cursor:default;">4G</a><a class="dla '+m+'" href="#" style="cursor:default;">Download Activity</a>');e("#network_tp").show();jQuery("#network_tp").attr("title",l)};d.techCode=function(h){var l=(h||"").toLowerCase(),p,f=false,i="3",g=[{h:"802.16e",x:"4"},{h:"802.16f",x:"4"},{h:"lte",x:"4"},{h:"evdo rev 0",x:"3"},{h:"evdo rev a",x:"3"},{h:"evdo rev b",x:"3"},{h:"evdo ehrpd",x:"3"},{h:"umts",x:"3r"},{h:"hsdpa",x:"3"},{h:"hsupa",x:"3"},{h:"hsxpa",x:"3"},{h:"hspa+dc",x:"3"},{h:"hspa+",x:"3"},{h:"hspa",x:"3"},{h:"1xrtt",x:"1x"},{h:"gprs",x:"gsm"},{h:"edge",x:"gsm"},{h:"gsm",x:"gsm"},{h:"wcdma",x:"3"},{h:"cdma",x:"3"}];if(h==""){i=""}else{for(p in g){var m=g[p];if(l.indexOf(m.h)>-1){i=m.x;f=true;break}}}return i};d.getStateDescription=function(i,f,h){var g=G_STATEDESCRIPTIONS[i+"."+f];if(!g||g.length<=0){g=G_STATEDESCRIPTIONS[i]}if(!g||g.length<=0){g=h}return g};d.getBarsClass=function(f){return"strength-"+d.getBars(f)};d.getBars=function(m){var g=0,f=false,p=m,o=(p.length>0?p[0]:null);if(!o){return 0}if(o.bars!=""){var l=[{L:5,B:5},{L:4,B:4},{L:3,B:3},{L:2,B:2},{L:1,B:1},{L:-999,B:0}];e(l).each(function(r,q){if(!f){if(o.bars>=q.L){g=q.B;f=true}}})}else{if(o.percent!=""){var h=[{L:80,B:5},{L:60,B:4},{L:40,B:3},{L:20,B:2},{L:1,B:1},{L:-999,B:0}];e(h).each(function(r,q){if(!f){if(o.percent>=q.L){g=q.B;f=true}}})}else{if(o.dbm!=""){var i=[{L:-77,H:999,B:5},{L:-86,H:-77,B:4},{L:-92,H:-86,B:3},{L:-101,H:-92,B:2},{L:-109,H:-101,B:1},{L:-999,H:-109,B:0}];e(i).each(function(r,q){if(!f){if(o.dbm>=q.L&&o.dbm<q.H){g=q.B;f=true}}})}else{g=0}}}return g};d.updateConnectionTimer=function(){var f=d.uiconst,r=((new Date())-f.connectionTime.lastRead);if(f.connectionTime.state==="connected"&&r>30000){try{var l=getDevice();if(l!==null){picasoUI.onDeviceRemoved(l)}window.picaso.attachedDevices=[];c=false;renderUIState(null)}catch(t){}f.connectionTime.lastRead=new Date();return}if((f.connectionTime.read===true)&&(f.connectionTime.state==="connected")){var q=f.connectionTime.value.split(":"),o=Number(q[0]),i=Number(q[1]),g=Number(q[2]),u=Number(q[3]);if(!(isNaN(o)||isNaN(i)||isNaN(g)||isNaN(u))){u+=1;if(u>59){u-=60;g+=1}if(g>59){g-=60;i+=1}if(i>23){i-=24;o+=1}q[0]=o;q[1]=i;q[2]=g;q[3]=u;e(q).each(function(m,h){var s=h.toString();while(s.length<2){s=("0"+s)}q[m]=s});f.connectionTime.value=q.join(":")}}else{if(f.connectionTime.read===false){f.connectionTime.lastRead=new Date()}f.connectionTime.read=true}var p=d.formatConnectionTime(f.connectionTime.value);document.getElementById("connection-timer").innerHTML=p;document.getElementById("stats-connection-timer").innerHTML=p};d.formatConnectionTime=function(h){var f=h,g=h.split(":");if(typeof g==="object"&&g.length>0){if(g.length>=4){var i=[];if(g[0]>0){i.push(g[0])}i.push(g[1]);i.push(g[2]);i.push(g[3]);f=i.join(":")}}return f};d.minimumSizes=function(f,p){var m=e("#vzw_window").get(0),g=m?m.clientWidth:0,i=m?m.clientHeight:0;if(jQuery(".mbm-content").is(":visible")==true){i=703}var l=jQuery("#vzw_window").attr("class");if(l!="nsmbm"){jQuery("#vzw_window").attr("class","nsmbm")}return(g+","+i)};function b(f,i){var h=f.replace(/\D/g,"");var g=0;return i.replace(/X/g,function(){return h.charAt(g++)})}d.renderAboutInfo=function(i){if(i){var h=[];if(d.hasUniqueIdsChanged(i,h)){for(id in i.uniqueIds){document.getElementById("fullnameandversion").innerHTML="Verizon Mobile Broadband Manager Version "+G_VERSION;if(i.uniqueIds[id].type=="Phone Number"){document.getElementById("aboutPhoneNo").innerHTML=i.uniqueIds[id].val;d.G_PHONENUM=i.uniqueIds[id].val;try{jQuery("#device-phone-number-text1").text(b(d.G_PHONENUM,((d.G_PHONENUM.length==11)?"X-XXX-XXX-XXXX":"XXX-XXX-XXXX")))}catch(l){}}if(i.uniqueIds[id].type=="IccId"){document.getElementById("aboutIccId").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="Hardware_Id"){document.getElementById("aboutHardware").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="MIN"){document.getElementById("aboutMin").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="ERI"){document.getElementById("aboutERIVersion").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="MEID"){document.getElementById("aboutMeid").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="IMSI"){document.getElementById("aboutImsi").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="HOMESID"){document.getElementById("aboutHomesid").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="IMEI"){document.getElementById("aboutIMEI").innerHTML=i.uniqueIds[id].val}if(i.uniqueIds[id].type=="MCC"){document.getElementById("aboutMCC").innerHTML=i.uniqueIds[id].val}}document.getElementById("aboutFirmware").innerHTML=i.platform.osversion;document.getElementById("aboutMakeModel").innerHTML=i.platform.hw+" "+i.platform.model;for(services in i._customservices){if(i._customservices[services].description=="Device Terminal"){d.G_TERMINALURL=i._customservices[services].uri}}if(i._userservices[15]){d.G_DIAGNOSTICLOGURL=i._userservices[15].uri}if(i._userservices[17]){var f="/sh/session_history.html?d="+i._userservices[17].uri;d.G_SESSIONHISTORYURL=f;e("#sessionhistory").attr("href","#")}}if(!i.condata){return}document.getElementById("aboutRoaming").innerHTML=i.condata.network.serving.roaming.type;document.getElementById("aboutPRLVersion").innerHTML=i.condata.network.serving.roaming.roaminglistversion;document.getElementById("aboutCurrentNetwork").innerHTML=i.condata.network.serving.name+" "+i.condata.network.serving.id;for(signal in i.condata.signal){if(i.condata.signal[signal].type=="signal strength"){document.getElementById("aboutRssi").innerHTML=i.condata.signal[signal].dbm+" dBm"}if(i.condata.signal[signal].type=="signal to noise ratio"){document.getElementById("aboutSINR").innerHTML=i.condata.signal[signal].db+" db"}}document.getElementById("aboutNetwork").innerHTML=d.vzw.renderNetworkServingTypeMarkup(i.condata.network.serving.type,i.condata.network.serving.roaming.type);document.getElementById("aboutNetworkType").innerHTML=i.condata.network.serving.type;document.getElementById("aboutCap").innerHTML="CDMA, GSM, WCDMA, LTE, HDR";if(i._services.messaging.uri.length){document.getElementById("aboutCap").innerHTML+=", SMS"}if(i._services.gps.uri.length){document.getElementById("aboutCap").innerHTML+=", GPS"}var g=$SIM.lockStatus();if(g=="no sim"){document.getElementById("aboutSIM").innerHTML="No SIM"}else{if(g=="unavailable"){document.getElementById("aboutSIM").innerHTML="Unavailable"}else{document.getElementById("aboutSIM").innerHTML="Ready"}}for(additionalid in i.condata.network.serving.additionalid){if(i.condata.network.serving.additionalid[additionalid].type=="RPLMN"){var m=i.condata.network.serving.additionalid[additionalid].text;document.getElementById("aboutMCC").innerHTML=m.substr(0,3)}}}}})(window,jQuery);function pingTest(){ping={img:null,imgPreload:null,timer:null,init:function(){var a=new Date();var b=a.getTime();var c=ping.img+"?time="+b;ping.imgPreload=new Image();ping.imgPreload.onload=function(){clearTimeout(ping.timer);ping.timer=null;jQuery(".ping_int").removeClass("disabled");jQuery(".ping_int span").removeClass("gray");jQuery(".ping_int span").addClass("red");jQuery(".ping_int").attr("title","click to view My Verizon page");jQuery(".ping_int").unbind("click");jQuery(".ping_int").bind("click",function(){invokeURL_Verizon("http://www.verizonwireless.com/b2c/index.html?tab=myaccount&lid=//global//my+account")});jQuery("#enh-app-install").attr("title","Click to download Enhanced App");jQuery("#enh-app-install").unbind();jQuery("#enh-app-install").bind("click",function(){onInstallEnhApp()});jQuery("#nmeainstall").attr("title","Click to download nmea install");jQuery("#nmeainstall").unbind();jQuery("#nmeainstall").bind("click",function(){onNmeaInstall()})};ping.imgPreload.src=c;ping.timer=setTimeout("ping.fail_to_ping()",60000)},fail_to_ping:function(){clearTimeout(ping.timer);ping.timer=null;ping.imgPreload=null;jQuery(".ping_int").addClass("disabled");jQuery(".ping_int span").addClass("gray");jQuery(".ping_int span").removeClass("red");jQuery(".ping_int").attr("title","A data connection is required to launch My Verizon");jQuery("#enh-app-install").attr("title","A data connection is required to install Enhanced App");jQuery("#nmeainstall").attr("title","A data connection is required to install NMEA");jQuery(".ping_int").unbind("click")}};ping.img="http://www.google.co.uk/images/logos/ps_logo2.png";ping.init()}function checkInternetConnection(){if((jQuery("#nmeainstall").is(":visible")==true)||(jQuery("#enh_app_scrn").is(":visible")==true)||(jQuery("#myverizon").is(":visible")==true)||(VZW.Modal.modal&&(VZW.Modal.modal.id=="network-usage"))||(VZW.Modal.modal&&(VZW.Modal.modal.id=="mainnetwork_usage"))){var a=getDevice();var b=false;if(a&&a.condata&&a.condata.actions&&(a.condata.actions.indexOf("disconnect")>=0)){b=true}else{if(window.picaso.enhancedInstall){CheckforEnhCompConnection()}}if(b||window.G_ENHCONNECTED.length){jQuery(".ping_int").removeClass("disabled");jQuery(".ping_int span").removeClass("gray");jQuery(".ping_int span").addClass("red");jQuery(".ping_int").attr("title","click to view My Verizon page");jQuery(".ping_int").unbind("click");jQuery(".ping_int").bind("click",function(){invokeURL_Verizon("http://www.verizonwireless.com/b2c/index.html?tab=myaccount&lid=//global//my+account")});jQuery("#enh-app-install").attr("title","Click to download Enhanced App");jQuery("#enh-app-install").unbind("click");jQuery("#enh-app-install").bind("click",function(){onInstallEnhApp()});jQuery("#nmeainstall").attr("title","Click to download nmea install");jQuery("#nmeainstall").unbind();jQuery("#nmeainstall").bind("click",function(){onNmeaInstall()})}else{jQuery(".ping_int").addClass("disabled");jQuery(".ping_int span").addClass("gray");jQuery(".ping_int span").removeClass("red");jQuery(".ping_int").attr("title","You need data connection to view this page");jQuery("#nmeainstall").attr("title","A data connection is required to install NMEA");jQuery(".ping_int").unbind("click")}}return b}function dateStringFromTimestamp(a){var b="";if(typeof a=="string"&&a.length>=20){var c=new Date();c.setUTCFullYear(a.substr(0,4),a.substr(5,2)-1,a.substr(8,2));b=c.toLocaleDateString()}return b}function timeStringFromTimestamp(a){var b="";if(typeof a=="string"&&a.length>=20){var c=new Date();c.setUTCHours(a.substr(11,2),a.substr(14,2),a.substr(17,2),0);b=c.toLocaleTimeString()}return b}function refreshUsage(b){var a=b;if((VZW.Modal.modal&&(VZW.Modal.modal.id=="network-usage"))||(VZW.Modal.modal&&(VZW.Modal.modal.id=="mainnetwork_usage"))){window.setTimeout(function(){onUsage(a,3)},2000)}}function onUsage(g,b){if(!(b!=null&&(b==1||b==2||b==3))){return false}if(b==1||b==2){var a="Please wait while we retrieve usage information from the network.";jQuery("#mainnetworkUsage").html(a);jQuery("#networkusage").html(a)}var f=jQuery("#menu_list").is(":visible");window.setTimeout(function(){refreshUsage(g)},1000);checkInternetConnection();$U.showpanel();if(g=="mainnetworkUsage"){window.setTimeout(function(){if(window.SmartMobility.resize&&(window.SmartMobility.onAjax||window.Cocoa)){if(!f){jQuery("#mainnetwork_usage").css("top","77px")}}},200)}if(!(usage&&usage.result&&usage.result.GetAcctDataUsg)){document.getElementById(g).innerHTML=""}if(b!=3){window.setTimeout(sendUsageText,500)}if(usage&&usage.result&&usage.result.GetAcctDataUsg){G_USAGETEXTS=[]}if(G_firsttime){G_USAGETEXTS=[];G_firsttime=false}if(G_USAGETEXTS.length>0){if(G_USAGETEXTS.length>2){for(n=0;n<G_USAGETEXTS.length-2;n++){var e=G_USAGETEXTS[n],c=G_USAGETEXTS[n].getId(),d=G_USAGETEXTS[n].folderType();e.deleteMsg(c,d,null,function(h,i){$U.log("Failed to delete usage texts: "+c+"  "+h.responseText)})}}document.getElementById(g).innerHTML="";for(n=0;n<G_USAGETEXTS.length;n++){document.getElementById(g).innerHTML+=G_USAGETEXTS[n].getBody();document.getElementById(g).innerHTML+="<br><br>";if(n==1){break}}}else{if(!usage||!usage.result||usage.result.GetAcctDataUsg==null){document.getElementById(g).innerHTML="Please wait while we retrieve usage information from the network."}}}function getOr(a,b){if(a==null||a==""){return b}return a}function getOrN(a,b){if(a==null||a==""){return false}return true}function ZtoDate(c){var a=new Date();try{if(c.length>=8){a.setUTCFullYear(c.substr(0,4),c.substr(5,2)-1,c.substr(8,2))}else{a.setURCFullYear(1970,1,1)}}catch(b){}return a}function ZtoDateTime(c){var a=new Date();try{if(c.length>=15){a.setUTCFullYear(c.substr(0,4),c.substr(5,2)-1,c.substr(8,2));a.setUTCHours(c.substr(11,2),c.substr(14,2),0)}else{a.setURCFullYear(1970,1,1)}}catch(b){}return a}function formatDateUsage(i){var f="unavailable";try{if(i.getFullYear()<=1970){return f}var c=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),a=i.getDate(),h=i.getMonth(),b=i.getFullYear();return c[h]+" "+a+", of "+b}catch(g){}return f}function usageDaysRemaining(f){try{var g=new Date(),b=Math.round((f-g)/(1000*60*60*24)),a=""+b.toFixed(0);a+=" days remaining";return a}catch(c){}return""}function usageDaysComplete(f){try{var g=usageDaysRemaining(f),b=g.split(" "),a=Math.min(100,(Math.max(30,b[0])-Number(b[0]))/30*100)}catch(c){a=0}return a}function AmPm(a){var c=a;try{var d=a.split(":"),b="AM";if(Number(d[0])>=12&&Number(d[0])<24){if(Number(d[0])>12){d[0]=Number(d[0])-12}b="PM";c=lpad(1,"0",d[0])+":"+lpad(2,"0",d[1])+b}else{if(d[0]>=24){d[0]=Number(d[0])-12}else{if(Number(d[0])==0){d[0]="12"}}c=lpad(1,"0",d[0])+":"+lpad(2,"0",d[1])+b}}catch(e){}return c}function usageAsOf(g){var c=new Date(),b="unavailable";try{if(g.getFullYear()<=1970){return b}var a=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];curr_date=g.getDate(),curr_month=g.getMonth(),curr_year=g.getFullYear();if(c.getFullYear()==curr_year&&c.getMonth()==curr_month&&c.getDate()==curr_date){b="as of Today at ";b+=AmPm(g.getHours()+":"+lpad(2,"0",g.getMinutes()))}else{b="as of "+h[g.getDay()]+", "+a[curr_month]+" "+curr_date+" at ";b+=AmPm(g.getHours()+":"+lpad(2,"0",g.getMinutes()))}return b}catch(f){}return b}function usageSentSMS(a){try{if(a.totalGlobShrMsgSent>0){return""+a.totalShrMsgSent+" Domestic, "+a.totalGlobShrMsgSent+" International"}return""+a.totalShrMsgSent+" Domestic"}catch(b){}return""}function usagerecdSMS(a){try{if(a.lineGlobMsgRcvd>0){return""+a.totalShrMsgRcvd+" Domestic, "+a.lineGlobMsgRcvd+" International"}return""+a.totalShrMsgRcvd+" Domestic"}catch(b){}return""}function sendUsageText(){var b=getDevice();if(!b||!b.condata){return}if(b.condata.state.value in ["searching","inactive","updating","unavailable"]){window.setTimeout(sendUsageText,1000);return}var a=function(){var c="POUND_DATA",h=[],f=new Date(),i="900080004008",e=$SMS.MyId,g;if(!e){e=window.G_PHONENUM}if(e==""||e=="undefined"){return}g=new MessageT(function(){return true},function(){return i},function(){return f},(G_SMSID--),i,e,c,"","","","outbox",0);G_BCLEARUSAGETEXTS=true;g.send(null,function(){});var d=g.folderType();g.deleteMsg(id,d,null,function(l,m){$U.log("Failed to delete usage texts2: "+id+"  "+l.responseText)})};window.gfnAcctData=function(){getUsageData("sncr",window.G_PHONENUM,"accountInfo","poundData",getOr(usage.getUnique().imsi,usage.getUnique().meid),(getOrN(usage.getUnique().imsi,usage.getUnique().meid)?"IMSI":"MEID"),function(e){try{if(e&&e.GetAcctDataUsg){var d=e.GetAcctDataUsg;if(d.length<3||d[1].ErrInfo.errCd!=0){a()}else{d=d[2].UsgInfo;var f=[];if(typeof d.planType=="string"){try{f.push('<div class="usageRowGradient">');f.push('<p><strong>Usage Cycle</strong> <span class="usageDays">'+usageDaysRemaining(ZtoDate(d.cycEndDt))+"</span>");f.push('  <div class="meter">');f.push('    <div id="usagebytesbilling" class="meter-inner" oldtitle=" " aria-describedby="ui-tooltip-11">');f.push('      <div style="width: '+usageDaysComplete(ZtoDate(d.cycEndDt))+'%;" class="meter-inner-inner" id="usage-meter-billing"><div class="overage"></div></div>');f.push("    </div>");f.push("  </div>");f.push('  <span class="cycleEnds">Cycle ends '+formatDateUsage(ZtoDate(d.cycEndDt))+"</span>");f.push("</p>");f.push('<div class="clear"></div>');f.push("</div>");f.push('<div class="usageRowGradient usageRow">');f.push('  <p><strong>Estimated Messaging Usage</strong> <span class="usageDays">'+usageAsOf(ZtoDateTime(d.msgUsgTS))+"</span></p>");f.push('  <ul class="usageList">');f.push("      <li><span>Sent TXT Message:</span>"+usageSentSMS(d)+"</li>");f.push("      <li><span>Received TXT Messages:</span>"+usagerecdSMS(d)+"</li>");f.push("  </ul>");f.push("</div>");f.push('<div class="usageRowGradient usageRow">');f.push('  <p><strong>Estimated Data Usage</strong> <span class="usageDays">'+usageAsOf(ZtoDateTime(d.usgTS))+"</span></p>");f.push('      <div class="meter">');f.push('          <div id="usagebytesbilling" class="meter-inner" oldtitle=" " aria-describedby="ui-tooltip-11">');f.push('              <div style="width: '+Math.min(100,((d.allowance!="unlimited")?(100*d.totalShrUsg/d.allowance):0))+'%;" class="meter-inner-inner" id="usage-meter-billing"><div class="overage"></div></div>');f.push("          </div>");f.push("      </div>");f.push("    <span>"+(""+d.totalShrUsg)+" "+d.unit+" of "+d.allowance+" "+d.unit+"</span>");f.push("</div>");jQuery("#mainnetworkUsage").html(f.join(""));jQuery("#networkusage").html(f.join(""));jQuery("#network-usage .modal-scroll").css("overflow","hidden")}catch(g){}}else{a()}}}else{a()}}catch(c){}},function(){a()})};window.gfnAcctData()}function turnOffSmsSendButton(){jQuery("#btnSendNewMessage").unbind("click");jQuery("#btnSendNewMessage").bind("click",(function(){doNothing()}));jQuery("#btnSendNewMessage").addClass("disabled");jQuery("#btnSendNewMessage").html('<span class="gray">Initializing</span>')}function turnOnSmsSendButton(){jQuery("#btnSendNewMessage").unbind("click");jQuery("#btnSendNewMessage").bind("click",(function(){sendNewMessage()}));jQuery("#btnSendNewMessage").removeClass("disabled");jQuery("#btnSendNewMessage").html('<span class="red">Send</span>')}function launchSms(){if(jQuery("#sms-menu").hasClass("disabled")){return false}jQuery("#message_list").show();jQuery("#message-display").show();jQuery("#con_h2").show();jQuery("#outgoing-number-field").hide();jQuery("#newmessage-display").hide();fld_maxLength("message-input","outgoing-number",160,70,true);if(window.scrollBox1==null){$SMS.refresh()}jQuery("#myverizon").hide();jQuery("#networks_list").hide();jQuery("#help_scrn").hide();jQuery("#settings_scrn").hide()}function onNewMessage(){jQuery("#message-display").hide();jQuery("#con_h2").hide();jQuery("#newmessage-display").show();jQuery("#newmessage-display").html("");jQuery("#outgoing-number-field").show();fld_maxLength("message-input","outgoing-number",160,70,true)}function onCleanNewMessage(){jQuery("#message-input").eq(0).val("");jQuery("#outgoing-number").eq(0).val("");jQuery("#newmessage-display").html("");fld_maxLength("message-input","outgoing-number",160,70,true)}function fld_maxLength(c,g,m,l,e){var d=function(){return h()},i=function(){return true},h=function(){var p=jQuery("#"+c),z=0,t=p.val(),v=true,A=m,r=0,C=false,B=jQuery("#"+g);fTo=B.val();if(jQuery("#con_h2").is(":visible")){B=jQuery("#smsotherparty");fTo=document.getElementById("smsotherparty").innerHTML}var o=false;if(/[\D]/.test(fTo)){var q=fTo.replace(";","");if(/[\D]/.test(q)){o=true}}if(((typeof t==="string")&&(t.length>0)&&(t!=messagewatermark))||((typeof fTo==="string")&&(fTo.length>0)&&(o))){var y=false;for(y=0;y<t.length;y++){r++;if(t.charCodeAt(y)>255){C=true;A=l;z+=2}else{z++}}if((typeof fTo==="string")&&(fTo.length>0)&&(o)){var y=false;var x=fTo.split(";");for(k=0;k<x.length;k++){var w=x[k];if(!w.match(/[\D]/)||w.length<1){continue}for(y=0;y<w.length;y++){r++;if(w.charCodeAt(y)>255){C=true;A=l;z+=2}else{z++}}z++}}if(z>=(m)||(C?(z>=(l)):false)){var s=t.substr(0,C?l:m);v=false;if(z>m||C?z>l:false){window.setTimeout(function(){p.val(s)},100)}}}if(C){z=r}jQuery("#charsRemaining").html(""+Math.min(z,A)+"/"+A);return v},f=function(){h()};var b=document.getElementById(c);b.onfocus=i;b.onkeyup=f;b.onblur=d;if(jQuery("#"+g).is(":visible")){var a=document.getElementById(g);a.onkeyup=f;a.onblur=d}if(e!=null){h()}}function sendSuccess(){if($SMS.m_newbucket!=""){window.setTimeout(function(){jQuery("#smslist").attr("currbkt",$SMS.m_newbucket)},100)}}function sendFailure(a){alertPopup("Could not send message at this time please retry at a later time ("+(a?a.status:"0")+")");return true}function getCumulativeOffset(c){var b,a;b=a=hgt=0;if(c){hgt=c.clientHeight}if(c&&c.offsetParent){do{b+=c.offsetLeft;a+=c.offsetTop}while(c=c.offsetParent)}return{x:b,y:a,h:hgt}}function sendNewMessage(){var q=jQuery("#message-input").eq(0).val();var d=new Date();var h=jQuery("#outgoing-number").eq(0).val();var p=jQuery("#smsotherparty").eq(0).val();var o="";var m=[];if(!p){p=$SMS.MyId}if(!p){p=window.G_PHONENUM}var b=true;if(jQuery("#message-display").is(":visible")){b=false}if(b||((q==="Enter your message"||!h))){if(!h&&b){var g=document.getElementById("outgoing-number"),s=(getCumulativeOffset(g)||{x:0,y:0});document.getElementById("tofieldmt").style.top=(s.y+s.h+30)+"px";document.getElementById("tofieldmt").style.left=s.x+"px";jQuery("#tofieldmt").show();window.setTimeout(function(){jQuery("#tofieldmt").hide()},5000);return}if(q==="Enter your message"){g=document.getElementById("message-input");s=(getCumulativeOffset(g)||{x:0,y:0});document.getElementById("msgfieldmt").style.top=(s.y-50)+"px";document.getElementById("msgfieldmt").style.left=s.x+"px";jQuery("#msgfieldmt").show();window.setTimeout(function(){jQuery("#msgfieldmt").hide()},5000);return}}if(!h){h=jQuery("#smsotherparty").html()}var l=jQuery("#urgent");if(l&&jQuery(l).is(":checked")){o="1"}var c=new MessageT(function(){return true},function(){return h},function(){return d},(this.G_SMSID--),h,p,q,"","","","outbox",o);$SMS.m_newbucket="";if(typeof q=="string"&&q.length>0&&h&&h.length>0&&p&&p.length>0){if(b){var t=document.getElementById("newmessage-display");var r=t.innerHTML;$SMS.m_newbucket=h;appendSmsMessage(c,m,true,true);jQuery("#message-display").show();if(window.scrollBox1==null){window.scrollBox1=new MooScroll({selector:"#message-display"})}window.scrollBox1.loadContent(m.join("")+'<div class="ie_fix"></div>');window.scrollBox1.setSlider(9000)}else{appendSmsMessage(c,m,true,true);var a=jQuery("#message-display .contents div").html()+m.join("");try{if(window.scrollBox1==null){window.scrollBox1=new MooScroll({selector:"#message-display"})}window.scrollBox1.loadContent(a+'<div class="ie_fix"></div>');window.scrollBox1.setSlider(9000)}catch(f){}}if(l&&l.length>0){if(jQuery.browser.msie&&jQuery.browser.version<9){jQuery("#urgent").attr("checked",false);jQuery("#urgent").click();jQuery("#urgent").attr("checked",false)}else{jQuery("#urgent").attr("checked","unchecked");jQuery("#urgent").click()}}jQuery("#message-input").eq(0).val("");jQuery("#outgoing-number").eq(0).val("");jQuery("#newmessage-display").html("");jQuery("#charsRemaining").html("0/160");try{c.send(sendSuccess,sendFailure)}catch(i){alertPopup("Could not send message at this time please retry at a later time.")}if(b){jQuery("#message_list").show();jQuery("#message-display").show();jQuery("#con_h2").show();jQuery("#outgoing-number-field").hide();jQuery("#newmessage-display").hide()}}return false}function show_smsconversation(q,p,c){try{var e=$SMS.SmsBucketsArray;var i=e[q];if(!i){for(firstone in e){if(!i){i=e[firstone];q=firstone}}}var l=i.messages;var b;var h=[];if(!l){return}if(!c){jQuery("#smslist").attr("currbkt",q);jQuery("#message-display").show();jQuery("#con_h2").show();jQuery("#outgoing-number-field").hide();jQuery("#newmessage-display").hide();fld_maxLength("message-input","outgoing-number",160,70,true);if(p!=null){if(jQuery.browser.msie){jQuery(p.srcElement).parents(".messageUnRead").removeClass("messageUnRead")}else{jQuery(p.target).parents(".messageUnRead").removeClass("messageUnRead")}}}jQuery("#smsotherparty").text(i.otherParty);jQuery("#smsotherparty").attr("iam",$SMS.MyId);jQuery("#smsotherparty").attr("bucket",q);for(b=0;b<l.length;b++){var a=l[b];if(!c){if(!a.isRead()){a.markRead()}appendSmsMessage(a,h,false,true)}else{appendSmsMessage(a,h,false,false)}}window.setTimeout(function(){jQuery(".smserrorlink").unbind("click");jQuery(".smserrorlink").click(function(){var r=jQuery(this).attr("errtxt");if(typeof r==="string"&&r.length>0){alertPopup(r)}return false})},100);if(jQuery("#message-display").is(":visible")){h.push('<div class="ie_fix"></div>');var o=h.join("");var g="";var d="";var m=$("message-display").innerHTML;if(window.scrollBox1){m=window.scrollBox1.mooScrollAreas[0].paddingEl.innerHTML;g=jQuery(m,"msgid").text().replace(/ /g,"");d=jQuery(o,"msgid").text().replace(/ /g,"")}if((jQuery(m,"text-message").length!=jQuery(o,"text-message").length)||(g.indexOf(d)<0)){if(window.scrollBox1==null){window.scrollBox1=new MooScroll({selector:"#message-display"})}window.scrollBox1.loadContent(o);window.scrollBox1.setSlider(9000)}}}catch(f){}if(!c){}fld_maxLength("message-input","outgoing-number",160,70,true);return false}function appendSmsMessage(c,i,f,e){var p=c.getSubject(),l=c.getBody(),o=c.getFrom(),h=c.getTo(),a="";if(l&&l.length==0){l=p}if(f){l=hexToString(l);p=hexToString(p)}o=jQuery("<div/>").text(o).get(0).innerHTML;h=jQuery("<div/>").text(h).get(0).innerHTML;l=jQuery("<div/>").text(l).get(0).innerHTML;p=jQuery("<div/>").text(p).get(0).innerHTML;if(e){G_READMESSAGES[c.getId()]=true}var g;if(c.isSender()){var m=(c._fld?c._fld("state>error>value"):null),d=((m!=null)?c._fld("state>error>description"):null);a=((m==null)||(m=="none"))?"":'<a class="smserrorlink" href="#" style="color:Red;" errtxt="'+((m+": "+d)||"")+'">error</a>';if(c.getPriority()>0){g='<div class="msg-outgoing-urgent"></div>'}else{g='<div class="msg-outgoing"></div>'}i.push('<div class="text-message  outgoing">');i.push(' <span class="message-date">'+formatDate(c.getDate())+" To "+h+'</span><span class="msg-top"></span>')}else{if(c.getPriority()>0){g='<div class="msg-incoming-urgent"></div>'}else{g='<div class="msg-incoming"></div>'}i.push('<div class="text-message  incoming">');i.push(' <span class="message-date">'+formatDate(c.getDate())+" From "+o+'</span><span class="msg-top"></span>')}i.push(g);i.push('<div class="message-content"><p style="word-wrap: break-word;">'+l.replace(/\n/g,"<br>")+'</p><a class="trash-msg" onclick="deleteMsg(\''+c.getId()+'\');" href="#">Trash</a>');if(a!=""){i.push(a)}i.push('</div><span class="msg-btm"></span>');i.push('<a href="#" msgid="'+c.getId()+'"></a>');i.push("</div>")}function MonitorHover(b){this.hovering=false;var a=this;this.isHoveringOver=function(){return a.hovering};jQuery(b).hover(function(){a.hovering=true},function(){a.hovering=false})}function appendNewSmsMessage(e,d){var c=e.getSubject(),a=e.getBody();if(a&&a.length==0){a=c}if(e.getPriority()>0){d.push('<div class="text-message urgent">')}else{d.push('<div class="text-message '+(e.isSender()?"outgoing":"incoming")+'">')}d.push('<span class="msg-top"></span>');d.push('<div class="msg-outgoing"></div>');d.push('<div class="message-content"><p>'+a+'</p><a class="trash-msg" href="">Trash</a></div>');d.push('<span class="msg-btm"></span>');d.push("</div>")}function formatDate(g){var o=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),i=g.getDate(),e=g.getMonth(),b=g.getFullYear(),f=g.getHours(),c=g.getMinutes(),a="AM";if(c<10){c="0"+c}if(f>=12){a="PM"}if(f>12){f-=12}var l="th";if(i===1){l="st"}if(i===2){l="nd"}if(i===3){l="rd"}if(i===21){l="st"}if(i===22){l="nd"}if(i===23){l="rd"}return o[e]+" "+i+l+", "+b+", "+f+":"+c+a}function deleteMsg(d,i){if(!i){confirmPopup("Are you sure you want to delete this message?","","",function(){deleteMsg(d,true)},function(){});return}var f=$SMS.SmsBucketsArray,p,h=false;if(d<0){jQuery("a[msgid="+d+"]").parent("div").remove()}for(p in f){var l=f[p],g;var o=l.messages;if(!o){continue}for(g=o.length-1;g>-1;g--){var c=l.messages[g],a=c.getId(),e=c.folderType();if(a!=d){continue}var q=jQuery("a[msgid="+a+"]").parent();if(q){jQuery(q).remove()}c.deleteMsg(a,e,null,function(b,m){$U.log("Failed to delete msg: "+a+"  "+b.responseText)});h=true;$SMS.refresh();return}}if(!h){jQuery($SMS.m_sentout).each(function(m,b){if(b!=null){if(b.getId()==d){$SMS.m_blacklist[""+d]=b;$SMS.m_sentout.splice(m,1)}}})}return}function deleteBucket(c,i,a){if(!i){G_DELETEMGS=null;confirmPopup("Please note that this operation may take a while depending on the number of messages in this conversation.<p></p> <p>Are you sure you want to delete this conversation? </p>","","",function(){deleteBucket(c,true)},function(){});return}var f=$SMS.SmsBucketsArray,l=f[c],g;if(!l.messages){return}if(G_DELETEMGS==null){G_DELETEMGS=l.messages}if(G_DELETEMGS.length==0){G_DELETEMGS=null;var o=jQuery("#smslist").attr("currbkt");if(o==c){o=0;jQuery("#smslist").attr("currbkt",o);show_smsconversation(o,null,1)}$SMS.refresh()}try{if(G_DELETEMGS&&G_DELETEMGS.length){var d=G_DELETEMGS[G_DELETEMGS.length-1];var b=d.getId(),e=d.folderType();d.deleteMsg(b,e,function(){G_DELETEMGS.length--;deleteBucket(c,true,G_DELETEMGS.length)},function(){deleteBucket(c,true,G_DELETEMGS.length)})}}catch(h){}}function checkGpsList(){var f,a=jQuery("#gpsdevices"),c="";for(f in $GPS.devices){var b=$GPS.devices[f],d=jQuery("option[value="+b.id+"]",a);if(!getDevice()){return}if(!d||d.length<=0){if(!(b.id!=getDevice().id)){c+='<option value="'+b.id+'">'+b.name+"</option>"}}else{if(b.id!=getDevice().id){jQuery("option[value="+b.id+"]").remove()}}}if(c.length>0){jQuery("#gpsdevices").append(c);var e=jQuery("#gpsdevices>option");if(e&&e.length==1){jQuery(e).eq(0).attr("selected","selected");jQuery(e).eq(0).select()}}}function getSelectedGpsObject(){var b=jQuery("#gpsdevices>option:selected");if(b&&b.length>0){var d=jQuery(b).eq(0).val(),c=0;for(c in $GPS.devices){var a=$GPS.devices[c];if(a!=null&&a.data!=null){if(d==a.id){return a}}}}return null}function gps_donotshow_update(){if(jQuery("#gps_donotshowagain").is(":checked")){$U.setStorage("gps_donotshow",1,365)}else{$U.setStorage("gps_donotshow",0,365)}}function gps_donotshow_uncheck(){if(jQuery("#gps_donotshowagain").is(":checked")){if(jQuery.browser.msie&&jQuery.browser.version<9){jQuery("#gps_donotshowagain").attr("checked","false");if(jQuery("#gps_donotshowagain").is(":checked")){jQuery("#gps_donotshowagain").attr("checked","false")}}else{jQuery("#gps_donotshowagain").click()}}$U.setStorage("gps_donotshow",0,365);turnOnGpsStartButton()}function gps_donotshow_clicked(a){turnOnGpsStartButton()}function shouldNotShowGPSDisclaimer(){var a=$U.getStorage("gps_donotshow");if(a==1){return true}return false}function gpsAction(a){var c=getSelectedGpsObject();if(c){var b=c.url;if(b){$GPS.request(b,c.id,a,null,null)}return}}function doNothing(){return}function turnOffGpsStartButton(){jQuery("#gpsstart").unbind("click");jQuery("#gpsstart").bind("click",(function(){doNothing()}));jQuery("#gpsstart").removeAttr("rel");jQuery("#gpsstart").removeAttr("href");jQuery("#gpsstart").attr("href","#");jQuery("#gpsstart").addClass("disabled");jQuery("#gpsstart").html('<span class="gray">On</span>')}function turnOnGpsStartButton(){if(!shouldNotShowGPSDisclaimer()){jQuery("#gpsstart").removeAttr("rel");jQuery("#gpsstart").removeAttr("href");jQuery("#gpsstart").attr("rel","modal");jQuery("#gpsstart").attr("href","#gps_disclaimer");jQuery("#gpsstart").unbind("click");jQuery("#gpsstart").bind("click",(function(){doNothing()}));jQuery("#gpsstart").removeClass("disabled");jQuery("#gpsstart").html('<span class="red">On</span>')}else{jQuery("#gpsstart").removeAttr("rel");jQuery("#gpsstart").removeAttr("href");jQuery("#gpsstart").unbind("click");jQuery("#gpsstart").bind("click",(function(){gps_donotshow_update();gpsAction("start")}));jQuery("#gpsstart").removeClass("disabled");jQuery("#gpsstart").html('<span class="red">On</span>')}}function turnOffGpsStopButton(){jQuery("#gpsstop").unbind("click");jQuery("#gpsstop").bind("click",(function(){doNothing()}));jQuery("#gpsstop").addClass("disabled");jQuery("#gpsstop").html('<span class="gray">Off</span>')}function turnOnGpsStopButton(){jQuery("#gpsstop").unbind("click");jQuery("#gpsstop").bind("click",(function(){gpsAction("stop")}));jQuery("#gpsstop").removeClass("disabled");jQuery("#gpsstop").html('<span class="red">Off</span>');jQuery("#gps_state").show()}function renderGpsAutoButtons(a){if(jQuery("#gps-on").is(":checked")){$U.log("(before) GPS Auto ON button is CHECKED")}if(jQuery("#gps-off").is(":checked")){$U.log("(before) GPS Auto OFF button is CHECKED")}jQuery("#gps-on").hide();jQuery("#gps-off").hide();if(a.AlwaysOn==true){if(jQuery("#gps-on").is(":checked")){g_skipnextgpsclick=false}if(jQuery.browser.msie&&jQuery.browser.version<9){jQuery("#gps-on").attr("checked",true)}else{jQuery("#gps-on").attr("checked","checked")}}else{if(a.AlwaysOn==false){if(jQuery("#gps-off").is(":checked")){g_skipnextgpsclick=false}if(jQuery.browser.msie&&jQuery.browser.version<9){jQuery("#gps-off").attr("checked",true)}else{jQuery("#gps-off").attr("checked","checked")}}}jQuery("#gps-on").show();jQuery("#gps-off").show();if(jQuery("#gps-on").is(":checked")){$U.log("(after) GPS Auto ON button is CHECKED")}if(jQuery("#gps-off").is(":checked")){$U.log("(after) GPS Auto OFF button is CHECKED")}}var g_NMEAStatusUnknown=true;function renderGpsUI(){var c=jQuery("#gpsdevices>option:selected");if(c&&c.length>0){var g=jQuery(c).eq(0).val(),f=0;jQuery("#gps-disclaimer").hide();if(getDevice()==null){return}for(f in $GPS.devices){var b=$GPS.devices[f];if(b!=null&&b.data!=null){if(g==b.id&&g==getDevice().id&&b.discovery){if(!b.userConfig){$U.log("START renderGpsUI");$U.log("Checking configValues for GPS Auto default");var a=jQuery("userservice>type:contains(5)+uri:first",b.discovery).text();$GPS.getUserConfig(a,b.id,function(l){b.userConfig=l;var i=jQuery("name:contains(GpsAutoStart)+value",l).text();if(i.indexOf("on")>=0){$U.log("GPS Auto user setting is ON");b.AlwaysOn=true}else{if(i.indexOf("off")>=0){$U.log("GPS Auto user setting is OFF");b.AlwaysOn=false}else{if(!b.config){$U.log("Checking config for GPS Auto default");var h=jQuery("userservice>type:contains(1)+uri:first",b.discovery).text();$GPS.getUserConfig(h,b.id,function(o){b.config=o;var m=jQuery("name:contains(GpsAutoStart)+revision+default",o).text();if(m.indexOf("on")>=0){$U.log("GPS Auto default is ON");b.AlwaysOn=true}else{if(m.indexOf("off")>=0){$U.log("GPS Auto default is OFF");b.AlwaysOn=false}}},function(){b.config=null})}}}renderGpsAutoButtons(b);g_GPSAutoButtonsRendered=true;jQuery("#gps_setting").html('<a href="#">GPS</a>');if(getClientOSName()=="MacOS"){jQuery("#gps_setting").html("")}},function(){b.userConfig=null})}jQuery("#gpsdevicestatus").text($GPS.device_status(b.data));jQuery("#gps_signal_id4").html('<div class="signal-strength"><a class="strength-'+$GPS.signal_status(b.data)+'" href="#"></a></div>');jQuery("#gps_signal_id4").show();jQuery("#gps_state").attr("title","GPS is "+$GPS.session_status(b.data));if($GPS.session_status(b.data)==="enabled"){jQuery("#gps_status_id").show();jQuery("#gps_no_status_id").hide();jQuery("#gps_state").show()}else{jQuery("#gps_no_status_id").show();jQuery("#gps_status_id").hide();jQuery("#gps_state").hide()}var e=jQuery("gps>actions",b.data).text();var d=jQuery("gps>nmea>actions",b.data).text();if(!e||!d){turnOffGpsStartButton();turnOffGpsStopButton();if(g_NMEAStatusUnknown){if(jQuery("#nmea_install_link").is(":visible")==false){jQuery("#nmea_install_link").show()}}}else{g_NMEAStatusUnknown=false;jQuery("#nmea_install_link").hide();jQuery("#gpstrackswitch").show();if(e==="start"){turnOnGpsStartButton();turnOffGpsStopButton()}else{if(e==="stop"){turnOffGpsStartButton();turnOnGpsStopButton()}}}return}else{jQuery("#gps_signal_id4").html('<div class="signal-strength"><a class="strength-0" href="#"></a></div>');jQuery("#gps_signal_id4").show()}}}}}function getClientOSName(){var a="Unknown OS";if(navigator.appVersion.indexOf("Win")!=-1){a="Windows"}if(navigator.appVersion.indexOf("Mac")!=-1){a="MacOS"}if(navigator.appVersion.indexOf("X11")!=-1){a="UNIX"}if(navigator.appVersion.indexOf("Linux")!=-1){a="Linux"}return a}function getEnhancedInstallerURL(){var a="https://vz.smartmobility.activationnow.com/vmbm/2/PANTECH/UML295/VMBM_mac.dmg";if(getClientOSName()!="MacOS"){a="https://vz.smartmobility.activationnow.com/vmbm/2/PANTECH/UML295/VMBM_win.msi"}return a}function initOSBasedLinks(){var a;if(getClientOSName()=="MacOS"){a="https://vz.smartmobility.activationnow.com/vmbm/1/PANTECH/UML295/VMBM_user_guide_mac.pdf";jQuery("#nmea_area").hide()}else{a="https://vz.smartmobility.activationnow.com/vmbm/1/PANTECH/UML295/VMBM_user_guide_win.pdf"}jQuery("#user-guide-url").attr("href",a)}function onNmeaInstall(){var b="https://vz.smartmobility.activationnow.com/vmbm/1/PANTECH/UML295/NMEA_Drivers.msi";if(window.SmartMobility.getIFrame){invokeURL(b)}else{var a;a=document.getElementById("hiddenDownloader");if(a===null){a=document.createElement("iframe");a.id="hiddenDownloader";a.style.visibility="hidden";document.body.appendChild(a)}a.src=b}return false}function PerformFirmwareUpdate(){var a=null,b=false;a=getDevice();if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_FIRMWARE&&$MANAGE.deferred==false){return}if($U.hasStorage){$U.setStorage("update_status",$SCOPECONFIG.UPDTNG_IDLE,365)}if(a!=null){var c=null;$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_FIRMWARE;c=a._services.management.uri;if(c!=null){jQuery("#update_status_text").html('<p><font size="2"><b>Checking for new firmware update ..</b></font></p>');$MANAGE.firmwareUpdate($MANAGE.deferred?"continue":"manual");jQuery("#update_defer_notice").html("");b=true}}if(b==false){$SCOPECONFIG.isUpdtating=false;$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_IDLE;jQuery("#update_status_text").html("");EnableUpdateContinue(true);jQuery("#updateIcon").hide()}}function PerformEnhanceUpdate(){if($U.hasStorage){$U.setStorage("update_status",$SCOPECONFIG.UPDTNG_ENHAPP,365)}$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_ENHAPP;if(jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).length>0&&jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).length>$SCOPECONFIG.G_ENHCOMPINDEX){var b=$SCOPECONFIG.G_ENHANCEDCOMPS[$SCOPECONFIG.G_ENHCOMPINDEX];$SCOPECONFIG.G_ENHCOMPINDEX++;var a="";jQuery("#update_status_text").html('<p><font size="2"><b>Checking for Enhanced App Update ..</b></font></p>');if(b&&b._userservices[19]&&b._userservices[19].uri){a=b._userservices[19].uri;window.ajax("GET",a,"",function(d,e,c){if(c.responseText=="applying"){jQuery("#update_status_text").html('<p><font size="2"><b>Applying Enhanced App Update ..</b></font></p>');if(jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).length>($SCOPECONFIG.G_ENHCOMPINDEX-1)){$SCOPECONFIG.G_ENHUPDTNGCOMPID=$SCOPECONFIG.G_ENHANCEDCOMPS[$SCOPECONFIG.G_ENHCOMPINDEX-1].id}}else{PerformEnhanceUpdate()}},function(c){if(c.status==200){if(c.responseText=="applying"){jQuery("#update_status_text").html('<p><font size="2"><b>Applying Enhanced App Update ..</b></font></p>');if(jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).length>($SCOPECONFIG.G_ENHCOMPINDEX-1)){$SCOPECONFIG.G_ENHUPDTNGCOMPID=$SCOPECONFIG.G_ENHANCEDCOMPS[$SCOPECONFIG.G_ENHCOMPINDEX-1].id}}else{PerformEnhanceUpdate()}}else{PerformEnhanceUpdate()}},false,60000)}else{PerformEnhanceUpdate()}}else{$SCOPECONFIG.G_ENHCOMPINDEX=0;if($MANAGE.deferred==true){$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_IDLE}else{PerformFirmwareUpdate()}}}function RefreshUpdateStatus(a){jQuery("#update_status_text").html(a)}function PerformNextUpdate(a){if(a>0){if(a==1){jQuery("#updateIcon").attr("class","update-30");PerformEnhanceUpdate()}else{jQuery("#updateIcon").attr("class","update-50");PerformFirmwareUpdate()}}}function updateCheckForUpdate(){var c=false;var b=null;b=getDevice();if(b!=null&&b.condata!=null&&b.condata.network!=null){var a=b.condata.network.serving.roaming.type;c=(a=="international"||a=="domestic"||a=="yes")?true:false}$SCOPECONFIG.isRoaming=c;if($SCOPECONFIG.isRoaming==true){EnableUpdateContinue(false)}else{if($SCOPECONFIG.isUpdtating==false&&$SCOPECONFIG.checkAtstartup==false){EnableUpdateContinue(true)}}}function initScopeCheck(){var b=false;var a=null;a=getDevice();if($SCOPECONFIG.isRoaming==true){return}if(a!=null&&window.uiconst.connectionTime.state==="connected"){b=true}if($SCOPECONFIG.startupcheck==false){b=true}if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE){if(b==false&&$MANAGE.deferred==false){jQuery("#updateIcon").show();jQuery("#updateIcon").attr("class","update-20");jQuery("#update_status_text").html('<p><font size="2"><b>Checking for Verizon Mobile Broadband Update ..</b></font></p>');$SCOPECONFIG.checkAtstartup=true;EnableUpdateContinue(false);window.autoScope(a)}}else{$U.showpanel();gotoCheckForUpdate();startCheckingUpdate(1)}}function onCheckForUpdate(){startCheckingUpdate(0)}function startCheckingUpdate(b){var a=null;$SCOPECONFIG.skipIdleCnt=0;if(b==0){if($MANAGE.deferred==true){$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_ENHAPP}}else{if($MANAGE.deferred==true){return}}if(jQuery("#update_continue").hasClass("disabled")==false){$SCOPECONFIG.isUpdtating=true;if($SCOPECONFIG.G_UPDATESTATUS==$SCOPECONFIG.UPDTNG_IDLE){if($U.hasStorage){$U.setStorage("update_status",$SCOPECONFIG.UPDTNG_WDGT,365)}$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_WDGT;window.autoScope(a);jQuery("#update_status_text").html('<p><font size="2"><b>Checking for Verizon Mobile Broadband Update ..</b></font></p>');jQuery("#updateIcon").attr("class","update")}else{PerformNextUpdate($SCOPECONFIG.G_UPDATESTATUS)}jQuery("#updateIcon").show();EnableUpdateContinue(false)}}function EnableUpdateProgress(a){if(a){jQuery("#updt_progressbar").show();jQuery("#updt_progressnum").show();jQuery("#update_status_wait_icon").hide()}else{jQuery("#updt_progressbar").hide();jQuery("#updt_progressnum").hide();if(jQuery("#update_continue").hasClass("disabled")){jQuery("#update_status_wait_icon").show()}}}function EnableUpdateContinue(a){if(a&&$SCOPECONFIG.isRoaming==false){jQuery("#update_type").show();jQuery("#update_status_text").hide();jQuery("#update_status_wait_icon").hide();if($MANAGE.deferred==false){jQuery("#update_defer_notice").html("")}if(jQuery("#update_continue").hasClass("disabled")){jQuery("#update_continue").addClass("red");jQuery("#update_continue").addClass("enabled");jQuery("#update_continue").removeClass("gray");jQuery("#update_continue").removeClass("disabled")}}else{if($SCOPECONFIG.isRoaming==true){jQuery("#update_type").show();jQuery("#update_status_text").hide();jQuery("#update_status_wait_icon").hide();if($MANAGE.deferred==false){jQuery("#update_defer_notice").html("")}}else{jQuery("#update_type").hide();jQuery("#update_status_text").show();if(jQuery("#updt_progressbar").is(":visible")){jQuery("#update_status_wait_icon").hide()}else{jQuery("#update_status_wait_icon").show()}if($MANAGE.deferred==false){jQuery("#update_defer_notice").html("")}}jQuery("#update_continue").addClass("gray");jQuery("#update_continue").addClass("disabled");jQuery("#update_continue").removeClass("red");jQuery("#update_continue").removeClass("enabled")}}function onCloseMenu(){if(window.SmartMobility&&window.SmartMobility.IsEmbeddedIE){try{window.SmartMobility.close()}catch(a){}return}else{if(window.SmartMobility&&window.SmartMobility.closeWindow){window.SmartMobility.closeWindow();return}}window.open("","_self","");window.opener="x";window.close()}function gotoCheckForUpdate(){jQuery(".mbm-nav").children().removeClass("menu-active");jQuery("#settings-menu").addClass("menu-active");jQuery("#message_list").hide();jQuery("#networks_list").hide();jQuery("#help_scrn").hide();jQuery("#settings_scrn").show();jQuery("#myverizon").hide();launchChkForUpdate()}function launchNetworks(){if(jQuery("#netwk-menu").hasClass("disabled")){return}jQuery("#message_list").hide();jQuery("#networks_list").show();jQuery("#help_scrn").hide();jQuery("#settings_scrn").hide();jQuery("#myverizon").hide();onInstallHide();return false}function launchMyverizon(){checkInternetConnection();jQuery("#message_list").hide();jQuery("#networks_list").hide();jQuery("#help_scrn").hide();jQuery("#settings_scrn").hide();jQuery("#myverizon").show();return false}function onNetworkConnect(){var a=jQuery(".connection-action .button span").eq(0).html();var b=getDevice();if(b){if(a=="Connect"){window.uiconst.connectionTime.value="00:00:00:00"}b.condata.sendAction(a.toLowerCase())}}function invokeURL(a){if(window.Cocoa&&window.SmartMobility){window.Cocoa.LaunchURL(a)}else{window.open(a,"_blank")}return false}function invokeURL_Verizon(a){if(window.Cocoa&&window.SmartMobility){window.Cocoa.LaunchURL(a)}else{window.open(a,"Verizon")}return false}function CheckforEnhCompConnection(){var d=false;if(jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).length>0&&jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).length>$SCOPECONFIG.G_ENHCOMPINDEX){for(var a=0;a<jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).length;a++){var e=$SCOPECONFIG.G_ENHANCEDCOMPS[a];var b="";if(e&&e.services("condata")&&e.services("condata").uri){b=e.services("condata").uri;window.ajax("GET",b,"",function(l,o,f){if(l){var i=jQuery("p-answer",l);for(j=0;j<i.length;j++){var c=jQuery("condata",i[j]);var m=jQuery("id",i[j]).eq(0).text();var h=jQuery("state",c);var g=jQuery("value:first",h).text();if(g=="connected"||g=="dormant"){if(window.G_ENHCONNECTED.indexOf(m)<0){window.G_ENHCONNECTED+=m+";"}}else{if(window.G_ENHCONNECTED.indexOf(m)>=0){window.G_ENHCONNECTED=window.G_ENHCONNECTED.replace(m+";","")}}}}},function(c){var f=e.id;if(window.G_ENHCONNECTED.indexOf(f)>=0){window.G_ENHCONNECTED.replace(f+";","")}},false,60000)}}}}function launchHelp(){jQuery("#message_list").hide();jQuery("#networks_list").hide();jQuery("#help_scrn").show();jQuery("#settings_scrn").hide();jQuery("#myverizon").hide()}function launchAbout(){$U.showpanel();jQuery(".mbm-nav").children().removeClass("menu-active");jQuery("#help-menu").addClass("menu-active");jQuery("#message_list").hide();jQuery("#networks_list").hide();jQuery("#help_scrn").show();jQuery("#settings_scrn").hide();jQuery("#myverizon").hide()}function launchSettings(){if(jQuery("#settings-menu").hasClass("disabled")){return false}jQuery("#message_list").hide();jQuery("#networks_list").hide();jQuery("#help_scrn").hide();jQuery("#settings_scrn").show();jQuery("#myverizon").hide();if(window.picaso.enhancedInstall){jQuery("#enh_setting").hide()}else{jQuery("#enh_setting").show()}launchLTESettings()}function invokeServiceURL(b){var a="";if(b=="Device Terminal"){a=window.G_TERMINALURL}else{if(b=="GetComponentLog"){a=window.G_DIAGNOSTICLOGURL}else{if(b=="GetSessionHistory"){invokeSH();return}}}if(!a){return}if(window.Cocoa&&window.SmartMobility){window.Cocoa.LaunchURL(a)}else{window.open(a,"_blank")}}function OnSMSIcon(){$U.showpanel();jQuery(".mbm-nav").children().removeClass("menu-active");jQuery("#sms-menu").addClass("menu-active");launchSms()}function OnHelpIcon(){$U.showpanel();jQuery(".mbm-nav").children().removeClass("menu-active");jQuery("#help-menu").addClass("menu-active");launchHelp()}function hideMenu(){$U.hidepanel()}function checkMenuStates(){var c=$SIM.lockStatus();var b=getDevice();var a=reallyHasSim();var d=false;if((c=="unknown")||(c=="locked")||(c=="no sim")){d=true}if((b==null)||(d)||(a==false)||G_fmUpdating){jQuery("#menu_list").html('<li class="disabled" onclick="launchNetworks();" id="netwk-menu"><a id="network_link" href="#">Networks</a></li><li class="disabled messages" onclick="launchSms();" id="sms-menu"><a id="sms_messages" href="#" >Messages</a><span id="smscount"></span></li><li class="menu-active" onclick="launchMyverizon();"><a href="#">My Verizon</a></li><li class="disabled" onclick="launchSettings();" id="settings-menu"><a id="setting_link" href="#">Settings</a></li><li onclick="launchHelp();" id="help-menu"><a href="#">Help</a></li>');jQuery("#view_usage_item").removeClass("red");jQuery("#view_usage_item").addClass("disabled gray");jQuery("#view_usage_item").attr("title","Button is disabled");jQuery("#header-view-usage").unbind("click");if(G_fmUpdating){$U.showpanel();gotoCheckForUpdate()}else{launchMyverizon()}}else{jQuery(".mbm-nav li").removeClass("disabled");jQuery("#view_usage_item").removeClass("disabled gray");jQuery("#view_usage_item").addClass("red");jQuery("#view_usage_item").attr("title","Click to view current usage data");jQuery("#header-view-usage").unbind("click");jQuery("#header-view-usage").bind("click",function(){onUsage("mainnetworkUsage")});jQuery("#header-view-usage").attr("href","#mainnetwork_usage")}}function setDisclosureIconTitle(a){if(a.hasClass("toggle-collapse")){a.attr("title","Click to collapse view")}else{a.attr("title","Click to expand view")}}function OnMenu(){var a=jQuery("#toggle");a.toggleClass("toggle-collapse");jQuery(".mbm-content").toggle();setDisclosureIconTitle(a);simpin_init();checkMenuStates();return false}var g_LaunchSetting=-1;var g_GPSFirstTime=true;var g_GPSAutoButtonsRendered=false;function launchLTESettings(){g_LaunchSetting=1;if(jQuery("#lte_settings_scrn").is(":visible")){return}jQuery("#lte_settings_scrn>iframe").empty();window.picasoUI.reloadDeviceSettings();jQuery("#vpn_settings_scrn").hide();jQuery("#gps_settings_scrn").hide();jQuery("#sim_settings_scrn").hide();jQuery("#fw_settings_scrn").hide();jQuery("#enh_app_scrn").hide();jQuery("#check_update_scrn").hide();if(window.ExternalXSLTSupport){}else{window.setTimeout(function(){jQuery("#lte_settings_scrn").show()},200)}}function launchSIMSettings(){g_LaunchSetting=2;if(jQuery("#sim_settings_scrn").is(":visible")){return}jQuery("#vpn_settings_scrn").hide();jQuery("#gps_settings_scrn").hide();jQuery("#lte_settings_scrn").hide();jQuery("#fw_settings_scrn").hide();jQuery("#enh_app_scrn").hide();jQuery("#check_update_scrn").hide();simpin_init()}function launchGPSSettings(){g_LaunchSetting=3;if(jQuery("#gps_settings_scrn").is(":visible")){return}checkInternetConnection();jQuery("#vpn_settings_scrn").hide();jQuery("#sim_settings_scrn").hide();jQuery("#lte_settings_scrn").hide();jQuery("#fw_settings_scrn").hide();jQuery("#enh_app_scrn").hide();jQuery("#check_update_scrn").hide();if(g_LaunchSetting==3){if(g_GPSFirstTime){g_GPSFirstTime=false;jQuery("#sim_setting").click();jQuery("#sim_settings_scrn").hide();window.setTimeout(function(){jQuery("#gps_setting").click()},50)}else{jQuery("#gps_settings_scrn").show()}}}function launchVPNSettings(){g_LaunchSetting=4;if(jQuery("#vpn_settings_scrn").is(":visible")){return}jQuery("#gps_settings_scrn").hide();jQuery("#sim_settings_scrn").hide();jQuery("#lte_settings_scrn").hide();jQuery("#fw_settings_scrn").hide();jQuery("#enh_app_scrn").hide();jQuery("#check_update_scrn").hide();if(g_LaunchSetting==4){jQuery("#vpn_settings_scrn").show()}}function launchChkForUpdate(){g_LaunchSetting=5;jQuery("#gps_settings_scrn").hide();jQuery("#sim_settings_scrn").hide();jQuery("#lte_settings_scrn").hide();jQuery("#vpn_settings_scrn").hide();jQuery("#enh_app_scrn").hide();var a="";if(window.uiconst.connectionTime.state==="connected"){a="<p>Data usage incurred for Mobile Broadband Connection Manager updates will apply against your data allowance.</p>"}else{a='<p>A connection using Mobile Broadband Connection Manager is required to check for updates. By selecting "Continue" below, you will be connected to the Verizon Mobile Broadband network. Data usage incurred for Verizon Mobile Broadband Connection Manager updates will apply against your data allowance.</p>'}jQuery("#update_type").html(a+"<br>");if(g_LaunchSetting==5){jQuery("#check_update_scrn").show()}}function onInstallHide(){if(window.picaso.enhancedInstall==true){jQuery("#net-enhanced-install").hide()}}function HideInstallGroup(){jQuery("#net-enhanced-install").hide()}function onInstallNow(){jQuery("#message_list").hide();jQuery("#networks_list").hide();jQuery("#help_scrn").hide();jQuery("#settings_scrn").show();jQuery("#myverizon").hide();if(window.picaso.enhancedInstall){jQuery("#enh_setting").hide()}else{jQuery("#enh_setting").show();launchInstEnhApp()}}function launchInstEnhApp(){jQuery("#gps_settings_scrn").hide();jQuery("#sim_settings_scrn").hide();jQuery("#lte_settings_scrn").hide();jQuery("#vpn_settings_scrn").hide();jQuery("#check_update_scrn").hide();checkInternetConnection();jQuery("#enh_app_scrn").show()}function onInstallEnhApp(){InstallEnhApp();jQuery("#enh-app-install").removeClass("red");jQuery("#enh-app-install").addClass("disabled");jQuery("#enh-app-install").addClass("gray");jQuery("#enh-app-install").attr("title","Verizon Mobile Broadband Manager Download and Install");jQuery("#enh-app-install").unbind("click")}function InstallEnhApp(){var a;a=document.getElementById("hiddenDownloader");if(a===null){a=document.createElement("iframe");a.id="hiddenDownloader";a.style.visibility="hidden";document.body.appendChild(a)}a.src=getEnhancedInstallerURL();return false}function invokeFta(a){var b="./fta/index.html";if(!getDevice()){return}if(window.Cocoa&&window.SmartMobility){b=location.protocol+"//"+location.host+"/fta/index.html"}b="http://mbb.vzw.com/fta/index.html";b+="?";if(a){b+="ns=yes&"}b+="id=SmartMobility";b+="&component=PSC";b+="&subcomponent=UI";b+="&target="+getDevice().id;b+="&subtarget=";b+="&discovery=";b+="&url="+getDevice()._services.engdata.uri;if(window.Cocoa&&window.SmartMobility){window.Cocoa.LaunchURL(b)}else{window.open(b,"_blank")}}function invokeNS(){if(!getDevice()){return}var a=getDevice()._services.discovery.uri;a=a.replace("discovery","nsselect.html");a+="?target="+getDevice().id;if(window.Cocoa&&window.SmartMobility){window.Cocoa.LaunchURL(a)}else{window.open(a,"networkSelection","left=20,top=20,width=800,height=550,scrollbars=0,resizable=0")}}function invokeSH(){if(!getDevice()){return}url=getDevice()._services.discovery.uri;url=url.replace("/discovery",window.G_SESSIONHISTORYURL);if(window.Cocoa&&window.SmartMobility){window.Cocoa.LaunchURL(url)}else{window.open(url,"SessionHistory","left=20,top=20,width=916,height=550,scrollbars=0,resizable=0")}}function OnLaunchVPN(){if(window.G_VPN_MANAGEMENT_URL!==""){var a=window.G_VPN_MANAGEMENT_URL+"?action=status";window.ajax("GET",a,null,function(e){G_OIManager_Errors=0;var b=jQuery("vpnstatus>state>value",e).text();if(b==="unknown"||b==="NotConfigured"){return}var c="start";if(b==="VpnLaunched"){c="stop"}var d=window.G_VPN_MANAGEMENT_URL+"?action="+c;window.ajax("GET",d,null,function(g){var f=jQuery("vpnstatus>state>value",g).text();if(f==="VpnLaunched"){}else{}},function(f){},false,5000)},function(b){G_OIManager_Errors++;if(G_OIManager_Errors>10){jQuery("#launchVPN").hide();$w.picasoUI.positionButtons()}},false,5000)}else{}}function InfoTip(){this.NetworkHome="";this.SignalStrength="";this.NetworkType="";this.IsRoaming=false;this.RoamingNetwork="";this.IsEncrypted=false;this.EncryptionType="";this.IpV4="";this.IpV6="";this.TxRate="";this.RxRate="";this.deviceState="";this.toString=function(){var c="";c=preStr(c);if(this.NetworkHome.length>0){c=this.NetworkHome}if(this.NetworkType.length>0){c=addBr(c);c+="Network Access Type: "+this.NetworkType}if(this.IsEncrypted){c=addBr(c);c+="Network Encryption: Encrypted"}if(this.RoamingNetwork.length>0){c=addBr(c);c+="ERI: "+this.RoamingNetwork}if(this.SignalStrength.length>0){c=addBr(c);c+=this.SignalStrength}if(this.IpV4.length>0){c=addBr(c);c+=this.IpV4;if(this.IpV6.length>0){c+=" / "+this.IpV6}}else{if(this.IpV6.length>0){c=addBr(c);c+=this.IpV6}}if(this.RxRate.length>0||this.TxRate.length>0){var e=(this.TxRate.length+this.RxRate.length)/2;var b,d,a;if(e>6){b=Number(this.TxRate)/(1000*1000);d=Number(this.RxRate)/(1000*1000);a="Mbps"}else{if(e>3){b=Number(this.TxRate)/(1000);d=Number(this.RxRate)/(1000);a="Kbps"}else{if(this.TxRate==""){this.TxRate="0"}if(this.RxRate==""){this.RxRate="0"}b=Number(this.TxRate);d=Number(this.RxRate);a="bps"}}b*=8;d*=8;var f="Tx: "+b.toFixed(1)+" "+a+" | ";f+=" Rx: "+d.toFixed(1)+" "+a;if(this.deviceState.length>0){f+=" | ("+this.deviceState+")"}c=addBr(c);c+=f}c=postStr(c);return c}}function preStr(a){a="";return a}function postStr(a){a+="";return a}function addBr(a){if(a.length>0){a+="\n"}return a}function addBr2(a){if(a.length>0){a+="<br />"}return a}function playSound(b){var g=jQuery.browser.msie,c=g&&(jQuery.browser.version=="7.0"),a=g&&(jQuery.browser.version=="8.0"),h=g&&(jQuery.browser.version=="9.0"),d=document.getElementById("sound");if(c||a||h){d.innerHTML='<embed src="'+b+'" hidden=true autostart=true loop=false>'}else{if(window.SmartMobility.playSound){var e=location.protocol+"//"+location.host+"/"+b;window.SmartMobility.playSound(e);return}else{var f='<audio id="player" controls="controls" style="display: none;"><source id="ogg_src" src="'+b+'" type="audio/wav" /></audio>';d.innerHTML=f;window.setTimeout(function(){try{var i=document.getElementById("player");if(i){i.play()}}catch(l){}},500)}}}function confirmPopup(e,c,b,a,d){jQuery("#alert_close").hide();if(c!=""){jQuery("#confirmOK span").text(c)}else{jQuery("#confirmOK span").text("OK")}if(b!=""){jQuery("#confirmCancel span").text(b)}else{jQuery("#confirmCancel span").text("Cancel")}jQuery("#confirmOK").unbind();jQuery("#confirmOK").click(a);jQuery("#confirmCancel").unbind();jQuery("#confirmCancel").click(d);if(jQuery.browser.msie&&jQuery.browser.version<8){jQuery("#confirmOK").css("float","left");jQuery("#confirmCancel").css("float","left")}jQuery("#span-alert").html(e);jQuery("#alert_close").hide();jQuery("#alert-popup").show();jQuery("#divalertbtn").show();if(jQuery.browser.safari){VZW.Modal.modal=1;jQuery("#alert-popup").attr("style","display: block; ");jQuery("#overlay").attr("style","display: block; visibility: visible; zoom: 1; opacity: 0.75; width: 100%; height: 666px; left: 0px; ");jQuery("#alert-panel").attr("style","visibility: visible; zoom: 1; opacity: 1; margin-left: -329px; left: 50%; top: 299px; margin-top: -192px; position: absolute; display: block; width: 658px; ")}else{$("alert-msg").click()}jQuery("#confirmOK").focus()}function oncloseconfirm(){$("alert_close").fireEvent("click");jQuery("#alert-popup").hide();VZW.Modal.modal=null}function alertPopup(c,a,b){jQuery("#confirmOK span").text("OK");if(b!=null){jQuery("#alert_close").hide()}if(a!=null){jQuery("#confirmOK").unbind();jQuery("#confirmOK").click(a)}else{jQuery("#confirmOK").unbind();jQuery("#confirmOK").click(function(){oncloseconfirm();return false})}jQuery("#confirmCancel").hide();jQuery("#span-alert").html(c);jQuery("#alert-popup").show();jQuery("#divalertbtn").show();jQuery("#alert-msg").show();if(jQuery.browser.safari){VZW.Modal.modal=1;jQuery("#alert-popup").attr("style","display: block; ");jQuery("#overlay").attr("style","display: block; visibility: visible; zoom: 1; opacity: 0.75; width: 100%; height: 666px; left: 0px; ");jQuery("#alert-panel").attr("style","visibility: visible; zoom: 1; opacity: 1; margin-left: -329px; left: 50%; top: 299px; margin-top: -192px; position: absolute; display: block; width: 658px; ")}else{$("alert-msg").click()}jQuery("#confirmOK").focus()}function handleSettingsCannotSave(){var b=document.getElementById("ifsettings").contentWindow;var a=(jQuery("#ifsettings").attr("src")==undefined)?jQuery("#ifsettings").attr("exthref"):jQuery("#ifsettings").attr("src");alertPopup("Your settings cannot be saved because the settings on the device have been changed. The settings will be reloaded from the device and then you will be able to change your settings.",function(){jQuery.postMessage("settings_finishreset",a,jQuery("#ifsettings").get(0).contentWindow)},true)}function handleSettingsScanningBlock(){var b=document.getElementById("ifsettings").contentWindow;var a=(jQuery("#ifsettings").attr("src")==undefined)?jQuery("#ifsettings").attr("exthref"):jQuery("#ifsettings").attr("src");alertPopup("The network type cannot be saved while the device is performing a network scan. Please save your settings after the network scan has completed.",function(){jQuery.postMessage("settings_finishscanningblock",a,jQuery("#ifsettings").get(0).contentWindow)},true)}function handleAutoConnectConfirm(){var b=document.getElementById("ifsettings").contentWindow;var a=(jQuery("#ifsettings").attr("src")==undefined)?jQuery("#ifsettings").attr("exthref"):jQuery("#ifsettings").attr("src");confirmPopup('<p>The charge for data transmitted and received while roaming can be as high as $20.48 per MB. Please check your price plan for the applicable charges in the location where you plan to access the service. To check your usage, please go to the "My Verizon" button on the Verizon Mobile Broadband Manager. Data usage charges will apply for accessing this link in accordance with your price plan.</p><p>When auto connect is enabled you will be automatically connected and remain connected when a network is available.</p><p>Verizon Mobile Broadband Manager is not required to connect to the network, and the connection will continue if the Verizon Mobile Broadband Manager is closed.</p>',"Accept","Reject",function(){jQuery.postMessage("settings_finishAutoConnectConfirm_Confirm",a,jQuery("#ifsettings").get(0).contentWindow)},function(){jQuery.postMessage("settings_finishAutoConnectConfirm_Deny",a,jQuery("#ifsettings").get(0).contentWindow)})}function handleAutoConnectConfirm2(){var b=document.getElementById("ifsettings").contentWindow;var a=(jQuery("#ifsettings").attr("src")==undefined)?jQuery("#ifsettings").attr("exthref"):jQuery("#ifsettings").attr("src");confirmPopup("<p>When auto connect is enabled you will be automatically connected and remain connected when a network is available.</p><p>Verizon Mobile Broadband Manager is not required to connect to the network, and the connection will continue if the Verizon Mobile Broadband Manager is closed.</p>","Accept","Reject",function(){jQuery.postMessage("settings_finishAutoConnectConfirm_Confirm",a,jQuery("#ifsettings").get(0).contentWindow)},function(){jQuery.postMessage("settings_finishAutoConnectConfirm_Deny",a,jQuery("#ifsettings").get(0).contentWindow)})}function handleVPNSettingsChanged(){if(G_VPN_MANAGEMENT_URL!==null){var a=G_VPN_MANAGEMENT_URL+"?action=status";window.ajax("GET",a,null,function(c){G_OIManager_Errors=0;var b=jQuery("vpnstatus>state>value",c).text();if(b==="Configured"){jQuery("#vpnButton").addClass("red");jQuery("#vpnButton").removeClass("disabled gray")}else{if(b==="NotConfigured"){jQuery("#vpnButton").addClass("disabled gray");jQuery("#vpnButton").removeClass("red")}else{if(b==="unknown"){jQuery("#vpnButton").addClass("disabled gray");jQuery("#vpnButton").removeClass("red")}else{if(b==="VpnLaunched"){}}}}},function(b){G_OIManager_Errors++;if(G_OIManager_Errors>10){jQuery("#launchVPN").hide();jQuery("#vpn_setting").html("")}},false,5000)}}function browserCheck(){var c=true;try{var a=parseInt(jQuery.browser.version);if(jQuery.browser.msie&&a<7){c=false}if(jQuery.browser.mozilla&&a<5){c=false}if(jQuery.browser.opera&&a<10){c=false}if(jQuery.browser.webkit&&a<533){c=false}}catch(b){c=false}return c}function lpad(a,c,d){var b=""+d;while(b.length<a){b=c+b}return b}function show_requests(){if(jQuery("#request_queue").is(":visible")){jQuery("#request_queue").hide();return}var a=[],c;a.push("<ul>");a.push("<li>&nbsp;</li>");a.push("<li><strong>Recent Requests</strong></li>");for(c=0;c<ajaxRequests.length;c++){var b=ajaxRequests[c];a.push("<li>");a.push("<strong>"+b.method+" "+lpad(2,"0",b.time.getHours())+":"+lpad(2,"0",b.time.getMinutes())+":"+lpad(2,"0",b.time.getSeconds())+"."+lpad(3,"0",b.time.getMilliseconds()));if(b.response){a.push("   (r: "+lpad(2,"0",b.response.getHours())+":"+lpad(2,"0",b.response.getMinutes())+":"+lpad(2,"0",b.response.getSeconds())+"."+lpad(3,"0",b.response.getMilliseconds())+")")}else{if(b.error){a.push('<span style="color:Red;">   (e: '+lpad(2,"0",b.error.getHours())+":"+lpad(2,"0",b.error.getMinutes())+":"+lpad(2,"0",b.error.getSeconds())+"."+lpad(3,"0",b.error.getMilliseconds())+")</span>")}else{a.push("   (no response)")}}a.push('</strong>  <a target="_blank" href="'+b.url+'">'+b.url+"</a>");a.push("</li>")}a.push("</ul>");a.push("<ul>");a.push("<li>&nbsp;</li>");a.push("<li><strong>Browser Log</strong></li>");for(c=0;c<$U.logMessages.length;c++){var b=$U.logMessages[c];a.push("<li>");a.push("<strong>"+lpad(2,"0",b.time.getHours())+":"+lpad(2,"0",b.time.getMinutes())+":"+lpad(2,"0",b.time.getSeconds())+"."+lpad(3,"0",b.time.getMilliseconds())+"</strong>  "+b.msg);a.push("</li>")}a.push("</ul>");jQuery("#request_queue").html(a.join(""));jQuery("#request_queue").show()}function onIFrameLoaded(a){switch(a){default:$U.log("onIFrameLoaded: Unhandled element "+a);break;case"ifsettings":if(g_LaunchSetting==1){window.setTimeout(function(){var b=(jQuery("#ifsettings").attr("src")==undefined)?jQuery("#ifsettings").attr("exthref"):jQuery("#ifsettings").attr("src");jQuery.postMessage("settings_finishreset",b,jQuery("#ifsettings").get(0).contentWindow);if(g_LaunchSetting==1){jQuery("#lte_settings_scrn").show()}},500)}break;case"ifvpn":if(g_LaunchSetting==4){jQuery("#settings_vpn").show()}break}}var fnoi_timer=0,fnoi=function(){if(jQuery("#launchVPN").is(":visible")){window.clearInterval(fnoi_timer);fnoi_timer=0;return}try{var a="";jQuery($SCOPECONFIG.G_ENHANCEDCOMPS).each(function(d,c){if(c.component=="oimanager"){a=c.services("discovery").uri}})}catch(b){return}if(a.length>0){if(a.length>0){ajax("GET",a,"",function(c){var e=window.parseDiscoveryResponse(c);jQuery(e).each(function(d,f){if(f.component.toLowerCase()==="oimanager"){window.picasoUI.onOiManager(f);window.clearInterval(fnoi_timer);fnoi_timer=0;return}})},function(){},false,window.picaso.defaultAjaxTimeout);return false}}};fnoi_timer=window.setInterval(fnoi,15000);var g_graphics_interval=0,graphics={};function refreshElementGraphic(a){var b=jQuery;b("a,span").each(function(e,d){var c=b(d).css("background-image");if(c!="none"){if(c.indexOf(a)>=0&&graphics['"'+c+'"']=="200"){b(d).css("background-image",c);if(c.indexOf("lightgray_1px")!="-1"){b(d).removeAttr("style")}}}})}function refreshGraphics(){var b=jQuery;b("a,span").each(function(e,d){var c=b(d).css("background-image");if(c!="none"){if(graphics['"'+c+'"']!="200"){graphics['"'+c+'"']=c}}});var a=function(){b.each(graphics,function(d,c){var e=c.replace('url("',"");e=e.replace("url(","");e=e.replace('")',"");e=e.replace(")","");e=e.replace('"',"");var f=function(){graphics['"'+c+'"']="200";refreshElementGraphic(c)};if(e!="200"){ajax("GET",e,"",function(g){f()},function(g){if(g.status!=200){}else{}},false,picaso.defaultAjaxTimeout)}})};window.setTimeout(a,500);if(g_graphics_interval==0){g_graphics_interval=window.setInterval(refreshGraphics,12000)}}var g_skipnextgpsclick=false;function handleGpsAuto(){if(g_skipnextgpsclick){g_skipnextgpsclick=false;return}var d=getSelectedGpsObject();if(d){var c=d.url;if(c&&d.discovery!=null){var b=jQuery("userservice>type:contains(5)+uri:first",d.discovery).text(),a=jQuery("userservice>type:contains(6)+uri:first",d.discovery).text();if(b&&a){if("on"==jQuery("input[name='gpsauto']:checked").val()){d.AlwaysOn=true;$GPS.setGpsAuto(b,a,d.id,"on",null,null)}else{d.AlwaysOn=false;$GPS.setGpsAuto(b,a,d.id,"off",null,null)}}}return}}window.didMove=false;jQuery(document).ready(function(){jQuery("#launchVPN").hide();jQuery("#message-display").scrollTop(jQuery("#message-display div").height());jQuery("#smslist").scrollTop(jQuery("#smslist div").height());try{if(window.SmartMobility&&window.SmartMobility.show){window.SmartMobility.show()}}catch(f){}jQuery("#ui-version").text("UI Version: "+G_VERSION);jQuery("#fullnameandversion").html("Verizon Mobile Broadband Manager Version "+G_VERSION);var d=jQuery.url.param("G_GOTADEVICE");if(typeof d==="string"&&d.length>0&&d!=="undefined"){G_GOTADEVICE=d;return}var l=window.location.href;if(l.indexOf("sm#appui")!=-1){jQuery("#vzw_window").attr("class","nsmbm")}sigHoverWatcher=new MonitorHover("#signal_strength");if(!browserCheck()){jQuery("#vzw_window").remove();jQuery("<div id='UnsupportedBrowser'/>").addClass("message").appendTo("body");jQuery("<p />").text("It appears you are using an older version of the web browser, and the Verizon Mobile Broadband Manager may not work properly.").appendTo(".message");jQuery("<p />").text("Please upgrade your browser to the latest version to ensure full functionality.").appendTo(".message");jQuery("<p />").text("The following is the list of currently supported web browsers:").appendTo(".message");var g=new Array("Microsoft Internet Explorer versions 7 and higher","Mozilla Firefox versions 5.0 and higher","Google Chrome versions 9 and higher","Apple Safari version 5 and higher","Opera version 10 and higher");var b=jQuery("<ul />");jQuery.each(g,function(p,o){jQuery("<li />").text(o).appendTo(b)});jQuery(b).appendTo(".message");return}if(jQuery.browser.widget){jQuery("#mbb_net").click(function(){invokeURL(jQuery("#mbb_net").attr("href"))});jQuery("#user-guide-url").click(function(){invokeURL(jQuery("#user-guide-url").attr("href"))});jQuery("#chat_online").click(function(){invokeURL(jQuery("#chat_online").attr("href"))})}try{var e=function(p){try{var o,r;if(p){o=p.clientX;r=p.clientY;if(r>110){window.didMove=false;return}}if(window.didMove){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else{if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}}else{if(document.selection){document.selection.empty()}}window.didMove=false}}catch(q){window.didMove=false}},c=function(o){try{if(window.mouseState==="down"){window.didMove=true;e(o)}}catch(p){}};window.onmousedown=function(o){window.mouseState="down"};window.onmouseup=function(o){e();window.mouseState=""};window.onmousemove=c;var a=jQuery("#message-input-message");if(a.text().length==0){a.text(messagewatermark).addClass("watermark")}jQuery("#message-input").val("").removeClass("watermark");fld_maxLength("message-input","outgoing-number",160,70,null);initDebug();initSMInterface();initDeviceHandler();initLandingPage();initOSBasedLinks();renderUIState(null);if($U.hasStorage){$SCOPECONFIG.G_UPDATESTATUS=$U.getStorage("update_status");var m=$U.getStorage("startupscopecheck");if(m!=null&&m=="true"){$SCOPECONFIG.startupcheck=true}}if($SCOPECONFIG.G_UPDATESTATUS==null){$SCOPECONFIG.G_UPDATESTATUS=$SCOPECONFIG.UPDTNG_IDLE}document.onmousedown=function(){jQuery(".errorPopup").hide()};document.onkeydown=function(){var o=false,p=arguments[0]||event;if(p.ctrlKey){switch(p.keyCode){case 68:invokeFta(false);break;case 84:invokeServiceURL("Device Terminal");break;default:break}}o=true;if(jQuery.browser.msie){if(p.keyCode==13||p.which==13||p.KeyIdentifier=="enter"){if(document.activeElement.id=="message-input"){p.returnResult=o}else{return false}}else{p.returnResult=o}}else{if(!o){p.preventDefault()}}return o};jQuery.receiveMessage(function(q){if(q.data==="networkSelection"){invokeNS(true)}else{if(q.data==="settings_cannotsave"){handleSettingsCannotSave()}else{if(q.data==="settings_scanningblock"){handleSettingsCannotSave()}else{if(q.data==="settings_autoConnectConfirm"){handleAutoConnectConfirm()}else{if(q.data==="settings_autoConnectConfirm2"){handleAutoConnectConfirm2()}else{if(q.data==="disconnectHACK"){var o=getDevice();if(o!=null&&window.uiconst.connectionTime.state==="connected"){o.condata.sendAction("disconnect")}}else{if(q.data==="connectionCheckAndDisconnect"){var o=getDevice();var p=(jQuery("#ifsettings").attr("src")==undefined)?jQuery("#ifsettings").attr("exthref"):jQuery("#ifsettings").attr("src");if(o!=null&&window.uiconst.connectionTime.state==="connected"){confirmPopup("You are currently connected to the Verizon Wireless network. You need to disconnect your connection before changing the settings.\n\nDo you want to disconnect now?","","",function(){o.condata.sendAction("disconnect");jQuery.postMessage("accept_disconnect",p,jQuery("#ifsettings").get(0).contentWindow)},function(){})}else{jQuery.postMessage("accept_disconnect",p,jQuery("#ifsettings").get(0).contentWindow)}}else{if(q.data==="vpnchange"){window.setTimeout(function(){handleVPNSettingsChanged()},2000)}}}}}}}}},function(){return true},500);jQuery("#mgmt_src").text("Verizon Wireless");jQuery("#mgmt_name").text("");jQuery("#mgmt_date").text("");jQuery("#mgmt_time").text("");jQuery("#mgmt_desc").text("");jQuery("#mgmt_status").text("");jQuery("#update_status_text").hide();jQuery("#update_status_notice").hide();jQuery("#update_defer_notice").html("");jQuery("#update_status_text").html("");jQuery("#update_status_wait_icon").hide();EnableUpdateProgress(false);window.setTimeout(function(){initScopeCheck()},5000)}catch(h){alertPopup("Error: "+h)}checkMenuStates();window.renderUIState(null);if(jQuery.browser.msie&&jQuery.browser.version<8){jQuery("#vpnButton").css("width","79px")}if(window.SmartMobility.IsEmbeddedIE&&jQuery.browser.msie&&jQuery.browser.version<=7){jQuery("#vzw_window").css("margin-left","-148px");window.setTimeout(function(){jQuery("#vzw_window").css("margin-left","-148px")},1000);window.setTimeout(function(){jQuery("#vzw_window").css("margin-left","-148px")},5000)}refreshGraphics();var i=jQuery("input[name='gpsauto']");i.unbind("change");i.change(function(){handleGpsAuto()});setTimeout(function(){jQuery("span.radio").click(function(){handleGpsAuto()})},2000)});function xmlToString(a){var b;if(window.ActiveXObject){b=a.xml}else{b=(new XMLSerializer()).serializeToString(a)}return b};
(function($w,$j){$w.usage={result:{}};$w.usage.PARAMETER_MDN="mdn";$w.usage.PARAMETER_CLIENT="client";$w.usage.PARAMETER_SERVICENAME="serviceName";$w.usage.PARAMETER_SUBSERVICENAME="subServiceName";$w.usage.PARAMETER_DEVICEID="deviceid";$w.usage.PARAMETER_DEVICEIDTYPE="deviceidtype";$w.usage.URL="https://mobile.vzw.com/mdui/servlet/vzam/";$w.getUsageData=function(client,mdn,serviceName,subServiceName,deviceid,deviceidtype,fnSuccess,fnError){var p=$w.usage,data=p.PARAMETER_MDN+"="+mdn+"&"+p.PARAMETER_CLIENT+"="+client+"&"+p.PARAMETER_SERVICENAME+"="+serviceName+"&"+p.PARAMETER_SUBSERVICENAME+"="+subServiceName+"&"+p.PARAMETER_DEVICEID+"="+deviceid+"&"+p.PARAMETER_DEVICEIDTYPE+"="+deviceidtype;if(!$w.ajaxRequests){$w.ajaxRequests=[]}$w.ajaxRequests.push({url:p.URL,time:new Date(),method:"POST",response:false,error:false});if($j.browser.msie&&jQuery.browser.version<10){if($U.IsCrossDomain(window.location.href,p.URL)){var xdr=new XDomainRequest();try{xdr.open("POST",p.URL)}catch(Err){if(fnError){fnError()}return}xdr.timeout=10000;xdr.onprogress=function(){};xdr.onerror=function(){$w.errorReceived(p.URL);if(fnError){fnError(xdr,"error")}if(jQuery.browser.msie){CollectGarbage()}};xdr.ontimeout=function(){$w.errorReceived(p.URL);if(fnError){fnError(xdr,"timeout")}if(jQuery.browser.msie){CollectGarbage()}};xdr.onload=function(){$w.responseRecieved(p.URL);try{if(fnSuccess){fnSuccess(eval(xdr.responseText),"",xdr)}}catch(err){if(fnError){fnError()}}if(jQuery.browser.msie){CollectGarbage()}};xdr.send(data);return}var xmlHttp=null;if(window.ActiveXObject){xmlHttp=new ActiveXObject("MSXML2.XMLHTTP.3.0")}if(xmlHttp==null){$w.errorReceived(p.URL);if(fnError){fnError()}return}var handler=function(){if(xmlHttp.readyState==4){if(xmlHttp.status>=200&&xmlHttp.status<400){$w.responseRecieved(p.URL);try{if(fnSuccess){fnSuccess(eval(xmlHttp.responseText),"",xmlHttp.responseText)}}catch(Err){if(fnError){fnError()}}}else{$w.errorReceived(p.URL);if(fnError){fnError(xmlHttp,"error")}if(jQuery.browser.msie){CollectGarbage()}}}else{}};if(xmlHttp!=null){xmlHttp.onreadystatechange=handler;try{xmlHttp.open("POST",p.URL,true);xmlHttp.send(data)}catch(Err){if(fnError){fnError(xmlHttp)}}}return}$j.ajax({url:p.URL,type:"POST",data:data,context:document.body,dataType:"json",cache:false,success:function(data,textStatus,jqXHR){$w.usage.result=data;$w.responseRecieved(p.URL);if(fnSuccess){fnSuccess(data,textStatus,jqXHR)}},error:function(jqXHR,textStatus,errorThrown){$w.errorReceived(p.URL);if(fnError){fnError(jqXHR)}},timeout:10000})};$w.usage.getUnique=function(){var d=getDevice(),ret={meid:"",phone:"",imsi:""};if(d&&d._data){ret.imsi=$j("ui[type=IMSI]:first",d._data).text();ret.meid=$j("ui[type=meid]:first",d._data).text();ret.phone=$j('ui[type="Phone Number"]:first',d._data).text()}else{$U.log("Discovery response not yet available.")}return ret}})(window,jQuery);
