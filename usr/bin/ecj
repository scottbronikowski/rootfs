#! /bin/sh

case "$*" in
  *-bootclasspath*) ;;
  *)
    if [ ! -f /usr/lib/jvm/java-gcj/jre/lib/rt.jar ]; then
      bcoption="-bootclasspath /usr/share/java/libgcj-4.6.jar"
    fi
esac

if [ -x /usr/bin/ecj-gcj ]; then

    exec /usr/bin/ecj-gcj \
	$bcoption ${1+"$@"}

else

    case $CLASSPATH in
      */usr/share/java/ecj.jar*) ;;
      */usr/share/java/eclipse-ecj.jar*) ;;
      *) CLASSPATH=${CLASSPATH:+$CLASSPATH:}/usr/share/java/eclipse-ecj.jar
    esac
    export CLASSPATH

    exec /usr/bin/gij-4.6 \
        -Dgnu.gcj.precompiled.db.path=/var/lib/gcj-$ver/classmap.db \
        -Djava.ext.dirs=/usr/lib/java-ext:/usr/share/java-ext \
        org.eclipse.jdt.internal.compiler.batch.Main $bcoption ${1+"$@"}

fi
