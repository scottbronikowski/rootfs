<!?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher 2003 for FrameMaker 8.0.8.2296" />
    <meta name="TEMPLATEBASE" content="HDF4 Version 1.0" />
    <meta name="LASTUPDATED" content="07/16/09 01:40:39" />
    <title>create_vgroups.c</title>
    <link rel="StyleSheet" href="document.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="catalog.css" type="text/css" media="all" />
<link rel="first" title="First" href="UGTop.html" />
<link rel="last" title="Last" href="UG_BookIX.html" />
<link rel="previous" title="Previous" href="Examples_AN.html" />
<link rel="next" title="Next" href="Example_Vd.html" />

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/seealso.js"></script>

    <script type="text/javascript" language="JavaScript1.2">
     <!--
      var  WebWorksSeeAlso = new WebWorksSeeAlso_Object();
     // -->
    </script>
  </head>

  <body>

    <p>
    <table id="SummaryNotReq1" border="0" width="850"cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
          <a href="http://www.hdfgroup.org"><img id="LongDescNotReq1" border="0" src="images/hdf_logo.jpg" width="90" height="70" alt="The HDF Group" valign="top" /></a>
        </td>
        <td valign="middle" align="center">
          <b><H1>HDF User’s Guide</H1>
           Version 4.2r4</b><br />
        </td>
        <td valign="middle" align="right">
        <br/>
<b><a HREF="UGTOP.html">[Top]</a>
<a accesskey="3" href="Examples_AN.html"><b>[Prev]</b><a accesskey="4" href="Example_Vd.html"><b>[Next]</b></b>
        </td>
      </tr>
    </table>
    </p>
    <hr />

    <blockquote>
<a name="wp928574"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
create_vgroups.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp928579"> </a>
#define  FILE_NAME    &quot;Two_Vgroups.hdf&quot;<a name="wp928585"> </a>
main()<a name="wp928587"> </a>
{<a name="wp928588"> </a>
   /************************* Variable declaration **************************/<a name="wp928589"> </a>
   intn  status_n;      /* returned status for functions returning an intn  */<a name="wp928591"> </a>
   int32 status_32,     /* returned status for functions returning an int32 */<a name="wp928592"> </a>
         vgroup_ref = -1,<a name="wp928593"> </a>
         vgroup1_id, vgroup2_id, file_id;<a name="wp928594"> </a>
   /********************** End of variable declaration **********************/<a name="wp928596"> </a>
   /*<a name="wp928598"> </a>
   * Create the HDF file.<a name="wp928599"> </a>
   */<a name="wp928600"> </a>
   file_id = Hopen (FILE_NAME, DFACC_CREATE, 0);<a name="wp928601"> </a>
   /*<a name="wp928603"> </a>
   * Initialize the V interface.<a name="wp928604"> </a>
   */<a name="wp928605"> </a>
   status_n = Vstart (file_id);<a name="wp928606"> </a>
   /*<a name="wp928608"> </a>
   * Create the first vgroup.  Note that the vgroup reference number is set<a name="wp928609"> </a>
   * to -1 for creating and the access mode is &quot;w&quot; for writing.<a name="wp928610"> </a>
   */<a name="wp928611"> </a>
   vgroup1_id = Vattach (file_id, vgroup_ref, &quot;w&quot;);<a name="wp928612"> </a>
   /*<a name="wp928614"> </a>
   * Create the second vgroup. <a name="wp928615"> </a>
   */<a name="wp928616"> </a>
   vgroup2_id = Vattach (file_id, vgroup_ref, &quot;w&quot;);<a name="wp928617"> </a>
   /*<a name="wp928619"> </a>
   * Any operations on the vgroups.<a name="wp928620"> </a>
   */<a name="wp928621"> </a>
   /*<a name="wp928623"> </a>
   * Terminate access to the first vgroup.<a name="wp928624"> </a>
   */<a name="wp928625"> </a>
   status_32 = Vdetach (vgroup1_id);<a name="wp928626"> </a>
   /*<a name="wp928628"> </a>
   * Terminate access to the second vgroup.<a name="wp928629"> </a>
   */<a name="wp928630"> </a>
   status_32 = Vdetach (vgroup2_id);<a name="wp928631"> </a>
   /*<a name="wp928633"> </a>
   * Terminate access to the V interface and close the HDF file.<a name="wp928634"> </a>
   */<a name="wp928635"> </a>
   status_n = Vend (file_id);<a name="wp928636"> </a>
   status_n = Hclose (file_id);<a name="wp928637"> </a>
}<a name="wp928638"> </a>
</pre></div>
<a name="wp928575"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
create_vgroups.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      program  create_vgroup<a name="wp928646"> </a>
      implicit none<a name="wp928651"> </a>
C<a name="wp928652"> </a>
C     Parameter declaration<a name="wp928653"> </a>
C<a name="wp928654"> </a>
      character*15 FILE_NAME<a name="wp928655"> </a>
C<a name="wp928656"> </a>
      parameter (FILE_NAME = `Two_Vgroups.hdf&#39;)<a name="wp928657"> </a>
      integer DFACC_CREATE<a name="wp928658"> </a>
      parameter (DFACC_CREATE = 4)<a name="wp928659"> </a>
C<a name="wp928660"> </a>
C     Function declaration<a name="wp928661"> </a>
C<a name="wp928662"> </a>
      integer hopen, hclose<a name="wp928663"> </a>
      integer vfstart, vfatch, vfdtch, vfend<a name="wp928664"> </a>
C<a name="wp928666"> </a>
C**** Variable declaration *******************************************<a name="wp928667"> </a>
C<a name="wp928668"> </a>
      integer status<a name="wp928669"> </a>
      integer file_id<a name="wp928670"> </a>
      integer vgroup1_id, vgroup2_id, vgroup_ref<a name="wp928671"> </a>
C<a name="wp928672"> </a>
C**** End of variable declaration ************************************<a name="wp928673"> </a>
C<a name="wp928674"> </a>
C<a name="wp928675"> </a>
C     Create the HDF file.<a name="wp928676"> </a>
C<a name="wp928677"> </a>
      file_id = hopen(FILE_NAME, DFACC_CREATE, 0)<a name="wp928678"> </a>
C<a name="wp928679"> </a>
C     Initialize the V interface.<a name="wp928680"> </a>
C<a name="wp928681"> </a>
      status = vfstart(file_id)<a name="wp928682"> </a>
C<a name="wp928683"> </a>
C     Create the first vgroup. Note that the vgroup reference number is set<a name="wp928684"> </a>
C     to -1 for creating and the access mode is `w&#39; for writing.<a name="wp928685"> </a>
C<a name="wp928686"> </a>
      vgroup_ref = -1<a name="wp928687"> </a>
      vgroup1_id = vfatch(file_id, vgroup_ref, `w&#39;)<a name="wp928688"> </a>
C<a name="wp928689"> </a>
C     Create the second vgroup.<a name="wp928690"> </a>
C<a name="wp928691"> </a>
      vgroup2_id = vfatch(file_id, vgroup_ref, `w&#39;)<a name="wp928692"> </a>
C<a name="wp928693"> </a>
C     Any operations on the vgroups.<a name="wp928694"> </a>
C<a name="wp928695"> </a>
C     ..............................<a name="wp928696"> </a>
C<a name="wp928697"> </a>
C     Terminate access to the first vgroup.<a name="wp928698"> </a>
C<a name="wp928699"> </a>
      status = vfdtch(vgroup1_id)<a name="wp928700"> </a>
C<a name="wp928701"> </a>
C     Terminate access to the second vgroup.<a name="wp928702"> </a>
C<a name="wp928703"> </a>
      status = vfdtch(vgroup2_id)<a name="wp928704"> </a>
C<a name="wp928705"> </a>
C     Terminate access to the V interface and close the HDF file.<a name="wp928706"> </a>
C<a name="wp928707"> </a>
      status = vfend(file_id)<a name="wp928708"> </a>
      status = hclose(file_id)<a name="wp928709"> </a>
      end<a name="wp928710"> </a>
</pre></div>
<a name="wp928532"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
add_sds_to_vgroup.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include   &quot;hdf.h&quot;      /* Note: in this example, hdf.h can be omitted...*/<a name="wp928717"> </a>
#include   &quot;mfhdf.h&quot;    /* ...since mfhdf.h already includes hdf.h */<a name="wp928722"> </a>
#define  FILE_NAME    &quot;General_Vgroups.hdf&quot;<a name="wp928724"> </a>
#define  SDS_NAME     &quot;Test SD&quot;<a name="wp928725"> </a>
#define  VG_NAME      &quot;SD Vgroup&quot;<a name="wp928726"> </a>
#define  VG_CLASS     &quot;Common Vgroups&quot;<a name="wp928727"> </a>
main()<a name="wp928729"> </a>
{<a name="wp928730"> </a>
   /************************* Variable declaration **************************/<a name="wp928731"> </a>
   intn   status_n;     /* returned status for functions returning an intn  */<a name="wp928733"> </a>
   int32  status_32,    /* returned status for functions returning an int32 */<a name="wp928734"> </a>
          sd_id,        /* SD interface identifier */<a name="wp928735"> </a>
          sds_id,       /* data set identifier */<a name="wp928736"> </a>
          sds_ref,      /* reference number of the data set */<a name="wp928737"> </a>
          dim_sizes[1], /* dimension of the data set - only one */<a name="wp928738"> </a>
          rank = 1,     /* rank of the data set array */<a name="wp928739"> </a>
          vgroup_id,    /* vgroup identifier */<a name="wp928740"> </a>
          file_id;      /* HDF file identifier, same for V interface */<a name="wp928741"> </a>
   /********************** End of variable declaration **********************/<a name="wp928743"> </a>
   /*<a name="wp928745"> </a>
   * Create the HDF file.<a name="wp928746"> </a>
   */<a name="wp928747"> </a>
   file_id = Hopen (FILE_NAME, DFACC_CREATE, 0);<a name="wp928748"> </a>
   /*<a name="wp928750"> </a>
   * Initialize the V interface.<a name="wp928751"> </a>
   */<a name="wp928752"> </a>
   status_n = Vstart (file_id);<a name="wp928753"> </a>
   /*<a name="wp928755"> </a>
   * Initialize the SD interface.<a name="wp928756"> </a>
   */<a name="wp928757"> </a>
   sd_id = SDstart (FILE_NAME, DFACC_WRITE);<a name="wp928758"> </a>
   /*<a name="wp928760"> </a>
   * Set the size of the SDS&#39;s dimension.<a name="wp928761"> </a>
   */<a name="wp928762"> </a>
   dim_sizes[0] = 10;<a name="wp928763"> </a>
   /*<a name="wp928765"> </a>
   * Create the SDS.<a name="wp928766"> </a>
   */<a name="wp928767"> </a>
   sds_id = SDcreate (sd_id, SDS_NAME, DFNT_INT32, rank, dim_sizes);<a name="wp928768"> </a>
   /*<a name="wp928770"> </a>
   * Create a vgroup and set its name and class.<a name="wp928771"> </a>
   */<a name="wp928772"> </a>
   vgroup_id = Vattach (file_id, -1, &quot;w&quot;);<a name="wp928773"> </a>
   status_32 = Vsetname (vgroup_id, VG_NAME);<a name="wp928774"> </a>
   status_32 = Vsetclass (vgroup_id, VG_CLASS);<a name="wp928775"> </a>
   /*<a name="wp928777"> </a>
   * Obtain the reference number of the SDS using its identifier.<a name="wp928778"> </a>
   */<a name="wp928779"> </a>
   sds_ref = SDidtoref (sds_id);<a name="wp928780"> </a>
   /*<a name="wp928782"> </a>
   * Add the SDS to the vgroup.  Note: the tag DFTAG_NDG is used<a name="wp928783"> </a>
   * when adding an SDS.  Refer to Appendix A for the entire list of tags.<a name="wp928784"> </a>
   */<a name="wp928785"> </a>
   status_32 = Vaddtagref (vgroup_id, DFTAG_NDG, sds_ref);<a name="wp928786"> </a>
   /*<a name="wp928788"> </a>
   * Terminate access to the SDS and to the SD interface.<a name="wp928789"> </a>
   */<a name="wp928790"> </a>
   status_n = SDendaccess (sds_id);<a name="wp928791"> </a>
   status_n = SDend (sd_id);<a name="wp928792"> </a>
   /*<a name="wp928794"> </a>
   * Terminate access to the vgroup and to the V interface, and <a name="wp928795"> </a>
   * close the HDF file.<a name="wp928796"> </a>
   */<a name="wp928797"> </a>
   status_32 = Vdetach (vgroup_id);<a name="wp928798"> </a>
   status_n = Vend (file_id);<a name="wp928799"> </a>
   status_n = Hclose (file_id);<a name="wp928800"> </a>
}<a name="wp928801"> </a>
</pre></div>
<a name="wp928534"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
add_sds_to_vgroup.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      program  add_SDS_to_a_vgroup<a name="wp928811"> </a>
      implicit none<a name="wp928816"> </a>
C<a name="wp928817"> </a>
C     Parameter declaration<a name="wp928818"> </a>
C<a name="wp928819"> </a>
      character*19 FILE_NAME<a name="wp928820"> </a>
      character*7  SDS_NAME<a name="wp928821"> </a>
      character*9  VG_NAME<a name="wp928822"> </a>
      character*13 VG_CLASS<a name="wp928823"> </a>
C<a name="wp928824"> </a>
      parameter (FILE_NAME = `General_Vgroups.hdf&#39;,<a name="wp928825"> </a>
     +           SDS_NAME  = `Test SD&#39;,<a name="wp928826"> </a>
     +           VG_NAME   = `SD Vgroup&#39;,<a name="wp928827"> </a>
     +           VG_CLASS  = `Common Vgroups&#39;)<a name="wp928828"> </a>
      integer DFACC_CREATE, DFACC_WRITE <a name="wp928829"> </a>
      parameter (DFACC_CREATE = 4, DFACC_WRITE = 2)<a name="wp928830"> </a>
      integer DFNT_INT32<a name="wp928831"> </a>
      parameter (DFNT_INT32 = 24)<a name="wp928832"> </a>
      integer DFTAG_NDG<a name="wp928833"> </a>
      parameter (DFTAG_NDG = 720)<a name="wp928834"> </a>
C<a name="wp928835"> </a>
C     Function declaration<a name="wp928836"> </a>
C<a name="wp928837"> </a>
      integer hopen, hclose<a name="wp928838"> </a>
      integer vfstart, vfatch, vfsnam, vfscls, vfadtr, vfdtch, vfend<a name="wp928839"> </a>
      integer sfstart, sfcreate, sfid2ref, sfendacc, sfend<a name="wp928840"> </a>
C<a name="wp928842"> </a>
C**** Variable declaration *******************************************<a name="wp928843"> </a>
C<a name="wp928844"> </a>
      integer status<a name="wp928845"> </a>
      integer file_id<a name="wp928846"> </a>
      integer vgroup_id<a name="wp928847"> </a>
      integer sd_id, sds_id, sds_ref<a name="wp928848"> </a>
      integer dim_sizes(1), rank<a name="wp928849"> </a>
C<a name="wp928850"> </a>
C**** End of variable declaration ************************************<a name="wp928851"> </a>
C<a name="wp928852"> </a>
C<a name="wp928853"> </a>
C     Create the HDF file.<a name="wp928854"> </a>
C<a name="wp928855"> </a>
      file_id = hopen(FILE_NAME, DFACC_CREATE, 0)<a name="wp928856"> </a>
C<a name="wp928857"> </a>
C     Initialize the V interface.<a name="wp928858"> </a>
C<a name="wp928859"> </a>
      status = vfstart(file_id)<a name="wp928860"> </a>
       <a name="wp928861"> </a>
C<a name="wp928862"> </a>
C     Initialize SD interface. <a name="wp928863"> </a>
C<a name="wp928864"> </a>
      sd_id = sfstart(FILE_NAME, DFACC_WRITE) <a name="wp928865"> </a>
C<a name="wp928866"> </a>
C     Set the rank and the size of SDS&#39;s dimension.<a name="wp928867"> </a>
C<a name="wp928868"> </a>
      rank = 1<a name="wp928869"> </a>
      dim_sizes(1) = 10<a name="wp928870"> </a>
C<a name="wp928871"> </a>
C     Create the SDS.<a name="wp928872"> </a>
C<a name="wp928873"> </a>
      sds_id = sfcreate(sd_id, SDS_NAME, DFNT_INT32, rank, dim_sizes)<a name="wp928874"> </a>
C<a name="wp928875"> </a>
C     Create a vgroup and set its name and class.<a name="wp928876"> </a>
C<a name="wp928877"> </a>
      vgroup_id = vfatch(file_id, -1 , `w&#39;)<a name="wp928878"> </a>
      status    = vfsnam(vgroup_id, VG_NAME)<a name="wp928879"> </a>
      status    = vfscls(vgroup_id, VG_CLASS)<a name="wp928880"> </a>
C<a name="wp928881"> </a>
C     Obtain the reference number of the SDS using its identifier.<a name="wp928882"> </a>
C<a name="wp928883"> </a>
      sds_ref = sfid2ref(sds_id)<a name="wp928884"> </a>
C<a name="wp928885"> </a>
C     Add the SDS to the vgroup. Note: the tag DFTAG_NDG is used<a name="wp928886"> </a>
C     when adding an SDS.  Refer to HDF Reference Manual, Section III, Table 3K,<a name="wp928887"> </a>
C     for the entire list of tags.<a name="wp928888"> </a>
C<a name="wp928889"> </a>
      status = vfadtr(vgroup_id, DFTAG_NDG, sds_ref)<a name="wp928890"> </a>
C<a name="wp928891"> </a>
C     Terminate access to the SDS and to the SD interface.<a name="wp928892"> </a>
C<a name="wp928893"> </a>
      status = sfendacc(sds_id)<a name="wp928894"> </a>
      status = sfend(sd_id)<a name="wp928895"> </a>
C<a name="wp928896"> </a>
C     Terminate access to the vgroup.<a name="wp928897"> </a>
C<a name="wp928898"> </a>
      status = vfdtch(vgroup_id)<a name="wp928899"> </a>
C<a name="wp928900"> </a>
C     Terminate access to the V interface and close the HDF file.<a name="wp928901"> </a>
C<a name="wp928902"> </a>
      status = vfend(file_id)<a name="wp928903"> </a>
      status = hclose(file_id)<a name="wp928904"> </a>
      end<a name="wp928905"> </a>
</pre></div>
<a name="wp928536"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
insert_vdatas_to_vgroup.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp928911"> </a>
#define  FILE_NAME         &quot;General_Vgroups.hdf&quot;<a name="wp928917"> </a>
#define  N_RECORDS         30       /* number of records in the vdatas */<a name="wp928918"> </a>
#define  ORDER             3        /* order of field FIELD_VD2 */<a name="wp928919"> </a>
#define  VG_NAME           &quot;Vertices&quot;<a name="wp928920"> </a>
#define  VG_CLASS          &quot;Vertex Set&quot;<a name="wp928921"> </a>
#define  VD1_NAME          &quot;X,Y Coordinates&quot;   /* first vdata to hold X,Y...*/<a name="wp928922"> </a>
#define  VD1_CLASS         &quot;Position&quot;          /*...values of the vertices */<a name="wp928923"> </a>
#define  VD2_NAME          &quot;Temperature&quot;       /* second vdata to hold the...*/<a name="wp928924"> </a>
#define  VD2_CLASS         &quot;Property List&quot;     /*...temperature field */<a name="wp928925"> </a>
#define  VD3_NAME          &quot;Node List&quot;         /* third vdata to hold...*/<a name="wp928926"> </a>
#define  VD3_CLASS         &quot;Mesh&quot;              /*...the list of nodes */<a name="wp928927"> </a>
#define  FIELD1_VD1        &quot;PX&quot;    /* first field of first vdata - X values */<a name="wp928928"> </a>
#define  FIELD2_VD1        &quot;PY&quot;/* second field of first vdata - Y values */<a name="wp928929"> </a>
#define  FIELD_VD2         &quot;TMP&quot;/* field of third vdata */<a name="wp928930"> </a>
#define  FIELD_VD3         &quot;PLIST&quot;/* field of second vdata */<a name="wp928931"> </a>
#define  FIELDNAME_LIST    &quot;PX,PY&quot; /* field name list for first vdata */<a name="wp928932"> </a>
/* Note that the second and third vdatas can use the field names as <a name="wp928933"> </a>
   the field name lists unless more fields are added to a vdata.<a name="wp928934"> </a>
   Then a field name list is needed for that vdata */<a name="wp928935"> </a>
main( )<a name="wp928937"> </a>
{<a name="wp928938"> </a>
   /************************* Variable declaration **************************/<a name="wp928939"> </a>
   intn     status_n;   /* returned status for functions returning an intn  */<a name="wp928941"> </a>
   int32    status_32,  /* returned status for functions returning an int32 */<a name="wp928942"> </a>
            file_id, vgroup_id, <a name="wp928943"> </a>
            vdata1_id, vdata2_id, vdata3_id; <a name="wp928944"> </a>
   int32    num_of_records,           /* number of records actually written */<a name="wp928945"> </a>
            vd_index;                 /* position of a vdata in the vgroup  */<a name="wp928946"> </a>
   int8     i, j, k = 0;<a name="wp928947"> </a>
   float32  pxy[N_RECORDS][2] =       /* buffer for data of the first vdata */<a name="wp928948"> </a>
		  	{-1.5, 2.3, -1.5, 1.98, -2.4, .67,<a name="wp928949"> </a>
   			-3.4, 1.46, -.65, 3.1, -.62, 1.23,<a name="wp928950"> </a>
   			-.4, 3.8, -3.55, 2.3, -1.43, 2.44,<a name="wp928951"> </a>
   			.23, 1.13, -1.4, 5.43, -1.4, 5.8,<a name="wp928952"> </a>
   			-3.4, 3.85, -.55, .3, -.21, 1.22,<a name="wp928953"> </a>
   			-1.44, 1.9, -1.4, 2.8, .94, 1.78,<a name="wp928954"> </a>
   			-.4, 2.32, -.87, 1.99, -.54, 4.11,<a name="wp928955"> </a>
   			-1.5, 1.35, -1.4, 2.21, -.22, 1.8,<a name="wp928956"> </a>
   			-1.1, 4.55, -.44, .54, -1.11, 3.93,<a name="wp928957"> </a>
   			-.76, 1.9, -2.34, 1.7, -2.2, 1.21};<a name="wp928958"> </a>
   float32  tmp[N_RECORDS];          /* buffer for data of the second vdata */<a name="wp928959"> </a>
   int16    plist[N_RECORDS][3];     /* buffer for data of the third vdata */<a name="wp928960"> </a>
   /********************** End of variable declaration ***********************/<a name="wp928962"> </a>
   /*<a name="wp928964"> </a>
   * Open the HDF file for writing.<a name="wp928965"> </a>
   */<a name="wp928966"> </a>
   file_id = Hopen (FILE_NAME, DFACC_WRITE, 0);<a name="wp928967"> </a>
   /*<a name="wp928969"> </a>
   * Initialize the V interface.<a name="wp928970"> </a>
   */<a name="wp928971"> </a>
   status_n = Vstart (file_id);<a name="wp928972"> </a>
   /*<a name="wp928974"> </a>
   * Buffer the data for the second and third vdatas.<a name="wp928975"> </a>
   */<a name="wp928976"> </a>
   for (i = 0; i &lt; N_RECORDS; i++)<a name="wp928977"> </a>
      for (j = 0; j &lt; ORDER; j++)<a name="wp928978"> </a>
         plist[i][j] = ++k;<a name="wp928979"> </a>
   for (i = 0; i &lt; N_RECORDS; i++)<a name="wp928981"> </a>
      tmp[i] = i * 10.0;<a name="wp928982"> </a>
   /*<a name="wp928984"> </a>
   * Create the vgroup then set its name and class.  Note that the vgroup&#39;s<a name="wp928985"> </a>
   * reference number is set to -1 for creating and the access mode is &quot;w&quot; for<a name="wp928986"> </a>
   * writing.<a name="wp928987"> </a>
   */<a name="wp928988"> </a>
   vgroup_id = Vattach (file_id, -1, &quot;w&quot;);<a name="wp928989"> </a>
   status_32 = Vsetname (vgroup_id, VG_NAME);<a name="wp928990"> </a>
   status_32 = Vsetclass (vgroup_id, VG_CLASS);<a name="wp928991"> </a>
   /*<a name="wp928993"> </a>
   * Create the first vdata then set its name and class. Note that the vdata&#39;s<a name="wp928994"> </a>
   * reference number is set to -1 for creating and the access mode is &quot;w&quot; for<a name="wp928995"> </a>
   * writing.<a name="wp928996"> </a>
   */<a name="wp928997"> </a>
   vdata1_id = VSattach (file_id, -1, &quot;w&quot;);<a name="wp928998"> </a>
   status_32 = VSsetname (vdata1_id, VD1_NAME);<a name="wp928999"> </a>
   status_32 = VSsetclass (vdata1_id, VD1_CLASS);<a name="wp929000"> </a>
   /*<a name="wp929002"> </a>
   * Introduce and define the fields of the first vdata.<a name="wp929003"> </a>
   */<a name="wp929004"> </a>
   status_n = VSfdefine (vdata1_id, FIELD1_VD1, DFNT_FLOAT32, 1);<a name="wp929005"> </a>
   status_n = VSfdefine (vdata1_id, FIELD2_VD1, DFNT_FLOAT32, 1);<a name="wp929006"> </a>
   status_n = VSsetfields (vdata1_id, FIELDNAME_LIST);<a name="wp929007"> </a>
   /*<a name="wp929009"> </a>
   * Write the buffered data into the first vdata with full interlace mode.<a name="wp929010"> </a>
   */<a name="wp929011"> </a>
   num_of_records = VSwrite (vdata1_id, (uint8 *)pxy, N_RECORDS, <a name="wp929012"> </a>
                             FULL_INTERLACE);<a name="wp929013"> </a>
   /*<a name="wp929015"> </a>
   * Insert the vdata into the vgroup using its identifier.<a name="wp929016"> </a>
   */<a name="wp929017"> </a>
   vd_index = Vinsert (vgroup_id, vdata1_id);<a name="wp929018"> </a>
   /*<a name="wp929020"> </a>
   * Detach from the first vdata.<a name="wp929021"> </a>
   */<a name="wp929022"> </a>
   status_32 = VSdetach (vdata1_id);<a name="wp929023"> </a>
   /*<a name="wp929025"> </a>
   * Create, write, and insert the second vdata to the vgroup using<a name="wp929026"> </a>
   * steps similar to those used for the first vdata.<a name="wp929027"> </a>
   */ <a name="wp929028"> </a>
   vdata2_id = VSattach (file_id, -1, &quot;w&quot;);<a name="wp929029"> </a>
   status_32 = VSsetname (vdata2_id, VD2_NAME);<a name="wp929030"> </a>
   status_32 = VSsetclass (vdata2_id, VD2_CLASS);<a name="wp929031"> </a>
   status_n = VSfdefine (vdata2_id, FIELD_VD2, DFNT_FLOAT32, 1);<a name="wp929032"> </a>
   status_n = VSsetfields (vdata2_id, FIELD_VD2);<a name="wp929033"> </a>
   num_of_records = VSwrite (vdata2_id, (uint8 *)tmp, N_RECORDS, <a name="wp929034"> </a>
                             FULL_INTERLACE);<a name="wp929035"> </a>
   vd_index = Vinsert (vgroup_id, vdata2_id);<a name="wp929036"> </a>
   status_32 = VSdetach (vdata2_id);<a name="wp929037"> </a>
   /*<a name="wp929039"> </a>
   * Create, write, and insert the third vdata to the vgroup using <a name="wp929040"> </a>
   * steps similar to those used for the first and second vdatas.<a name="wp929041"> </a>
   */<a name="wp929042"> </a>
   vdata3_id = VSattach (file_id, -1, &quot;w&quot;);<a name="wp929043"> </a>
   status_32 = VSsetname (vdata3_id, VD3_NAME);<a name="wp929044"> </a>
   status_32 = VSsetclass (vdata3_id, VD3_CLASS);<a name="wp929045"> </a>
   status_n = VSfdefine (vdata3_id, FIELD_VD3, DFNT_INT16, 3);<a name="wp929046"> </a>
   status_n = VSsetfields (vdata3_id, FIELD_VD3);<a name="wp929047"> </a>
   num_of_records = VSwrite (vdata3_id, (uint8 *)plist, N_RECORDS, <a name="wp929048"> </a>
                             FULL_INTERLACE);<a name="wp929049"> </a>
   vd_index = Vinsert (vgroup_id, vdata3_id);<a name="wp929050"> </a>
   status_32 = VSdetach (vdata3_id);<a name="wp929051"> </a>
   /*<a name="wp929053"> </a>
   * Terminate access to the vgroup &quot;Vertices&quot;.<a name="wp929054"> </a>
   */<a name="wp929055"> </a>
   status_32 = Vdetach (vgroup_id);<a name="wp929056"> </a>
   /*<a name="wp929058"> </a>
   * Terminate access to the V interface and close the HDF file.<a name="wp929059"> </a>
   */<a name="wp929060"> </a>
   status_n = Vend (file_id);<a name="wp929061"> </a>
   status_n = Hclose (file_id);<a name="wp929062"> </a>
}<a name="wp929063"> </a>
</pre></div>
<a name="wp928538"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
insert_vdatas_to_vgroup.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      program  add_vdatas_to_a_vgroup<a name="wp929077"> </a>
      implicit none<a name="wp929082"> </a>
C<a name="wp929083"> </a>
C     Parameter declaration<a name="wp929084"> </a>
C<a name="wp929085"> </a>
      character*19 FILE_NAME<a name="wp929086"> </a>
      character*8  VG_NAME<a name="wp929087"> </a>
      character*10 VG_CLASS<a name="wp929088"> </a>
      character*15 VD1_NAME<a name="wp929089"> </a>
      character*8  VD1_CLASS<a name="wp929090"> </a>
      character*11 VD2_NAME<a name="wp929091"> </a>
      character*13 VD2_CLASS<a name="wp929092"> </a>
      character*9  VD3_NAME<a name="wp929093"> </a>
      character*4  VD3_CLASS<a name="wp929094"> </a>
C<a name="wp929095"> </a>
      parameter (FILE_NAME = `General_Vgroups.hdf&#39;,<a name="wp929096"> </a>
     +           VG_NAME   = `Vertices&#39;,<a name="wp929097"> </a>
     +           VG_CLASS  = `Vertex Set&#39;)<a name="wp929098"> </a>
      parameter (VD1_NAME  = `X,Y Coordinates&#39;,<a name="wp929099"> </a>
     +           VD2_NAME  = `Temperature&#39;,<a name="wp929100"> </a>
     +           VD3_NAME  = `Node List&#39;)<a name="wp929101"> </a>
      parameter (VD1_CLASS = `Position&#39;,<a name="wp929102"> </a>
     +           VD2_CLASS = `Property List&#39;,<a name="wp929103"> </a>
     +           VD3_CLASS = `Mesh&#39;)<a name="wp929104"> </a>
      character*2 FIELD1_VD1<a name="wp929105"> </a>
      character*2 FIELD2_VD1<a name="wp929106"> </a>
      character*3 FIELD_VD2<a name="wp929107"> </a>
      character*4 FIELD_VD3<a name="wp929108"> </a>
      character*5 FIELDNAME_LIST<a name="wp929109"> </a>
      parameter (FIELD1_VD1 = `PX&#39;,<a name="wp929110"> </a>
     +           FIELD2_VD1 = `PY&#39;,<a name="wp929111"> </a>
     +           FIELD_VD2  = `TMP&#39;,<a name="wp929112"> </a>
     +           FIELD_VD3  = `PLIST&#39;,<a name="wp929113"> </a>
     +           FIELDNAME_LIST = `PX,PY&#39;)<a name="wp929114"> </a>
      integer N_RECORDS<a name="wp929115"> </a>
      parameter (N_RECORDS = 30)<a name="wp929116"> </a>
      <a name="wp929117"> </a>
      integer  DFACC_WRITE <a name="wp929118"> </a>
      parameter (DFACC_WRITE = 2)<a name="wp929119"> </a>
      integer DFNT_FLOAT32, DFNT_INT16<a name="wp929120"> </a>
      parameter (DFNT_FLOAT32 = 5, DFNT_INT16 = 22)<a name="wp929121"> </a>
      integer FULL_INTERLACE <a name="wp929122"> </a>
      parameter (FULL_INTERLACE = 0)<a name="wp929123"> </a>
C<a name="wp929124"> </a>
C     Function declaration<a name="wp929125"> </a>
C<a name="wp929126"> </a>
      integer hopen, hclose<a name="wp929127"> </a>
      integer vfstart, vfatch, vfsnam, vfscls, vfinsrt, vfdtch, vfend<a name="wp929128"> </a>
      integer vsfatch, vsfsnam, vsfscls, vsffdef, vsfsfld, <a name="wp929129"> </a>
     +        vsfwrt, vsfwrtc, vsfdtch<a name="wp929130"> </a>
C<a name="wp929132"> </a>
C**** Variable declaration *******************************************<a name="wp929133"> </a>
C<a name="wp929134"> </a>
      integer status<a name="wp929135"> </a>
      integer file_id<a name="wp929136"> </a>
      integer vgroup_id<a name="wp929137"> </a>
      integer vdata1_id, vdata2_id, vdata3_id, vd_index <a name="wp929138"> </a>
      integer num_of_records<a name="wp929139"> </a>
      integer i, j, k<a name="wp929140"> </a>
      real    pxy(2,N_RECORDS), tmp(N_RECORDS)<a name="wp929141"> </a>
      integer plist(3,N_RECORDS)<a name="wp929142"> </a>
      data pxy /-1.5, 2.3, -1.5, 1.98, -2.4, .67,<a name="wp929143"> </a>
     +          -3.4, 1.46, -.65, 3.1, -.62, 1.23,<a name="wp929144"> </a>
     +          -.4, 3.8, -3.55, 2.3, -1.43, 2.44,<a name="wp929145"> </a>
     +          .23, 1.13, -1.4, 5.43, -1.4, 5.8,<a name="wp929146"> </a>
     +          -3.4, 3.85, -.55, .3, -.21, 1.22,<a name="wp929147"> </a>
     +          -1.44, 1.9, -1.4, 2.8, .94, 1.78,<a name="wp929148"> </a>
     +          -.4, 2.32, -.87, 1.99, -.54, 4.11,<a name="wp929149"> </a>
     +          -1.5, 1.35, -1.4, 2.21, -.22, 1.8,<a name="wp929150"> </a>
     +          -1.1, 4.55, -.44, .54, -1.11, 3.93,<a name="wp929151"> </a>
     +          -.76, 1.9, -2.34, 1.7, -2.2, 1.21/<a name="wp929152"> </a>
C<a name="wp929153"> </a>
C**** End of variable declaration ************************************<a name="wp929154"> </a>
C<a name="wp929155"> </a>
C<a name="wp929156"> </a>
C     Open the HDF file for writing.<a name="wp929157"> </a>
C<a name="wp929158"> </a>
      file_id = hopen(FILE_NAME, DFACC_WRITE, 0)<a name="wp929159"> </a>
C<a name="wp929160"> </a>
C     Initialize the V interface.<a name="wp929161"> </a>
C<a name="wp929162"> </a>
      status = vfstart(file_id)<a name="wp929163"> </a>
C<a name="wp929164"> </a>
C     Buffer the data for the third and second vdatas.<a name="wp929165"> </a>
C<a name="wp929166"> </a>
      do 20 i = 1, N_RECORDS<a name="wp929167"> </a>
         do 10 j = 1, 3 <a name="wp929168"> </a>
            plist(j,i) = k <a name="wp929169"> </a>
            k = k+1<a name="wp929170"> </a>
10       continue<a name="wp929171"> </a>
20    continue    <a name="wp929172"> </a>
      do 30 i = 1, N_RECORDS<a name="wp929173"> </a>
         tmp(i) = (i-1) * 10.0<a name="wp929174"> </a>
30    continue<a name="wp929175"> </a>
C<a name="wp929176"> </a>
C     Create a vgroup and set its name and class.<a name="wp929177"> </a>
C     Note that the vgroup&#39;s reference number is set to -1 for creating<a name="wp929178"> </a>
C     and the access mode is `w&#39; for writing.<a name="wp929179"> </a>
C<a name="wp929180"> </a>
      vgroup_id = vfatch(file_id, -1 , `w&#39;)<a name="wp929181"> </a>
      status    = vfsnam(vgroup_id, VG_NAME)<a name="wp929182"> </a>
      status    = vfscls(vgroup_id, VG_CLASS)<a name="wp929183"> </a>
C<a name="wp929184"> </a>
C     Create the first vdata then set its name and class. Note that the vdata&#39;s<a name="wp929185"> </a>
C     reference number is set to -1 for creating and the access mode is `w&#39; for<a name="wp929186"> </a>
C     writing.<a name="wp929187"> </a>
C<a name="wp929188"> </a>
      vdata1_id = vsfatch(file_id, -1, `w&#39;)<a name="wp929189"> </a>
      status = vsfsnam(vdata1_id, VD1_NAME)<a name="wp929190"> </a>
      status = vsfscls(vdata1_id, VD1_CLASS)<a name="wp929191"> </a>
C<a name="wp929192"> </a>
C     Introduce and define the fields of the first vdata.<a name="wp929193"> </a>
C<a name="wp929194"> </a>
      status = vsffdef(vdata1_id, FIELD1_VD1, DFNT_FLOAT32, 1)<a name="wp929195"> </a>
      status = vsffdef(vdata1_id, FIELD2_VD1, DFNT_FLOAT32, 1)<a name="wp929196"> </a>
      status = vsfsfld(vdata1_id, FIELDNAME_LIST)<a name="wp929197"> </a>
C<a name="wp929198"> </a>
C     Write the buffered data into the first vdata.<a name="wp929199"> </a>
C<a name="wp929200"> </a>
      num_of_records = vsfwrt(vdata1_id, pxy, N_RECORDS,<a name="wp929201"> </a>
     +                        FULL_INTERLACE)<a name="wp929202"> </a>
C<a name="wp929203"> </a>
C     Insert the vdata into the vgroup using its identifier.<a name="wp929204"> </a>
C<a name="wp929205"> </a>
      vd_index = vfinsrt(vgroup_id, vdata1_id)<a name="wp929206"> </a>
C<a name="wp929207"> </a>
C     Detach from the first vdata.<a name="wp929208"> </a>
C<a name="wp929209"> </a>
      status = vsfdtch(vdata1_id)<a name="wp929210"> </a>
C<a name="wp929211"> </a>
C     Create, write, and insert the second vdata to the vgroup using<a name="wp929212"> </a>
C     steps similar to those used for the first vdata.<a name="wp929213"> </a>
C<a name="wp929214"> </a>
      vdata2_id = vsfatch(file_id, -1, `w&#39;)<a name="wp929215"> </a>
      status = vsfsnam(vdata2_id, VD2_NAME)<a name="wp929216"> </a>
      status = vsfscls(vdata2_id, VD2_CLASS)<a name="wp929217"> </a>
      status = vsffdef(vdata2_id, FIELD_VD2, DFNT_FLOAT32, 1)<a name="wp929218"> </a>
      status = vsfsfld(vdata2_id, FIELD_VD2)<a name="wp929219"> </a>
      num_of_records = vsfwrt(vdata2_id, tmp, N_RECORDS,<a name="wp929220"> </a>
     +                        FULL_INTERLACE)<a name="wp929221"> </a>
      vd_index = vfinsrt(vgroup_id, vdata2_id)<a name="wp929222"> </a>
      status = vsfdtch(vdata2_id)<a name="wp929223"> </a>
C<a name="wp929224"> </a>
C     Create, write, and insert the third vdata to the vgroup using <a name="wp929225"> </a>
C     steps similar to those used for the first and second vdatas.<a name="wp929226"> </a>
C<a name="wp929227"> </a>
      vdata3_id = vsfatch(file_id, -1, `w&#39;)<a name="wp929228"> </a>
      status = vsfsnam(vdata3_id, VD3_NAME)<a name="wp929229"> </a>
      status = vsfscls(vdata3_id, VD3_CLASS)<a name="wp929230"> </a>
      status = vsffdef(vdata3_id, FIELD_VD3, DFNT_INT16, 3)<a name="wp929231"> </a>
      status = vsfsfld(vdata3_id, FIELD_VD3)<a name="wp929232"> </a>
      num_of_records = vsfwrtc(vdata3_id, plist, N_RECORDS,<a name="wp929233"> </a>
     +                        FULL_INTERLACE)<a name="wp929234"> </a>
      vd_index = vfinsrt(vgroup_id, vdata3_id)<a name="wp929235"> </a>
      status = vsfdtch(vdata3_id)<a name="wp929236"> </a>
 <a name="wp929237"> </a>
C<a name="wp929238"> </a>
C     Terminate access to the vgroup `Vertices&#39;.<a name="wp929239"> </a>
C<a name="wp929240"> </a>
      status = vfdtch(vgroup_id)<a name="wp929241"> </a>
C<a name="wp929242"> </a>
C     Terminate access to the V interface and close the HDF file.<a name="wp929243"> </a>
C<a name="wp929244"> </a>
      status = vfend(file_id)<a name="wp929245"> </a>
      status = hclose(file_id)<a name="wp929246"> </a>
      end<a name="wp929247"> </a>
</pre></div>
<a name="wp928540"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
get_vgroup_info.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp929261"> </a>
#define  FILE_NAME   &quot;General_Vgroups.hdf&quot;<a name="wp929267"> </a>
main( )<a name="wp929269"> </a>
{<a name="wp929270"> </a>
   /************************* Variable declaration **************************/<a name="wp929271"> </a>
   intn   status_n;     /* returned status for functions returning an intn  */<a name="wp929273"> </a>
   int32  status_32,    /* returned status for functions returning an int32 */<a name="wp929274"> </a>
          file_id, vgroup_id;<a name="wp929275"> </a>
   int32  lone_vg_number,      /* current lone vgroup number */<a name="wp929276"> </a>
          num_of_lones = 0;    /* number of lone vgroups */<a name="wp929277"> </a>
   int32 *ref_array;    /* buffer to hold the ref numbers of lone vgroups   */<a name="wp929278"> </a>
   char   vgroup_name[VGNAMELENMAX], vgroup_class[VGNAMELENMAX];<a name="wp929279"> </a>
   /********************** End of variable declaration **********************/<a name="wp929281"> </a>
 <a name="wp929282"> </a>
   /*<a name="wp929283"> </a>
   * Open the HDF file for reading.<a name="wp929284"> </a>
   */<a name="wp929285"> </a>
   file_id = Hopen (FILE_NAME, DFACC_READ, 0); <a name="wp929286"> </a>
   /*<a name="wp929288"> </a>
   * Initialize the V interface.<a name="wp929289"> </a>
   */<a name="wp929290"> </a>
   status_n = Vstart (file_id);<a name="wp929291"> </a>
   /*<a name="wp929293"> </a>
   * Get and print the names and class names of all the lone vgroups.<a name="wp929294"> </a>
   * First, call Vlone with num_of_lones set to 0 to get the number of<a name="wp929295"> </a>
   * lone vgroups in the file, but not to get their reference numbers.<a name="wp929296"> </a>
   */<a name="wp929297"> </a>
   num_of_lones = Vlone (file_id, NULL, num_of_lones );<a name="wp929298"> </a>
   /*<a name="wp929300"> </a>
   * Then, if there are any lone vgroups, <a name="wp929301"> </a>
   */<a name="wp929302"> </a>
   if (num_of_lones &gt; 0)<a name="wp929303"> </a>
   {<a name="wp929304"> </a>
      /*<a name="wp929305"> </a>
      * use the num_of_lones returned to allocate sufficient space for the<a name="wp929306"> </a>
      * buffer ref_array to hold the reference numbers of all lone vgroups,<a name="wp929307"> </a>
      */<a name="wp929308"> </a>
      ref_array = (int32 *) malloc(sizeof(int32) * num_of_lones);<a name="wp929309"> </a>
      /*<a name="wp929311"> </a>
      * and call Vlone again to retrieve the reference numbers into <a name="wp929312"> </a>
      * the buffer ref_array.<a name="wp929313"> </a>
      */<a name="wp929314"> </a>
      num_of_lones = Vlone (file_id, ref_array, num_of_lones);<a name="wp929315"> </a>
      /*<a name="wp929317"> </a>
      * Display the name and class of each lone vgroup.<a name="wp929318"> </a>
      */<a name="wp929319"> </a>
      printf (&quot;Lone vgroups in this file are:\n&quot;);<a name="wp929320"> </a>
      for (lone_vg_number = 0; lone_vg_number &lt; num_of_lones; <a name="wp929321"> </a>
                                                            lone_vg_number++)<a name="wp929322"> </a>
      {<a name="wp929323"> </a>
         /*<a name="wp929324"> </a>
         * Attach to the current vgroup then get and display its<a name="wp929325"> </a>
         * name and class. Note: the current vgroup must be detached before<a name="wp929326"> </a>
         * moving to the next.<a name="wp929327"> </a>
         */<a name="wp929328"> </a>
         vgroup_id = Vattach (file_id, ref_array[lone_vg_number], &quot;r&quot;);<a name="wp929329"> </a>
         status_32 = Vgetname (vgroup_id, vgroup_name);<a name="wp929330"> </a>
         status_32 = Vgetclass (vgroup_id, vgroup_class);<a name="wp929331"> </a>
         printf (&quot;   Vgroup name %s and class %s\n&quot;, vgroup_name,  <a name="wp929332"> </a>
                     vgroup_class); <a name="wp929333"> </a>
         status_32 = Vdetach (vgroup_id);<a name="wp929334"> </a>
      } /* for */<a name="wp929335"> </a>
   } /* if */<a name="wp929336"> </a>
   /*<a name="wp929338"> </a>
   * Terminate access to the V interface and close the file.<a name="wp929339"> </a>
   */<a name="wp929340"> </a>
   status_n = Vend (file_id);<a name="wp929341"> </a>
   status_n = Hclose (file_id);<a name="wp929342"> </a>
   /*<a name="wp929344"> </a>
   * Free the space allocated by this program.<a name="wp929345"> </a>
   */<a name="wp929346"> </a>
   free (ref_array);<a name="wp929347"> </a>
}<a name="wp929348"> </a>
</pre></div>
<a name="wp928542"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
get_vgroup_info.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      program  getinfo_about_vgroup<a name="wp929358"> </a>
      implicit none<a name="wp929363"> </a>
C<a name="wp929364"> </a>
C     Parameter declaration<a name="wp929365"> </a>
C<a name="wp929366"> </a>
      character*19 FILE_NAME<a name="wp929367"> </a>
C<a name="wp929368"> </a>
      parameter (FILE_NAME = `General_Vgroups.hdf&#39;)<a name="wp929369"> </a>
      integer DFACC_READ<a name="wp929370"> </a>
      parameter (DFACC_READ = 1)<a name="wp929371"> </a>
      integer SIZE<a name="wp929372"> </a>
      parameter(SIZE = 10)<a name="wp929373"> </a>
C<a name="wp929374"> </a>
C     Function declaration<a name="wp929375"> </a>
C<a name="wp929376"> </a>
      integer hopen, hclose<a name="wp929377"> </a>
      integer vfstart, vfatch, vfgnam, vfgcls, vflone, vfdtch, vfend<a name="wp929378"> </a>
C<a name="wp929380"> </a>
C**** Variable declaration *******************************************<a name="wp929381"> </a>
C<a name="wp929382"> </a>
      integer status<a name="wp929383"> </a>
      integer file_id<a name="wp929384"> </a>
      integer vgroup_id<a name="wp929385"> </a>
      integer lone_vg_number, num_of_lones<a name="wp929386"> </a>
      character*64 vgroup_name, vgroup_class<a name="wp929387"> </a>
      integer ref_array(SIZE)<a name="wp929388"> </a>
      integer i<a name="wp929389"> </a>
C<a name="wp929390"> </a>
C**** End of variable declaration ************************************<a name="wp929391"> </a>
C<a name="wp929392"> </a>
C<a name="wp929393"> </a>
C     Initialize ref_array.<a name="wp929394"> </a>
C<a name="wp929395"> </a>
      do 10 i = 1, SIZE<a name="wp929396"> </a>
         ref_array(i) = 0<a name="wp929397"> </a>
10    continue<a name="wp929398"> </a>
C<a name="wp929399"> </a>
C     Open the HDF file for reading.<a name="wp929400"> </a>
C<a name="wp929401"> </a>
      file_id = hopen(FILE_NAME, DFACC_READ, 0)<a name="wp929402"> </a>
C<a name="wp929403"> </a>
C     Initialize the V interface.<a name="wp929404"> </a>
C<a name="wp929405"> </a>
      status = vfstart(file_id)<a name="wp929406"> </a>
C<a name="wp929407"> </a>
C     Get and print the name and class name of all lone vgroups.<a name="wp929408"> </a>
C     First, call vflone with num_of_lones set to 0 to get the number of<a name="wp929409"> </a>
C     lone vgroups in the file and check whether size of ref_array is <a name="wp929410"> </a>
C     big enough to hold reference numbers of ALL lone groups.<a name="wp929411"> </a>
C     If ref_array is not big enough, exit the program after displaying an<a name="wp929412"> </a>
C     informative message.<a name="wp929413"> </a>
C<a name="wp929414"> </a>
      num_of_lones = 0<a name="wp929415"> </a>
      num_of_lones = vflone(file_id, ref_array, num_of_lones)<a name="wp929416"> </a>
      if (num_of_lones .gt. SIZE) then<a name="wp929417"> </a>
      write(*,*) num_of_lones, `lone vgroups is found&#39;<a name="wp929418"> </a>
      write(*,*) `increase the size of ref_array to hold reference `<a name="wp929419"> </a>
      write(*,*) `numbers of all lone vgroups in the file&#39;<a name="wp929420"> </a>
      stop<a name="wp929421"> </a>
      endif<a name="wp929422"> </a>
C<a name="wp929423"> </a>
C     If there are any lone groups in the file,<a name="wp929424"> </a>
C<a name="wp929425"> </a>
      if (num_of_lones .gt. 0) then<a name="wp929426"> </a>
C<a name="wp929427"> </a>
C     call vflone again to retrieve the reference numbers into ref_array.<a name="wp929428"> </a>
C<a name="wp929429"> </a>
      num_of_lones = vflone(file_id, ref_array, num_of_lones)<a name="wp929430"> </a>
C<a name="wp929431"> </a>
C     Display the name and class of each vgroup.<a name="wp929432"> </a>
C<a name="wp929433"> </a>
      write(*,*) `Lone vgroups in the file are:&#39;<a name="wp929434"> </a>
      do 20 lone_vg_number = 1, num_of_lones<a name="wp929436"> </a>
C<a name="wp929437"> </a>
C     Attach to the current vgroup, then get and display its name and class.<a name="wp929438"> </a>
C     Note: the current vgroup must be detached before moving to the next.  <a name="wp929439"> </a>
C<a name="wp929440"> </a>
      vgroup_name = ` `<a name="wp929441"> </a>
      vgroup_class = ` `<a name="wp929442"> </a>
      vgroup_id = vfatch(file_id, ref_array(lone_vg_number), `r&#39;)<a name="wp929443"> </a>
      status    = vfgnam(vgroup_id, vgroup_name)<a name="wp929444"> </a>
      status    = vfgcls(vgroup_id, vgroup_class)<a name="wp929445"> </a>
      write(*,*) `Vgroup name ` ,  vgroup_name<a name="wp929446"> </a>
      write(*,*) `Vgroup class ` , vgroup_class<a name="wp929447"> </a>
      write(*,*)<a name="wp929448"> </a>
      status = vfdtch(vgroup_id)<a name="wp929449"> </a>
20    continue<a name="wp929450"> </a>
      endif<a name="wp929452"> </a>
C<a name="wp929453"> </a>
C     Terminate access to the V interface and close the HDF file.<a name="wp929454"> </a>
C<a name="wp929455"> </a>
      status = vfend(file_id)<a name="wp929456"> </a>
      status = hclose(file_id)<a name="wp929457"> </a>
      end<a name="wp929458"> </a>
</pre></div>
<a name="wp928544"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
set_get_vgroup_attr.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp929468"> </a>
#define  FILE_NAME      &quot;General_Vgroups.hdf&quot;<a name="wp929474"> </a>
#define  VGROUP_NAME    &quot;SD Vgroup&quot;<a name="wp929475"> </a>
#define  VGATTR_NAME    &quot;First Attribute&quot;<a name="wp929476"> </a>
#define  N_ATT_VALUES   7              /* number of values in the attribute */<a name="wp929477"> </a>
main( )<a name="wp929479"> </a>
{<a name="wp929480"> </a>
   /************************* Variable declaration **************************/<a name="wp929481"> </a>
   intn   status_n,     /* returned status for functions returning an intn  */<a name="wp929483"> </a>
          n_attrs;      /* number of attributes of the vgroup */<a name="wp929484"> </a>
   int32  status_32,    /* returned status for functions returning an int32 */<a name="wp929485"> </a>
          file_id, vgroup_ref, vgroup_id,<a name="wp929486"> </a>
          attr_index, i, vg_version,<a name="wp929487"> </a>
          data_type, n_values, size;<a name="wp929488"> </a>
   char   vg_attr[N_ATT_VALUES] = {`v&#39;,&#39;g&#39;,&#39;r&#39;,&#39;o&#39;,&#39;u&#39;,&#39;p&#39;,&#39;\0&#39;};<a name="wp929489"> </a>
   char   vgattr_buf[N_ATT_VALUES], attr_name[30];<a name="wp929490"> </a>
   /********************** End of variable declaration **********************/<a name="wp929492"> </a>
   /*<a name="wp929494"> </a>
   * Open the HDF file for writing.<a name="wp929495"> </a>
   */<a name="wp929496"> </a>
   file_id = Hopen (FILE_NAME, DFACC_WRITE, 0);<a name="wp929497"> </a>
   /*<a name="wp929499"> </a>
   * Initialize the V interface.<a name="wp929500"> </a>
   */<a name="wp929501"> </a>
   status_n = Vstart (file_id);<a name="wp929502"> </a>
   /*<a name="wp929504"> </a>
   * Get the reference number of the vgroup named VGROUP_NAME.<a name="wp929505"> </a>
   */<a name="wp929506"> </a>
   vgroup_ref = Vfind (file_id, VGROUP_NAME);<a name="wp929507"> </a>
   /*<a name="wp929509"> </a>
   * Attach to the vgroup found.<a name="wp929510"> </a>
   */<a name="wp929511"> </a>
   vgroup_id = Vattach (file_id, vgroup_ref, &quot;w&quot;);<a name="wp929512"> </a>
   /*<a name="wp929514"> </a>
   * Get and display the version of the attached vgroup.<a name="wp929515"> </a>
   */<a name="wp929516"> </a>
   vg_version = Vgetversion (vgroup_id);<a name="wp929517"> </a>
   switch (vg_version) {<a name="wp929518"> </a>
        case VSET_NEW_VERSION:<a name="wp929519"> </a>
              printf (&quot;\nVgroup %s is of the newest version, version 4\n&quot;, <a name="wp929520"> </a>
                   VGROUP_NAME);<a name="wp929521"> </a>
           break;<a name="wp929522"> </a>
        case VSET_VERSION:<a name="wp929523"> </a>
              printf (&quot;Vgroup %s is of a version between 3.2 and 4.0r2\n&quot;, <a name="wp929524"> </a>
                   VGROUP_NAME);<a name="wp929525"> </a>
           break;<a name="wp929526"> </a>
        case VSET_OLD_VERSION:<a name="wp929527"> </a>
              printf (&quot;Vgroup %s is of version before 3.2\n&quot;, VGROUP_NAME);<a name="wp929528"> </a>
           break;<a name="wp929529"> </a>
        default:<a name="wp929530"> </a>
           printf (&quot;Unknown version = %d\n&quot;, vg_version);<a name="wp929531"> </a>
        } /* switch */<a name="wp929532"> </a>
   /*<a name="wp929534"> </a>
   * Add the attribute named VGATTR_NAME to the vgroup.<a name="wp929535"> </a>
   */<a name="wp929536"> </a>
   status_n = Vsetattr (vgroup_id, VGATTR_NAME, DFNT_CHAR, N_ATT_VALUES, <a name="wp929537"> </a>
                        vg_attr);<a name="wp929538"> </a>
   /*<a name="wp929540"> </a>
   * Get and display the number of attributes attached to this vgroup.<a name="wp929541"> </a>
   */<a name="wp929542"> </a>
   n_attrs = Vnattrs (vgroup_id);<a name="wp929543"> </a>
   printf (&quot;\nThis vgroup has %d attribute(s)\n&quot;, n_attrs);<a name="wp929544"> </a>
   /*<a name="wp929546"> </a>
   * Get and display the name and the number of values of each attribute.<a name="wp929547"> </a>
   * Note that the fourth and last parameters are set to NULL because the type <a name="wp929548"> </a>
   * and the size of the attribute are not desired.<a name="wp929549"> </a>
   */<a name="wp929550"> </a>
   for (attr_index = 0; attr_index &lt; n_attrs; attr_index++)<a name="wp929551"> </a>
   {<a name="wp929552"> </a>
      status_n = Vattrinfo (vgroup_id, attr_index, attr_name, NULL, <a name="wp929553"> </a>
                            &amp;n_values, NULL);<a name="wp929554"> </a>
      printf (&quot;\nAttribute #%d is named %s and has %d values: &quot;,<a name="wp929555"> </a>
                            attr_index+1, attr_name, n_values);<a name="wp929556"> </a>
      /*<a name="wp929558"> </a>
      * Get and display the attribute values.<a name="wp929559"> </a>
      */<a name="wp929560"> </a>
      status_n = Vgetattr (vgroup_id, attr_index, vgattr_buf);<a name="wp929561"> </a>
      for (i = 0; i &lt; n_values; i++)<a name="wp929562"> </a>
         printf (&quot;%c &quot;, vgattr_buf[i]);<a name="wp929563"> </a>
      printf (&quot;\n&quot;);<a name="wp929564"> </a>
   }<a name="wp929565"> </a>
   /*<a name="wp929568"> </a>
   * Terminate access to the vgroup and to the V interface, and close <a name="wp929569"> </a>
   * the HDF file.<a name="wp929570"> </a>
   */<a name="wp929571"> </a>
   status_32 = Vdetach (vgroup_id);<a name="wp929572"> </a>
   status_n = Vend (file_id);<a name="wp929573"> </a>
   status_n = Hclose (file_id);<a name="wp929574"> </a>
}<a name="wp929575"> </a>
</pre></div>
<a name="wp928546"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
set_get_vgroup_attr.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      program  vgroup_attribute<a name="wp929586"> </a>
      implicit none<a name="wp929591"> </a>
C<a name="wp929592"> </a>
C     Parameter declaration<a name="wp929593"> </a>
C<a name="wp929594"> </a>
      character*19 FILE_NAME<a name="wp929595"> </a>
      character*9  VGROUP_NAME<a name="wp929596"> </a>
      character*15 VGATTR_NAME<a name="wp929597"> </a>
C<a name="wp929598"> </a>
      parameter (FILE_NAME    = `General_Vgroups.hdf&#39;,<a name="wp929599"> </a>
     +           VGROUP_NAME  = `SD Vgroup&#39;,<a name="wp929600"> </a>
     +           VGATTR_NAME  = `First Attribute&#39;)<a name="wp929601"> </a>
      integer VSET_NEW_VERSION, VSET_VERSION, VSET_OLD_VERSION<a name="wp929602"> </a>
      parameter (VSET_NEW_VERSION = 4,<a name="wp929603"> </a>
     +           VSET_VERSION     = 3,<a name="wp929604"> </a>
     +           VSET_OLD_VERSION = 2)  <a name="wp929605"> </a>
      integer DFACC_WRITE <a name="wp929606"> </a>
      parameter (DFACC_WRITE = 2)<a name="wp929607"> </a>
      integer DFNT_CHAR<a name="wp929608"> </a>
      parameter (DFNT_CHAR = 4)<a name="wp929609"> </a>
      integer N_ATT_VALUES<a name="wp929610"> </a>
      parameter (N_ATT_VALUES = 6)<a name="wp929611"> </a>
C<a name="wp929612"> </a>
C     Function declaration<a name="wp929613"> </a>
C<a name="wp929614"> </a>
      integer hopen, hclose<a name="wp929615"> </a>
      integer vfstart, vfatch, vfgver, vfscatt, vfnatts, vfainfo,<a name="wp929616"> </a>
     +        vfind, vfgcatt, vfdtch, vfend<a name="wp929617"> </a>
C<a name="wp929618"> </a>
C**** Variable declaration *******************************************<a name="wp929619"> </a>
C<a name="wp929620"> </a>
      integer status, n_attrs<a name="wp929621"> </a>
      integer file_id<a name="wp929622"> </a>
      integer vgroup_id, vgroup_ref, vg_version<a name="wp929623"> </a>
      integer attr_index, i<a name="wp929624"> </a>
      integer data_type, n_values, size <a name="wp929625"> </a>
      character vg_attr(N_ATT_VALUES)<a name="wp929626"> </a>
      character vgattr_buf(N_ATT_VALUES), attr_name(30)<a name="wp929627"> </a>
      data vg_attr /&#39;v&#39;,&#39;g&#39;,&#39;r&#39;,&#39;o&#39;,&#39;u&#39;,&#39;p&#39;/<a name="wp929628"> </a>
C<a name="wp929629"> </a>
C**** End of variable declaration ************************************<a name="wp929630"> </a>
C<a name="wp929631"> </a>
C<a name="wp929632"> </a>
C     Open the HDF file for reading/writing.<a name="wp929633"> </a>
C<a name="wp929634"> </a>
      file_id = hopen(FILE_NAME, DFACC_WRITE, 0)<a name="wp929635"> </a>
C<a name="wp929636"> </a>
C     Initialize the V interface.<a name="wp929637"> </a>
C<a name="wp929638"> </a>
      status = vfstart(file_id)<a name="wp929639"> </a>
C<a name="wp929640"> </a>
C     Get the reference number of the vgroup named VGROUP_NAME.<a name="wp929641"> </a>
C<a name="wp929642"> </a>
      vgroup_ref = vfind(file_id, VGROUP_NAME)<a name="wp929643"> </a>
C<a name="wp929644"> </a>
C     Attach to the vgroup found.<a name="wp929645"> </a>
C<a name="wp929646"> </a>
      vgroup_id = vfatch(file_id, vgroup_ref , `w&#39;)<a name="wp929647"> </a>
C<a name="wp929648"> </a>
C     Get and display the version of the attached vgroup.<a name="wp929649"> </a>
C<a name="wp929650"> </a>
      vg_version = vfgver(vgroup_id)<a name="wp929651"> </a>
      if (vg_version .eq. VSET_NEW_VERSION) write(*,*)<a name="wp929652"> </a>
     +   VGROUP_NAME, ` is of the newest version, version 4&#39;<a name="wp929653"> </a>
      if (vg_version .eq. VSET_VERSION) write(*,*)<a name="wp929654"> </a>
     +   VGROUP_NAME, ` is of a version between 3.2 and 4.0r2&#39;<a name="wp929655"> </a>
      if(vg_version .eq. VSET_OLD_VERSION) write(*,*)<a name="wp929656"> </a>
     +   VGROUP_NAME, ` is of version before 3.2&#39;<a name="wp929657"> </a>
      if ((vg_version .ne. VSET_NEW_VERSION) .and.<a name="wp929658"> </a>
     +    (vg_version .ne. VSET_VERSION)     .and.<a name="wp929659"> </a>
     +    (vg_version .ne. VSET_OLD_VERSION)) write(*,*)   <a name="wp929660"> </a>
     +    `Unknown version&#39;<a name="wp929661"> </a>
C<a name="wp929662"> </a>
C     Add the attribute named VGATTR_NAME to the vgroup.<a name="wp929663"> </a>
C<a name="wp929664"> </a>
      status = vfscatt(vgroup_id, VGATTR_NAME, DFNT_CHAR, N_ATT_VALUES,<a name="wp929665"> </a>
     +                 vg_attr)<a name="wp929666"> </a>
C<a name="wp929667"> </a>
C     Get and display the number of attributes attached to this group.<a name="wp929668"> </a>
C<a name="wp929669"> </a>
      n_attrs = vfnatts(vgroup_id)<a name="wp929670"> </a>
      write(*,*) `This group has&#39;, n_attrs, ` attributes&#39;<a name="wp929671"> </a>
C<a name="wp929672"> </a>
C     Get and display the name and the number of values of each attribute.<a name="wp929673"> </a>
C<a name="wp929674"> </a>
      do 10 attr_index=1, n_attrs<a name="wp929675"> </a>
         status = vfainfo(vgroup_id, attr_index-1, attr_name, data_type,<a name="wp929676"> </a>
     +                    n_values, size)<a name="wp929677"> </a>
      write(*,*) `Attribute #&#39;, attr_index-1, ` is named `, attr_name<a name="wp929678"> </a>
      write(*,*) `and has&#39;, n_values, ` values: `<a name="wp929679"> </a>
C<a name="wp929680"> </a>
C     Get and display the attribute values.<a name="wp929681"> </a>
C<a name="wp929682"> </a>
      status = vfgcatt(vgroup_id, attr_index-1, vgattr_buf)<a name="wp929683"> </a>
      write(*,*) (vgattr_buf(i), i=1,n_values)<a name="wp929684"> </a>
10    continue<a name="wp929685"> </a>
C<a name="wp929686"> </a>
C     Terminate access to the vgroup.<a name="wp929687"> </a>
C<a name="wp929688"> </a>
      status = vfdtch(vgroup_id)<a name="wp929689"> </a>
C<a name="wp929690"> </a>
C     Terminate accessto the V interface and close the HDF file.<a name="wp929691"> </a>
C<a name="wp929692"> </a>
      status = vfend(file_id)<a name="wp929693"> </a>
      status = hclose(file_id)<a name="wp929694"> </a>
      end<a name="wp929695"> </a>
</pre></div>
<a name="wp928548"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
vgroup_contents.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp929705"> </a>
#define   FILE_NAME        &quot;General_Vgroups.hdf&quot;<a name="wp929711"> </a>
main( )<a name="wp929713"> </a>
{<a name="wp929714"> </a>
   /************************* Variable declaration **************************/<a name="wp929715"> </a>
   intn   status_n;     /* returned status for functions returning an intn  */<a name="wp929717"> </a>
   int32  status_32,    /* returned status for functions returning an int32 */<a name="wp929718"> </a>
          file_id, vgroup_id, vgroup_ref,<a name="wp929719"> </a>
          obj_index,    /* index of an object within a vgroup */<a name="wp929720"> </a>
          num_of_pairs, /* number of tag/ref number pairs, i.e., objects */<a name="wp929721"> </a>
          obj_tag, obj_ref,     /* tag/ref number of an HDF object */<a name="wp929722"> </a>
          vgroup_pos = 0;       /* position of a vgroup in the file */<a name="wp929723"> </a>
   /********************** End of variable declaration ***********************/<a name="wp929725"> </a>
   /*<a name="wp929727"> </a>
   * Open the HDF file for reading.<a name="wp929728"> </a>
   */<a name="wp929729"> </a>
   file_id = Hopen (FILE_NAME, DFACC_READ, 0);<a name="wp929730"> </a>
   /*<a name="wp929732"> </a>
   * Initialize the V interface.<a name="wp929733"> </a>
   */<a name="wp929734"> </a>
   status_n = Vstart (file_id);<a name="wp929735"> </a>
   /*<a name="wp929737"> </a>
   * Obtain each vgroup in the file by its reference number, get the<a name="wp929738"> </a>
   * number of objects in the vgroup, and display the information about<a name="wp929739"> </a>
   * that vgroup.<a name="wp929740"> </a>
   */<a name="wp929741"> </a>
   vgroup_ref = -1;        /* set to -1 to search from the beginning of file */<a name="wp929742"> </a>
   while (TRUE)<a name="wp929743"> </a>
   {<a name="wp929744"> </a>
      /*<a name="wp929745"> </a>
      * Get the reference number of the next vgroup in the file.<a name="wp929746"> </a>
      */<a name="wp929747"> </a>
      vgroup_ref = Vgetid (file_id, vgroup_ref);<a name="wp929748"> </a>
      /*<a name="wp929750"> </a>
      * Attach to the vgroup for reading or exit the loop if no more vgroups<a name="wp929751"> </a>
      * are found.<a name="wp929752"> </a>
      */<a name="wp929753"> </a>
      if (vgroup_ref == -1) break;<a name="wp929754"> </a>
      vgroup_id = Vattach (file_id, vgroup_ref, &quot;r&quot;); <a name="wp929755"> </a>
      /*<a name="wp929757"> </a>
      * Get the total number of objects in the vgroup.<a name="wp929758"> </a>
      */<a name="wp929759"> </a>
      num_of_pairs = Vntagrefs (vgroup_id);<a name="wp929760"> </a>
      /*<a name="wp929762"> </a>
      * If the vgroup contains any object, print the tag/ref number <a name="wp929763"> </a>
      * pair of each object in the vgroup, in the order they appear in the<a name="wp929764"> </a>
      * file, and indicate whether the object is a vdata, vgroup, or neither.<a name="wp929765"> </a>
      */<a name="wp929766"> </a>
      if (num_of_pairs &gt; 0)<a name="wp929767"> </a>
      {<a name="wp929768"> </a>
         printf (&quot;\nVgroup #%d contains:\n&quot;, vgroup_pos);<a name="wp929769"> </a>
         for (obj_index = 0; obj_index &lt; num_of_pairs; obj_index++)<a name="wp929770"> </a>
         {<a name="wp929771"> </a>
            /*<a name="wp929772"> </a>
            * Get the tag/ref number pair of the object specified <a name="wp929773"> </a>
            * by its index, obj_index, and display them.<a name="wp929774"> </a>
            */<a name="wp929775"> </a>
            status_n = Vgettagref (vgroup_id, obj_index, &amp;obj_tag, &amp;obj_ref);<a name="wp929776"> </a>
            printf (&quot;tag = %d, ref = %d&quot;, obj_tag, obj_ref);<a name="wp929777"> </a>
            /*<a name="wp929779"> </a>
            * State whether the HDF object referred to by obj_ref is a vdata,<a name="wp929780"> </a>
            * a vgroup, or neither.<a name="wp929781"> </a>
            */<a name="wp929782"> </a>
            if (Visvg (vgroup_id, obj_ref))<a name="wp929783"> </a>
               printf (&quot;  &lt;-- is a vgroup\n&quot;);<a name="wp929784"> </a>
            else if (Visvs (vgroup_id, obj_ref))<a name="wp929785"> </a>
               printf (&quot;  &lt;-- is a vdata\n&quot;);<a name="wp929786"> </a>
            else<a name="wp929787"> </a>
               printf (&quot;  &lt;-- neither vdata nor vgroup\n&quot;);<a name="wp929788"> </a>
         } /* for */<a name="wp929789"> </a>
      } /* if */<a name="wp929790"> </a>
      else<a name="wp929792"> </a>
         printf (&quot;Vgroup #%d contains no HDF objects\n&quot;, vgroup_pos);<a name="wp929793"> </a>
      /*<a name="wp929795"> </a>
      * Terminate access to the current vgroup.<a name="wp929796"> </a>
      */<a name="wp929797"> </a>
      status_32 = Vdetach (vgroup_id);<a name="wp929798"> </a>
      /*<a name="wp929800"> </a>
      * Move to the next vgroup position.<a name="wp929801"> </a>
      */<a name="wp929802"> </a>
      vgroup_pos++;<a name="wp929803"> </a>
   } /* while */<a name="wp929804"> </a>
   /*<a name="wp929806"> </a>
   * Terminate access to the V interface and close the file.<a name="wp929807"> </a>
   */<a name="wp929808"> </a>
   status_n = Vend (file_id);<a name="wp929809"> </a>
   status_n = Hclose (file_id);<a name="wp929810"> </a>
}<a name="wp929811"> </a>
</pre></div>
<a name="wp928550"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
vgroup_contents.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      program  vgroup_contents<a name="wp929817"> </a>
      implicit none<a name="wp929826"> </a>
C<a name="wp929827"> </a>
C     Parameter declaration<a name="wp929828"> </a>
C<a name="wp929829"> </a>
      character*19 FILE_NAME<a name="wp929830"> </a>
C<a name="wp929831"> </a>
      parameter (FILE_NAME = `General_Vgroups.hdf&#39;)<a name="wp929832"> </a>
      integer DFACC_ READ<a name="wp929833"> </a>
      parameter (DFACC_READ = 1)<a name="wp929834"> </a>
C<a name="wp929835"> </a>
C     Function declaration<a name="wp929836"> </a>
C<a name="wp929837"> </a>
      integer hopen, hclose<a name="wp929838"> </a>
      integer vfstart, vfatch, vfgid, vntrc, vfgttr, vfisvg,<a name="wp929839"> </a>
     +        vfisvs, vfdtch, vfend<a name="wp929840"> </a>
C<a name="wp929842"> </a>
C**** Variable declaration *******************************************<a name="wp929843"> </a>
C<a name="wp929844"> </a>
      integer status<a name="wp929845"> </a>
      integer file_id<a name="wp929846"> </a>
      integer vgroup_id, vgroup_ref,  vgroup_pos<a name="wp929847"> </a>
      integer obj_index, num_of_pairs <a name="wp929848"> </a>
      integer obj_tag, obj_ref <a name="wp929849"> </a>
C<a name="wp929850"> </a>
C**** End of variable declaration ************************************<a name="wp929851"> </a>
C<a name="wp929852"> </a>
C<a name="wp929853"> </a>
C     Open the HDF file for reading.<a name="wp929854"> </a>
C<a name="wp929855"> </a>
      file_id = hopen(FILE_NAME, DFACC_READ, 0)<a name="wp929856"> </a>
C<a name="wp929857"> </a>
C     Initialize the V interface.<a name="wp929858"> </a>
C<a name="wp929859"> </a>
      status = vfstart(file_id)<a name="wp929860"> </a>
C<a name="wp929861"> </a>
C     Obtain each vgroup in the file by its reference number, get the<a name="wp929862"> </a>
C     number of objects in the vgroup, and display the information<a name="wp929863"> </a>
C     about that vgroup.<a name="wp929864"> </a>
C<a name="wp929865"> </a>
      vgroup_ref = -1<a name="wp929866"> </a>
      vgroup_pos = 0<a name="wp929867"> </a>
10    continue<a name="wp929868"> </a>
C<a name="wp929869"> </a>
C     Get the reference number of the next vgroup in the file.<a name="wp929870"> </a>
C<a name="wp929871"> </a>
      vgroup_ref = vfgid(file_id, vgroup_ref)<a name="wp929872"> </a>
C<a name="wp929873"> </a>
C     Attach to the vgroup or go to the end if no additional vgroup is found.<a name="wp929874"> </a>
C<a name="wp929875"> </a>
      if(vgroup_ref. eq. -1) goto 100<a name="wp929876"> </a>
      vgroup_id = vfatch(file_id, vgroup_ref , `r&#39;)<a name="wp929877"> </a>
C<a name="wp929878"> </a>
C     Get the total number of objects in the vgroup.<a name="wp929879"> </a>
C<a name="wp929880"> </a>
      num_of_pairs = vntrc(vgroup_id)<a name="wp929881"> </a>
C<a name="wp929882"> </a>
C     If the vgroup contains any object, print the tag/ref number<a name="wp929883"> </a>
C     pair of each object in vgroup, in the order they appear in the<a name="wp929884"> </a>
C     file, and indicate whether the object is a vdata, vgroup, or neither.<a name="wp929885"> </a>
C<a name="wp929886"> </a>
      if (num_of_pairs .gt. 0) then<a name="wp929887"> </a>
         write(*,*) `Vgroup # `, vgroup_pos, ` contains:&#39;<a name="wp929888"> </a>
         do 20 obj_index = 1, num_of_pairs<a name="wp929889"> </a>
C<a name="wp929890"> </a>
C     Get the tag/ref number pair of the object specified by its index <a name="wp929891"> </a>
C     and display them.<a name="wp929892"> </a>
C<a name="wp929893"> </a>
         status = vfgttr(vgroup_id, obj_index-1, obj_tag, obj_ref)<a name="wp929894"> </a>
C<a name="wp929895"> </a>
C     State whether the HDF object referred to by obj_ref is a vdata,<a name="wp929896"> </a>
C     a vgroup, or neither.<a name="wp929897"> </a>
C<a name="wp929898"> </a>
         if( vfisvg(vgroup_id, obj_ref) .eq. 1) then<a name="wp929899"> </a>
             write(*,*) `tag = `, obj_tag, ` ref = `, obj_ref,<a name="wp929900"> </a>
     +       `  &lt;--- is a vgroup `<a name="wp929901"> </a>
         else if ( vfisvs(vgroup_id, obj_ref) .eq. 1) then<a name="wp929902"> </a>
             write(*,*) `tag = `, obj_tag, ` ref = `, obj_ref,<a name="wp929903"> </a>
     +       `  &lt;--- is a vdata `<a name="wp929904"> </a>
         else<a name="wp929905"> </a>
             write(*,*) `tag = `, obj_tag, ` ref = `, obj_ref,<a name="wp929906"> </a>
     +       `  &lt;--- neither vdata nor vgroup `<a name="wp929907"> </a>
         endif<a name="wp929908"> </a>
20       continue<a name="wp929909"> </a>
      else<a name="wp929910"> </a>
         write (*,*) `Vgroup #&#39;, vgroup_pos, ` contains no HDF objects&#39;<a name="wp929911"> </a>
      endif<a name="wp929912"> </a>
      write(*,*)<a name="wp929913"> </a>
      vgroup_pos = vgroup_pos + 1<a name="wp929914"> </a>
      goto 10 <a name="wp929915"> </a>
100   continue      <a name="wp929916"> </a>
C<a name="wp929917"> </a>
C     Terminate access to the vgroup.<a name="wp929918"> </a>
C<a name="wp929919"> </a>
      status = vfdtch(vgroup_id)<a name="wp929920"> </a>
C<a name="wp929921"> </a>
C     Terminate access to the V interface and close the HDF file.<a name="wp929922"> </a>
C<a name="wp929923"> </a>
      status = vfend(file_id)<a name="wp929924"> </a>
      status = hclose(file_id)<a name="wp929925"> </a>
      end<a name="wp929926"> </a>
</pre></div>
    </blockquote>

    <hr />

    <table id="SummaryNotReq2" border="0" width="850" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
        HDF4.2r4 - February 2009<br/>
        <a href="UG_Copyright.html">Copyright</a>
        <td align="right">
          <span style="font-size: 12px; font-weight: bold">
            The HDF Group<br />
          </span>
          <span style="font-size: 12px">
            <a href="http://www.hdfgroup.org">www.hdfgroup.org</a><br />
            <img valign="bottom" border="0" src="images/help.jpg" height="12" alt="The HDF Group" valign="top" />
          </span>
        </td>
      </tr>
    </table>

    <table id="SummaryNotReq3" width="220" border="0" cellpadding="0" cellspacing="0">
    </table>
  </body>
</html>
