<!?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher 2003 for FrameMaker 8.0.8.2296" />
    <meta name="TEMPLATEBASE" content="HDF4 Version 1.0" />
    <meta name="LASTUPDATED" content="07/16/09 01:40:48" />
    <title>an_ex1.c</title>
    <link rel="StyleSheet" href="document.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="catalog.css" type="text/css" media="all" />
<link rel="first" title="First" href="UGTop.html" />
<link rel="last" title="Last" href="UG_BookIX.html" />
<link rel="previous" title="Previous" href="Example_GR.html" />
<link rel="next" title="Next" href="UG_Appndx.html" />

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/seealso.js"></script>

    <script type="text/javascript" language="JavaScript1.2">
     <!--
      var  WebWorksSeeAlso = new WebWorksSeeAlso_Object();
     // -->
    </script>
  </head>

  <body>

    <p>
    <table id="SummaryNotReq1" border="0" width="850"cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
          <a href="http://www.hdfgroup.org"><img id="LongDescNotReq1" border="0" src="images/hdf_logo.jpg" width="90" height="70" alt="The HDF Group" valign="top" /></a>
        </td>
        <td valign="middle" align="center">
          <b><H1>HDF User’s Guide</H1>
           Version 4.2r4</b><br />
        </td>
        <td valign="middle" align="right">
        <br/>
<b><a HREF="UGTOP.html">[Top]</a>
<a accesskey="3" href="Example_GR.html"><b>[Prev]</b><a accesskey="4" href="UG_Appndx.html"><b>[Next]</b></b>
        </td>
      </tr>
    </table>
    </p>
    <hr />

    <blockquote>
<a name="wp473591"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex1.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp928643"> </a>
main( )<a name="wp930671"> </a>
{<a name="wp930672"> </a>
	int32 file_id;<a name="wp930674"> </a>
	intn status;<a name="wp930675"> </a>
	static char file_label[] = &quot;This is a file label.&quot;;<a name="wp930676"> </a>
	static char file_desc[] = &quot;This is a file description.&quot;;<a name="wp930677"> </a>
	/* Open the HDF file to write the annotations. */<a name="wp930679"> </a>
	file_id = Hopen(&quot;Example1.hdf&quot;, DFACC_CREATE, 0);<a name="wp930680"> </a>
	/* Write the label to the file. */<a name="wp930682"> </a>
	status = DFANaddfid(file_id, file_label);<a name="wp930683"> </a>
	/* Write the description to the file. */<a name="wp930685"> </a>
	status = DFANaddfds(file_id, file_desc, strlen(file_desc));<a name="wp930686"> </a>
	/* Close the file. */<a name="wp930688"> </a>
	status = Hclose(file_id);<a name="wp930689"> </a>
}<a name="wp930691"> </a>
</pre></div>
<a name="wp928476"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex1.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      PROGRAM CREATE ANNOTATION<a name="wp928774"> </a>
      character*50 file_label, file_desc<a name="wp930701"> </a>
      integer daafid, daafds, status, file_id, hopen, hclose<a name="wp930702"> </a>
      integer*4 DFACC_CREATE<a name="wp930704"> </a>
      parameter (DFACC_CREATE = 4)<a name="wp930705"> </a>
      file_label = &quot;This is a file label.&quot;<a name="wp930707"> </a>
      file_desc = &quot;This is a file description.&quot;<a name="wp930708"> </a>
C     Open the HDF file to write the annotations.<a name="wp930710"> </a>
      file_id = hopen(`Example1.hdf&#39;, DFACC_CREATE, 0)<a name="wp930711"> </a>
C     Write the label to the file.<a name="wp930713"> </a>
      status = daafid(file_id, file_label)<a name="wp930714"> </a>
C     Write the description to the file.<a name="wp930716"> </a>
      status = daafds(file_id, file_desc, 26)<a name="wp930717"> </a>
C     Close the file.<a name="wp930719"> </a>
      status = hclose(file_id)<a name="wp930720"> </a>
      end<a name="wp930722"> </a>
</pre></div>
<a name="wp928479"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex2.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp928881"> </a>
#define X_LENGTH 3<a name="wp930735"> </a>
#define Y_LENGTH 2<a name="wp930736"> </a>
#define Z_LENGTH 5<a name="wp930737"> </a>
main( )<a name="wp930739"> </a>
{<a name="wp930740"> </a>
	/* Create the data array. */<a name="wp930742"> </a>
	static float32 sds_data[X_LENGTH][Y_LENGTH][Z_LENGTH] =<a name="wp930743"> </a>
	{  1,  2,  3,  4,  5,<a name="wp930744"> </a>
	   6,  7,  8,  9, 10,<a name="wp930745"> </a>
	  11, 12, 13, 14, 15,<a name="wp930746"> </a>
	  16, 17, 18, 19, 20,<a name="wp930747"> </a>
	  21, 22, 23, 24, 25,<a name="wp930748"> </a>
	  26, 27, 28, 29, 30 };<a name="wp930749"> </a>
	/* <a name="wp930751"> </a>
	* Create the array that will hold the dimensions of <a name="wp930752"> </a>
	* the data array.<a name="wp930753"> </a>
	*/<a name="wp930754"> </a>
	int32 dims[3] = {X_LENGTH, Y_LENGTH, Z_LENGTH};<a name="wp930755"> </a>
	intn refnum, status;<a name="wp930756"> </a>
	static char object_desc[] = &quot;This is an object description.&quot;;<a name="wp930757"> </a>
	static char object_label[] = &quot;This is an object label.&quot;;<a name="wp930758"> </a>
	/* Write the data to the HDF file. */<a name="wp930760"> </a>
	status = DFSDadddata(&quot;Example1.hdf&quot;, 3, dims, (VOIDP)sds_data);<a name="wp930761"> </a>
	/* Get the reference number for the newly written data set. */<a name="wp930763"> </a>
	refnum = DFSDlastref( );<a name="wp930764"> </a>
	/* Assign the object label to the scientific data set. */<a name="wp930766"> </a>
	status = DFANputlabel(&quot;Example1.hdf&quot;, DFTAG_NDG, refnum, \<a name="wp930767"> </a>
					object_label); <a name="wp930768"> </a>
	/* Assign the object description to the scientific data set. */<a name="wp930770"> </a>
	status = DFANputdesc(&quot;Example1.hdf&quot;, DFTAG_NDG, refnum, \<a name="wp930771"> </a>
					object_desc, strlen(object_desc));<a name="wp930772"> </a>
}<a name="wp930774"> </a>
</pre></div>
<a name="wp928481"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex2.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      PROGRAM ANNOTATE OBJECT<a name="wp928969"> </a>
      integer dsadata, dims(3), status, refnum<a name="wp930783"> </a>
      integer daplab, dapdesc, dslref<a name="wp930784"> </a>
      integer*4 DFTAG_NDG, X_LENGTH, Y_LENGTH, Z_LENGTH<a name="wp930786"> </a>
      parameter(DFTAG_NDG = 720,<a name="wp930787"> </a>
     +          X_LENGTH = 5,<a name="wp930788"> </a>
     +          Y_LENGTH = 2,<a name="wp930789"> </a>
     +          Z_LENGTH = 3)<a name="wp930790"> </a>
C     Create the data array.<a name="wp930792"> </a>
      real*4 sds_data(X_LENGTH, Y_LENGTH, Z_LENGTH)<a name="wp930793"> </a>
      data sds_data /                            <a name="wp930794"> </a>
     +          1,  2,  3,  4,  5,  <a name="wp930795"> </a>
     +          6,  7,  8,  9, 10,<a name="wp930796"> </a>
     +         11, 12, 13, 14, 15,<a name="wp930797"> </a>
     +         16, 17, 18, 19, 20,<a name="wp930798"> </a>
     +         21, 22, 23, 24, 25,<a name="wp930799"> </a>
     +         26, 27, 28, 29, 30  /<a name="wp930800"> </a>
C     Create the array the will hold the dimensions of the data array.<a name="wp930802"> </a>
      data dims /X_LENGTH, Y_LENGTH, Z_LENGTH/<a name="wp930803"> </a>
C     Write the data to the HDF file.<a name="wp930805"> </a>
      ref = dsadata(`Example1.hdf&#39;, 3, dims, sds_data)<a name="wp930806"> </a>
C     Get the reference number for the newly written data set. <a name="wp930808"> </a>
      refnum = dslref( )<a name="wp930809"> </a>
C     Assign the object label to the scientific data set.<a name="wp930811"> </a>
      status = daplab(`Example1.hdf&#39;, DFTAG_NDG, refnum, <a name="wp930812"> </a>
     +             `This is an object label.&#39;)<a name="wp930813"> </a>
C     Assign an object description to the scientific data set.<a name="wp930815"> </a>
      status = dapdesc(`Example1.hdf&#39;, DFTAG_NDG, refnum, <a name="wp930816"> </a>
     +              `This is an object description.&#39;, 30)<a name="wp930817"> </a>
      end<a name="wp930819"> </a>
</pre></div>
<a name="wp928487"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex3.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp929073"> </a>
main( )<a name="wp930830"> </a>
{<a name="wp930831"> </a>
	int32 file_id, file_label_len;<a name="wp930832"> </a>
	char *file_label;<a name="wp930833"> </a>
	intn status;<a name="wp930834"> </a>
	/* Open the HDF file containing the annotation. */<a name="wp930836"> </a>
	file_id = Hopen(&quot;Example1.hdf&quot;, DFACC_READ, 0);<a name="wp930837"> </a>
      <a name="wp930838"> </a>
	/* Determine the length of the file label. */<a name="wp930839"> </a>
	file_label_len = DFANgetfidlen(file_id, 1);<a name="wp930840"> </a>
    <a name="wp930841"> </a>
	/* Allocated memory for the file label buffer. */<a name="wp930842"> </a>
	file_label = HDgetspace(file_label_len);<a name="wp930843"> </a>
	/* Read the file label. */<a name="wp930845"> </a>
	file_label_len = DFANgetfid(file_id, file_label, file_label_len, 1);<a name="wp930846"> </a>
	/* Close the file */<a name="wp930848"> </a>
	status = Hclose(file_id);<a name="wp930849"> </a>
}<a name="wp930851"> </a>
</pre></div>
<a name="wp928489"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex3.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      PROGRAM GET ANNOTATION<a name="wp929192"> </a>
      <a name="wp930861"> </a>
      integer status, file_id, label_length<a name="wp930862"> </a>
      integer hopen, hclose, dagfidl, dagfid <a name="wp930863"> </a>
      character file_label(50)<a name="wp930864"> </a>
      integer*4 DFACC_READ<a name="wp930866"> </a>
      parameter(DFACC_READ = 1)<a name="wp930867"> </a>
C     Open the HDF file containing the file label.<a name="wp930869"> </a>
      file_id = hopen(&quot;Example1.hdf&quot;, DFACC_READ, 0)<a name="wp930870"> </a>
C     Determine the length of the file label.<a name="wp930872"> </a>
      label_length = dagfidl(file_id, 1)<a name="wp930873"> </a>
C     Read the file label.<a name="wp930875"> </a>
      status = dagfid(file_id, file_label, label_length, 1)<a name="wp930876"> </a>
C     Close the HDF file.<a name="wp930878"> </a>
      status = hclose(file_id)<a name="wp930879"> </a>
      end<a name="wp930881"> </a>
</pre></div>
<a name="wp928491"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex4.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp929319"> </a>
main( )<a name="wp930893"> </a>
{<a name="wp930894"> </a>
	intn desc_length = -1, status;<a name="wp930895"> </a>
	char desc[50];<a name="wp930896"> </a>
	int32 file_id;<a name="wp930897"> </a>
	uint16 tag = 0, ref = 0;<a name="wp930898"> </a>
	uint32 find_offset, find_length;<a name="wp930899"> </a>
	/* Open the file and initialize the searching parameters to 0. */<a name="wp930901"> </a>
	file_id = Hopen(&quot;Example1.hdf&quot;, DFACC_READ, 0);<a name="wp930902"> </a>
	/*<a name="wp930904"> </a>
	* Start a sequential forward search for the first reference<a name="wp930905"> </a>
	* number assigned to a scientific data set.<a name="wp930906"> </a>
	*/<a name="wp930907"> </a>
	while (Hfind(file_id, DFTAG_NDG, DFREF_WILDCARD, &amp;tag, &amp;ref, \<a name="wp930908"> </a>
		&amp;find_offset, &amp;find_length, DF_FORWARD) != FAIL) {<a name="wp930909"> </a>
	/*<a name="wp930911"> </a>
	* After discovering a valid reference number, check for an<a name="wp930912"> </a>
	* object description by returning the length of the description.<a name="wp930913"> </a>
	* If the inquiry fails, continue searching for the next valid<a name="wp930914"> </a>
	* reference number assigned to a scientific data set.<a name="wp930915"> </a>
	*/<a name="wp930916"> </a>
	if ((desc_length = DFANgetdesclen(&quot;Example1.hdf&quot;, tag, ref)) \<a name="wp930917"> </a>
		== FAIL)<a name="wp930918"> </a>
		break;<a name="wp930919"> </a>
	/* <a name="wp930921"> </a>
	* If a description exists and it will fit in the description buffer,<a name="wp930922"> </a>
	* print it.<a name="wp930923"> </a>
	*/<a name="wp930924"> </a>
	if (desc_length != FAIL &amp;&amp; desc_length &lt;= 50) {<a name="wp930925"> </a>
		status = DFANgetdesc(&quot;Example1.hdf&quot;, tag, ref, desc, desc_length);<a name="wp930926"> </a>
		printf(&quot;Description: %s\n&quot;, desc);<a name="wp930927"> </a>
	}<a name="wp930928"> </a>
	}<a name="wp930929"> </a>
	/* Close the file. */<a name="wp930931"> </a>
	status = Hclose(file_id);<a name="wp930932"> </a>
}<a name="wp930934"> </a>
</pre></div>
<a name="wp928495"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex5.c
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
#include &quot;hdf.h&quot;<a name="wp929558"> </a>
#define LISTSIZE 20<a name="wp930951"> </a>
main( )<a name="wp930953"> </a>
{<a name="wp930954"> </a>
	int i, num_of_labels, start_position = 1, list_length = 10;<a name="wp930956"> </a>
	uint16 ref_list[LISTSIZE];<a name="wp930957"> </a>
	char label_list[DFS_MAXLEN*LISTSIZE-1];<a name="wp930958"> </a>
	/* Get the total number of labels in the &quot;Example1.hdf&quot; file. */<a name="wp930960"> </a>
	num_of_labels = DFANlablist(&quot;Example1.hdf&quot;, DFTAG_NDG, ref_list, \<a name="wp930961"> </a>
			  label_list, list_length, DFS_MAXLEN, 		  \<a name="wp930962"> </a>
			  start_position);<a name="wp930963"> </a>
	/* <a name="wp930965"> </a>
	* Print the reference numbers and label names for each label<a name="wp930966"> </a>
	* in the list.<a name="wp930967"> </a>
	*/<a name="wp930968"> </a>
	for (i = 0; i &lt; num_of_labels; i++)<a name="wp930969"> </a>
	  printf(&quot;\n\t%d\tRef number: %d\tLabel: %s&quot;, i+1, ref_list[i], \<a name="wp930970"> </a>
	         label_list - (i * 13));<a name="wp930971"> </a>
	printf(&quot;\n&quot;);<a name="wp930973"> </a>
}<a name="wp930975"> </a>
</pre></div>
<a name="wp928497"> </a><div style="color: #000000; font-family: Times New Roman; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 6pt; margin-left: 0pt; margin-right: 0pt; margin-top: 12pt; text-align: left; text-decoration: underline; text-indent: 0pt; text-transform: none">
an_ex5.f
</div>
<div class="pPreformatted" style="font-family: Arial; font-size: 10pt"><pre class="pPreformatted" style="font-family: Arial; font-size: 10pt">
      PROGRAM GET LABEL LIST            <a name="wp929664"> </a>
      integer dallist<a name="wp930990"> </a>
      integer*4 DFTAG_NDG, LISTSIZE, DFS_MAXLEN<a name="wp930991"> </a>
      parameter (DFTAG_NDG = 720,<a name="wp930993"> </a>
     +          LISTSIZE = 20,<a name="wp930994"> </a>
     +          DFS_MAXLEN = 255)<a name="wp930995"> </a>
      character*60 label_list(DFS_MAXLEN*LISTSIZE)<a name="wp930997"> </a>
      integer i, num_of_labels, start_position, ref_list(DFS_MAXLEN)<a name="wp930998"> </a>
      start_position = 1<a name="wp931000"> </a>
      num_of_labels = dallist(`Example1.hdf&#39;, DFTAG_NDG, ref_list,<a name="wp931002"> </a>
     +                        label_list, 10, DFS_MAXLEN, <a name="wp931003"> </a>
     +                        start_position)<a name="wp931004"> </a>
      do 10 i = 1, num_of_labels<a name="wp931006"> </a>
        print *,&#39;    Ref number:  `,ref_list(i),<a name="wp931007"> </a>
     +          `    Label: `,label_list(i)<a name="wp931008"> </a>
10    continue<a name="wp931009"> </a>
      end<a name="wp931011"> </a>
</pre></div>
    </blockquote>

    <hr />

    <table id="SummaryNotReq2" border="0" width="850" cellspacing="0" cellpadding="0">
      <tr>
        <td align="left">
        HDF4.2r4 - February 2009<br/>
        <a href="UG_Copyright.html">Copyright</a>
        <td align="right">
          <span style="font-size: 12px; font-weight: bold">
            The HDF Group<br />
          </span>
          <span style="font-size: 12px">
            <a href="http://www.hdfgroup.org">www.hdfgroup.org</a><br />
            <img valign="bottom" border="0" src="images/help.jpg" height="12" alt="The HDF Group" valign="top" />
          </span>
        </td>
      </tr>
    </table>

    <table id="SummaryNotReq3" width="220" border="0" cellpadding="0" cellspacing="0">
    </table>
  </body>
</html>
