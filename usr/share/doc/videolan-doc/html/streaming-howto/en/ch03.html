<?xml version="1.0" encoding="iso-8859-15" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" /><title>Chapter 3.  Advanced streaming using the command line</title><link rel="stylesheet" href="screen.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="VideoLAN, Client, vlc, vls, vod, vlcs, stream, multicast, MPEG-1, MPEG-2, MPEG-4, DV, DVB, DVD, DivX" /><link rel="start" href="index.html" title="VideoLAN Streaming Howto" /><link rel="up" href="index.html" title="VideoLAN Streaming Howto" /><link rel="prev" href="ch02.html" title="Chapter 2.  Easy streaming" /><link rel="next" href="ch04.html" title="Chapter 4.  Examples for advanced use of VLC's stream output (transcoding, multiple streaming, etc...)" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 3. 
Advanced streaming using the command line</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch04.html">Next</a></td></tr></table><hr /></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="cmdline"></a>Chapter 3. 
Advanced streaming using the command line</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch03.html#id2569100">Structure of stream output</a></span></dt><dt><span class="sect1"><a href="ch03.html#id2569883">Description of the modules</a></span></dt><dt><span class="sect1"><a href="ch03.html#id2571961">
Examples
</a></span></dt></dl></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2569100"></a>Structure of stream output</h2></div></div></div><p>

Stream output is the name of the feature of VLC that allows to output
any stream read by VLC to a file or as a network stream instead of
displaying it. Different kind of processing can be applied to the stream
during this process (transcoding, re-scaling, filters, re-muxing...)

Stream output includes different modules, each of them having different
capabilities. You can <span class="emphasis"><em>chain</em></span> modules to enhance the
possibilities. </p><p>
Here is the list of the modules currently available:
</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>standard</em></span>
allows to <span class="emphasis"><em>send</em></span> the stream via an <span class="emphasis"><em>access
output</em></span> module: for example, UDP, file, HTTP, ... You will
probably want to use this module at the end of your chains.

</p></li><li><p><span class="emphasis"><em>transcode</em></span> is used to transcode
(decode and re-encode the stream using a different codec and/or bitrate)
the audio and the video of the input stream. If the input or output
access method doesn't allow pace control (network, capture devices),
this done "on the fly", in real time. This can require quite a lot
of CPU power, depending on the parameters set. Other streams, such
as files and disks are transcoded as fast as the system allows it.
</p></li><li><p><span class="emphasis"><em>duplicate</em></span>
allows you to create a second chain, where the
stream will be handled in an independent way.
</p></li><li><p><span class="emphasis"><em>display</em></span> 
allows you to display the input stream, as VLC
would normally do. Used with the <span class="emphasis"><em>duplicate</em></span>
module, this allows you to monitor the stream while processing it.
</p></li><li><p><span class="emphasis"><em>rtp</em></span> streams over RTP (one UDP port
for each elementary stream). This module also allows RTSP support.
</p></li><li><p><span class="emphasis"><em>es</em></span> allows you to make separate
Elementary Streams (ES) out of an input stream. This can be used
to save audio and video streams to separate files, for instance.
</p></li></ul></div><p>
Each of these modules may take options. Here is the
syntax that you must use:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc input_stream --sout "#module1{option1=parameter1{parameter-option1},option2=parameter2}:module2{option1=...,option2=...}:..."</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Some of the module options (option1 in the example) have to
be set, others are optional. Option parameters (parameter-option1 in the
example) are always optional. These option parameters are also often
very advanced settings. If you don't understand their description, this
certainly means that you don't need them.</p></div><p>
You may also use the following syntax :
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc input_stream --sout-module1-option1=... --sout-module1-option2=... --sout-module2-option1=... --sout-module2-option2=... ...</code></strong>
</pre><p>
For example, to transcode a stream and send it, use:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc input_stream --sout '#transcode{options}:standard{options}'</code></strong>
</pre></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2569883"></a>Description of the modules</h2></div></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2569887"></a>standard (alias std)</h3></div></div></div><p>
This module saves the stream to a file or sends it over a network, after
having muxed it.
</p><p>The available options are:</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2569901"></a>access=</h4></div></div></div><p>This option allows to set the medium used to save or send the stream. This is a compulsory option. Available options are:</p><div class="itemizedlist"><ul type="disc"><li><p>file: saves the stream to a file.</p><p>Use the <span class="emphasis"><em>append</em></span> option to append the stream to an existing file instead of replacing it.</p></li><li><p>udp: streams to a UDP unicast or multicast
address.</p><p>Item options are: <span class="emphasis"><em>caching=&lt;time in
ms&gt;</em></span> to set the time VLC should buffer data before sending
it, <span class="emphasis"><em>ttl=&lt;ttl&gt;</em></span> to set the ttl of the sent udp
packets, <span class="emphasis"><em>group=&lt;amount of packets&gt;</em></span> to sent
packets by burst instead of one by one, <span class="emphasis"><em>late=&lt;time in
ms&gt;</em></span> to drop packets that arrive too late at this stage of
the chain, <span class="emphasis"><em>raw</em></span> if you don't want to wait until the
MTU is filled before sending the packet.</p></li><li><p>http: streams over HTTP.</p><p>Item
options are: <span class="emphasis"><em>user=&lt;user name&gt;</em></span>
to enable HTTP basic authentication and set the user,
<span class="emphasis"><em>pwd=&lt;password&gt;</em></span> to set the basic
authentication password, <span class="emphasis"><em>mime=&lt;mime type&gt;</em></span>
to set the mime type returned by the server.</p></li><li><p>https: streams over HTTP, using a secured SSL
connection.</p><p>Item options are the same as for http and: <span class="emphasis"><em>cert=&lt;path
to certificate&gt;</em></span>to set the certificate to use,
<span class="emphasis"><em>key=&lt;path to key&gt;</em></span> to set the private key file
the server should use for the SSL connection, <span class="emphasis"><em>ca=&lt;path
to certificate&gt;</em></span> to set the path to the root
CA certificates to use for SSL, <span class="emphasis"><em>crl=&lt;path to
certificate&gt;</em></span> to set the revocation certificate to use for
the SSL connection.</p></li><li><p>mmsh: streams using the Microsoft MMS protocol. This
protocol is used as transport method by many Microsoft's softwares.
Note that only a small part of the MMS protocol is supported (MMS
encapsulated in HTTP).</p><p>Item options are the same as for the http module.</p></li><li><p>rtp: streams over RTP. Please note that this is
a legacy module. It doesn't allow RTSP and can only be used to stream
TS streams. Please have a look at the <span class="emphasis"><em>rtp</em></span> stream
output module for a more compliant and complete RTP streamer.</p><p>Options are the same as for the <span class="emphasis"><em>udp</em></span> setting.</p></li></ul></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570048"></a>mux=</h4></div></div></div><p> This option allows you to set the encapsulation method used for the resulting stream. This option has to be set.</p><p>Available options are: </p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>ts:</em></span> the MPEG2/TS muxer. This the
standard muxer used to stream MPEG 2. This muxer can be used with any
<span class="emphasis"><em>access</em></span> method. Supported codecs are MPEG 1/2/4,
MJPEG, H263, H264, I263, WMV 1/2 and theora for video, MPEG audio, AAC and
a52 for the audio stream.</p><p>Item options are: <span class="emphasis"><em>pid-video=&lt;pid&gt;</em></span>
to set the PID of the video track,
<span class="emphasis"><em>pid-audio=&lt;pid&gt;</em></span> to set the PID of the audio
track, <span class="emphasis"><em>pid-spu=&lt;pid&gt;</em></span> to set the PID of the
subtitle track, <span class="emphasis"><em>pid-pmt=&lt;pid&gt;</em></span> to set the PID
of the PMT (Program Map Table), <span class="emphasis"><em>tsid=&lt;id&gt;</em></span> to
set the ID of the resulting TS stream, <span class="emphasis"><em>shaping=&lt;shaping
delay in ms&gt;</em></span> to set the minimum interval during
which the bitrate of the stream will remain constant, for variable
bitrate streams, <span class="emphasis"><em>use-key-frames</em></span> uses I frames
as limits for the shaping intervals, <span class="emphasis"><em>pcr=&lt;PCR interval
in ms&gt;</em></span> allows to set at which interval Program
Clock References will be sent, <span class="emphasis"><em>dts-delay=&lt;delay
in ms&gt;</em></span> allows to delay PTS (Presentation Time
Stamps) from the DTS (Decoding Time Stamp) from the given time,
<span class="emphasis"><em>crypt-audio</em></span> allows to enable encryption of the
audio track using the CSA algorithm, <span class="emphasis"><em>csa-ck=&lt;key as a
16 character word&gt;</em></span> allows to set the key used for CSA
encryption.</p></li><li><p><span class="emphasis"><em>ps:</em></span> the MPEG2/PS muxer. This the standard muxer for MPEG
2 files(.mpg). It can be used with the file and http output methods.
Supported codecs are MPEG 1/2 and MJPEG for video, MPEG audio and a52 for
audio streams.</p><p>The only available item option is <span class="emphasis"><em>dst-delay=&lt;delay
in ms&gt;</em></span>. It allows to delay PTS (Presentation
Time Stamps) from the DTS (Decoding Time Stamp) from the given
time.</p></li><li><p><span class="emphasis"><em>mpeg1:</em></span> the standard MPEG 1 muxer. This muxer should be
used instead of ps with MPEG 1 video streams, when saved to a file or
streamed over HTTP. Supported codecs are MPEG 1 and MPEG audio.</p><p>Items options are the same as for the PS muxer.</p></li><li><p><span class="emphasis"><em>ogg:</em></span> the ogg muxer. This is the muxer from the Xiph
project. It can be used with the HTTP and file output methods. Supported
codecs are MPEG 1/2/4, MJPEG WMV 1/2 and Theora, audio streams can be vorbis,
flac, speex, a52 or MPEG audio.</p><p>There is no item option for this muxer.</p></li><li><p><span class="emphasis"><em>asf:</em></span> the Microsoft ASF muxer. This is the standard muxer
used for streaming by Microsoft's softwares. Is also used as container
for WMA audio files. This muxer can be used with the file and HTTP
output methods. Supported codecs are MPEG 4, MJPEG, WMV 1/2 for video,
MPEG audio, a52 for audio streams.</p><p>Item options are: 
<span class="emphasis"><em>title=&lt;title&gt;</em></span>,
<span class="emphasis"><em>autor=&lt;author&gt;</em></span>,
<span class="emphasis"><em>copyright=&lt;copyright message&gt;</em></span>,
<span class="emphasis"><em>comment=&lt;comments&gt;</em></span>,
<span class="emphasis"><em>rating=&lt;rating&gt;</em></span> allow you to set what will be displayed in the according field of the stream comments.</p></li><li><p><span class="emphasis"><em>asfh:</em></span> this is a special version of the ASF muxer, that
should be used for MMSH streaming. MMSH is the only supported output
method. Supported codecs are the same as for ASF.</p><p>Item options are the same as for ASF.</p></li><li><p><span class="emphasis"><em>avi:</em></span> the Microsoft AVI muxer. This is very common
encapsulation format for MPEG 4 files. The only supported output method
is file. Supported codecs are MPEG 1/2/4, H263, H264 and I263 for video,
MPEG audio and a52 for audio streams.</p><p>There is not item option for this muxer.</p></li><li><p><span class="emphasis"><em>mpjpeg:</em></span> the multipart jpeg muxer.
This encapsulation format is mostly used on surveillance video cameras
with an integrated web-server. Such streams are usually embedded in
web-pages and seen with standard Internet browsers, as they are seen
as a succession of jpeg images. The only supported output method is
HTTP. The only usable codec is MJPEG. No sound track can be muxed
in such streams.</p><p>No item option is available for this
muxer.</p></li></ul></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570270"></a>dst=</h4></div></div></div><p>This option allows to give informations about the location
where the stream should actually be saved or sent.</p><p>Here is the meaning of the <span class="emphasis"><em>dst</em></span> option
depending on the parameter used for the <span class="emphasis"><em>access</em></span>
option.</p><div class="itemizedlist"><ul type="disc"><li><p>If the <span class="emphasis"><em>file</em></span> output method is used, dst is
the complete path where the file should be saved.</p></li><li><p>If the <span class="emphasis"><em>udp</em></span> or <span class="emphasis"><em>rtp</em></span>
output method is used, dst is the unicast or multicast
destination address and, optionally, UDP port, in the form
<span class="emphasis"><em>address:port</em></span>.</p></li><li><p>If the <span class="emphasis"><em>http</em></span>,
<span class="emphasis"><em>https</em></span> or <span class="emphasis"><em>mmsh</em></span> output method is
chosen, dst is the address, port and path of the local network interface
on which the server should listen for requests. If no address is given,
VLC will listen on all the network interfaces. These information
have to be supplied using the <span class="emphasis"><em>address:port/path</em></span>
syntax.</p></li></ul></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570345"></a>sap</h4></div></div></div><p>Use this option if you want VLC to send SAP (Session Announcement
Protocol) announces. SAP is a service discovery protocol, that uses
a special multicast address to send a list of available streams on a
server.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This option can only be enabled with the <span class="emphasis"><em>udp</em></span>
output method.</p></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570366"></a>group=</h4></div></div></div><p>This option allows to specify the name of an optional <span class="emphasis"><em>group</em></span> of streams. A VLC used as a client will use this field to classify the stream.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This option uses a private extension of the SAP protocol.
VLC will be the only client able to read this field.</p><p>This option can only be used it the <span class="emphasis"><em>sap</em></span>
option has been enabled.</p></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570394"></a>sap-ipv6</h4></div></div></div><p>Use this option if you want the SAP announces to be sent using the
<span class="emphasis"><em>IPv6</em></span> protocol instead of <span class="emphasis"><em>IPv4</em></span>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This option can only be used it the <span class="emphasis"><em>sap</em></span>
option has been enabled.</p></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570421"></a>slp</h4></div></div></div><p>SLP stands for <span class="emphasis"><em>Service Location Protocol</em></span>. It is an alternative to SAP for session announcement. Use this option if you want to send such announces.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570436"></a>name=</h4></div></div></div><p>Use this option to specify the name of the stream that will be sent in SAP and SLP announces.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This option can only be used it the <span class="emphasis"><em>sap</em></span>
or <span class="emphasis"><em>slp</em></span> option has been enabled.</p></div></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2570460"></a>display</h3></div></div></div><p> This module can be used to display the stream. This is
particularly useful in a <span class="emphasis"><em>duplicate</em></span> chain, in order
to monitor a stream while it is being saved or streamed. </p><p>available options are:</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570477"></a>novideo</h4></div></div></div><p>You can use this option to disable video in the displayed stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570487"></a>noaudio</h4></div></div></div><p>You can use this option to disable audio in the displayed stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570497"></a>delay=</h4></div></div></div><p>You can use this option to introduce a delay in the display of the stream. Delay has to be given in ms.</p></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2570509"></a>rtp</h3></div></div></div><p>This module can be used to send a stream using the <span class="emphasis"><em>RTP
(Real Time Protocol)</em></span> protocol (see RFC 3550).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Although use of <span class="emphasis"><em>RTSP</em></span> is possible using
this module, it won't allow you to make Video On demand. Please have a
look at the description of the VLM module for that.</p></div><p>The different available options are:</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570536"></a>dst=</h4></div></div></div><p>This option allow to give the destination UDP address. This can
be the address of a host or a multicast group. This option has to be
given, unless the <span class="emphasis"><em>sdp=rtsp://</em></span>option is given (see
below). In the latter case, the stream will be sent to the host doing the
<span class="emphasis"><em>RTSP</em></span> request.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570557"></a>port=</h4></div></div></div><p>This option allows to set the UDP port used to send the first <span class="emphasis"><em>elementary stream</em></span>. This port has to be even. Other streams will be streamed using even ports directly above this one.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570572"></a>port-video=</h4></div></div></div><p>This option allows to set the UDP port used to send the first
video <span class="emphasis"><em>elementary stream</em></span>. This port has to be
even.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570586"></a>port-audio=</h4></div></div></div><p>This option allows to set the UDP port used to send the first
audio <span class="emphasis"><em>elementary stream</em></span>. This port has to be
even.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570601"></a>sdp=</h4></div></div></div><p>This option allows to set the way the SDP (Session Description Protocol) file corresponding the the stream should be made available.</p><p>Options are:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>file://&lt;path to the file&gt;</em></span>, to
export the SDP as a local file</p></li><li><p><span class="emphasis"><em>http://&lt;local interface
IP:port/path&gt;</em></span>, to make the file available using the
integrated HTTP server of VLC.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The <span class="emphasis"><em>local interface IP</em></span> argument
is optional. If not given, VLC will listen on all available
interfaces.</p></div></li><li><p><span class="emphasis"><em>rtsp://&lt;local interface
IP:port/path&gt;</em></span>, to make the SDP file available using the
<span class="emphasis"><em>RTSP</em></span> protocol (see RFC 2326).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The <span class="emphasis"><em>local interface IP</em></span> argument
is optional. If not given, VLC will listen on all available
interfaces.</p></div></li><li><p><span class="emphasis"><em>sap</em></span>, to export the SDP using the
SAP (Session Announcement Protocol, see RFC 2974).</p></li></ul></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570676"></a>ttl=</h4></div></div></div><p>This option can be used to set the <span class="emphasis"><em>TTL</em></span> (Time
to Live) of the sent UDP packets.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570690"></a>mux=</h4></div></div></div><p>This option allows to set the encapsulation method used to
send the stream. See <span class="emphasis"><em>mux=</em></span> options of the
<span class="emphasis"><em>standard</em></span> module for a description of the available
method. Only <span class="emphasis"><em>ts</em></span> and <span class="emphasis"><em>raw</em></span>
(no encpasulation) are possible values for <span class="emphasis"><em>RTP</em></span>
streams. Default is RAW.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570720"></a>name=</h4></div></div></div><p>This option can be used to set the name that will be displayed on
the client receiving the stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570731"></a>description=</h4></div></div></div><p>This option can be used to give an additional description of the
stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570741"></a>url=</h4></div></div></div><p>This option allows to give the address of a website with
additional informations about the stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570751"></a>email=</h4></div></div></div><p>This options allows to give a contact e-mail address</p></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2570762"></a>es</h3></div></div></div><p>The <span class="emphasis"><em>es</em></span> module can be used to separate the
different <span class="emphasis"><em>elementary streams</em></span> from a stream,
and save each of them in a different file or send it to a separate
destination.</p><p>The available parameters are:</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570783"></a>access-video=</h4></div></div></div><p>Use this option to set the medium used to save or send the video
<span class="emphasis"><em>elementary streams</em></span>. Possible values and item
options are the same as for the <span class="emphasis"><em>access</em></span> option of
the <span class="emphasis"><em>standard</em></span> module (see above).</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570806"></a>access-audio=</h4></div></div></div><p>Use this option to set the medium used to save or send the audio
<span class="emphasis"><em>elementary streams</em></span>. Possible values and item
options are the same than for the <span class="emphasis"><em>access</em></span> option of
the <span class="emphasis"><em>standard</em></span> module (see above).</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570829"></a>access=</h4></div></div></div><p>This option can be used instead of both
<span class="emphasis"><em>access-video</em></span> and <span class="emphasis"><em>access-audio</em></span>
options, when they share the same setting.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570847"></a>mux-video=</h4></div></div></div><p>Use this option to set the encapsulation method used for the
video <span class="emphasis"><em>elementary streams</em></span>. Possible values and item
options are the same as for the <span class="emphasis"><em>mux</em></span> option of
the <span class="emphasis"><em>standard</em></span> module (see above).</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570869"></a>mux-audio=</h4></div></div></div><p>Use this option to set the encapsulation method used for the
audio <span class="emphasis"><em>elementary streams</em></span>. Possible values and item
options are the same than for the <span class="emphasis"><em>mux</em></span> option of the
<span class="emphasis"><em>standard</em></span> module (see above).</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570891"></a>mux=</h4></div></div></div><p>This option can be used instead of both
<span class="emphasis"><em>mux-video</em></span> and <span class="emphasis"><em>mux-audio</em></span>
options, when they share the same setting.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570909"></a>dst-video=</h4></div></div></div><p>Use this option to set the location where the video
<span class="emphasis"><em>elementary streams</em></span> should be saved, sent, or made
available. The exact meaning of this option depends on the value of the
<span class="emphasis"><em>access-video</em></span> option and is the same as for the
<span class="emphasis"><em>url</em></span> option of the <span class="emphasis"><em>standard</em></span>
module (see above).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you use the <span class="emphasis"><em>%d</em></span> string in the url
field, VLC will replace it by the number of the audio or video track
considered. The <span class="emphasis"><em>%c</em></span> string will be replaced by the
name (FOURCC) of the codec of the track.</p></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570950"></a>dst-audio=</h4></div></div></div><p>Use this option to set the location where the audio
<span class="emphasis"><em>elementary streams</em></span> should be saved, sent, or made
available. The exact meaning of this option depends on the value of the
<span class="emphasis"><em>access-audio</em></span> option and is the same as for the
<span class="emphasis"><em>url</em></span> option of the <span class="emphasis"><em>standard</em></span>
module (see above).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you use the <span class="emphasis"><em>%d</em></span> string in the url
field, VLC will replace it by the number of the audio or video track
considered. The <span class="emphasis"><em>%c</em></span> string will be replaced by the
name (FOURCC) of the codec of the track.</p></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2570992"></a>dst=</h4></div></div></div><p>This option can be used instead of both
<span class="emphasis"><em>dst-video</em></span> and <span class="emphasis"><em>dst-audio</em></span>
options, when they share the same setting.</p></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2571011"></a>transcode</h3></div></div></div><p>You can use this module to transcode a stream, i.e. to change its
codecs or the encoding bitrates. Some additional processing can be done
during this process, such as re-scaling, deinterlacing, resampling,
etc.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Depending on the bitrate of the original stream and of
the options chosen, transcoding can be a very CPU intensive task. As
a consequence, streaming of a real time transcoded stream can lead to
dropped frames or a jerky image and sound in some cases, when running
out of resources.</p></div><p>Available options are:</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571035"></a>vcodec=</h4></div></div></div><p>This options allows to specify the codec the video tracks of the
input stream should be transcoded to.</p><p>List of available codecs can be found on the 
<a class="ulink" href="/streaming/features.html" target="_top">streaming features page</a>.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571056"></a>vb=</h4></div></div></div><p>This option allows to set the bitrate of the transcoded video
stream, in kbit/s</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571066"></a>venc=</h4></div></div></div><p>This allows to set the encoder to use to encode the videos stream. Available options are:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>ffmpeg</em></span>: this is the libavcodec encoding
module. It handles a large variety of different codecs (the list can be
found on the <a class="ulink" href="/streaming/features.html" target="_top">streaming features
page</a>.</p><p>Item options are: <span class="emphasis"><em>keyint=&lt;number of
frames&gt;</em></span> allows to set the maximal amount of frames
between 2 key frames, <span class="emphasis"><em>hurry-up</em></span> allows the
encoder to decrease the quality of the stream if the CPU can't keep
up with the encoding rate, <span class="emphasis"><em>interlace</em></span> allows
to improve the quality of the encoding of interlaced streams,
<span class="emphasis"><em>noise-reduction=&lt;noise reduction factor&gt;</em></span>
enables a noise reduction algorithm (will decrease required bitrate at
the cost of details in the image), <span class="emphasis"><em>vt=&lt;bitrate tolerance
in kbit/s&gt;</em></span> allows to set a tolerance for the bitrate of
the outputted video stream, <span class="emphasis"><em>bframes=&lt;amount of frames&gt;
</em></span> allows to set the amount of B frames between 2 key frames,
<span class="emphasis"><em>qmin=&lt;quantizer&gt;</em></span> allows to set the minimum
quantizer scale, <span class="emphasis"><em>qmax=&lt;quantizer&gt;</em></span> allows
to set the maximum quantizer scale, <span class="emphasis"><em>qscale=&lt;quantizer
scale&gt;</em></span> allows to specify a fixed quantizer scale
for VBR encodings, <span class="emphasis"><em>i-quant-factor=&lt;quantization
factor&gt;</em></span> allows to set the quantization factor of I
frames, compared to P frames, <span class="emphasis"><em>hq=&lt;quality&gt;</em></span>
allows to choose the quality level for the encoding of the motion
vectors (arguments are simple, rd or bits, default is simple
*FIXME*), <span class="emphasis"><em>strict=&lt;level of compliance&gt;</em></span>
allows to force a stricter standard compliance (possible values are
-1, 0 and 1, default is 0), <span class="emphasis"><em>strict-rc</em></span> enables
a strict rate control algorithm, <span class="emphasis"><em>rc-buffer-size=&lt;size
of the buffer in bits&gt;</em></span> allows to choose the size of
the buffer used for rate control (bigger means more efficient rate
control), <span class="emphasis"><em>rc-buffer-aggressivity=&lt;float representing the
aggressiveness&gt;</em></span> allows to set the rate control buffer
aggressiveness *FIXME*, <span class="emphasis"><em>pre-me</em></span> allows to enable pre
motion estimation, <span class="emphasis"><em>mpeg4-matrix</em></span> enable use of the
MPEG4 quantization matrix with MPEG2 streams, improving quality while
keeping compatibility with MPEG2 decoders, <span class="emphasis"><em>trellis</em></span>
enables trelli quantization (better quality, but slower
processing).</p></li><li><p><span class="emphasis"><em>theora</em></span>: The Xiph.org theora encoder.
The module is used to produce theora streams. Theora is a free patent
and royalties free video codec.</p><p>The only available item option is <span class="emphasis"><em>quality=&lt;quality
level&gt;</em></span>. This option allows to create a VBR stream,
overriding <span class="emphasis"><em>vb</em></span> setting. the quality level must be an
integer between 1 and 10. Higher is better.</p></li><li><p><span class="emphasis"><em>x264</em></span>. x264 is a free open-source h264 encoder. h264 (or MPEG4-AVC) is a quite recent high quality video codec.</p><p>Item options are: <span class="emphasis"><em>keyint=&lt;number of
frames&gt;</em></span> allows to set the maximal amount of
frames between 2 key frames, <span class="emphasis"><em>idrint=&lt;number of
frames&gt;</em></span> allows to set the maximal amount of frames
between 2 IDR frames, <span class="emphasis"><em>bframes=&lt;amount of frames&gt;
</em></span> allows to set the amount of B frames between an I and
a P frame, <span class="emphasis"><em>qp=&lt;quantizer parameter&gt;</em></span>
allows to specify a fixed quantizer (between 1 and 51),
<span class="emphasis"><em>qp-max=&lt;quantizer parameter&gt;</em></span> allows to set
the maximum value for the quantizer, <span class="emphasis"><em>qp-min=&lt;quantizer
parameter&gt;</em></span> allows to set the minimum value for
the quantizer, <span class="emphasis"><em>cabac</em></span> enables the CABAC
(Context-Adaptive Binary Arithmetic Coding) algorithm (slower,
but enhances quality), <span class="emphasis"><em>loopfilter</em></span> enables
deblocking loop filter, <span class="emphasis"><em>analyse</em></span> enables the
analyze mode, <span class="emphasis"><em>frameref=&lt;amount of frames&gt;</em></span>
allows to set the number of previous frames used as predictors,
<span class="emphasis"><em>scenecut=&lt;sensibility&lt;</em></span> allows to control
how aggressively the encoder should insert extra I-frame, on scene
change.</p></li></ul></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571295"></a>fps=</h4></div></div></div><p>This options allows to set the framerate of the transcoded
video, in frame per second. reducing the framerate of a video can help
decreasing its bitrate.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571307"></a>deinterlace</h4></div></div></div><p>This option allows to enable deinterlacing of interlaced video
streams before encoding.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571317"></a>croptop=</h4></div></div></div><p>This option allows to crop the upper part of the source video while
transcoding. The argument is the number of lines the video should be
cropped.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571328"></a>cropbottom=</h4></div></div></div><p>This option allows to crop the lower part of the source video. The
argument is the Y coordinate of the first line to be cropped.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571340"></a>cropleft</h4></div></div></div><p>This option allows to crop the left part of the source video while
transcoding. The argument is the number of columns the video should be
cropped.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571351"></a>cropright=</h4></div></div></div><p>This option allows to crop the right part of the source video. The
argument is the X coordinate of the first column to be cropped.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571362"></a>scale=</h4></div></div></div><p>This option allows the give the ratio from which the video should
be rescaled while being transcoded. This option can be particularly
useful to help reduce the bitrate of a stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571374"></a>width=</h4></div></div></div><p>This options allows to give the width of the transcoded video in
pixels.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571384"></a>height</h4></div></div></div><p>This options allows to give the height of the transcoded video,
in pixels.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571394"></a>acodec=</h4></div></div></div><p>This options allows to specify the codec the audio tracks of the
input stream should be transcoded to.</p><p>List of available codecs can be found on the
<a class="ulink" href="/streaming/features.html" target="_top">streaming features page</a>.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571415"></a>ab=</h4></div></div></div><p>This option allows to set the bitrate of the transcoded audio
stream, in kbit/s</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571425"></a>aenc=</h4></div></div></div><p>This allows to set the encoder to use to encode the audio stream.
Available options are:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>ffmpeg</em></span>: this is the libavcodec encoding
module. It handles a large variety of different codecs (the list can be
found on the <a class="ulink" href="/streaming/features.html" target="_top">streaming features
page</a>.</p></li><li><p><span class="emphasis"><em>vorbis</em></span>. This module uses the vorbis
encoder from the Xiph.org project. Vorbis is a free, open, license-free
lossy audio codec.</p><p>Item options are: <span class="emphasis"><em>quality=&lt;quality
level&gt;</em></span> allows to use VBR (variable bitrate)
encoding instead of the default CBR (constant bitrate), and
to set the quality level (between 1 and 10, higher is better),
<span class="emphasis"><em>max-bitrate=&lt;bitrate in kbit/s&gt;</em></span> allows to set
the maximum bitrate, for vbr encoding, <span class="emphasis"><em>min-bitrate=&lt;bitrate
in kbit/s&gt;</em></span> allows to set the minimum bitrate,
for vbr encoding, <span class="emphasis"><em>cbr</em></span> allows to force cbr
encoding.</p></li><li><p><span class="emphasis"><em>speex</em></span>. This module uses the speex
encoder from the Xiph.org project. Speex is a lossy audio codec, best
fit for very low bitrates (around 10 kbit/s) and particularly video
conference.</p></li></ul></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571499"></a>samplerate=</h4></div></div></div><p>This option allows to set the samplerate of the transcoded audio
stream, in Hz. Reducing the samplerate is be a way to lower the bitrate
of the resulting audio stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571511"></a>channels=</h4></div></div></div><p>This option allows to set the number of channels of the resulting
audio stream. This is useful for codecs that don't have support for more
than 2 channels, of to lower the bitrate of an audio stream.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571523"></a>scodec=</h4></div></div></div><p>This options allows to specify subtitle format the subtitles
tracks of the input stream should be converted to.</p><p>List of available codecs can be found on the
<a class="ulink" href="/streaming/features.html" target="_top">streaming features page</a>.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571544"></a>senc=</h4></div></div></div><p>This allows to set the converter to use to encode the subtitle
stream.</p><p>The only subtitle encoder we have at this time is
<span class="emphasis"><em>dvbsub</em></span>.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571562"></a>soverlay</h4></div></div></div><p>This option allow to render subtitles directly on the video,
while transcoding it. Do not confuse this option with senc/scodec that
transcode the subtitles and streams them</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571574"></a>sfilter=</h4></div></div></div><p>This option allows to render some images generated by a so called
<span class="emphasis"><em>subpicture filter</em></span> (e.g. a logo, a text string,
etc) on top of the video.</p><p>List of available <span class="emphasis"><em>subpicture filters</em></span> can be
found on the <a class="ulink" href="http://www.videolan.org/streaming/features.html" target="_top">streaming features
page</a>. The Item options of this modules can be found using the following command line:</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -p --advanced &lt;module name&gt;</code></strong>
</pre></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571620"></a>threads=</h4></div></div></div><p>This options allows to set the amount of threads that should
be used to encode the streams. Increasing this number to the amount
of processors on the computer, (or twice this number on Intel P4 HT
processors) should improve transcoding performance.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571634"></a>audio-sync</h4></div></div></div><p>When this option is enabled, VLC will drop/duplicate video frames to synchronize the video track on the audio track.</p></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2571646"></a>duplicate</h3></div></div></div><p>This module can be used to duplicate the stream, and so process it
through several different chains.</p><p>Available options are:</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571659"></a>dst=</h4></div></div></div><p>This options allows to give the chain through which the duplicated stream should be processed.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Several <span class="emphasis"><em>dst=</em></span> options have to be used in the same duplicate block to actually duplicate the stream.</p><p>Any of the stream output module described earlier can be used as parameter of this option.</p></div></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571684"></a>select=</h4></div></div></div><p>This options can be used to duplicate only a part
<span class="emphasis"><em>elementary streams</em></span> of a complete stream.</p><p>Several criteria can be given, by separating each of them with a
comma.</p><p>For criteria that need a parameter, such as
<span class="emphasis"><em>es</em></span> and <span class="emphasis"><em>program</em></span>,
you can also specify a range, using the syntax
<span class="emphasis"><em>criteria=num_start-num_end</em></span>.</p><p>Available parameters are:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>program=</em></span>: duplicate only
<span class="emphasis"><em>elementary streams</em></span> belonging to the
selected program (or SID). This option only works with MPEG2/TS
streams.</p></li><li><p><span class="emphasis"><em>noprogram=</em></span>: do not duplicate
<span class="emphasis"><em>elementary streams</em></span> belonging to the
selected program (or PID). This option only works with MPEG2/TS
streams.</p></li><li><p><span class="emphasis"><em>es=</em></span>: duplicate only the
<span class="emphasis"><em>elementary stream</em></span> with the selected
id.</p></li><li><p><span class="emphasis"><em>noes=</em></span>: do not duplicate
the <span class="emphasis"><em>elementary stream</em></span> with the selected
id.</p></li><li><p><span class="emphasis"><em>video</em></span>: duplicate only video
<span class="emphasis"><em>elementary streams</em></span>.</p></li><li><p><span class="emphasis"><em>novideo</em></span>: do not duplicate video
<span class="emphasis"><em>elementary streams</em></span>.</p></li><li><p><span class="emphasis"><em>audio</em></span>: duplicate only audio
<span class="emphasis"><em>elementary streams</em></span>.</p></li><li><p><span class="emphasis"><em>noaudio</em></span>: do not duplicate audio
<span class="emphasis"><em>elementary streams</em></span>.</p></li><li><p><span class="emphasis"><em>spu</em></span>: duplicate only subtitle
<span class="emphasis"><em>elementary streams</em></span>.</p></li><li><p><span class="emphasis"><em>nospu</em></span>: do not duplicate subtitle
<span class="emphasis"><em>elementary streams</em></span>.</p></li></ul></div><p>Example:</p><pre class="screen">#duplicate{dst=std{...},select="program=100-200,novideo"}</pre><p>This <span class="emphasis"><em>duplicate</em></span> chain will only output the non
video <span class="emphasis"><em>elementary streams</em></span> belonging to the programs
which PID are between 100 and 200.</p></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2571861"></a>
Miscellaneous
</h3></div></div></div><p>
Here are a few additional global options:
</p><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571870"></a>--sout-all, --no-sout-all</h4></div></div></div><p>Enable streaming of all ES (default disabled). By default VLC will
only stream one audio ES and one video ES (the first ones). If you
enable sout-all, all ES (audio, video and SPU) will be streamed.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571882"></a>--sout-keep, --no-sout-keep</h4></div></div></div><p>Keep sout open (default disabled) : use the same sout instance
across the various playlist items, if possible.</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571893"></a>--no-sout-audio</h4></div></div></div><p>This options allows to disable audio in the outputted stream.
</p></div><div class="sect3" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="id2571903"></a>--no-sout-video</h4></div></div></div><p>This options allows to disable video in the outputted stream.
</p></div></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="id2571915"></a>Simplified Syntax</h3></div></div></div><p>
The stream output also offers a simplified syntax,
with which you can only you use the <span class="emphasis"><em>standard</em></span> module
main options:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc input_stream --sout access/mux:url</code></strong>
</pre><p>
 where <span class="emphasis"><em>access</em></span>,
<span class="emphasis"><em>mux</em></span> and <span class="emphasis"><em>url</em></span> are as defined in
the options of the standard module.
</p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2571961"></a>
Examples
</h2></div></div></div><p>
To understand fully the complex syntax of VLC's
stream output, please look at the examples in the next section.
</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 2. 
Easy streaming </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 4. 
Examples for advanced use of VLC's stream output
(transcoding, multiple streaming, etc...)
</td></tr></table></div></body></html>
