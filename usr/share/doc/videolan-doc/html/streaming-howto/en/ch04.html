<?xml version="1.0" encoding="iso-8859-15" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" /><title>Chapter 4.  Examples for advanced use of VLC's stream output (transcoding, multiple streaming, etc...)</title><link rel="stylesheet" href="screen.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="VideoLAN, Client, vlc, vls, vod, vlcs, stream, multicast, MPEG-1, MPEG-2, MPEG-4, DV, DVB, DVD, DivX" /><link rel="start" href="index.html" title="VideoLAN Streaming Howto" /><link rel="up" href="index.html" title="VideoLAN Streaming Howto" /><link rel="prev" href="ch03.html" title="Chapter 3.  Advanced streaming using the command line" /><link rel="next" href="ch05.html" title="Chapter 5.  VLM - Multiple streaming and Video on demand" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. 
Examples for advanced use of VLC's stream output
(transcoding, multiple streaming, etc...)
</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr></table><hr /></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="usesout"></a>Chapter 4. 
Examples for advanced use of VLC's stream output
(transcoding, multiple streaming, etc...)
</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch04.html#id2573734">
Transcoding
</a></span></dt><dt><span class="sect1"><a href="ch04.html#id2574419">
Multiple streaming
</a></span></dt><dt><span class="sect1"><a href="ch04.html#id2574499">

Transcoding and multiple streaming
</a></span></dt><dt><span class="sect1"><a href="ch04.html#id2574580">
HTTP streaming
</a></span></dt><dt><span class="sect1"><a href="ch04.html#id2574682">
RTP streaming
</a></span></dt><dt><span class="sect1"><a href="ch04.html#id2574761">RTSP
</a></span></dt><dt><span class="sect1"><a href="ch04.html#id2574779">MMS / MMSH streaming to Windows Media Player
</a></span></dt><dt><span class="sect1"><a href="ch04.html#id2574812">
Use the <span class="emphasis"><em>es</em></span> module
</a></span></dt></dl></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2573734"></a>
Transcoding
</h2></div></div></div><p>
Transcode the input stream and send it to a
multicast IP address with the associated SAP announce:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128,deinterlace}:
standard{access=udp,mux=ts,dst=239.255.12.42,sap,name="TestStream"}'</code></strong>
</pre><p>
 Display the input stream, transcode it and send it
to a multicast IP address with the associated SAP announce:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#duplicate{dst=display,dst=
"transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128,deinterlace}:
standard{access=udp,mux=ts,dst=239.255.12.42,sap,name="TestStream"}"}'</code></strong>
</pre><p>
Transcode the input stream, display the transcoded
stream and send it to a multicast IP address with the associated SAP
announce:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128,deinterlace}:
duplicate{dst=display,dst=standard{access=udp,mux=ts,dst=239.255.12.42,sap,name="TestStream"}}'</code></strong>
</pre></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2574419"></a>
Multiple streaming
</h2></div></div></div><p>
Send a stream to a multicast IP address and a
unicast IP address:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#duplicate{dst=
standard{access=udp,mux=ts,dst=239.255.12.42,sap,name="TestStream"},
dst=standard{access=udp,mux=ts,dst=192.168.1.2}}'</code></strong>
</pre><p>
Display the stream and send it to two unicast IP
addresses:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#duplicate{dst=display,dst=
standard{access=udp,mux=ts,dst=192.168.1.12},
dst=standard{access=udp,mux=ts,dst=192.168.1.42}}'</code></strong>
</pre><p>Send parts of a multiple program input stream:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv multiple_program_input_stream 
--sout '#duplicate{dst=standard{access=udp,mux=ts,dst=239.255.12.42},select="program=12345",
dst=standard{access=udp,mux=ts,dst=239.255.12.43}, select="video,program=1234-2345"}'</code></strong>
</pre><p>This command sends the program of the input stream which id is
12345 to 239.255.12.42 and all video programs with id between 1234 and
2345 to 239.255.12.43.</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2574499"></a>

Transcoding and multiple streaming
</h2></div></div></div><p>
Transcode the input stream, display the transcoded
stream and send it to a multicast IP address with the associated SAP
announce and an unicast IP address:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128,deinterlace}:
duplicate{dst=display,dst=standard{access=udp,mux=ts,dst=239.255.12.42,sap,name="TestStream"},
dst=standard{access=udp,mux=ts,dst=192.168.1.2}}'</code></strong>
</pre><p>
Display the input stream, transcode it and send it
to two unicast IP addresses:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#duplicate{dst=display,
dst="transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128}:
duplicate{dst=standard{access=udp,mux=ts,dst=192.168.1.2},
dst=standard{access=udp,mux=ts,dst=192.168.1.12}"}'</code></strong>
</pre><p>
Send the input stream to a multicast IP address
and the transcoded stream to another multicast IP address with the
associated SAP announces:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#duplicate{dst=
standard{access=udp,mux=ts,dst=239.255.1.2,sap,name="OriginalStream"},
dst="transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128}:
standard{access=udp,mux=ts,dst=239.255.1.3,sap,name="TranscodedStream"}"}'</code></strong>
</pre></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2574580"></a>
HTTP streaming
</h2></div></div></div><p>
Stream in HTTP:
</p><div class="itemizedlist"><ul type="disc"><li><p>
on the server, run:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#standard{access=http,mux=ogg,dst=server.example.org:8080}'</code></strong>
</pre></li><li><p>
on the client(s), run:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc http://server.example.org:8080</code></strong>
</pre></li></ul></div><p>
Transcode and stream in HTTP:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128}:
standard{access=http,mux=ogg,dst=server.example.org:8080}'</code></strong>
</pre><p>
For example, if you want to stream an audio CD in
Ogg/Vorbis over HTTP:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv cdda:/dev/cdrom --sout '#transcode{acodec=vorb,ab=128}:
standard{access=http,mux=ogg,dst=server.example.org:8080}'</code></strong>
</pre></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2574682"></a>
RTP streaming
</h2></div></div></div><p>
Stream in RTP:
</p><div class="itemizedlist"><ul type="disc"><li><p>
on the server, run:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#rtp{dst=192.168.0.12,port=1234,sdp=rtsp://server.example.org:8080/test.sdp}'</code></strong>
</pre></li><li><p>
on the client(s), run:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc rtsp://server.example.org:8080/test.sdp</code></strong>
</pre></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can remplace the <span class="emphasis"><em>rtsp</em></span> URL
by a <span class="emphasis"><em>http</em></span> one, a file path (prefixed with
<span class="emphasis"><em>file://</em></span>) or <span class="emphasis"><em>sap://</em></span> to export
the sdp file using one of these methods instead of rtsp.</p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2574761"></a>RTSP
</h2></div></div></div><p>See <a class="xref" href="ch05.html" title="Chapter 5.  VLM - Multiple streaming and Video on demand">
VLM - Multiple streaming and Video on demand
</a></p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2574779"></a>MMS / MMSH streaming to Windows Media Player
</h2></div></div></div><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#transcode{vcodec=DIV3,vb=256,scale=1,acodec=mp3,ab=32,channels=2}:std{access=mmsh,mux=asfh,dst=:8080}'</code></strong>
</pre><p>VLC media player can connect to this by using the following url : mmsh://server_ip_address:8080 .</p><p>Windows Media Player can connect to this by using the following url : mms://server_ip_address:8080 .</p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id2574812"></a>
Use the <span class="emphasis"><em>es</em></span> module
</h2></div></div></div><p>
Separate audio and video in two PS files:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout
'#es{access=file,mux=ps,url_audio=audio-%c.%m,url_video=video-%c.%m}'</code></strong>
</pre><p>
Extract the audio track of the input stream to a TS
file:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#es{access_audio=file,mux_audio=ts,url_audio=audio-%c.%m}'</code></strong>
</pre><p>
 Stream in unicast the audio track on a port and the
video track on another port:
</p><div class="itemizedlist"><ul type="disc"><li><p>
on the server side:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout
'#es{access=rtp,mux=ts,url_audio=192.168.1.2:1212,url_video=192.168.1.2:1213}'</code></strong>
</pre></li><li><p>
on the client side: to receive the audio:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc udp:@:1212</code></strong>
</pre><p>
to receive the video:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc udp:@:1213</code></strong>
</pre></li></ul></div><p>
Stream in multicast the video and dump the audio in
a file:
</p><pre class="screen">
<code class="prompt">% </code><strong class="userinput"><code>vlc -vvv input_stream --sout '#es{access-video=udp,mux-video=ts,dst-video=239.255.12.42,
access-audio=file,mux-audio=ps,dst-audio=audio-%c.%m}'</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
You can also combine the <span class="emphasis"><em>es</em></span>
module with the other modules to set-up even more complex
solution.
</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 3. 
Advanced streaming using the command line </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. 
VLM - Multiple streaming and Video on demand
</td></tr></table></div></body></html>
