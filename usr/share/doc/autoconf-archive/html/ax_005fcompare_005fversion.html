<html lang="en">
<head>
<title>ax_compare_version - Autoconf Archive</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf Archive">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="The-Macros.html#The-Macros" title="The Macros">
<link rel="prev" href="ax_005fcheck_005fzlib.html#ax_005fcheck_005fzlib" title="ax_check_zlib">
<link rel="next" href="ax_005fcompile_005fcheck_005fsizeof.html#ax_005fcompile_005fcheck_005fsizeof" title="ax_compile_check_sizeof">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual is for GNU Autoconf Archive version 2011.09.17, a collection of
freely re-usable Autoconf macros.

Copyright (C) 2011 Autoconf Archive Maintainers
<autoconf-archive-maintainers@gnu.org>

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
copy of the license is included in the section entitled ``GNU Free
Documentation License''.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="ax_compare_version"></a>
<a name="ax_005fcompare_005fversion"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="ax_005fcompile_005fcheck_005fsizeof.html#ax_005fcompile_005fcheck_005fsizeof">ax_compile_check_sizeof</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="ax_005fcheck_005fzlib.html#ax_005fcheck_005fzlib">ax_check_zlib</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="The-Macros.html#The-Macros">The Macros</a>
<hr>
</div>

<h3 class="unnumberedsec">ax_compare_version</h3>

<h2 class="majorheading">Synopsis</h2>

<pre class="smallexample">     AX_COMPARE_VERSION(VERSION_A, OP, VERSION_B, [ACTION-IF-TRUE], [ACTION-IF-FALSE])
</pre>
<h2 class="majorheading">Description</h2>

<p>This macro compares two version strings. Due to the various number of
minor-version numbers that can exist, and the fact that string
comparisons are not compatible with numeric comparisons, this is not
necessarily trivial to do in a autoconf script. This macro makes doing
these comparisons easy.

<p>The six basic comparisons are available, as well as checking equality
limited to a certain number of minor-version levels.

<p>The operator OP determines what type of comparison to do, and can be one
of:

<pre class="smallexample">      eq  - equal (test A == B)
      ne  - not equal (test A != B)
      le  - less than or equal (test A &lt;= B)
      ge  - greater than or equal (test A &gt;= B)
      lt  - less than (test A &lt; B)
      gt  - greater than (test A &gt; B)
</pre>
<p>Additionally, the eq and ne operator can have a number after it to limit
the test to that number of minor versions.

<pre class="smallexample">      eq0 - equal up to the length of the shorter version
      ne0 - not equal up to the length of the shorter version
      eqN - equal up to N sub-version levels
      neN - not equal up to N sub-version levels
</pre>
<p>When the condition is true, shell commands ACTION-IF-TRUE are run,
otherwise shell commands ACTION-IF-FALSE are run. The environment
variable 'ax_compare_version' is always set to either 'true' or 'false'
as well.

<p>Examples:

<pre class="smallexample">       AX_COMPARE_VERSION([3.15.7],[lt],[3.15.8])
       AX_COMPARE_VERSION([3.15],[lt],[3.15.8])
</pre>
<p>would both be true.

<pre class="smallexample">       AX_COMPARE_VERSION([3.15.7],[eq],[3.15.8])
       AX_COMPARE_VERSION([3.15],[gt],[3.15.8])
</pre>
<p>would both be false.

<pre class="smallexample">       AX_COMPARE_VERSION([3.15.7],[eq2],[3.15.8])
</pre>
<p>would be true because it is only comparing two minor versions.

<pre class="smallexample">       AX_COMPARE_VERSION([3.15.7],[eq0],[3.15])
</pre>
<p>would be true because it is only comparing the lesser number of minor
versions of the two values.

<p>Note: The characters that separate the version numbers do not matter. An
empty string is the same as version 0. OP is evaluated by autoconf, not
configure, so must be a string, not a variable.

<p>The author would like to acknowledge Guido Draheim whose advice about
the m4_case and m4_ifvaln functions make this macro only include the
portions necessary to perform the specific comparison specified by the
OP argument in the final configure script.

<h2 class="majorheading">Source Code</h2>

<p>Download the
<a href="http://git.savannah.gnu.org/gitweb/?p=autoconf-archive.git;a=blob_plain;f=m4/ax_compare_version.m4">latest version of <samp><span class="file">ax_compare_version.m4</span></samp></a> or browse
<a href="http://git.savannah.gnu.org/gitweb/?p=autoconf-archive.git;a=history;f=m4/ax_compare_version.m4">the macro's revision history</a>.

<h2 class="majorheading">License</h2>

<p>Copyright&nbsp;&copy;&nbsp;2008&nbsp;Tim&nbsp;Toolan&nbsp;<a href="mailto:toolan@ele.uri.edu">toolan@ele.uri.edu</a><!-- /@w -->

<p>Copying and distribution of this file, with or without modification, are
permitted in any medium without royalty provided the copyright notice
and this notice are preserved. This file is offered as-is, without any
warranty.

</body></html>

