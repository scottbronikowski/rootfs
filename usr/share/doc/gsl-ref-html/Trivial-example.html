<html lang="en">
<head>
<title>Trivial example - GNU Scientific Library -- Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Scientific Library -- Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Examples-with-Simulated-Annealing.html" title="Examples with Simulated Annealing">
<link rel="next" href="Traveling-Salesman-Problem.html" title="Traveling Salesman Problem">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 The GSL Team.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'' and ``Free Software
Needs Free Documentation'', the Front-Cover text being ``A GNU Manual'',
and with the Back-Cover Text being (a) (see below).  A copy of the
license is included in the section entitled ``GNU Free Documentation
License''.

(a) The Back-Cover Text is: ``You have the freedom to copy and modify this
GNU Manual.''-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Trivial-example"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Traveling-Salesman-Problem.html">Traveling Salesman Problem</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Examples-with-Simulated-Annealing.html">Examples with Simulated Annealing</a>
<hr>
</div>

<h4 class="subsection">25.3.1 Trivial example</h4>

<p>The first example, in one dimensional Cartesian space, sets up an energy
function which is a damped sine wave; this has many local minima, but
only one global minimum, somewhere between 1.0 and 1.5.  The initial
guess given is 15.5, which is several local minima away from the global
minimum.

<pre class="smallexample"><pre class="verbatim">     #include &lt;math.h>
     #include &lt;stdlib.h>
     #include &lt;string.h>
     #include &lt;gsl/gsl_siman.h>
     
     /* set up parameters for this simulated annealing run */
     
     /* how many points do we try before stepping */
     #define N_TRIES 200             
     
     /* how many iterations for each T? */
     #define ITERS_FIXED_T 1000
     
     /* max step size in random walk */
     #define STEP_SIZE 1.0            
     
     /* Boltzmann constant */
     #define K 1.0                   
     
     /* initial temperature */
     #define T_INITIAL 0.008         
     
     /* damping factor for temperature */
     #define MU_T 1.003              
     #define T_MIN 2.0e-6
     
     gsl_siman_params_t params 
       = {N_TRIES, ITERS_FIXED_T, STEP_SIZE,
          K, T_INITIAL, MU_T, T_MIN};
     
     /* now some functions to test in one dimension */
     double E1(void *xp)
     {
       double x = * ((double *) xp);
     
       return exp(-pow((x-1.0),2.0))*sin(8*x);
     }
     
     double M1(void *xp, void *yp)
     {
       double x = *((double *) xp);
       double y = *((double *) yp);
     
       return fabs(x - y);
     }
     
     void S1(const gsl_rng * r, void *xp, double step_size)
     {
       double old_x = *((double *) xp);
       double new_x;
     
       double u = gsl_rng_uniform(r);
       new_x = u * 2 * step_size - step_size + old_x;
     
       memcpy(xp, &amp;new_x, sizeof(new_x));
     }
     
     void P1(void *xp)
     {
       printf ("%12g", *((double *) xp));
     }
     
     int
     main(int argc, char *argv[])
     {
       const gsl_rng_type * T;
       gsl_rng * r;
     
       double x_initial = 15.5;
     
       gsl_rng_env_setup();
     
       T = gsl_rng_default;
       r = gsl_rng_alloc(T);
     
       gsl_siman_solve(r, &amp;x_initial, E1, S1, M1, P1,
                       NULL, NULL, NULL, 
                       sizeof(double), params);
     
       gsl_rng_free (r);
       return 0;
     }
</pre></pre>
   <p>Here are a couple of plots that are generated by running
<code>siman_test</code> in the following way:

<pre class="example">     $ ./siman_test | awk '!/^#/ {print $1, $4}'
      | graph -y 1.34 1.4 -W0 -X generation -Y position
      | plot -Tps &gt; siman-test.eps
     $ ./siman_test | awk '!/^#/ {print $1, $5}'
      | graph -y -0.88 -0.83 -W0 -X generation -Y energy
      | plot -Tps &gt; siman-energy.eps
</pre>
<hr>The GNU Scientific Library - a free numerical library licensed under the GNU GPL<br>Back to the <a href="/software/gsl/">GNU Scientific Library Homepage</a></body></html>

