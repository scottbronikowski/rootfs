<html lang="en">
<head>
<title>Monte Carlo Interface - GNU Scientific Library -- Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Scientific Library -- Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Monte-Carlo-Integration.html" title="Monte Carlo Integration">
<link rel="next" href="PLAIN-Monte-Carlo.html" title="PLAIN Monte Carlo">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 The GSL Team.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'' and ``Free Software
Needs Free Documentation'', the Front-Cover text being ``A GNU Manual'',
and with the Back-Cover Text being (a) (see below).  A copy of the
license is included in the section entitled ``GNU Free Documentation
License''.

(a) The Back-Cover Text is: ``You have the freedom to copy and modify this
GNU Manual.''-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Monte-Carlo-Interface"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="PLAIN-Monte-Carlo.html">PLAIN Monte Carlo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Monte-Carlo-Integration.html">Monte Carlo Integration</a>
<hr>
</div>

<h3 class="section">24.1 Interface</h3>

<p>All of the Monte Carlo integration routines use the same general form of
interface.  There is an allocator to allocate memory for control
variables and workspace, a routine to initialize those control
variables, the integrator itself, and a function to free the space when
done.

   <p>Each integration function requires a random number generator to be
supplied, and returns an estimate of the integral and its standard
deviation.  The accuracy of the result is determined by the number of
function calls specified by the user.  If a known level of accuracy is
required this can be achieved by calling the integrator several times
and averaging the individual results until the desired accuracy is
obtained.

   <p>Random sample points used within the Monte Carlo routines are always
chosen strictly within the integration region, so that endpoint
singularities are automatically avoided.

   <p>The function to be integrated has its own datatype, defined in the
header file <samp><span class="file">gsl_monte.h</span></samp>.

<div class="defun">
&mdash; Data Type: <b>gsl_monte_function</b><var><a name="index-gsl_005fmonte_005ffunction-2101"></a></var><br>
<blockquote>
        <p>This data type defines a general function with parameters for Monte
Carlo integration.

          <dl>
<dt><code>double (* f) (double * </code><var>x</var><code>, size_t </code><var>dim</var><code>, void * </code><var>params</var><code>)</code><dd>this function should return the value
<!-- {$f(x,\hbox{\it params})$} -->
f(x,params) for the argument <var>x</var> and parameters <var>params</var>,
where <var>x</var> is an array of size <var>dim</var> giving the coordinates of
the point where the function is to be evaluated.

          <br><dt><code>size_t dim</code><dd>the number of dimensions for <var>x</var>.

          <br><dt><code>void * params</code><dd>a pointer to the parameters of the function. 
</dl>
        </p></blockquote></div>

<p class="noindent">Here is an example for a quadratic function in two dimensions,
with a = 3, b = 2, c = 1.  The following code
defines a <code>gsl_monte_function</code> <code>F</code> which you could pass to an
integrator:

<pre class="example">     struct my_f_params { double a; double b; double c; };
     
     double
     my_f (double x[], size_t dim, void * p) {
        struct my_f_params * fp = (struct my_f_params *)p;
     
        if (dim != 2)
           {
             fprintf (stderr, "error: dim != 2");
             abort ();
           }
     
        return  fp-&gt;a * x[0] * x[0]
                  + fp-&gt;b * x[0] * x[1]
                    + fp-&gt;c * x[1] * x[1];
     }
     
     gsl_monte_function F;
     struct my_f_params params = { 3.0, 2.0, 1.0 };
     
     F.f = &amp;my_f;
     F.dim = 2;
     F.params = &amp;params;
</pre>
   <p class="noindent">The function f(x) can be evaluated using the following macro,

<pre class="example">     #define GSL_MONTE_FN_EVAL(F,x)
         (*((F)-&gt;f))(x,(F)-&gt;dim,(F)-&gt;params)
</pre>
<hr>The GNU Scientific Library - a free numerical library licensed under the GNU GPL<br>Back to the <a href="/software/gsl/">GNU Scientific Library Homepage</a></body></html>

