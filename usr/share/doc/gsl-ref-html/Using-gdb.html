<html lang="en">
<head>
<title>Using gdb - GNU Scientific Library -- Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Scientific Library -- Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Debugging-Numerical-Programs.html" title="Debugging Numerical Programs">
<link rel="next" href="Examining-floating-point-registers.html" title="Examining floating point registers">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011 The GSL Team.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'' and ``Free Software
Needs Free Documentation'', the Front-Cover text being ``A GNU Manual'',
and with the Back-Cover Text being (a) (see below).  A copy of the
license is included in the section entitled ``GNU Free Documentation
License''.

(a) The Back-Cover Text is: ``You have the freedom to copy and modify this
GNU Manual.''-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Using-gdb"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Examining-floating-point-registers.html">Examining floating point registers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Debugging-Numerical-Programs.html">Debugging Numerical Programs</a>
<hr>
</div>

<h3 class="section">A.1 Using gdb</h3>

<p><a name="index-gdb-2703"></a><a name="index-debugging-numerical-programs-2704"></a><a name="index-breakpoints-2705"></a>Any errors reported by the library are passed to the function
<code>gsl_error</code>.  By running your programs under gdb and setting a
breakpoint in this function you can automatically catch any library
errors.  You can add a breakpoint for every session by putting

<pre class="example">     break gsl_error
</pre>
   <p class="noindent">into your <samp><span class="file">.gdbinit</span></samp> file in the directory where your program is
started.

   <p>If the breakpoint catches an error then you can use a backtrace
(<code>bt</code>) to see the call-tree, and the arguments which possibly
caused the error.  By moving up into the calling function you can
investigate the values of variables at that point.  Here is an example
from the program <code>fft/test_trap</code>, which contains the following
line,

<pre class="smallexample">     status = gsl_fft_complex_wavetable_alloc (0, &amp;complex_wavetable);
</pre>
   <p class="noindent">The function <code>gsl_fft_complex_wavetable_alloc</code> takes the length of
an FFT as its first argument.  When this line is executed an error will
be generated because the length of an FFT is not allowed to be zero.

   <p>To debug this problem we start <code>gdb</code>, using the file
<samp><span class="file">.gdbinit</span></samp> to define a breakpoint in <code>gsl_error</code>,

<pre class="smallexample">     $ gdb test_trap
     
     GDB is free software and you are welcome to distribute copies
     of it under certain conditions; type "show copying" to see
     the conditions.  There is absolutely no warranty for GDB;
     type "show warranty" for details.  GDB 4.16 (i586-debian-linux),
     Copyright 1996 Free Software Foundation, Inc.
     
     Breakpoint 1 at 0x8050b1e: file error.c, line 14.
</pre>
   <p class="noindent">When we run the program this breakpoint catches the error and shows the
reason for it.

<pre class="smallexample">     (gdb) run
     Starting program: test_trap
     
     Breakpoint 1, gsl_error (reason=0x8052b0d
         "length n must be positive integer",
         file=0x8052b04 "c_init.c", line=108, gsl_errno=1)
         at error.c:14
     14        if (gsl_error_handler)
</pre>
   <p class="noindent">The first argument of <code>gsl_error</code> is always a string describing the
error.  Now we can look at the backtrace to see what caused the problem,

<pre class="smallexample">     (gdb) bt
     #0  gsl_error (reason=0x8052b0d
         "length n must be positive integer",
         file=0x8052b04 "c_init.c", line=108, gsl_errno=1)
         at error.c:14
     #1  0x8049376 in gsl_fft_complex_wavetable_alloc (n=0,
         wavetable=0xbffff778) at c_init.c:108
     #2  0x8048a00 in main (argc=1, argv=0xbffff9bc)
         at test_trap.c:94
     #3  0x80488be in ___crt_dummy__ ()
</pre>
   <p class="noindent">We can see that the error was generated in the function
<code>gsl_fft_complex_wavetable_alloc</code> when it was called with an
argument of <var>n=0</var>.  The original call came from line 94 in the
file <samp><span class="file">test_trap.c</span></samp>.

   <p>By moving up to the level of the original call we can find the line that
caused the error,

<pre class="smallexample">     (gdb) up
     #1  0x8049376 in gsl_fft_complex_wavetable_alloc (n=0,
         wavetable=0xbffff778) at c_init.c:108
     108   GSL_ERROR ("length n must be positive integer", GSL_EDOM);
     (gdb) up
     #2  0x8048a00 in main (argc=1, argv=0xbffff9bc)
         at test_trap.c:94
     94    status = gsl_fft_complex_wavetable_alloc (0,
             &amp;complex_wavetable);
</pre>
   <p class="noindent">Thus we have found the line that caused the problem.  From this point we
could also print out the values of other variables such as
<code>complex_wavetable</code>.

<hr>The GNU Scientific Library - a free numerical library licensed under the GNU GPL<br>Back to the <a href="/software/gsl/">GNU Scientific Library Homepage</a></body></html>

