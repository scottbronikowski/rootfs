<html lang="en">
<head>
<title>CVS--Concurrent Versions System v1.12.13</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="CVS--Concurrent Versions System v1.12.13">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">CVS--Concurrent Versions System v1.12.13</h1>
   <div class="shortcontents">
<h2>Short Contents</h2>
<ul>
<li><a href="#toc_Top">CVS&mdash;Concurrent Versions System v1.12.13</a></li>
<li><a href="#toc_Overview">1 Overview</a></li>
<li><a href="#toc_Repository">2 The Repository</a></li>
<li><a href="#toc_Starting-a-new-project">3 Starting a project with CVS</a></li>
<li><a href="#toc_Revisions">4 Revisions</a></li>
<li><a href="#toc_Branching-and-merging">5 Branching and merging</a></li>
<li><a href="#toc_Recursive-behavior">6 Recursive behavior</a></li>
<li><a href="#toc_Adding-and-removing">7 Adding, removing, and renaming files and directories</a></li>
<li><a href="#toc_History-browsing">8 History browsing</a></li>
<li><a href="#toc_Binary-files">9 Handling binary files</a></li>
<li><a href="#toc_Multiple-developers">10 Multiple developers</a></li>
<li><a href="#toc_Revision-management">11 Revision management</a></li>
<li><a href="#toc_Keyword-substitution">12 Keyword substitution</a></li>
<li><a href="#toc_Tracking-sources">13 Tracking third-party sources</a></li>
<li><a href="#toc_Builds">14 How your build system interacts with CVS</a></li>
<li><a href="#toc_Special-Files">15 Special Files</a></li>
<li><a href="#toc_CVS-commands">Appendix A Guide to CVS commands</a></li>
<li><a href="#toc_Invoking-CVS">Appendix B Quick reference to CVS commands</a></li>
<li><a href="#toc_Administrative-files">Appendix C Reference manual for Administrative files</a></li>
<li><a href="#toc_Environment-variables">Appendix D All environment variables which affect CVS</a></li>
<li><a href="#toc_Compatibility">Appendix E Compatibility between CVS Versions</a></li>
<li><a href="#toc_Troubleshooting">Appendix F Troubleshooting</a></li>
<li><a href="#toc_Credits">Appendix G Credits</a></li>
<li><a href="#toc_BUGS">Appendix H Dealing with bugs in CVS or this manual</a></li>
<li><a href="#toc_Index">Index</a></li>
</ul>
</div>



   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">CVS&mdash;Concurrent Versions System v1.12.13</a>
<li><a name="toc_Overview" href="#Overview">1 Overview</a>
<ul>
<li><a href="#What-is-CVS_003f">1.1 What is CVS?</a>
<li><a href="#What-is-CVS-not_003f">1.2 What is CVS not?</a>
<li><a href="#A-sample-session">1.3 A sample session</a>
<ul>
<li><a href="#Getting-the-source">1.3.1 Getting the source</a>
<li><a href="#Committing-your-changes">1.3.2 Committing your changes</a>
<li><a href="#Cleaning-up">1.3.3 Cleaning up</a>
<li><a href="#Viewing-differences">1.3.4 Viewing differences</a>
</li></ul>
</li></ul>
<li><a name="toc_Repository" href="#Repository">2 The Repository</a>
<ul>
<li><a href="#Specifying-a-repository">2.1 Telling CVS where your repository is</a>
<li><a href="#Repository-storage">2.2 How data is stored in the repository</a>
<ul>
<li><a href="#Repository-files">2.2.1 Where files are stored within the repository</a>
<li><a href="#File-permissions">2.2.2 File permissions</a>
<li><a href="#Windows-permissions">2.2.3 File Permission issues specific to Windows</a>
<li><a href="#Attic">2.2.4 The attic</a>
<li><a href="#CVS-in-repository">2.2.5 The CVS directory in the repository</a>
<li><a href="#Locks">2.2.6 CVS locks in the repository</a>
<li><a href="#CVSROOT-storage">2.2.7 How files are stored in the CVSROOT directory</a>
</li></ul>
<li><a href="#Working-directory-storage">2.3 How data is stored in the working directory</a>
<li><a href="#Intro-administrative-files">2.4 The administrative files</a>
<ul>
<li><a href="#Intro-administrative-files">2.4.1 Editing administrative files</a>
</li></ul>
<li><a href="#Multiple-repositories">2.5 Multiple repositories</a>
<li><a href="#Creating-a-repository">2.6 Creating a repository</a>
<li><a href="#Backing-up">2.7 Backing up a repository</a>
<li><a href="#Moving-a-repository">2.8 Moving a repository</a>
<li><a href="#Remote-repositories">2.9 Remote repositories</a>
<ul>
<li><a href="#Server-requirements">2.9.1 Server requirements</a>
<li><a href="#The-connection-method">2.9.2 The connection method</a>
<li><a href="#Connecting-via-rsh">2.9.3 Connecting with rsh</a>
<li><a href="#Password-authenticated">2.9.4 Direct connection with password authentication</a>
<ul>
<li><a href="#Password-authentication-server">2.9.4.1 Setting up the server for password authentication</a>
<li><a href="#Password-authentication-client">2.9.4.2 Using the client with password authentication</a>
<li><a href="#Password-authentication-security">2.9.4.3 Security considerations with password authentication</a>
</li></ul>
<li><a href="#GSSAPI-authenticated">2.9.5 Direct connection with GSSAPI</a>
<li><a href="#Kerberos-authenticated">2.9.6 Direct connection with Kerberos</a>
<li><a href="#Connecting-via-fork">2.9.7 Connecting with fork</a>
<li><a href="#Write-proxies">2.9.8 Distributing load across several CVS servers</a>
</li></ul>
<li><a href="#Read_002donly-access">2.10 Read-only repository access</a>
<li><a href="#Server-temporary-directory">2.11 Temporary directories for the server</a>
</li></ul>
<li><a name="toc_Starting-a-new-project" href="#Starting-a-new-project">3 Starting a project with CVS</a>
<ul>
<li><a href="#Setting-up-the-files">3.1 Setting up the files</a>
<ul>
<li><a href="#From-files">3.1.1 Creating a directory tree from a number of files</a>
<li><a href="#From-other-version-control-systems">3.1.2 Creating Files From Other Version Control Systems</a>
<li><a href="#From-scratch">3.1.3 Creating a directory tree from scratch</a>
</li></ul>
<li><a href="#Defining-the-module">3.2 Defining the module</a>
</li></ul>
<li><a name="toc_Revisions" href="#Revisions">4 Revisions</a>
<ul>
<li><a href="#Revision-numbers">4.1 Revision numbers</a>
<li><a href="#Versions-revisions-releases">4.2 Versions, revisions and releases</a>
<li><a href="#Assigning-revisions">4.3 Assigning revisions</a>
<li><a href="#Tags">4.4 Tags&ndash;Symbolic revisions</a>
<li><a href="#Tagging-the-working-directory">4.5 Specifying what to tag from the working directory</a>
<li><a href="#Tagging-by-date_002ftag">4.6 Specifying what to tag by date or revision</a>
<li><a href="#Modifying-tags">4.7 Deleting, moving, and renaming tags</a>
<li><a href="#Tagging-add_002fremove">4.8 Tagging and adding and removing files</a>
<li><a href="#Sticky-tags">4.9 Sticky tags</a>
</li></ul>
<li><a name="toc_Branching-and-merging" href="#Branching-and-merging">5 Branching and merging</a>
<ul>
<li><a href="#Branches-motivation">5.1 What branches are good for</a>
<li><a href="#Creating-a-branch">5.2 Creating a branch</a>
<li><a href="#Accessing-branches">5.3 Accessing branches</a>
<li><a href="#Branches-and-revisions">5.4 Branches and revisions</a>
<li><a href="#Magic-branch-numbers">5.5 Magic branch numbers</a>
<li><a href="#Merging-a-branch">5.6 Merging an entire branch</a>
<li><a href="#Merging-more-than-once">5.7 Merging from a branch several times</a>
<li><a href="#Merging-two-revisions">5.8 Merging differences between any two revisions</a>
<li><a href="#Merging-adds-and-removals">5.9 Merging can add or remove files</a>
<li><a href="#Merging-and-keywords">5.10 Merging and keywords</a>
</li></ul>
<li><a name="toc_Recursive-behavior" href="#Recursive-behavior">6 Recursive behavior</a>
<li><a name="toc_Adding-and-removing" href="#Adding-and-removing">7 Adding, removing, and renaming files and directories</a>
<ul>
<li><a href="#Adding-files">7.1 Adding files to a directory</a>
<li><a href="#Removing-files">7.2 Removing files</a>
<li><a href="#Removing-directories">7.3 Removing directories</a>
<li><a href="#Moving-files">7.4 Moving and renaming files</a>
<ul>
<li><a href="#Outside">7.4.1 The Normal way to Rename</a>
<li><a href="#Inside">7.4.2 Moving the history file</a>
<li><a href="#Rename-by-copying">7.4.3 Copying the history file</a>
</li></ul>
<li><a href="#Moving-directories">7.5 Moving and renaming directories</a>
</li></ul>
<li><a name="toc_History-browsing" href="#History-browsing">8 History browsing</a>
<ul>
<li><a href="#log-messages">8.1 Log messages</a>
<li><a href="#history-database">8.2 The history database</a>
<li><a href="#user_002ddefined-logging">8.3 User-defined logging</a>
</li></ul>
<li><a name="toc_Binary-files" href="#Binary-files">9 Handling binary files</a>
<ul>
<li><a href="#Binary-why">9.1 The issues with binary files</a>
<li><a href="#Binary-howto">9.2 How to store binary files</a>
</li></ul>
<li><a name="toc_Multiple-developers" href="#Multiple-developers">10 Multiple developers</a>
<ul>
<li><a href="#File-status">10.1 File status</a>
<li><a href="#Updating-a-file">10.2 Bringing a file up to date</a>
<li><a href="#Conflicts-example">10.3 Conflicts example</a>
<li><a href="#Informing-others">10.4 Informing others about commits</a>
<li><a href="#Concurrency">10.5 Several developers simultaneously attempting to run CVS</a>
<li><a href="#Watches">10.6 Mechanisms to track who is editing files</a>
<ul>
<li><a href="#Setting-a-watch">10.6.1 Telling CVS to watch certain files</a>
<li><a href="#Getting-Notified">10.6.2 Telling CVS to notify you</a>
<li><a href="#Editing-files">10.6.3 How to edit a file which is being watched</a>
<li><a href="#Watch-information">10.6.4 Information about who is watching and editing</a>
<li><a href="#Watches-Compatibility">10.6.5 Using watches with old versions of CVS</a>
</li></ul>
<li><a href="#Choosing-a-model">10.7 Choosing between reserved or unreserved checkouts</a>
</li></ul>
<li><a name="toc_Revision-management" href="#Revision-management">11 Revision management</a>
<ul>
<li><a href="#When-to-commit">11.1 When to commit?</a>
</li></ul>
<li><a name="toc_Keyword-substitution" href="#Keyword-substitution">12 Keyword substitution</a>
<ul>
<li><a href="#Keyword-list">12.1 Keyword List</a>
<li><a href="#Using-keywords">12.2 Using keywords</a>
<li><a href="#Avoiding-substitution">12.3 Avoiding substitution</a>
<li><a href="#Substitution-modes">12.4 Substitution modes</a>
<li><a href="#Configuring-keyword-expansion">12.5 Configuring Keyword Expansion</a>
<li><a href="#Log-keyword">12.6 Problems with the $Log$ keyword.</a>
</li></ul>
<li><a name="toc_Tracking-sources" href="#Tracking-sources">13 Tracking third-party sources</a>
<ul>
<li><a href="#First-import">13.1 Importing for the first time</a>
<li><a href="#Update-imports">13.2 Updating with the import command</a>
<li><a href="#Reverting-local-changes">13.3 Reverting to the latest vendor release</a>
<li><a href="#Binary-files-in-imports">13.4 How to handle binary files with cvs import</a>
<li><a href="#Keywords-in-imports">13.5 How to handle keyword substitution with cvs import</a>
<li><a href="#Multiple-vendor-branches">13.6 Multiple vendor branches</a>
</li></ul>
<li><a name="toc_Builds" href="#Builds">14 How your build system interacts with CVS</a>
<li><a name="toc_Special-Files" href="#Special-Files">15 Special Files</a>
<li><a name="toc_CVS-commands" href="#CVS-commands">Appendix A Guide to CVS commands</a>
<ul>
<li><a href="#Structure">A.1 Overall structure of CVS commands</a>
<li><a href="#Exit-status">A.2 CVS's exit status</a>
<li><a href="#_007e_002f_002ecvsrc">A.3 Default options and the ~/.cvsrc file</a>
<li><a href="#Global-options">A.4 Global options</a>
<li><a href="#Common-options">A.5 Common command options</a>
<li><a href="#Date-input-formats">A.6 Date input formats</a>
<ul>
<li><a href="#General-date-syntax">A.6.1 General date syntax</a>
<li><a href="#Calendar-date-items">A.6.2 Calendar date items</a>
<li><a href="#Time-of-day-items">A.6.3 Time of day items</a>
<li><a href="#Time-zone-items">A.6.4 Time zone items</a>
<li><a href="#Day-of-week-items">A.6.5 Day of week items</a>
<li><a href="#Relative-items-in-date-strings">A.6.6 Relative items in date strings</a>
<li><a href="#Pure-numbers-in-date-strings">A.6.7 Pure numbers in date strings</a>
<li><a href="#Seconds-since-the-Epoch">A.6.8 Seconds since the Epoch</a>
<li><a href="#Authors-of-get_005fdate">A.6.9 Authors of <code>get_date</code></a>
</li></ul>
<li><a href="#admin">A.7 admin&mdash;Administration</a>
<ul>
<li><a href="#admin-options">A.7.1 admin options</a>
</li></ul>
<li><a href="#annotate">A.8 annotate&mdash;What revision modified each line of a file?</a>
<ul>
<li><a href="#annotate-options">A.8.1 annotate options</a>
<li><a href="#annotate-example">A.8.2 annotate example</a>
</li></ul>
<li><a href="#checkout">A.9 checkout&mdash;Check out sources for editing</a>
<ul>
<li><a href="#checkout-options">A.9.1 checkout options</a>
<li><a href="#checkout-examples">A.9.2 checkout examples</a>
</li></ul>
<li><a href="#commit">A.10 commit&mdash;Check files into the repository</a>
<ul>
<li><a href="#commit-options">A.10.1 commit options</a>
<li><a href="#commit-examples">A.10.2 commit examples</a>
<ul>
<li><a href="#commit-examples">A.10.2.1 Committing to a branch</a>
<li><a href="#commit-examples">A.10.2.2 Creating the branch after editing</a>
</li></ul>
</li></ul>
<li><a href="#diff">A.11 diff&mdash;Show differences between revisions</a>
<ul>
<li><a href="#diff-options">A.11.1 diff options</a>
<ul>
<li><a href="#Line-group-formats">A.11.1.1 Line group formats</a>
<li><a href="#Line-formats">A.11.1.2 Line formats</a>
</li></ul>
<li><a href="#diff-examples">A.11.2 diff examples</a>
</li></ul>
<li><a href="#export">A.12 export&mdash;Export sources from CVS, similar to checkout</a>
<ul>
<li><a href="#export-options">A.12.1 export options</a>
</li></ul>
<li><a href="#history">A.13 history&mdash;Show status of files and users</a>
<ul>
<li><a href="#history-options">A.13.1 history options</a>
</li></ul>
<li><a href="#import">A.14 import&mdash;Import sources into CVS, using vendor branches</a>
<ul>
<li><a href="#import-options">A.14.1 import options</a>
<li><a href="#import-output">A.14.2 import output</a>
<li><a href="#import-examples">A.14.3 import examples</a>
</li></ul>
<li><a href="#log">A.15 log&mdash;Print out log information for files</a>
<ul>
<li><a href="#log-options">A.15.1 log options</a>
<li><a href="#log-examples">A.15.2 log examples</a>
</li></ul>
<li><a href="#ls-_0026-rls">A.16 ls &amp; rls</a>
<ul>
<li><a href="#ls-_0026-rls-options">A.16.1 ls &amp; rls options</a>
<li><a href="#rls-examples">A.16.2 rls examples</a>
</li></ul>
<li><a href="#rdiff">A.17 rdiff&mdash;'patch' format diffs between releases</a>
<ul>
<li><a href="#rdiff-options">A.17.1 rdiff options</a>
<li><a href="#rdiff-examples">A.17.2 rdiff examples</a>
</li></ul>
<li><a href="#release">A.18 release&mdash;Indicate that a Module is no longer in use</a>
<ul>
<li><a href="#release-options">A.18.1 release options</a>
<li><a href="#release-output">A.18.2 release output</a>
<li><a href="#release-examples">A.18.3 release examples</a>
</li></ul>
<li><a href="#server-_0026-pserver">A.19 server &amp; pserver&mdash;Act as a server for a client on stdin/stdout</a>
<li><a href="#suck">A.20 suck&mdash;Download RCS ,v file raw</a>
<li><a href="#update">A.21 update&mdash;Bring work tree in sync with repository</a>
<ul>
<li><a href="#update-options">A.21.1 update options</a>
<li><a href="#update-output">A.21.2 update output</a>
</li></ul>
</li></ul>
<li><a name="toc_Invoking-CVS" href="#Invoking-CVS">Appendix B Quick reference to CVS commands</a>
<li><a name="toc_Administrative-files" href="#Administrative-files">Appendix C Reference manual for Administrative files</a>
<ul>
<li><a href="#modules">C.1 The modules file</a>
<ul>
<li><a href="#Alias-modules">C.1.1 Alias modules</a>
<li><a href="#Regular-modules">C.1.2 Regular modules</a>
<li><a href="#Ampersand-modules">C.1.3 Ampersand modules</a>
<li><a href="#Excluding-directories">C.1.4 Excluding directories</a>
<li><a href="#Module-options">C.1.5 Module options</a>
<li><a href="#Module-program-options">C.1.6 How the modules file &ldquo;program options&rdquo; programs are run</a>
</li></ul>
<li><a href="#Wrappers">C.2 The cvswrappers file</a>
<li><a href="#Trigger-Scripts">C.3 The Trigger Scripts</a>
<ul>
<li><a href="#syntax">C.3.1 The common syntax</a>
<li><a href="#Trigger-Script-Security">C.3.2 Security and the Trigger Scripts</a>
<li><a href="#commit-files">C.3.3 The commit support files</a>
<ul>
<li><a href="#Updating-Commit-Files">C.3.3.1 Updating legacy repositories to stop using deprecated command line template formats</a>
</li></ul>
<li><a href="#commitinfo">C.3.4 Commitinfo</a>
<li><a href="#verifymsg">C.3.5 Verifying log messages</a>
<ul>
<li><a href="#verifymsg-example">C.3.5.1 Verifying log messages</a>
</li></ul>
<li><a href="#loginfo">C.3.6 Loginfo</a>
<ul>
<li><a href="#loginfo-example">C.3.6.1 Loginfo example</a>
<li><a href="#Keeping-a-checked-out-copy">C.3.6.2 Keeping a checked out copy</a>
</li></ul>
<li><a href="#postadmin">C.3.7 Logging admin commands</a>
<li><a href="#taginfo">C.3.8 Taginfo</a>
<li><a href="#posttag">C.3.9 Logging tags</a>
<li><a href="#postwatch">C.3.10 Logging watch commands</a>
<li><a href="#preproxy">C.3.11 Launch a Script before Proxying</a>
<li><a href="#postproxy">C.3.12 Launch a Script after Proxying</a>
</li></ul>
<li><a href="#rcsinfo">C.4 Rcsinfo</a>
<li><a href="#cvsignore">C.5 Ignoring files via cvsignore</a>
<li><a href="#checkoutlist">C.6 The checkoutlist file</a>
<li><a href="#history-file">C.7 The history file</a>
<li><a href="#Variables">C.8 Expansions in administrative files</a>
<li><a href="#config">C.9 The CVSROOT/config configuration file</a>
</li></ul>
<li><a name="toc_Environment-variables" href="#Environment-variables">Appendix D All environment variables which affect CVS</a>
<li><a name="toc_Compatibility" href="#Compatibility">Appendix E Compatibility between CVS Versions</a>
<li><a name="toc_Troubleshooting" href="#Troubleshooting">Appendix F Troubleshooting</a>
<ul>
<li><a href="#Error-messages">F.1 Partial list of error messages</a>
<li><a href="#Connection">F.2 Trouble making a connection to a CVS server</a>
<li><a href="#Other-problems">F.3 Other common problems</a>
</li></ul>
<li><a name="toc_Credits" href="#Credits">Appendix G Credits</a>
<li><a name="toc_BUGS" href="#BUGS">Appendix H Dealing with bugs in CVS or this manual</a>
<li><a name="toc_Index" href="#Index">Index</a>
</li></ul>
</div>

<!-- ================================================================ -->
<!-- The real text starts here -->
<!-- ================================================================ -->
<!--  -->
<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">CVS&mdash;Concurrent Versions System v1.12.13</h2>

<p>This info manual describes how to use and administer
<span class="sc">cvs</span> version 1.12.13.

<!-- This menu is pretty long.  Not sure how easily that -->
<!-- can be fixed (no brilliant ideas right away)... -->
<ul class="menu">
<li><a accesskey="1" href="#Overview">Overview</a>:                     An introduction to CVS
<li><a accesskey="2" href="#Repository">Repository</a>:                   Where all your sources are stored
<li><a accesskey="3" href="#Starting-a-new-project">Starting a new project</a>:       Starting a project with CVS
<li><a accesskey="4" href="#Revisions">Revisions</a>:                    Numeric and symbolic names for revisions
<li><a accesskey="5" href="#Branching-and-merging">Branching and merging</a>:        Diverging/rejoining branches of development
<li><a accesskey="6" href="#Recursive-behavior">Recursive behavior</a>:           CVS descends directories
<li><a accesskey="7" href="#Adding-and-removing">Adding and removing</a>:          Adding/removing/renaming files/directories
<li><a accesskey="8" href="#History-browsing">History browsing</a>:             Viewing the history of files in various ways

</li></ul>
<p>CVS and the Real World. 
-----------------------
</p>
<ul class="menu">
<li><a accesskey="9" href="#Binary-files">Binary files</a>:                 CVS can handle binary files
<li><a href="#Multiple-developers">Multiple developers</a>:          How CVS helps a group of developers
<li><a href="#Revision-management">Revision management</a>:          Policy questions for revision management
<li><a href="#Keyword-substitution">Keyword substitution</a>:         CVS can include the revision inside the file
<li><a href="#Tracking-sources">Tracking sources</a>:             Tracking third-party sources
<li><a href="#Builds">Builds</a>:                       Issues related to CVS and builds
<li><a href="#Special-Files">Special Files</a>: 		Devices, links and other non-regular files

</li></ul>
<p>References. 
-----------
</p>
<ul class="menu">
<li><a href="#CVS-commands">CVS commands</a>:                 CVS commands share some things
<li><a href="#Invoking-CVS">Invoking CVS</a>:                 Quick reference to CVS commands
<li><a href="#Administrative-files">Administrative files</a>:         Reference manual for the Administrative files
<li><a href="#Environment-variables">Environment variables</a>:        All environment variables which affect CVS
<li><a href="#Compatibility">Compatibility</a>:                Upgrading CVS versions
<li><a href="#Troubleshooting">Troubleshooting</a>:              Some tips when nothing works
<li><a href="#Credits">Credits</a>:                      Some of the contributors to this manual
<li><a href="#BUGS">BUGS</a>:                         Dealing with bugs in CVS or this manual
<li><a href="#Index">Index</a>:                        Index
</ul>

<!--  -->
<div class="node">
<a name="Overview"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Repository">Repository</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Overview</h2>

<p><a name="index-Overview-1"></a>
This chapter is for people who have never used
<span class="sc">cvs</span>, and perhaps have never used version control
software before.

   <p>If you are already familiar with <span class="sc">cvs</span> and are just
trying to learn a particular feature or remember a
certain command, you can probably skip everything here.

<ul class="menu">
<li><a accesskey="1" href="#What-is-CVS_003f">What is CVS?</a>:                 What you can do with <span class="sc">cvs</span>
<li><a accesskey="2" href="#What-is-CVS-not_003f">What is CVS not?</a>:             Problems <span class="sc">cvs</span> doesn't try to solve
<li><a accesskey="3" href="#A-sample-session">A sample session</a>:             A tour of basic <span class="sc">cvs</span> usage
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="What-is-CVS%3f"></a>
<a name="What-is-CVS_003f"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#What-is-CVS-not_003f">What is CVS not?</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>

</div>

<h3 class="section">1.1 What is CVS?</h3>

<p><a name="index-What-is-CVS_003f-2"></a><a name="index-Introduction-to-CVS-3"></a><a name="index-CVS_002c-introduction-to-4"></a>
<span class="sc">cvs</span> is a version control system.  Using it, you can
record the history of your source files.

<!--  /// -->
<!--  ///Those who cannot remember the past are condemned to repeat it. -->
<!--  ///               - George Santayana -->
<!--  ////// -->
<!--  Insert history  quote here! -->
   <p>For example, bugs sometimes creep in when
software is modified, and you might not detect the bug
until a long time after you make the modification. 
With <span class="sc">cvs</span>, you can easily retrieve old versions to see
exactly which change caused the bug.  This can
sometimes be a big help.

   <p>You could of course save every version of every file
you have ever created.  This would
however waste an enormous amount of disk space.  <span class="sc">cvs</span>
stores all the versions of a file in a single file in a
clever way that only stores the differences between
versions.

   <p><span class="sc">cvs</span> also helps you if you are part of a group of people working
on the same project.  It is all too easy to overwrite
each others' changes unless you are extremely careful. 
Some editors, like <span class="sc">gnu</span> Emacs, try to make sure that
two people never modify the same file at the
same time.  Unfortunately, if someone is using another
editor, that safeguard will not work.  <span class="sc">cvs</span> solves this problem
by insulating the different developers from each other.  Every
developer works in his own directory, and <span class="sc">cvs</span> merges
the work when each developer is done.

   <p><a name="index-History-of-CVS-5"></a><a name="index-CVS_002c-history-of-6"></a><a name="index-Credits-_0028CVS-program_0029-7"></a><a name="index-Contributors-_0028CVS-program_0029-8"></a><span class="sc">cvs</span> started out as a bunch of shell scripts written by
Dick Grune, posted to the newsgroup
<code>comp.sources.unix</code> in the volume 6
release of July, 1986.  While no actual code from
these shell scripts is present in the current version
of <span class="sc">cvs</span> much of the <span class="sc">cvs</span> conflict resolution algorithms
come from them.

   <p>In April, 1989, Brian Berliner designed and coded <span class="sc">cvs</span>. 
Jeff Polk later helped Brian with the design of the <span class="sc">cvs</span>
module and vendor branch support.

   <p><a name="index-Source_002c-getting-CVS-source-9"></a>You can get <span class="sc">cvs</span> in a variety of ways, including
free download from the Internet.  For more information
on downloading <span class="sc">cvs</span> and other <span class="sc">cvs</span> topics, see:

<pre class="example">     <a href="http://cvs.nongnu.org/">http://cvs.nongnu.org/</a>
</pre>
   <p><a name="index-Mailing-list-10"></a><a name="index-List_002c-mailing-list-11"></a><a name="index-Newsgroups-12"></a>There is a mailing list, known as <a href="mailto:info-cvs@nongnu.org">info-cvs@nongnu.org</a>,
devoted to <span class="sc">cvs</span>.  To subscribe or
unsubscribe
write to
<a href="mailto:info-cvs-request@nongnu.org">info-cvs-request@nongnu.org</a>. 
If you prefer a Usenet group, there is a one-way mirror (posts to the email
list are usually sent to the news group, but not visa versa) of
<a href="mailto:info-cvs@nongnu.org">info-cvs@nongnu.org</a> at <a href="news:gnu.cvs.help">news:gnu.cvs.help</a>.  The right
Usenet group for posts is <a href="news:comp.software.config-mgmt">news:comp.software.config-mgmt</a> which is for
<span class="sc">cvs</span> discussions (along with other configuration
management systems).  In the future, it might be
possible to create a
<code>comp.software.config-mgmt.cvs</code>, but probably only
if there is sufficient <span class="sc">cvs</span> traffic on
<a href="news:comp.software.config-mgmt">news:comp.software.config-mgmt</a>. 
<!-- Other random data is that the tale was very -->
<!-- skeptical of comp.software.config-mgmt.cvs when the -->
<!-- subject came up around 1995 or so (for one -->
<!-- thing, because creating it would be a "reorg" which -->
<!-- would need to take a more comprehensive look at the -->
<!-- whole comp.software.config-mgmt.* hierarchy). -->

   <p>You can also subscribe to the <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a> mailing list,
described in more detail in <a href="#BUGS">BUGS</a>.  To subscribe
send mail to <a href="mailto:bug-cvs-request@nongnu.org">bug-cvs-request@nongnu.org</a>.  There is a two-way
Usenet mirror (posts to the Usenet group are usually sent to the email list and
visa versa) of <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a> named <a href="news:gnu.cvs.bug">news:gnu.cvs.bug</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="What-is-CVS-not%3f"></a>
<a name="What-is-CVS-not_003f"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#A-sample-session">A sample session</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#What-is-CVS_003f">What is CVS?</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>

</div>

<h3 class="section">1.2 What is CVS not?</h3>

<p><a name="index-What-is-CVS-not_003f-13"></a>
<span class="sc">cvs</span> can do a lot of things for you, but it does
not try to be everything for everyone.

     <dl>
<dt><span class="sc">cvs</span> is not a build system.<dd>
Though the structure of your repository and modules
file interact with your build system
(e.g. <samp><span class="file">Makefile</span></samp>s), they are essentially
independent.

     <p><span class="sc">cvs</span> does not dictate how you build anything.  It
merely stores files for retrieval in a tree structure
you devise.

     <p><span class="sc">cvs</span> does not dictate how to use disk space in the
checked out working directories.  If you write your
<samp><span class="file">Makefile</span></samp>s or scripts in every directory so they
have to know the relative positions of everything else,
you wind up requiring the entire repository to be
checked out.

     <p>If you modularize your work, and construct a build
system that will share files (via links, mounts,
<code>VPATH</code> in <samp><span class="file">Makefile</span></samp>s, etc.), you can
arrange your disk usage however you like.

     <p>But you have to remember that <em>any</em> such system is
a lot of work to construct and maintain.  <span class="sc">cvs</span> does
not address the issues involved.

     <p>Of course, you should place the tools created to
support such a build system (scripts, <samp><span class="file">Makefile</span></samp>s,
etc) under <span class="sc">cvs</span>.

     <p>Figuring out what files need to be rebuilt when
something changes is, again, something to be handled
outside the scope of <span class="sc">cvs</span>.  One traditional
approach is to use <code>make</code> for building, and use
some automated tool for generating the dependencies which
<code>make</code> uses.

     <p>See <a href="#Builds">Builds</a>, for more information on doing builds
in conjunction with <span class="sc">cvs</span>.

     <br><dt><span class="sc">cvs</span> is not a substitute for management.<dd>
Your managers and project leaders are expected to talk
to you frequently enough to make certain you are aware
of schedules, merge points, branch names and release
dates.  If they don't, <span class="sc">cvs</span> can't help.

     <p><span class="sc">cvs</span> is an instrument for making sources dance to
your tune.  But you are the piper and the composer.  No
instrument plays itself or writes its own music.

     <br><dt><span class="sc">cvs</span> is not a substitute for developer communication.<dd>
When faced with conflicts within a single file, most
developers manage to resolve them without too much
effort.  But a more general definition of &ldquo;conflict&rdquo;
includes problems too difficult to solve without
communication between developers.

     <p><span class="sc">cvs</span> cannot determine when simultaneous changes
within a single file, or across a whole collection of
files, will logically conflict with one another.  Its
concept of a <dfn>conflict</dfn> is purely textual, arising
when two changes to the same base file are near enough
to spook the merge (i.e. <code>diff3</code>) command.

     <p><span class="sc">cvs</span> does not claim to help at all in figuring out
non-textual or distributed conflicts in program logic.

     <p>For example: Say you change the arguments to function
<code>X</code> defined in file <samp><span class="file">A</span></samp>.  At the same time,
someone edits file <samp><span class="file">B</span></samp>, adding new calls to
function <code>X</code> using the old arguments.  You are
outside the realm of <span class="sc">cvs</span>'s competence.

     <p>Acquire the habit of reading specs and talking to your
peers.

     <br><dt><span class="sc">cvs</span> does not have change control<dd>
Change control refers to a number of things.  First of
all it can mean <dfn>bug-tracking</dfn>, that is being able
to keep a database of reported bugs and the status of
each one (is it fixed?  in what release?  has the bug
submitter agreed that it is fixed?).  For interfacing
<span class="sc">cvs</span> to an external bug-tracking system, see the
<samp><span class="file">rcsinfo</span></samp> and <samp><span class="file">verifymsg</span></samp> files
(see <a href="#Administrative-files">Administrative files</a>).

     <p>Another aspect of change control is keeping track of
the fact that changes to several files were in fact
changed together as one logical change.  If you check
in several files in a single <code>cvs commit</code>
operation, <span class="sc">cvs</span> then forgets that those files were
checked in together, and the fact that they have the
same log message is the only thing tying them
together.  Keeping a <span class="sc">gnu</span> style <samp><span class="file">ChangeLog</span></samp>
can help somewhat. 
<!-- FIXME: should have an xref to a section which talks -->
<!-- more about keeping ChangeLog's with CVS, but that -->
<!-- section hasn't been written yet. -->

     <p>Another aspect of change control, in some systems, is
the ability to keep track of the status of each
change.  Some changes have been written by a developer,
others have been reviewed by a second developer, and so
on.  Generally, the way to do this with <span class="sc">cvs</span> is to
generate a diff (using <code>cvs diff</code> or <code>diff</code>)
and email it to someone who can then apply it using the
<code>patch</code> utility.  This is very flexible, but
depends on mechanisms outside <span class="sc">cvs</span> to make sure
nothing falls through the cracks.

     <br><dt><span class="sc">cvs</span> is not an automated testing program<dd>
It should be possible to enforce mandatory use of a
test suite using the <code>commitinfo</code> file.  I haven't
heard a lot about projects trying to do that or whether
there are subtle gotchas, however.

     <br><dt><span class="sc">cvs</span> does not have a built-in process model<dd>
Some systems provide ways to ensure that changes or
releases go through various steps, with various
approvals as needed.  Generally, one can accomplish
this with <span class="sc">cvs</span> but it might be a little more work. 
In some cases you'll want to use the <samp><span class="file">commitinfo</span></samp>,
<samp><span class="file">loginfo</span></samp>, <samp><span class="file">rcsinfo</span></samp>, or <samp><span class="file">verifymsg</span></samp>
files, to require that certain steps be performed
before cvs will allow a checkin.  Also consider whether
features such as branches and tags can be used to
perform tasks such as doing work in a development tree
and then merging certain changes over to a stable tree
only once they have been proven. 
</dl>

<!--  -->
<div class="node">
<a name="A-sample-session"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#What-is-CVS-not_003f">What is CVS not?</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Overview">Overview</a>

</div>

<h3 class="section">1.3 A sample session</h3>

<p><a name="index-Example-of-a-work_002dsession-14"></a><a name="index-Getting-started-15"></a><a name="index-Work_002dsession_002c-example-of-16"></a><a name="index-tc_002c-Trivial-Compiler-_0028example_0029-17"></a><a name="index-Trivial-Compiler-_0028example_0029-18"></a>
<!-- I think an example is a pretty good way to start.  But -->
<!-- somewhere in here, maybe after the sample session, -->
<!-- we need something which is kind of -->
<!-- a "roadmap" which is more directed at sketching out -->
<!-- the functionality of CVS and pointing people to -->
<!-- various other parts of the manual.  As it stands now -->
<!-- people who read in order get dumped right into all -->
<!-- manner of hair regarding remote repositories, -->
<!-- creating a repository, etc. -->
<!-- The following was in the old Basic concepts node.  I don't -->
<!-- know how good a job it does at introducing modules, -->
<!-- or whether they need to be introduced so soon, but -->
<!-- something of this sort might go into some -->
<!-- introductory material somewhere. -->

   <p>As a way of introducing <span class="sc">cvs</span>, we'll go through a
typical work-session using <span class="sc">cvs</span>.  The first thing
to understand is that <span class="sc">cvs</span> stores all files in a
centralized <dfn>repository</dfn> (see <a href="#Repository">Repository</a>); this
section assumes that a repository is set up. 
<!-- I'm not sure that the sentence concerning the -->
<!-- repository quite tells the user what they need to -->
<!-- know at this point.  Might need to expand on "centralized" -->
<!-- slightly (maybe not here, maybe further down in the example?) -->

   <p>Suppose you are working on a simple compiler.  The source
consists of a handful of C files and a <samp><span class="file">Makefile</span></samp>. 
The compiler is called &lsquo;<samp><span class="samp">tc</span></samp>&rsquo; (Trivial Compiler),
and the repository is set up so that there is a module
called &lsquo;<samp><span class="samp">tc</span></samp>&rsquo;.

<ul class="menu">
<li><a accesskey="1" href="#Getting-the-source">Getting the source</a>:           Creating a workspace
<li><a accesskey="2" href="#Committing-your-changes">Committing your changes</a>:      Making your work available to others
<li><a accesskey="3" href="#Cleaning-up">Cleaning up</a>:                  Cleaning up
<li><a accesskey="4" href="#Viewing-differences">Viewing differences</a>:          Viewing differences
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Getting-the-source"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Committing-your-changes">Committing your changes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-sample-session">A sample session</a>

</div>

<h4 class="subsection">1.3.1 Getting the source</h4>

<p><a name="index-Getting-the-source-19"></a><a name="index-Checking-out-source-20"></a><a name="index-Fetching-source-21"></a><a name="index-Source_002c-getting-from-CVS-22"></a><a name="index-Checkout_002c-example-23"></a>
The first thing you must do is to get your own working copy of the
source for &lsquo;<samp><span class="samp">tc</span></samp>&rsquo;.  For this, you use the <code>checkout</code> command:

<pre class="example">     $ cvs checkout tc
</pre>
   <p class="noindent">This will create a new directory called <samp><span class="file">tc</span></samp> and populate it with
the source files.

<pre class="example">     $ cd tc
     $ ls
     CVS         Makefile    backend.c   driver.c    frontend.c  parser.c
</pre>
   <p>The <samp><span class="file">CVS</span></samp> directory is used internally by
<span class="sc">cvs</span>.  Normally, you should not modify or remove
any of the files in it.

   <p>You start your favorite editor, hack away at <samp><span class="file">backend.c</span></samp>, and a couple
of hours later you have added an optimization pass to the compiler. 
A note to <span class="sc">rcs</span> and <span class="sc">sccs</span> users: There is no need to lock the files that
you want to edit.  See <a href="#Multiple-developers">Multiple developers</a>, for an explanation.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Committing-your-changes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Cleaning-up">Cleaning up</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getting-the-source">Getting the source</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-sample-session">A sample session</a>

</div>

<h4 class="subsection">1.3.2 Committing your changes</h4>

<p><a name="index-Committing-changes-to-files-24"></a><a name="index-Log-message-entry-25"></a>
When you have checked that the compiler is still compilable you decide
to make a new version of <samp><span class="file">backend.c</span></samp>.  This will
store your new <samp><span class="file">backend.c</span></samp> in the repository and
make it available to anyone else who is using that same
repository.

<pre class="example">     $ cvs commit backend.c
</pre>
   <p class="noindent"><span class="sc">cvs</span> starts an editor, to allow you to enter a log
message.  You type in &ldquo;Added an optimization pass.&rdquo;,
save the temporary file, and exit the editor.

   <p><a name="index-CVSEDITOR_002c-environment-variable-26"></a><a name="index-EDITOR_002c-environment-variable-27"></a>The environment variable <code>$CVSEDITOR</code> determines
which editor is started.  If <code>$CVSEDITOR</code> is not
set, then if the environment variable <code>$EDITOR</code> is
set, it will be used. If both <code>$CVSEDITOR</code> and
<code>$EDITOR</code> are not set then there is a default
which will vary with your operating system, for example
<code>vi</code> for unix or <code>notepad</code> for Windows
NT/95.

   <p><a name="index-VISUAL_002c-environment-variable-28"></a>In addition, <span class="sc">cvs</span> checks the <code>$VISUAL</code> environment
variable.  Opinions vary on whether this behavior is desirable and
whether future releases of <span class="sc">cvs</span> should check <code>$VISUAL</code> or
ignore it.  You will be OK either way if you make sure that
<code>$VISUAL</code> is either unset or set to the same thing as
<code>$EDITOR</code>.

<!-- This probably should go into some new node -->
<!-- containing detailed info on the editor, rather than -->
<!-- the intro.  In fact, perhaps some of the stuff with -->
<!-- CVSEDITOR and -m and so on should too. -->
   <p>When <span class="sc">cvs</span> starts the editor, it includes a list of
files which are modified.  For the <span class="sc">cvs</span> client,
this list is based on comparing the modification time
of the file against the modification time that the file
had when it was last gotten or updated.  Therefore, if
a file's modification time has changed but its contents
have not, it will show up as modified.  The simplest
way to handle this is simply not to worry about it&mdash;if
you proceed with the commit <span class="sc">cvs</span> will detect that
the contents are not modified and treat it as an
unmodified file.  The next <code>update</code> will clue
<span class="sc">cvs</span> in to the fact that the file is unmodified,
and it will reset its stored timestamp so that the file
will not show up in future editor sessions. 
<!-- FIXCVS: Might be nice if "commit" and other commands -->
<!-- would reset that timestamp too, but currently commit -->
<!-- doesn't. -->
<!-- FIXME: Need to talk more about the process of -->
<!-- prompting for the log message.  Like show an example -->
<!-- of what it pops up in the editor, for example.  Also -->
<!-- a discussion of how to get the "a)bort, c)ontinue, -->
<!-- e)dit" prompt and what to do with it.  Might also -->
<!-- work in the suggestion that if you want a diff, you -->
<!-- should make it before running commit (someone -->
<!-- suggested that the diff pop up in the editor.  I'm -->
<!-- not sure that is better than telling people to run -->
<!-- "cvs diff" first if that is what they want, but if -->
<!-- we want to tell people that, the manual possibly -->
<!-- should say it). -->

   <p>If you want to avoid
starting an editor you can specify the log message on
the command line using the &lsquo;<samp><span class="samp">-m</span></samp>&rsquo; flag instead, like
this:

<pre class="example">     $ cvs commit -m "Added an optimization pass" backend.c
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Cleaning-up"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Viewing-differences">Viewing differences</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Committing-your-changes">Committing your changes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-sample-session">A sample session</a>

</div>

<h4 class="subsection">1.3.3 Cleaning up</h4>

<p><a name="index-Cleaning-up-29"></a><a name="index-Working-copy_002c-removing-30"></a><a name="index-Removing-your-working-copy-31"></a><a name="index-Releasing-your-working-copy-32"></a>
Before you turn to other tasks you decide to remove your working copy of
tc.  One acceptable way to do that is of course

<pre class="example">     $ cd ..
     $ rm -r tc
</pre>
   <p class="noindent">but a better way is to use the <code>release</code> command (see <a href="#release">release</a>):

<pre class="example">     $ cd ..
     $ cvs release -d tc
     M driver.c
     ? tc
     You have [1] altered files in this repository.
     Are you sure you want to release (and delete) directory `tc': n
     ** `release' aborted by user choice.
</pre>
   <p>The <code>release</code> command checks that all your modifications have been
committed.  If history logging is enabled it also makes a note in the
history file.  See <a href="#history-file">history file</a>.

   <p>When you use the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; flag with <code>release</code>, it
also removes your working copy.

   <p>In the example above, the <code>release</code> command wrote a couple of lines
of output.  &lsquo;<samp><span class="samp">? tc</span></samp>&rsquo; means that the file <samp><span class="file">tc</span></samp> is unknown to <span class="sc">cvs</span>. 
That is nothing to worry about: <samp><span class="file">tc</span></samp> is the executable compiler,
and it should not be stored in the repository.  See <a href="#cvsignore">cvsignore</a>,
for information about how to make that warning go away. 
See <a href="#release-output">release output</a>, for a complete explanation of
all possible output from <code>release</code>.

   <p>&lsquo;<samp><span class="samp">M driver.c</span></samp>&rsquo; is more serious.  It means that the
file <samp><span class="file">driver.c</span></samp> has been modified since it was
checked out.

   <p>The <code>release</code> command always finishes by telling
you how many modified files you have in your working
copy of the sources, and then asks you for confirmation
before deleting any files or making any note in the
history file.

   <p>You decide to play it safe and answer <kbd>n &lt;RET&gt;</kbd>
when <code>release</code> asks for confirmation.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Viewing-differences"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cleaning-up">Cleaning up</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#A-sample-session">A sample session</a>

</div>

<h4 class="subsection">1.3.4 Viewing differences</h4>

<p><a name="index-Viewing-differences-33"></a><a name="index-Diff-34"></a>
You do not remember modifying <samp><span class="file">driver.c</span></samp>, so you want to see what
has happened to that file.

<pre class="example">     $ cd tc
     $ cvs diff driver.c
</pre>
   <p>This command runs <code>diff</code> to compare the version of <samp><span class="file">driver.c</span></samp>
that you checked out with your working copy.  When you see the output
you remember that you added a command line option that enabled the
optimization pass.  You check it in, and release the module. 
<!-- FIXME: we haven't yet defined the term "check in". -->

<pre class="example">     $ cvs commit -m "Added an optimization pass" driver.c
     Checking in driver.c;
     /usr/local/cvsroot/tc/driver.c,v  &lt;--  driver.c
     new revision: 1.2; previous revision: 1.1
     done
     $ cd ..
     $ cvs release -d tc
     ? tc
     You have [0] altered files in this repository.
     Are you sure you want to release (and delete) directory `tc': y
</pre>
   <!--  -->
<div class="node">
<a name="Repository"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Starting-a-new-project">Starting a new project</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Overview">Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 The Repository</h2>

<p><a name="index-Repository-_0028intro_0029-35"></a><a name="index-Repository_002c-example-36"></a><a name="index-Layout-of-repository-37"></a><a name="index-Typical-repository-38"></a><a name="index-g_t_002fusr_002flocal_002fcvsroot_002c-as-example-repository-39"></a><a name="index-cvsroot-40"></a>
The <span class="sc">cvs</span> <dfn>repository</dfn> stores a complete copy of
all the files and directories which are under version
control.

   <p>Normally, you never access any of the files in the
repository directly.  Instead, you use <span class="sc">cvs</span>
commands to get your own copy of the files into a
<dfn>working directory</dfn>, and then
work on that copy.  When you've finished a set of
changes, you check (or <dfn>commit</dfn>) them back into the
repository.  The repository then contains the changes
which you have made, as well as recording exactly what
you changed, when you changed it, and other such
information.  Note that the repository is not a
subdirectory of the working directory, or vice versa;
they should be in separate locations. 
<!-- Need some example, e.g. repository -->
<!-- /usr/local/cvsroot; working directory -->
<!-- /home/joe/sources.  But this node is too long -->
<!-- as it is; need a little reorganization... -->

   <p><a name="index-local-method_002c-setting-up-41"></a><span class="sc">cvs</span> can access a repository by a variety of
means.  It might be on the local computer, or it might
be on a computer across the room or across the world. 
To distinguish various ways to access a repository, the
repository name can start with an <dfn>access method</dfn>. 
For example, the access method <code>:local:</code> means to
access a repository directory, so the repository
<code>:local:/usr/local/cvsroot</code> means that the
repository is in <samp><span class="file">/usr/local/cvsroot</span></samp> on the
computer running <span class="sc">cvs</span>.  For information on other
access methods, see <a href="#Remote-repositories">Remote repositories</a>.

<!-- Can se say this more concisely?  Like by passing -->
<!-- more of the buck to the Remote repositories node? -->
   <p>If the access method is omitted, then if the repository
starts with &lsquo;<samp><span class="samp">/</span></samp>&rsquo;, then <code>:local:</code> is
assumed.  If it does not start with &lsquo;<samp><span class="samp">/</span></samp>&rsquo; then either
<code>:ext:</code> or <code>:server:</code> is assumed.  For
example, if you have a local repository in
<samp><span class="file">/usr/local/cvsroot</span></samp>, you can use
<code>/usr/local/cvsroot</code> instead of
<code>:local:/usr/local/cvsroot</code>.  But if (under
Windows NT, for example) your local repository is
<samp><span class="file">c:\src\cvsroot</span></samp>, then you must specify the access
method, as in <code>:local:c:/src/cvsroot</code>.

<!-- This might appear to go in Repository storage, but -->
<!-- actually it is describing something which is quite -->
<!-- user-visible, when you do a "cvs co CVSROOT".  This -->
<!-- isn't necessary the perfect place for that, though. -->
   <p>The repository is split in two parts.  <samp><span class="file">$CVSROOT/CVSROOT</span></samp> contains
administrative files for <span class="sc">cvs</span>.  The other directories contain the actual
user-defined modules.

<ul class="menu">
<li><a accesskey="1" href="#Specifying-a-repository">Specifying a repository</a>:      Telling CVS where your repository is
<li><a accesskey="2" href="#Repository-storage">Repository storage</a>:           The structure of the repository
<li><a accesskey="3" href="#Working-directory-storage">Working directory storage</a>:    The structure of working directories
<li><a accesskey="4" href="#Intro-administrative-files">Intro administrative files</a>:   Defining modules
<li><a accesskey="5" href="#Multiple-repositories">Multiple repositories</a>:        Multiple repositories
<li><a accesskey="6" href="#Creating-a-repository">Creating a repository</a>:        Creating a repository
<li><a accesskey="7" href="#Backing-up">Backing up</a>:                   Backing up a repository
<li><a accesskey="8" href="#Moving-a-repository">Moving a repository</a>:          Moving a repository
<li><a accesskey="9" href="#Remote-repositories">Remote repositories</a>:          Accessing repositories on remote machines
<li><a href="#Read_002donly-access">Read-only access</a>:             Granting read-only access to the repository
<li><a href="#Server-temporary-directory">Server temporary directory</a>:   The server creates temporary directories
</ul>

<div class="node">
<a name="Specifying-a-repository"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Repository-storage">Repository storage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.1 Telling CVS where your repository is</h3>

<p>There are several ways to tell <span class="sc">cvs</span>
where to find the repository.  You can name the
repository on the command line explicitly, with the
<code>-d</code> (for "directory") option:

<pre class="example">     cvs -d /usr/local/cvsroot checkout yoyodyne/tc
</pre>
   <p><a name="index-g_t_002eprofile_002c-setting-CVSROOT-in-42"></a><a name="index-g_t_002ecshrc_002c-setting-CVSROOT-in-43"></a><a name="index-g_t_002etcshrc_002c-setting-CVSROOT-in-44"></a><a name="index-g_t_002ebashrc_002c-setting-CVSROOT-in-45"></a><a name="index-CVSROOT_002c-environment-variable-46"></a>        Or you can set the <code>$CVSROOT</code> environment
variable to an absolute path to the root of the
repository, <samp><span class="file">/usr/local/cvsroot</span></samp> in this example. 
To set <code>$CVSROOT</code>, <code>csh</code> and <code>tcsh</code>
users should have this line in their <samp><span class="file">.cshrc</span></samp> or
<samp><span class="file">.tcshrc</span></samp> files:

<pre class="example">     setenv CVSROOT /usr/local/cvsroot
</pre>
   <p class="noindent"><code>sh</code> and <code>bash</code> users should instead have these lines in their
<samp><span class="file">.profile</span></samp> or <samp><span class="file">.bashrc</span></samp>:

<pre class="example">     CVSROOT=/usr/local/cvsroot
     export CVSROOT
</pre>
   <p><a name="index-Root-file_002c-in-CVS-directory-47"></a><a name="index-CVS_002fRoot-file-48"></a>        A repository specified with <code>-d</code> will
override the <code>$CVSROOT</code> environment variable. 
Once you've checked a working copy out from the
repository, it will remember where its repository is
(the information is recorded in the
<samp><span class="file">CVS/Root</span></samp> file in the working copy).

   <p>The <code>-d</code> option and the <samp><span class="file">CVS/Root</span></samp> file both
override the <code>$CVSROOT</code> environment variable.  If
<code>-d</code> option differs from <samp><span class="file">CVS/Root</span></samp>, the
former is used.  Of course, for proper operation they
should be two ways of referring to the same repository.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Repository-storage"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Working-directory-storage">Working directory storage</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Specifying-a-repository">Specifying a repository</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.2 How data is stored in the repository</h3>

<p><a name="index-Repository_002c-how-data-is-stored-49"></a>
For most purposes it isn't important <em>how</em>
<span class="sc">cvs</span> stores information in the repository.  In
fact, the format has changed in the past, and is likely
to change in the future.  Since in almost all cases one
accesses the repository via <span class="sc">cvs</span> commands, such
changes need not be disruptive.

   <p>However, in some cases it may be necessary to
understand how <span class="sc">cvs</span> stores data in the repository,
for example you might need to track down <span class="sc">cvs</span> locks
(see <a href="#Concurrency">Concurrency</a>) or you might need to deal with
the file permissions appropriate for the repository.

<ul class="menu">
<li><a accesskey="1" href="#Repository-files">Repository files</a>:             What files are stored in the repository
<li><a accesskey="2" href="#File-permissions">File permissions</a>:             File permissions
<li><a accesskey="3" href="#Windows-permissions">Windows permissions</a>:          Issues specific to Windows
<li><a accesskey="4" href="#Attic">Attic</a>:                        Some files are stored in the Attic
<li><a accesskey="5" href="#CVS-in-repository">CVS in repository</a>:            Additional information in CVS directory
<li><a accesskey="6" href="#Locks">Locks</a>:                        CVS locks control concurrent accesses
<li><a accesskey="7" href="#CVSROOT-storage">CVSROOT storage</a>:              A few things about CVSROOT are different
</ul>

<div class="node">
<a name="Repository-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#File-permissions">File permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository-storage">Repository storage</a>

</div>

<h4 class="subsection">2.2.1 Where files are stored within the repository</h4>

<!-- @cindex Filenames, legal -->
<!-- @cindex Legal filenames -->
<!-- Somewhere we need to say something about legitimate -->
<!-- characters in filenames in working directory and -->
<!-- repository.  Not "/" (not even on non-unix).  And -->
<!-- here is a specific set of issues: -->
<!-- Files starting with a - are handled inconsistently. They can not -->
<!-- be added to a repository with an add command, because it they are -->
<!-- interpreted as a switch. They can appear in a repository if they are -->
<!-- part of a tree that is imported. They can not be removed from the tree -->
<!-- once they are there. -->
<!-- Note that "-" *is* supported (as a -->
<!-- consequence of using GNU getopt).  Should document -->
<!-- this somewhere ("Common options"?).  The other usual technique, -->
<!-- "./-foo", isn't as effective, at least for "cvs add" -->
<!-- which doesn't support pathnames containing "/". -->
<p>The overall structure of the repository is a directory
tree corresponding to the directories in the working
directory.  For example, supposing the repository is in

<pre class="example">     /usr/local/cvsroot
</pre>
   <p class="noindent">here is a possible directory tree (showing only the
directories):

<pre class="example">     <tt>/usr</tt>
      |
      +--<tt>local</tt>
      |   |
      |   +--<tt>cvsroot</tt>
      |   |    |
      |   |    +--<tt>CVSROOT</tt>
               |      (administrative files)
               |
               +--<tt>gnu</tt>
               |   |
               |   +--<tt>diff</tt>
               |   |   (source code to <span class="sc">gnu</span> diff)
               |   |
               |   +--<tt>rcs</tt>
               |   |   (source code to <span class="sc">rcs</span>)
               |   |
               |   +--<tt>cvs</tt>
               |       (source code to <span class="sc">cvs</span>)
               |
               +--<tt>yoyodyne</tt>
                   |
                   +--<tt>tc</tt>
                   |    |
                   |    +--<tt>man</tt>
                   |    |
                   |    +--<tt>testing</tt>
                   |
                   +--(other Yoyodyne software)
</pre>
   <p>With the directories are <dfn>history files</dfn> for each file
under version control.  The name of the history file is
the name of the corresponding file with &lsquo;<samp><span class="samp">,v</span></samp>&rsquo;
appended to the end.  Here is what the repository for
the <samp><span class="file">yoyodyne/tc</span></samp> directory might look like:
<!-- FIXME: Should also mention CVS (CVSREP) -->
<!-- FIXME? Should we introduce Attic with an xref to -->
<!-- Attic?  Not sure whether that is a good idea or not. -->
<pre class="example">       <code>$CVSROOT</code>
         |
         +--<tt>yoyodyne</tt>
         |   |
         |   +--<tt>tc</tt>
         |   |   |
                 +--<tt>Makefile,v</tt>
                 +--<tt>backend.c,v</tt>
                 +--<tt>driver.c,v</tt>
                 +--<tt>frontend.c,v</tt>
                 +--<tt>parser.c,v</tt>
                 +--<tt>man</tt>
                 |    |
                 |    +--<tt>tc.1,v</tt>
                 |
                 +--<tt>testing</tt>
                      |
                      +--<tt>testpgm.t,v</tt>
                      +--<tt>test2.t,v</tt>
</pre>
   <p><a name="index-History-files-50"></a><a name="index-RCS-history-files-51"></a><!-- The first sentence, about what history files -->
<!-- contain, is kind of redundant with our intro to what the -->
<!-- repository does in node Repository.... -->
The history files contain, among other things, enough
information to recreate any revision of the file, a log
of all commit messages and the user-name of the person
who committed the revision.  The history files are
known as <dfn>RCS files</dfn>, because the first program to
store files in that format was a version control system
known as <span class="sc">rcs</span>.  For a full
description of the file format, see the <code>man</code> page
<cite>rcsfile(5)</cite>, distributed with <span class="sc">rcs</span>, or the
file <samp><span class="file">doc/RCSFILES</span></samp> in the <span class="sc">cvs</span> source
distribution.  This
file format has become very common&mdash;many systems other
than <span class="sc">cvs</span> or <span class="sc">rcs</span> can at least import history
files in this format. 
<!-- FIXME: Think about including documentation for this -->
<!-- rather than citing it?  In the long run, getting -->
<!-- this to be a standard (not sure if we can cope with -->
<!-- a standards process as formal as IEEE/ANSI/ISO/etc, -->
<!-- though...) is the way to go, so maybe citing is -->
<!-- better. -->

   <p>The <span class="sc">rcs</span> files used in <span class="sc">cvs</span> differ in a few
ways from the standard format.  The biggest difference
is magic branches; for more information see <a href="#Magic-branch-numbers">Magic branch numbers</a>.  Also in <span class="sc">cvs</span> the valid tag names
are a subset of what <span class="sc">rcs</span> accepts; for <span class="sc">cvs</span>'s
rules see <a href="#Tags">Tags</a>.

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="File-permissions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Windows-permissions">Windows permissions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Repository-files">Repository files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository-storage">Repository storage</a>

</div>

<h4 class="subsection">2.2.2 File permissions</h4>

<!--  Move this to @node Creating a repository or similar -->
<p><a name="index-Security_002c-file-permissions-in-repository-52"></a><a name="index-File-permissions_002c-general-53"></a><a name="index-Permissions_002c-general-54"></a><!-- FIXME: we need to somehow reflect "permissions in -->
<!-- repository" versus "permissions in working -->
<!-- directory" in the index entries. -->
<a name="index-Group_002c-UNIX-file-permissions_002c-in-repository-55"></a><a name="index-Read_002donly-files_002c-in-repository-56"></a>All &lsquo;<samp><span class="samp">,v</span></samp>&rsquo; files are created read-only, and you
should not change the permission of those files.  The
directories inside the repository should be writable by
the persons that have permission to modify the files in
each directory.  This normally means that you must
create a UNIX group (see group(5)) consisting of the
persons that are to edit the files in a project, and
set up the repository so that it is that group that
owns the directory. 
(On some systems, you also need to set the set-group-ID-on-execution bit
on the repository directories (see chmod(1)) so that newly-created files
and directories get the group-ID of the parent directory rather than
that of the current process.)

<!-- See also comment in commitinfo node regarding cases -->
<!-- which are really awkward with unix groups. -->
   <p>This means that you can only control access to files on
a per-directory basis.

   <p>Note that users must also have write access to check
out files, because <span class="sc">cvs</span> needs to create lock files
(see <a href="#Concurrency">Concurrency</a>).  You can use LockDir in CVSROOT/config
to put the lock files somewhere other than in the repository
if you want to allow read-only access to some directories
(see <a href="#config">config</a>).

<!-- CVS seems to use CVSUMASK in picking permissions for -->
<!-- val-tags, but maybe we should say more about this. -->
<!-- Like val-tags gets created by someone who doesn't -->
<!-- have CVSUMASK set right? -->
   <p><a name="index-CVSROOT_002fval_002dtags-file_002c-and-read_002donly-access-to-projects-57"></a><a name="index-val_002dtags-file_002c-and-read_002donly-access-to-projects-58"></a>Also note that users must have write access to the
<samp><span class="file">CVSROOT/val-tags</span></samp> file.  <span class="sc">cvs</span> uses it to keep
track of what tags are valid tag names (it is sometimes
updated when tags are used, as well as when they are
created).

   <p>Each <span class="sc">rcs</span> file will be owned by the user who last
checked it in.  This has little significance; what
really matters is who owns the directories.

   <p><a name="index-CVSUMASK_002c-environment-variable-59"></a><a name="index-Umask_002c-for-repository-files-60"></a><span class="sc">cvs</span> tries to set up reasonable file permissions
for new directories that are added inside the tree, but
you must fix the permissions manually when a new
directory should have different permissions than its
parent directory.  If you set the <code>CVSUMASK</code>
environment variable that will control the file
permissions which <span class="sc">cvs</span> uses in creating directories
and/or files in the repository.  <code>CVSUMASK</code> does
not affect the file permissions in the working
directory; such files have the permissions which are
typical for newly created files, except that sometimes
<span class="sc">cvs</span> creates them read-only (see the sections on
watches, <a href="#Setting-a-watch">Setting a watch</a>; -r, <a href="#Global-options">Global options</a>; or <code>CVSREAD</code>, <a href="#Environment-variables">Environment variables</a>). 
<!-- FIXME: Need more discussion of which -->
<!-- group should own the file in the repository. -->
<!-- Include a somewhat detailed example of the usual -->
<!-- case where CVSUMASK is 007, the developers are all -->
<!-- in a group, and that group owns stuff in the -->
<!-- repository.  Need to talk about group ownership of -->
<!-- newly-created directories/files (on some unices, -->
<!-- such as SunOS4, setting the setgid bit on the -->
<!-- directories will make files inherit the directory's -->
<!-- group.  On other unices, your mileage may vary.  I -->
<!-- can't remember what POSIX says about this, if -->
<!-- anything). -->

   <p>Note that using the client/server <span class="sc">cvs</span>
(see <a href="#Remote-repositories">Remote repositories</a>), there is no good way to
set <code>CVSUMASK</code>; the setting on the client machine
has no effect.  If you are connecting with <code>rsh</code>, you
can set <code>CVSUMASK</code> in <samp><span class="file">.bashrc</span></samp> or <samp><span class="file">.cshrc</span></samp>, as
described in the documentation for your operating
system.  This behavior might change in future versions
of <span class="sc">cvs</span>; do not rely on the setting of
<code>CVSUMASK</code> on the client having no effect. 
<!-- FIXME: need to explain what a umask is or cite -->
<!-- someplace which does. -->
<!-- There is also a larger (largely separate) issue -->
<!-- about the meaning of CVSUMASK in a non-unix context. -->
<!-- For example, whether there is -->
<!-- an equivalent which fits better into other -->
<!-- protection schemes like POSIX.6, VMS, &c. -->
<!-- FIXME: Need one place which discusses this -->
<!-- read-only files thing.  Why would one use -r or -->
<!-- CVSREAD?  Why would one use watches?  How do they -->
<!-- interact? -->
<!-- FIXME: We need to state -->
<!-- whether using CVSUMASK removes the need for manually -->
<!-- fixing permissions (in fact, if we are going to mention -->
<!-- manually fixing permission, we better document a lot -->
<!-- better just what we mean by "fix"). -->

   <p>Using pserver, you will generally need stricter
permissions on the <span class="sc">cvsroot</span> directory and
directories above it in the tree; see <a href="#Password-authentication-security">Password authentication security</a>.

   <p><a name="index-Setuid-61"></a><a name="index-Setgid-62"></a><a name="index-Security_002c-setuid-63"></a><a name="index-Installed-images-_0028VMS_0029-64"></a>Some operating systems have features which allow a
particular program to run with the ability to perform
operations which the caller of the program could not. 
For example, the set user ID (setuid) or set group ID
(setgid) features of unix or the installed image
feature of VMS.  <span class="sc">cvs</span> was not written to use such
features and therefore attempting to install <span class="sc">cvs</span> in
this fashion will provide protection against only
accidental lapses; anyone who is trying to circumvent
the measure will be able to do so, and depending on how
you have set it up may gain access to more than just
<span class="sc">cvs</span>.  You may wish to instead consider pserver.  It
shares some of the same attributes, in terms of
possibly providing a false sense of security or opening
security holes wider than the ones you are trying to
fix, so read the documentation on pserver security
carefully if you are considering this option
(<a href="#Password-authentication-security">Password authentication security</a>).

<div class="node">
<a name="Windows-permissions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Attic">Attic</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-permissions">File permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository-storage">Repository storage</a>

</div>

<h4 class="subsection">2.2.3 File Permission issues specific to Windows</h4>

<p><a name="index-Windows_002c-and-permissions-65"></a><a name="index-File-permissions_002c-Windows_002dspecific-66"></a><a name="index-Permissions_002c-Windows_002dspecific-67"></a>
Some file permission issues are specific to Windows
operating systems (Windows 95, Windows NT, and
presumably future operating systems in this family. 
Some of the following might apply to OS/2 but I'm not
sure).

   <p>If you are using local <span class="sc">cvs</span> and the repository is on a
networked file system which is served by the Samba SMB
server, some people have reported problems with
permissions.  Enabling WRITE=YES in the samba
configuration is said to fix/workaround it. 
Disclaimer: I haven't investigated enough to know the
implications of enabling that option, nor do I know
whether there is something which <span class="sc">cvs</span> could be doing
differently in order to avoid the problem.  If you find
something out, please let us know as described in
<a href="#BUGS">BUGS</a>.

<div class="node">
<a name="Attic"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#CVS-in-repository">CVS in repository</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Windows-permissions">Windows permissions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository-storage">Repository storage</a>

</div>

<h4 class="subsection">2.2.4 The attic</h4>

<p><a name="index-Attic-68"></a>
You will notice that sometimes <span class="sc">cvs</span> stores an
<span class="sc">rcs</span> file in the <code>Attic</code>.  For example, if the
<span class="sc">cvsroot</span> is <samp><span class="file">/usr/local/cvsroot</span></samp> and we are
talking about the file <samp><span class="file">backend.c</span></samp> in the
directory <samp><span class="file">yoyodyne/tc</span></samp>, then the file normally
would be in

<pre class="example">     /usr/local/cvsroot/yoyodyne/tc/backend.c,v
</pre>
   <p class="noindent">but if it goes in the attic, it would be in

<pre class="example">     /usr/local/cvsroot/yoyodyne/tc/Attic/backend.c,v
</pre>
   <p class="noindent"><a name="index-Dead-state-69"></a>instead.  It should not matter from a user point of
view whether a file is in the attic; <span class="sc">cvs</span> keeps
track of this and looks in the attic when it needs to. 
But in case you want to know, the rule is that the RCS
file is stored in the attic if and only if the head
revision on the trunk has state <code>dead</code>.  A
<code>dead</code> state means that file has been removed, or
never added, for that revision.  For example, if you
add a file on a branch, it will have a trunk revision
in <code>dead</code> state, and a branch revision in a
non-<code>dead</code> state. 
<!-- Probably should have some more concrete examples -->
<!-- here, or somewhere (not sure exactly how we should -->
<!-- arrange the discussion of the dead state, versus -->
<!-- discussion of the attic). -->

<div class="node">
<a name="CVS-in-repository"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Locks">Locks</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Attic">Attic</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository-storage">Repository storage</a>

</div>

<h4 class="subsection">2.2.5 The CVS directory in the repository</h4>

<p><a name="index-CVS-directory_002c-in-repository-70"></a>
The <samp><span class="file">CVS</span></samp> directory in each repository directory
contains information such as file attributes (in a file
called <samp><span class="file">CVS/fileattr</span></samp>.  In the
future additional files may be added to this directory,
so implementations should silently ignore additional
files.

   <p>This behavior is implemented only by <span class="sc">cvs</span> 1.7 and
later; for details see <a href="#Watches-Compatibility">Watches Compatibility</a>.

   <p>The format of the <samp><span class="file">fileattr</span></samp> file is a series of entries
of the following form (where &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo;
means the text between the braces can be repeated zero
or more times):

   <p><var>ent-type</var> <var>filename</var> &lt;tab&gt; <var>attrname</var> = <var>attrval</var>
  {; <var>attrname</var> = <var>attrval</var>} &lt;linefeed&gt;

   <p><var>ent-type</var> is &lsquo;<samp><span class="samp">F</span></samp>&rsquo; for a file, in which case the entry specifies the
attributes for that file.

   <p><var>ent-type</var> is &lsquo;<samp><span class="samp">D</span></samp>&rsquo;,
and <var>filename</var> empty, to specify default attributes
to be used for newly added files.

   <p>Other <var>ent-type</var> are reserved for future expansion.  <span class="sc">cvs</span> 1.9 and older
will delete them any time it writes file attributes. 
<span class="sc">cvs</span> 1.10 and later will preserve them.

   <p>Note that the order of the lines is not significant;
a program writing the fileattr file may
rearrange them at its convenience.

   <p>There is currently no way of quoting tabs or line feeds in the
filename, &lsquo;<samp><span class="samp">=</span></samp>&rsquo; in <var>attrname</var>,
&lsquo;<samp><span class="samp">;</span></samp>&rsquo; in <var>attrval</var>, etc.  Note: some implementations also
don't handle a NUL character in any of the fields, but
implementations are encouraged to allow it.

   <p>By convention, <var>attrname</var> starting with &lsquo;<samp><span class="samp">_</span></samp>&rsquo; is for an attribute given
special meaning by <span class="sc">cvs</span>; other <var>attrname</var>s are for user-defined attributes
(or will be, once implementations start supporting user-defined attributes).

   <p>Built-in attributes:

     <dl>
<dt><code>_watched</code><dd>Present means the file is watched and should be checked out
read-only.

     <br><dt><code>_watchers</code><dd>Users with watches for this file.  Value is
<var>watcher</var> &gt; <var>type</var> { , <var>watcher</var> &gt; <var>type</var> }
where <var>watcher</var> is a username, and <var>type</var>
is zero or more of edit,unedit,commit separated by
&lsquo;<samp><span class="samp">+</span></samp>&rsquo; (that is, nothing if none; there is no "none" or "all" keyword).

     <br><dt><code>_editors</code><dd>Users editing this file.  Value is
<var>editor</var> &gt; <var>val</var> { , <var>editor</var> &gt; <var>val</var> }
where <var>editor</var> is a username, and <var>val</var> is
<var>time</var>+<var>hostname</var>+<var>pathname</var>, where
<var>time</var> is when the <code>cvs edit</code> command (or
equivalent) happened,
and <var>hostname</var> and <var>pathname</var> are for the working directory. 
</dl>

   <p>Example:

<!-- FIXME: sanity.sh should contain a similar test case -->
<!-- so we can compare this example from something from -->
<!-- Real Life(TM).  See cvsclient.texi (under Notify) for more -->
<!-- discussion of the date format of _editors. -->
<pre class="example">     Ffile1 _watched=;_watchers=joe&gt;edit,mary&gt;commit
     Ffile2 _watched=;_editors=sue&gt;8 Jan 1975+workstn1+/home/sue/cvs
     D _watched=
</pre>
   <p class="noindent">means that the file <samp><span class="file">file1</span></samp> should be checked out
read-only.  Furthermore, joe is watching for edits and
mary is watching for commits.  The file <samp><span class="file">file2</span></samp>
should be checked out read-only; sue started editing it
on 8 Jan 1975 in the directory <samp><span class="file">/home/sue/cvs</span></samp> on
the machine <code>workstn1</code>.  Future files which are
added should be checked out read-only.  To represent
this example here, we have shown a space after
&lsquo;<samp><span class="samp">D</span></samp>&rsquo;, &lsquo;<samp><span class="samp">Ffile1</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">Ffile2</span></samp>&rsquo;, but in fact
there must be a single tab character there and no spaces.

<div class="node">
<a name="Locks"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#CVSROOT-storage">CVSROOT storage</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#CVS-in-repository">CVS in repository</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository-storage">Repository storage</a>

</div>

<h4 class="subsection">2.2.6 CVS locks in the repository</h4>

<p><a name="index-g_t_0023cvs_002erfl_002c-technical-details-71"></a><a name="index-g_t_0023cvs_002epfl_002c-technical-details-72"></a><a name="index-g_t_0023cvs_002ewfl_002c-technical-details-73"></a><a name="index-g_t_0023cvs_002elock_002c-technical-details-74"></a><a name="index-Locks_002c-cvs_002c-technical-details-75"></a>For an introduction to <span class="sc">cvs</span> locks focusing on
user-visible behavior, see <a href="#Concurrency">Concurrency</a>.  The
following section is aimed at people who are writing
tools which want to access a <span class="sc">cvs</span> repository without
interfering with other tools accessing the same
repository.  If you find yourself confused by concepts
described here, like <dfn>read lock</dfn>, <dfn>write lock</dfn>,
and <dfn>deadlock</dfn>, you might consult the literature on
operating systems or databases.

   <p><a name="index-g_t_0023cvs_002etfl-76"></a>Any file in the repository with a name starting
with <samp><span class="file">#cvs.rfl.</span></samp> is a read lock.  Any file in
the repository with a name starting with
<samp><span class="file">#cvs.pfl</span></samp> is a promotable read lock.  Any file in
the repository with a name starting with
<samp><span class="file">#cvs.wfl</span></samp> is a write lock.  Old versions of <span class="sc">cvs</span>
(before <span class="sc">cvs</span> 1.5) also created files with names starting
with <samp><span class="file">#cvs.tfl</span></samp>, but they are not discussed here. 
The directory <samp><span class="file">#cvs.lock</span></samp> serves as a master
lock.  That is, one must obtain this lock first before
creating any of the other locks.

   <p>To obtain a read lock, first create the <samp><span class="file">#cvs.lock</span></samp>
directory.  This operation must be atomic (which should
be true for creating a directory under most operating
systems).  If it fails because the directory already
existed, wait for a while and try again.  After
obtaining the <samp><span class="file">#cvs.lock</span></samp> lock, create a file
whose name is <samp><span class="file">#cvs.rfl.</span></samp> followed by information
of your choice (for example, hostname and process
identification number).  Then remove the
<samp><span class="file">#cvs.lock</span></samp> directory to release the master lock. 
Then proceed with reading the repository.  When you are
done, remove the <samp><span class="file">#cvs.rfl</span></samp> file to release the
read lock.

   <p>Promotable read locks are a concept you may not find in other literature on
concurrency.  They are used to allow a two (or more) pass process to only lock
a file for read on the first (read) pass(es), then upgrade its read locks to
write locks if necessary for a final pass, still assured that the files have
not changed since they were first read.  <span class="sc">cvs</span> uses promotable read locks,
for example, to prevent commit and tag verification passes from interfering
with other reading processes.  It can then lock only a single directory at a
time for write during the write pass.

   <p>To obtain a promotable read lock, first create the <samp><span class="file">#cvs.lock</span></samp> directory,
as with a non-promotable read lock.  Then check
that there are no files that start with
<samp><span class="file">#cvs.pfl</span></samp>.  If there are, remove the master <samp><span class="file">#cvs.lock</span></samp> directory,
wait awhile (CVS waits 30 seconds between lock attempts), and try again.  If
there are no other promotable locks, go ahead and create a file whose name is
<samp><span class="file">#cvs.pfl</span></samp> followed by information of your choice (for example, CVS uses
its hostname and the process identification number of the CVS server process
creating the lock).  If versions of <span class="sc">cvs</span> older than version 1.12.4 access
your repository directly (not via a <span class="sc">cvs</span> server of version 1.12.4 or
later), then you should also create a read lock since older versions of CVS
will ignore the promotable lock when attempting to create their own write lock. 
Then remove the master <samp><span class="file">#cvs.lock</span></samp> directory in order to allow other
processes to obtain read locks.

   <p>To obtain a write lock, first create the
<samp><span class="file">#cvs.lock</span></samp> directory, as with read locks.  Then
check that there are no files whose names start with
<samp><span class="file">#cvs.rfl.</span></samp> and no files whose names start with <samp><span class="file">#cvs.pfl</span></samp> that are
not owned by the process attempting to get the write lock.  If either exist,
remove <samp><span class="file">#cvs.lock</span></samp>, wait for a while, and try again.  If
there are no readers or promotable locks from other processes, then create a
file whose name is <samp><span class="file">#cvs.wfl</span></samp> followed by information of your choice
(again, CVS uses the hostname and server process identification
number).  Remove your <samp><span class="file">#cvs.pfl</span></samp> file if present.  Hang on to the
<samp><span class="file">#cvs.lock</span></samp> lock.  Proceed
with writing the repository.  When you are done, first
remove the <samp><span class="file">#cvs.wfl</span></samp> file and then the
<samp><span class="file">#cvs.lock</span></samp> directory. Note that unlike the
<samp><span class="file">#cvs.rfl</span></samp> file, the <samp><span class="file">#cvs.wfl</span></samp> file is just
informational; it has no effect on the locking operation
beyond what is provided by holding on to the
<samp><span class="file">#cvs.lock</span></samp> lock itself.

   <p>Note that each lock (write lock or read lock) only locks
a single directory in the repository, including
<samp><span class="file">Attic</span></samp> and <samp><span class="file">CVS</span></samp> but not including
subdirectories which represent other directories under
version control.  To lock an entire tree, you need to
lock each directory (note that if you fail to obtain
any lock you need, you must release the whole tree
before waiting and trying again, to avoid deadlocks).

   <p>Note also that <span class="sc">cvs</span> expects write locks to control
access to individual <samp><span class="file">foo,v</span></samp> files.  <span class="sc">rcs</span> has
a scheme where the <samp><span class="file">,foo,</span></samp> file serves as a lock,
but <span class="sc">cvs</span> does not implement it and so taking out a
<span class="sc">cvs</span> write lock is recommended.  See the comments at
rcs_internal_lockfile in the <span class="sc">cvs</span> source code for
further discussion/rationale.

<div class="node">
<a name="CVSROOT-storage"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Locks">Locks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository-storage">Repository storage</a>

</div>

<h4 class="subsection">2.2.7 How files are stored in the CVSROOT directory</h4>

<p><a name="index-CVSROOT_002c-storage-of-files-77"></a>
The <samp><span class="file">$CVSROOT/CVSROOT</span></samp> directory contains the
various administrative files.  In some ways this
directory is just like any other directory in the
repository; it contains <span class="sc">rcs</span> files whose names end
in &lsquo;<samp><span class="samp">,v</span></samp>&rsquo;, and many of the <span class="sc">cvs</span> commands operate
on it the same way.  However, there are a few
differences.

   <p>For each administrative file, in addition to the
<span class="sc">rcs</span> file, there is also a checked out copy of the
file.  For example, there is an <span class="sc">rcs</span> file
<samp><span class="file">loginfo,v</span></samp> and a file <samp><span class="file">loginfo</span></samp> which
contains the latest revision contained in
<samp><span class="file">loginfo,v</span></samp>.  When you check in an administrative
file, <span class="sc">cvs</span> should print

<pre class="example">     cvs commit: Rebuilding administrative file database
</pre>
   <p class="noindent">and update the checked out copy in
<samp><span class="file">$CVSROOT/CVSROOT</span></samp>.  If it does not, there is
something wrong (see <a href="#BUGS">BUGS</a>).  To add your own files
to the files to be updated in this fashion, you can add
them to the <samp><span class="file">checkoutlist</span></samp> administrative file
(see <a href="#checkoutlist">checkoutlist</a>).

   <p><a name="index-modules_002edb-78"></a><a name="index-modules_002epag-79"></a><a name="index-modules_002edir-80"></a>By default, the <samp><span class="file">modules</span></samp> file behaves as
described above.  If the modules file is very large,
storing it as a flat text file may make looking up
modules slow (I'm not sure whether this is as much of a
concern now as when <span class="sc">cvs</span> first evolved this
feature; I haven't seen benchmarks).  Therefore, by
making appropriate edits to the <span class="sc">cvs</span> source code
one can store the modules file in a database which
implements the <code>ndbm</code> interface, such as Berkeley
db or GDBM.  If this option is in use, then the modules
database will be stored in the files <samp><span class="file">modules.db</span></samp>,
<samp><span class="file">modules.pag</span></samp>, and/or <samp><span class="file">modules.dir</span></samp>. 
<!-- I think fileattr also will use the database stuff. -->
<!-- Anything else? -->

   <p>For information on the meaning of the various
administrative files, see <a href="#Administrative-files">Administrative files</a>.

<div class="node">
<a name="Working-directory-storage"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Intro-administrative-files">Intro administrative files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Repository-storage">Repository storage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.3 How data is stored in the working directory</h3>

<!-- FIXME: Somewhere we should discuss timestamps (test -->
<!-- case "stamps" in sanity.sh).  But not here.  Maybe -->
<!-- in some kind of "working directory" chapter which -->
<!-- would encompass the "Builds" one?  But I'm not sure -->
<!-- whether that is a good organization (is it based on -->
<!-- what the user wants to do?). -->
<p><a name="index-CVS-directory_002c-in-working-directory-81"></a>While we are discussing <span class="sc">cvs</span> internals which may
become visible from time to time, we might as well talk
about what <span class="sc">cvs</span> puts in the <samp><span class="file">CVS</span></samp> directories
in the working directories.  As with the repository,
<span class="sc">cvs</span> handles this information and one can usually
access it via <span class="sc">cvs</span> commands.  But in some cases it
may be useful to look at it, and other programs, such
as the <code>jCVS</code> graphical user interface or the
<code>VC</code> package for emacs, may need to look at it. 
Such programs should follow the recommendations in this
section if they hope to be able to work with other
programs which use those files, including future
versions of the programs just mentioned and the
command-line <span class="sc">cvs</span> client.

   <p>The <samp><span class="file">CVS</span></samp> directory contains several files. 
Programs which are reading this directory should
silently ignore files which are in the directory but
which are not documented here, to allow for future
expansion.

   <p>The files are stored according to the text file
convention for the system in question.  This means that
working directories are not portable between systems
with differing conventions for storing text files. 
This is intentional, on the theory that the files being
managed by <span class="sc">cvs</span> probably will not be portable between
such systems either.

     <dl>
<dt><samp><span class="file">Root</span></samp><dd>This file contains the current <span class="sc">cvs</span> root, as
described in <a href="#Specifying-a-repository">Specifying a repository</a>.

     <p><a name="index-Repository-file_002c-in-CVS-directory-82"></a><a name="index-CVS_002fRepository-file-83"></a><br><dt><samp><span class="file">Repository</span></samp><dd>This file contains the directory within the repository
which the current directory corresponds with.  It can
be either an absolute pathname or a relative pathname;
<span class="sc">cvs</span> has had the ability to read either format
since at least version 1.3 or so.  The relative
pathname is relative to the root, and is the more
sensible approach, but the absolute pathname is quite
common and implementations should accept either.  For
example, after the command

     <pre class="example">          cvs -d :local:/usr/local/cvsroot checkout yoyodyne/tc
</pre>
     <p class="noindent"><samp><span class="file">Root</span></samp> will contain

     <pre class="example">          :local:/usr/local/cvsroot
</pre>
     <p class="noindent">and <samp><span class="file">Repository</span></samp> will contain either

     <pre class="example">          /usr/local/cvsroot/yoyodyne/tc
</pre>
     <p class="noindent">or

     <pre class="example">          yoyodyne/tc
</pre>
     <p>If the particular working directory does not correspond
to a directory in the repository, then <samp><span class="file">Repository</span></samp>
should contain <samp><span class="file">CVSROOT/Emptydir</span></samp>. 
<a name="index-Emptydir_002c-in-CVSROOT-directory-84"></a><a name="index-CVSROOT_002fEmptydir-directory-85"></a>
<a name="index-Entries-file_002c-in-CVS-directory-86"></a><a name="index-CVS_002fEntries-file-87"></a><br><dt><samp><span class="file">Entries</span></samp><dd>This file lists the files and directories in the
working directory. 
The first character of each line indicates what sort of
line it is.  If the character is unrecognized, programs
reading the file should silently skip that line, to
allow for future expansion.

     <p>If the first character is &lsquo;<samp><span class="samp">/</span></samp>&rsquo;, then the format is:

     <pre class="example">          /<var>name</var>/<var>revision</var>/<var>timestamp</var>[+<var>conflict</var>]/<var>options</var>/<var>tagdate</var>
</pre>
     <p class="noindent">where &lsquo;<samp><span class="samp">[</span></samp>&rsquo; and &lsquo;<samp><span class="samp">]</span></samp>&rsquo; are not part of the entry,
but instead indicate that the &lsquo;<samp><span class="samp">+</span></samp>&rsquo; and conflict
marker are optional.  <var>name</var> is the name of the
file within the directory.  <var>revision</var> is the
revision that the file in the working derives from, or
&lsquo;<samp><span class="samp">0</span></samp>&rsquo; for an added file, or &lsquo;<samp><span class="samp">-</span></samp>&rsquo; followed by a
revision for a removed file.  <var>timestamp</var> is the
timestamp of the file at the time that <span class="sc">cvs</span> created
it; if the timestamp differs with the actual
modification time of the file it means the file has
been modified.  It is stored in
the format used by the ISO C asctime() function (for
example, &lsquo;<samp><span class="samp">Sun Apr  7 01:29:26 1996</span></samp>&rsquo;).  One may
write a string which is not in that format, for
example, &lsquo;<samp><span class="samp">Result of merge</span></samp>&rsquo;, to indicate that the
file should always be considered to be modified.  This
is not a special case; to see whether a file is
modified a program should take the timestamp of the file
and simply do a string compare with <var>timestamp</var>. 
If there was a conflict, <var>conflict</var> can be set to
the modification time of the file after the file has been
written with conflict markers (see <a href="#Conflicts-example">Conflicts example</a>). 
Thus if <var>conflict</var> is subsequently the same as the actual
modification time of the file it means that the user
has obviously not resolved the conflict.  <var>options</var>
contains sticky options (for example &lsquo;<samp><span class="samp">-kb</span></samp>&rsquo; for a
binary file).  <var>tagdate</var> contains &lsquo;<samp><span class="samp">T</span></samp>&rsquo; followed
by a tag name, or &lsquo;<samp><span class="samp">D</span></samp>&rsquo; for a date, followed by a
sticky tag or date.  Note that if <var>timestamp</var>
contains a pair of timestamps separated by a space,
rather than a single timestamp, you are dealing with a
version of <span class="sc">cvs</span> earlier than <span class="sc">cvs</span> 1.5 (not
documented here).

     <p>The timezone on the timestamp in CVS/Entries (local or
universal) should be the same as the operating system
stores for the timestamp of the file itself.  For
example, on Unix the file's timestamp is in universal
time (UT), so the timestamp in CVS/Entries should be
too.  On <span class="sc">vms</span>, the file's timestamp is in local
time, so <span class="sc">cvs</span> on <span class="sc">vms</span> should use local time. 
This rule is so that files do not appear to be modified
merely because the timezone changed (for example, to or
from summer time). 
<!-- See comments and calls to gmtime() and friends in -->
<!-- src/vers_ts.c (function time_stamp). -->

     <p>If the first character of a line in <samp><span class="file">Entries</span></samp> is
&lsquo;<samp><span class="samp">D</span></samp>&rsquo;, then it indicates a subdirectory.  &lsquo;<samp><span class="samp">D</span></samp>&rsquo;
on a line all by itself indicates that the program
which wrote the <samp><span class="file">Entries</span></samp> file does record
subdirectories (therefore, if there is such a line and
no other lines beginning with &lsquo;<samp><span class="samp">D</span></samp>&rsquo;, one knows there
are no subdirectories).  Otherwise, the line looks
like:

     <pre class="example">          D/<var>name</var>/<var>filler1</var>/<var>filler2</var>/<var>filler3</var>/<var>filler4</var>
</pre>
     <p class="noindent">where <var>name</var> is the name of the subdirectory, and
all the <var>filler</var> fields should be silently ignored,
for future expansion.  Programs which modify
<code>Entries</code> files should preserve these fields.

     <p>The lines in the <samp><span class="file">Entries</span></samp> file can be in any order.

     <p><a name="index-Entries_002eLog-file_002c-in-CVS-directory-88"></a><a name="index-CVS_002fEntries_002eLog-file-89"></a><br><dt><samp><span class="file">Entries.Log</span></samp><dd>This file does not record any information beyond that
in <samp><span class="file">Entries</span></samp>, but it does provide a way to update
the information without having to rewrite the entire
<samp><span class="file">Entries</span></samp> file, including the ability to preserve
the information even if the program writing
<samp><span class="file">Entries</span></samp> and <samp><span class="file">Entries.Log</span></samp> abruptly aborts. 
Programs which are reading the <samp><span class="file">Entries</span></samp> file
should also check for <samp><span class="file">Entries.Log</span></samp>.  If the latter
exists, they should read <samp><span class="file">Entries</span></samp> and then apply
the changes mentioned in <samp><span class="file">Entries.Log</span></samp>.  After
applying the changes, the recommended practice is to
rewrite <samp><span class="file">Entries</span></samp> and then delete <samp><span class="file">Entries.Log</span></samp>. 
The format of a line in <samp><span class="file">Entries.Log</span></samp> is a single
character command followed by a space followed by a
line in the format specified for a line in
<samp><span class="file">Entries</span></samp>.  The single character command is
&lsquo;<samp><span class="samp">A</span></samp>&rsquo; to indicate that the entry is being added,
&lsquo;<samp><span class="samp">R</span></samp>&rsquo; to indicate that the entry is being removed,
or any other character to indicate that the entire line
in <samp><span class="file">Entries.Log</span></samp> should be silently ignored (for
future expansion).  If the second character of the line
in <samp><span class="file">Entries.Log</span></samp> is not a space, then it was
written by an older version of <span class="sc">cvs</span> (not documented
here).

     <p>Programs which are writing rather than reading can
safely ignore <samp><span class="file">Entries.Log</span></samp> if they so choose.

     <p><a name="index-Entries_002eBackup-file_002c-in-CVS-directory-90"></a><a name="index-CVS_002fEntries_002eBackup-file-91"></a><br><dt><samp><span class="file">Entries.Backup</span></samp><dd>This is a temporary file.  Recommended usage is to
write a new entries file to <samp><span class="file">Entries.Backup</span></samp>, and
then to rename it (atomically, where possible) to <samp><span class="file">Entries</span></samp>.

     <p><a name="index-Entries_002eStatic-file_002c-in-CVS-directory-92"></a><a name="index-CVS_002fEntries_002eStatic-file-93"></a><br><dt><samp><span class="file">Entries.Static</span></samp><dd>The only relevant thing about this file is whether it
exists or not.  If it exists, then it means that only
part of a directory was gotten and <span class="sc">cvs</span> will
not create additional files in that directory.  To
clear it, use the <code>update</code> command with the
&lsquo;<samp><span class="samp">-d</span></samp>&rsquo; option, which will get the additional files
and remove <samp><span class="file">Entries.Static</span></samp>. 
<!-- FIXME: This needs to be better documented, in places -->
<!-- other than Working Directory Storage. -->
<!-- FIXCVS: The fact that this setting exists needs to -->
<!-- be more visible to the user.  For example "cvs -->
<!-- status foo", in the case where the file would be -->
<!-- gotten except for Entries.Static, might say -->
<!-- something to distinguish this from other cases. -->
<!-- One thing that periodically gets suggested is to -->
<!-- have "cvs update" print something when it skips -->
<!-- files due to Entries.Static, but IMHO that kind of -->
<!-- noise pretty much makes the Entries.Static feature -->
<!-- useless. -->

     <p><a name="index-Tag-file_002c-in-CVS-directory-94"></a><a name="index-CVS_002fTag-file-95"></a><a name="index-Sticky-tags_002fdates_002c-per_002ddirectory-96"></a><a name="index-Per_002ddirectory-sticky-tags_002fdates-97"></a><br><dt><samp><span class="file">Tag</span></samp><dd>This file contains per-directory sticky tags or dates. 
The first character is &lsquo;<samp><span class="samp">T</span></samp>&rsquo; for a branch tag,
&lsquo;<samp><span class="samp">N</span></samp>&rsquo; for a non-branch tag, or &lsquo;<samp><span class="samp">D</span></samp>&rsquo; for a date,
or another character to mean the file should be
silently ignored, for future expansion.  This character
is followed by the tag or date.  Note that
per-directory sticky tags or dates are used for things
like applying to files which are newly added; they
might not be the same as the sticky tags or dates on
individual files.  For general information on sticky
tags and dates, see <a href="#Sticky-tags">Sticky tags</a>. 
<!-- FIXME: This needs to be much better documented, -->
<!-- preferably not in the context of "working directory -->
<!-- storage". -->
<!-- FIXME: The Sticky tags node needs to discuss, or xref to -->
<!-- someplace which discusses, per-directory sticky -->
<!-- tags and the distinction with per-file sticky tags. -->

     <p><a name="index-Notify-file_002c-in-CVS-directory-98"></a><a name="index-CVS_002fNotify-file-99"></a><br><dt><samp><span class="file">Notify</span></samp><dd>This file stores notifications (for example, for
<code>edit</code> or <code>unedit</code>) which have not yet been
sent to the server.  Its format is not yet documented
here.

     <p><a name="index-Notify_002etmp-file_002c-in-CVS-directory-100"></a><a name="index-CVS_002fNotify_002etmp-file-101"></a><br><dt><samp><span class="file">Notify.tmp</span></samp><dd>This file is to <samp><span class="file">Notify</span></samp> as <samp><span class="file">Entries.Backup</span></samp>
is to <samp><span class="file">Entries</span></samp>.  That is, to write <samp><span class="file">Notify</span></samp>,
first write the new contents to <samp><span class="file">Notify.tmp</span></samp> and
then (atomically where possible), rename it to
<samp><span class="file">Notify</span></samp>.

     <p><a name="index-Base-directory_002c-in-CVS-directory-102"></a><a name="index-CVS_002fBase-directory-103"></a><br><dt><samp><span class="file">Base</span></samp><dd>If watches are in use, then an <code>edit</code> command
stores the original copy of the file in the <samp><span class="file">Base</span></samp>
directory.  This allows the <code>unedit</code> command to
operate even if it is unable to communicate with the
server.

     <p><a name="index-Baserev-file_002c-in-CVS-directory-104"></a><a name="index-CVS_002fBaserev-file-105"></a><br><dt><samp><span class="file">Baserev</span></samp><dd>The file lists the revision for each of the files in
the <samp><span class="file">Base</span></samp> directory.  The format is:

     <pre class="example">          B<var>name</var>/<var>rev</var>/<var>expansion</var>
</pre>
     <p class="noindent">where <var>expansion</var> should be ignored, to allow for
future expansion.

     <p><a name="index-Baserev_002etmp-file_002c-in-CVS-directory-106"></a><a name="index-CVS_002fBaserev_002etmp-file-107"></a><br><dt><samp><span class="file">Baserev.tmp</span></samp><dd>This file is to <samp><span class="file">Baserev</span></samp> as <samp><span class="file">Entries.Backup</span></samp>
is to <samp><span class="file">Entries</span></samp>.  That is, to write <samp><span class="file">Baserev</span></samp>,
first write the new contents to <samp><span class="file">Baserev.tmp</span></samp> and
then (atomically where possible), rename it to
<samp><span class="file">Baserev</span></samp>.

     <p><a name="index-Template-file_002c-in-CVS-directory-108"></a><a name="index-CVS_002fTemplate-file-109"></a><br><dt><samp><span class="file">Template</span></samp><dd>This file contains the template specified by the
<samp><span class="file">rcsinfo</span></samp> file (see <a href="#rcsinfo">rcsinfo</a>).  It is only used
by the client; the non-client/server <span class="sc">cvs</span> consults
<samp><span class="file">rcsinfo</span></samp> directly. 
</dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Intro-administrative-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-repositories">Multiple repositories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Working-directory-storage">Working directory storage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.4 The administrative files</h3>

<p><a name="index-Administrative-files-_0028intro_0029-110"></a><a name="index-Modules-file-111"></a><a name="index-CVSROOT_002c-module-name-112"></a><a name="index-Defining-modules-_0028intro_0029-113"></a>
<!-- FIXME: this node should be reorganized into "general -->
<!-- information about admin files" and put the "editing -->
<!-- admin files" stuff up front rather than jumping into -->
<!-- the details of modules right away.  Then the -->
<!-- Administrative files node can go away, the information -->
<!-- on each admin file distributed to a place appropriate -->
<!-- to its function, and this node can contain a table -->
<!-- listing each file and a @ref to its detailed description. -->

   <p>The directory <samp><span class="file">$CVSROOT/CVSROOT</span></samp> contains some <dfn>administrative
files</dfn>.  See <a href="#Administrative-files">Administrative files</a>, for a complete description. 
You can use <span class="sc">cvs</span> without any of these files, but
some commands work better when at least the
<samp><span class="file">modules</span></samp> file is properly set up.

   <p>The most important of these files is the <samp><span class="file">modules</span></samp>
file.  It defines all modules in the repository.  This
is a sample <samp><span class="file">modules</span></samp> file.

<!-- FIXME: The CVSROOT line is a goofy example now that -->
<!-- mkmodules doesn't exist. -->
<pre class="example">     CVSROOT         CVSROOT
     modules         CVSROOT modules
     cvs             gnu/cvs
     rcs             gnu/rcs
     diff            gnu/diff
     tc              yoyodyne/tc
</pre>
   <p>The <samp><span class="file">modules</span></samp> file is line oriented.  In its
simplest form each line contains the name of the
module, whitespace, and the directory where the module
resides.  The directory is a path relative to
<code>$CVSROOT</code>.  The last four lines in the example
above are examples of such lines.

<!-- FIXME: might want to introduce the concept of options in modules file -->
<!-- (the old example which was here, -i mkmodules, is obsolete). -->
   <p>The line that defines the module called &lsquo;<samp><span class="samp">modules</span></samp>&rsquo;
uses features that are not explained here. 
See <a href="#modules">modules</a>, for a full explanation of all the
available features.

<!-- FIXME: subsection without node is bogus -->
<h4 class="subsection">2.4.1 Editing administrative files</h4>

<p><a name="index-Editing-administrative-files-114"></a><a name="index-Administrative-files_002c-editing-them-115"></a>
You edit the administrative files in the same way that you would edit
any other module.  Use &lsquo;<samp><span class="samp">cvs checkout CVSROOT</span></samp>&rsquo; to get a working
copy, edit it, and commit your changes in the normal way.

   <p>It is possible to commit an erroneous administrative
file.  You can often fix the error and check in a new
revision, but sometimes a particularly bad error in the
administrative file makes it impossible to commit new
revisions. 
<!-- @xref{Bad administrative files} for a hint -->
<!-- about how to solve such situations. -->
<!--  administrative file checking- -->

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Multiple-repositories"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Creating-a-repository">Creating a repository</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Intro-administrative-files">Intro administrative files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.5 Multiple repositories</h3>

<p><a name="index-Multiple-repositories-116"></a><a name="index-Repositories_002c-multiple-117"></a><a name="index-Many-repositories-118"></a><a name="index-Parallel-repositories-119"></a><a name="index-Disjoint-repositories-120"></a><a name="index-CVSROOT_002c-multiple-repositories-121"></a>
In some situations it is a good idea to have more than
one repository, for instance if you have two
development groups that work on separate projects
without sharing any code.  All you have to do to have
several repositories is to specify the appropriate
repository, using the <code>CVSROOT</code> environment
variable, the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; option to <span class="sc">cvs</span>, or (once
you have checked out a working directory) by simply
allowing <span class="sc">cvs</span> to use the repository that was used
to check out the working directory
(see <a href="#Specifying-a-repository">Specifying a repository</a>).

   <p>The big advantage of having multiple repositories is
that they can reside on different servers.  With <span class="sc">cvs</span>
version 1.10, a single command cannot recurse into
directories from different repositories.  With development
versions of <span class="sc">cvs</span>, you can check out code from multiple
servers into your working directory.  <span class="sc">cvs</span> will
recurse and handle all the details of making
connections to as many server machines as necessary to
perform the requested command.  Here is an example of
how to set up a working directory:

<pre class="example">     cvs -d server1:/cvs co dir1
     cd dir1
     cvs -d server2:/root co sdir
     cvs update
</pre>
   <p>The <code>cvs co</code> commands set up the working
directory, and then the <code>cvs update</code> command will
contact server2, to update the dir1/sdir subdirectory,
and server1, to update everything else.

<!-- FIXME: Does the FAQ have more about this?  I have a -->
<!-- dim recollection, but I'm too lazy to check right now. -->
<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Creating-a-repository"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Backing-up">Backing up</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-repositories">Multiple repositories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.6 Creating a repository</h3>

<p><a name="index-Repository_002c-setting-up-122"></a><a name="index-Creating-a-repository-123"></a><a name="index-Setting-up-a-repository-124"></a>
This section describes how to set up a <span class="sc">cvs</span> repository for any
sort of access method.  After completing the setup described in this
section, you should be able to access your <span class="sc">cvs</span> repository immediately
via the local access method and several remote access methods.  For
more information on setting up remote access to the repository you create
in this section, please read the section on See <a href="#Remote-repositories">Remote repositories</a>.

   <p>To set up a <span class="sc">cvs</span> repository, first choose the
machine and disk on which you want to store the
revision history of the source files.  CPU and memory
requirements are modest, so most machines should be
adequate.  For details see <a href="#Server-requirements">Server requirements</a>. 
<!-- Possible that we should be providing a quick rule of -->
<!-- thumb, like the 32M memory for the server.  That -->
<!-- might increase the number of people who are happy -->
<!-- with the answer, without following the xref. -->

   <p>To estimate disk space
requirements, if you are importing RCS files from
another system, the size of those files is the
approximate initial size of your repository, or if you
are starting without any version history, a rule of
thumb is to allow for the server approximately three
times the size of the code to be under <span class="sc">cvs</span> for the
repository (you will eventually outgrow this, but not
for a while).  On the machines on which the developers
will be working, you'll want disk space for
approximately one working directory for each developer
(either the entire tree or a portion of it, depending
on what each developer uses).

   <p>The repository should be accessible
(directly or via a networked file system) from all
machines which want to use <span class="sc">cvs</span> in server or local
mode; the client machines need not have any access to
it other than via the <span class="sc">cvs</span> protocol.  It is not
possible to use <span class="sc">cvs</span> to read from a repository
which one only has read access to; <span class="sc">cvs</span> needs to be
able to create lock files (see <a href="#Concurrency">Concurrency</a>).

   <p><a name="index-init-_0028subcommand_0029-125"></a>To create a repository, run the <code>cvs init</code>
command.  It will set up an empty repository in the
<span class="sc">cvs</span> root specified in the usual way
(see <a href="#Repository">Repository</a>).  For example,

<pre class="example">     cvs -d /usr/local/cvsroot init
</pre>
   <p><code>cvs init</code> is careful to never overwrite any
existing files in the repository, so no harm is done if
you run <code>cvs init</code> on an already set-up
repository.

   <p><code>cvs init</code> will enable history logging; if you
don't want that, remove the history file after running
<code>cvs init</code>.  See <a href="#history-file">history file</a>.

<div class="node">
<a name="Backing-up"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Moving-a-repository">Moving a repository</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Creating-a-repository">Creating a repository</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.7 Backing up a repository</h3>

<p><a name="index-Repository_002c-backing-up-126"></a><a name="index-Backing-up_002c-repository-127"></a>
There is nothing particularly magical about the files
in the repository; for the most part it is possible to
back them up just like any other files.  However, there
are a few issues to consider.

   <p><a name="index-Locks_002c-cvs_002c-and-backups-128"></a><a name="index-g_t_0023cvs_002erfl_002c-and-backups-129"></a>The first is that to be paranoid, one should either not
use <span class="sc">cvs</span> during the backup, or have the backup
program lock <span class="sc">cvs</span> while doing the backup.  To not
use <span class="sc">cvs</span>, you might forbid logins to machines which
can access the repository, turn off your <span class="sc">cvs</span>
server, or similar mechanisms.  The details would
depend on your operating system and how you have
<span class="sc">cvs</span> set up.  To lock <span class="sc">cvs</span>, you would create
<samp><span class="file">#cvs.rfl</span></samp> locks in each repository directory. 
See <a href="#Concurrency">Concurrency</a>, for more on <span class="sc">cvs</span> locks. 
Having said all this, if you just back up without any
of these precautions, the results are unlikely to be
particularly dire.  Restoring from backup, the
repository might be in an inconsistent state, but this
would not be particularly hard to fix manually.

   <p>When you restore a repository from backup, assuming
that changes in the repository were made after the time
of the backup, working directories which were not
affected by the failure may refer to revisions which no
longer exist in the repository.  Trying to run <span class="sc">cvs</span>
in such directories will typically produce an error
message.  One way to get those changes back into the
repository is as follows:

     <ul>
<li>Get a new working directory.

     <li>Copy the files from the working directory from before
the failure over to the new working directory (do not
copy the contents of the <samp><span class="file">CVS</span></samp> directories, of
course).

     <li>Working in the new working directory, use commands such
as <code>cvs update</code> and <code>cvs diff</code> to figure out
what has changed, and then when you are ready, commit
the changes into the repository. 
</ul>

<div class="node">
<a name="Moving-a-repository"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Remote-repositories">Remote repositories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Backing-up">Backing up</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.8 Moving a repository</h3>

<p><a name="index-Repository_002c-moving-130"></a><a name="index-Moving-a-repository-131"></a><a name="index-Copying-a-repository-132"></a>
Just as backing up the files in the repository is
pretty much like backing up any other files, if you
need to move a repository from one place to another it
is also pretty much like just moving any other
collection of files.

   <p>The main thing to consider is that working directories
point to the repository.  The simplest way to deal with
a moved repository is to just get a fresh working
directory after the move.  Of course, you'll want to
make sure that the old working directory had been
checked in before the move, or you figured out some
other way to make sure that you don't lose any
changes.  If you really do want to reuse the existing
working directory, it should be possible with manual
surgery on the <samp><span class="file">CVS/Repository</span></samp> files.  You can
see <a href="#Working-directory-storage">Working directory storage</a>, for information on
the <samp><span class="file">CVS/Repository</span></samp> and <samp><span class="file">CVS/Root</span></samp> files, but
unless you are sure you want to bother, it probably
isn't worth it. 
<!-- FIXME: Surgery on CVS/Repository should be avoided -->
<!-- by making RELATIVE_REPOS the default. -->
<!-- FIXME-maybe: might want some documented way to -->
<!-- change the CVS/Root files in some particular tree. -->
<!-- But then again, I don't know, maybe just having -->
<!-- people do this in perl/shell/&c isn't so bad... -->

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Remote-repositories"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Read_002donly-access">Read-only access</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Moving-a-repository">Moving a repository</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.9 Remote repositories</h3>

<p><a name="index-Repositories_002c-remote-133"></a><a name="index-Remote-repositories-134"></a><a name="index-Client_002fServer-Operation-135"></a><a name="index-Server_002c-CVS-136"></a><a name="index-Remote-repositories_002c-port-specification-137"></a><a name="index-Repositories_002c-remote_002c-port-specification-138"></a><a name="index-Client_002fServer-Operation_002c-port-specification-139"></a><a name="index-pserver-_0028client_002fserver-connection-method_0029_002c-port-specification-140"></a><a name="index-kserver-_0028client_002fserver-connection-method_0029_002c-port-specification-141"></a><a name="index-gserver-_0028client_002fserver-connection-method_0029_002c-port-specification-142"></a><a name="index-port_002c-specifying-for-remote-repositories-143"></a>
        Your working copy of the sources can be on a
different machine than the repository.  Using <span class="sc">cvs</span>
in this manner is known as <dfn>client/server</dfn>
operation.  You run <span class="sc">cvs</span> on a machine which can
mount your working directory, known as the
<dfn>client</dfn>, and tell it to communicate to a machine
which can mount the repository, known as the
<dfn>server</dfn>.  Generally, using a remote
repository is just like using a local one, except that
the format of the repository name is:

<pre class="example">     [:<var>method</var>:][[<var>user</var>][:<var>password</var>]@]<var>hostname</var>[:[<var>port</var>]]/path/to/repository
</pre>
   <p>Specifying a password in the repository name is not recommended during
checkout, since this will cause <span class="sc">cvs</span> to store a cleartext copy of the
password in each created directory.  <code>cvs login</code> first instead
(see <a href="#Password-authentication-client">Password authentication client</a>).

   <p>The details of exactly what needs to be set up depend
on how you are connecting to the server.

<!-- Should we try to explain which platforms are which? -->
<!-- Platforms like unix and VMS, which only allow -->
<!-- privileged programs to bind to sockets <1024 lose on -->
<!-- :server: -->
<!-- Platforms like Mac and VMS, whose rsh program is -->
<!-- unusable or nonexistent, lose on :ext: -->
<!-- Platforms like OS/2 and NT probably could plausibly -->
<!-- default either way (modulo -b troubles). -->
<ul class="menu">
<li><a accesskey="1" href="#Server-requirements">Server requirements</a>:          Memory and other resources for servers
<li><a accesskey="2" href="#The-connection-method">The connection method</a>:        Connection methods and method options
<li><a accesskey="3" href="#Connecting-via-rsh">Connecting via rsh</a>:           Using the <code>rsh</code> program to connect
<li><a accesskey="4" href="#Password-authenticated">Password authenticated</a>:       Direct connections using passwords
<li><a accesskey="5" href="#GSSAPI-authenticated">GSSAPI authenticated</a>:         Direct connections using GSSAPI
<li><a accesskey="6" href="#Kerberos-authenticated">Kerberos authenticated</a>:       Direct connections with Kerberos
<li><a accesskey="7" href="#Connecting-via-fork">Connecting via fork</a>:          Using a forked <code>cvs server</code> to connect
<li><a accesskey="8" href="#Write-proxies">Write proxies</a>:                Distributing load across several CVS servers
</ul>

<div class="node">
<a name="Server-requirements"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#The-connection-method">The connection method</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.1 Server requirements</h4>

<p>The quick answer to what sort of machine is suitable as
a server is that requirements are modest&mdash;a server
with 32M of memory or even less can handle a fairly
large source tree with a fair amount of activity. 
<!-- Say something about CPU speed too?  I'm even less sure -->
<!-- what to say on that subject... -->

   <p>The real answer, of course, is more complicated. 
Estimating the known areas of large memory consumption
should be sufficient to estimate memory requirements. 
There are two such areas documented here; other memory
consumption should be small by comparison (if you find
that is not the case, let us know, as described in
<a href="#BUGS">BUGS</a>, so we can update this documentation).

   <p>The first area of big memory consumption is large
checkouts, when using the <span class="sc">cvs</span> server.  The server
consists of two processes for each client that it is
serving.  Memory consumption on the child process
should remain fairly small.  Memory consumption on the
parent process, particularly if the network connection
to the client is slow, can be expected to grow to
slightly more than the size of the sources in a single
directory, or two megabytes, whichever is larger. 
<!-- "two megabytes" of course is SERVER_HI_WATER.  But -->
<!-- we don't mention that here because we are -->
<!-- documenting the default configuration of CVS.  If it -->
<!-- is a "standard" thing to change that value, it -->
<!-- should be some kind of run-time configuration. -->
<!-- See cvsclient.texi for more on the design decision -->
<!-- to not have locks in place while waiting for the -->
<!-- client, which is what results in memory consumption -->
<!-- as high as this. -->

   <p>Multiplying the size of each <span class="sc">cvs</span> server by the
number of servers which you expect to have active at
one time should give an idea of memory requirements for
the server.  For the most part, the memory consumed by
the parent process probably can be swap space rather
than physical memory. 
<!-- Has anyone verified that notion about swap space? -->
<!-- I say it based pretty much on guessing that the -->
<!-- >text of the struct buffer_data only gets accessed -->
<!-- in a first in, first out fashion, but I haven't -->
<!-- looked very closely. -->

<!-- What about disk usage in /tmp on the server?  I think that -->
<!-- it can be substantial, but I haven't looked at this -->
<!-- again and tried to figure it out ("cvs import" is -->
<!-- probably the worst case...). -->
   <p>The second area of large memory consumption is
<code>diff</code>, when checking in large files.  This is
required even for binary files.  The rule of thumb is
to allow about ten times the size of the largest file
you will want to check in, although five times may be
adequate.  For example, if you want to check in a file
which is 10 megabytes, you should have 100 megabytes of
memory on the machine doing the checkin (the server
machine for client/server, or the machine running
<span class="sc">cvs</span> for non-client/server).  This can be swap
space rather than physical memory.  Because the memory
is only required briefly, there is no particular need
to allow memory for more than one such checkin at a
time. 
<!-- The 5-10 times rule of thumb is from Paul Eggert for -->
<!-- GNU diff.  I don't think it is in the GNU diff -->
<!-- manual or anyplace like that. -->
<!-- Probably we could be saying more about -->
<!-- non-client/server CVS. -->
<!-- I would guess for non-client/server CVS in an NFS -->
<!-- environment the biggest issues are the network and -->
<!-- the NFS server. -->

   <p>Resource consumption for the client is even more
modest&mdash;any machine with enough capacity to run the
operating system in question should have little
trouble. 
<!-- Is that true?  I think the client still wants to -->
<!-- (bogusly) store entire files in memory at times. -->

   <p>For information on disk space requirements, see
<a href="#Creating-a-repository">Creating a repository</a>.

<div class="node">
<a name="The-connection-method"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Connecting-via-rsh">Connecting via rsh</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Server-requirements">Server requirements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.2 The connection method</h4>

<p>In its simplest form, the <var>method</var> portion of the repository string
(see <a href="#Remote-repositories">Remote repositories</a>) may be one of &lsquo;<samp><span class="samp">ext</span></samp>&rsquo;, &lsquo;<samp><span class="samp">fork</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">gserver</span></samp>&rsquo;, &lsquo;<samp><span class="samp">kserver</span></samp>&rsquo;, &lsquo;<samp><span class="samp">local</span></samp>&rsquo;, &lsquo;<samp><span class="samp">pserver</span></samp>&rsquo;, and, on some
platforms, &lsquo;<samp><span class="samp">server</span></samp>&rsquo;.

   <p>If <var>method</var> is not specified, and the repository
name starts with a &lsquo;<samp><span class="samp">/</span></samp>&rsquo;, then the default is <code>local</code>. 
If <var>method</var> is not specified, and the repository
name does not start with a &lsquo;<samp><span class="samp">/</span></samp>&rsquo;, then the default is <code>ext</code>
or <code>server</code>, depending on your platform; both the &lsquo;<samp><span class="samp">ext</span></samp>&rsquo;
and &lsquo;<samp><span class="samp">server</span></samp>&rsquo; methods are described in <a href="#Connecting-via-rsh">Connecting via rsh</a>.

   <p><a name="index-connection-method-options-144"></a><a name="index-options_002c-connection-method-145"></a>The <code>ext</code>, <code>fork</code>, <code>gserver</code>, and <code>pserver</code> connection
methods all accept optional method options, specified as part of the
<var>method</var> string, like so:

<pre class="example">     :<var>method</var>[;<var>option</var>=<var>arg</var>...]:<var>other_connection_data</var>
</pre>
   <p><span class="sc">cvs</span> is not sensitive to the case of <var>method</var> or <var>option</var>, though
it may sometimes be sensitive to the case of <var>arg</var>.  The possible method
options are as follows:

     
<a name="index-CVS_005fPROXY_005fPORT-146"></a>
<a name="index-proxy_002c-method-option-147"></a>
<a name="index-proxyport_002c-method-option-148"></a>
<a name="index-proxies_002c-web_002c-connecting-via-149"></a>
<a name="index-web-proxies_002c-connecting-via-150"></a>
<a name="index-proxies_002c-HTTP_002c-connecting-via-151"></a>
<a name="index-HTTP-proxies_002c-connecting-via-152"></a>
<dl><dt><code>proxy=</code><var>hostname</var><dt><code>proxyport=</code><var>port</var><dd>These two method options can be used to connect via an HTTP tunnel style web
proxy.  <var>hostname</var> should be the name of the HTTP proxy server to connect
through and <var>port</var> is the port number on the HTTP proxy server to connect
via.  <var>port</var> defaults to 8080.

     <p><em>NOTE: An HTTP proxy server is not the same as a </em><span class="sc">cvs</span><em> write proxy
server - please see <a href="#Write-proxies">Write proxies</a> for more on </em><span class="sc">cvs</span><em> write proxies.</em>

     <p>For example, to connect pserver via a web proxy listening on port 8000 of
www.myproxy.net, you would use a method of:

     <pre class="example">          :pserver;proxy=www.myproxy.net;proxyport=8000:<var>pserver_connection_string</var>
</pre>
     <p><em>NOTE: In the above example, </em><var>pserver_connection_string</var><em> is still
required to connect and authenticate to the CVS server, as noted in the
upcoming sections on password authentication, </em><code>gserver</code><em>, and
</em><code>kserver</code><em>.  The example above only demonstrates a modification to the
</em><var>method</var><em> portion of the repository name.</em>

     <p>These options first appeared in <span class="sc">cvs</span> version 1.12.7 and are valid as
modifcations to the <code>gserver</code> and <code>pserver</code> connection methods.

     <p><a name="index-CVS_005fRSH-method-option-153"></a><br><dt><code>CVS_RSH=</code><var>path</var><dd>This method option can be used with the <code>ext</code> method to specify the path
the <span class="sc">cvs</span> client will use to find the remote shell used to contact the
<span class="sc">cvs</span> server and takes precedence over any path specified in the
<code>$CVS_RSH</code> environment variable (see <a href="#Connecting-via-rsh">Connecting via rsh</a>).  For
example, to connect to a <span class="sc">cvs</span> server via the local
<samp><span class="file">/path/to/ssh/command</span></samp> command, you could choose to specify the following
<var>path</var> via the <code>CVS_RSH</code> method option:

     <pre class="example">          :ext;CVS_RSH=/path/to/ssh/command:<var>ext_connection_string</var>
</pre>
     <p>This method option first appeared in <span class="sc">cvs</span> version 1.12.11 and is valid only
as a modifcation to the <code>ext</code> connection method.

     <p><a name="index-CVS_005fSERVER-method-option-154"></a><br><dt><code>CVS_SERVER=</code><var>path</var><dd>This method option can be used with the <code>ext</code> and <code>fork</code> methods to
specify the path <span class="sc">cvs</span> will use to find the <span class="sc">cvs</span> executable on the
<span class="sc">cvs</span> server and takes precedence over any path specified in the
<code>$CVS_SERVER</code> environment variable (see <a href="#Connecting-via-rsh">Connecting via rsh</a>).  For
example, to select the remote <samp><span class="file">/path/to/cvs/command</span></samp> executable as your
<span class="sc">cvs</span> server application on the <span class="sc">cvs</span> server machine, you could choose to
specify the following <var>path</var> via the <code>CVS_SERVER</code> method option:

     <pre class="example">          :ext;CVS_SERVER=/path/to/cvs/command:<var>ext_connection_string</var>
</pre>
     <p class="noindent">or, to select an executable named &lsquo;<samp><span class="samp">cvs-1.12.11</span></samp>&rsquo;, assuming it is in your
<code>$PATH</code> on the <span class="sc">cvs</span> server:

     <pre class="example">          :ext;CVS_SERVER=cvs-1.12.11:<var>ext_connection_string</var>
</pre>
     <p>This method option first appeared in <span class="sc">cvs</span> version 1.12.11 and is valid
as a modifcation to both the <code>ext</code> and <code>fork</code> connection methods.

     <p><a name="index-Redirect_002c-method-option-155"></a><br><dt><code>Redirect=</code><var>boolean-state</var><dd>The <code>Redirect</code> method option determines whether the <span class="sc">cvs</span> client will
allow a <span class="sc">cvs</span> server to redirect it to a different <span class="sc">cvs</span> server, usually
for write requests, as in a write proxy setup.

     <p>A <var>boolean-state</var> of any value acceptable for boolean <samp><span class="file">CVSROOT/config</span></samp>
file options is acceptable here (see <a href="#config">config</a>).  For example, &lsquo;<samp><span class="samp">on</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">off</span></samp>&rsquo;, &lsquo;<samp><span class="samp">true</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">false</span></samp>&rsquo; are all valid values for
<var>boolean-state</var>.  <var>boolean-state</var> for the <code>Redirect</code> method option
defaults to &lsquo;<samp><span class="samp">on</span></samp>&rsquo;.

     <p>This option will have no effect when talking to any non-secondary <span class="sc">cvs</span>
server.  For more on write proxies and secondary servers, please see
<a href="#Write-proxies">Write proxies</a>.

     <p>This method option first appeared in <span class="sc">cvs</span> version 1.12.11 and is valid only
as a modifcation to the <code>ext</code> connection method. 
</dl>

   <p>As a further example, to combine both the <code>CVS_RSH</code> and <code>CVS_SERVER</code>
options, a method specification like the following would work:

<pre class="example">     :ext;CVS_RSH=/path/to/ssh/command;CVS_SERVER=/path/to/cvs/command:
</pre>
   <p>This means that you would not need to have
the <code>CVS_SERVER</code> or <code>CVS_RSH</code> environment
variables set correctly.  See <a href="#Connecting-via-rsh">Connecting via rsh</a>, for more details on
these environment variables.

<div class="node">
<a name="Connecting-via-rsh"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Password-authenticated">Password authenticated</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#The-connection-method">The connection method</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.3 Connecting with rsh</h4>

<p><a name="index-rsh-156"></a><span class="sc">cvs</span> uses the &lsquo;<samp><span class="samp">rsh</span></samp>&rsquo; protocol to perform these
operations, so the remote user host needs to have a
<samp><span class="file">.rhosts</span></samp> file which grants access to the local
user. Note that the program that <span class="sc">cvs</span> uses for this
purpose may be specified using the <samp><span class="file">--with-rsh</span></samp>
flag to configure.

   <p>For example, suppose you are the user &lsquo;<samp><span class="samp">mozart</span></samp>&rsquo; on
the local machine &lsquo;<samp><span class="samp">toe.example.com</span></samp>&rsquo;, and the
server machine is &lsquo;<samp><span class="samp">faun.example.org</span></samp>&rsquo;.  On
faun, put the following line into the file
<samp><span class="file">.rhosts</span></samp> in &lsquo;<samp><span class="samp">bach</span></samp>&rsquo;'s home directory:

<pre class="example">     toe.example.com  mozart
</pre>
   <p class="noindent">Then test that &lsquo;<samp><span class="samp">rsh</span></samp>&rsquo; is working with

<pre class="example">     rsh -l bach faun.example.org 'echo $PATH'
</pre>
   <p><a name="index-CVS_005fSERVER_002c-environment-variable-157"></a>Next you have to make sure that <code>rsh</code> will be able
to find the server.  Make sure that the path which
<code>rsh</code> printed in the above example includes the
directory containing a program named <code>cvs</code> which
is the server.  You need to set the path in
<samp><span class="file">.bashrc</span></samp>, <samp><span class="file">.cshrc</span></samp>, etc., not <samp><span class="file">.login</span></samp>
or <samp><span class="file">.profile</span></samp>.  Alternately, you can set the
environment variable <code>CVS_SERVER</code> on the client
machine to the filename of the server you want to use,
for example <samp><span class="file">/usr/local/bin/cvs-1.6</span></samp>. 
For the <code>ext</code> and <code>fork</code> methods, you may
also specify <var>CVS_SERVER</var> as an otpion in the
<var>CVSROOT</var> so that you may use different servers for
differnt roots. See <a href="#Remote-repositories">Remote repositories</a> for more
details.

   <p>There is no need to edit <samp><span class="file">inetd.conf</span></samp> or start a
<span class="sc">cvs</span> server daemon.

   <p><a name="index-server-method_002c-setting-up-158"></a><a name="index-ext-method_002c-setting-up-159"></a><a name="index-Kerberos_002c-using-kerberized-rsh-160"></a><a name="index-SSH-_0028rsh-replacement_0029-161"></a><a name="index-rsh-replacements-_0028Kerberized_002c-SSH_002c-_0026c_0029-162"></a>There are two access methods that you use in <code>CVSROOT</code>
for rsh.  <code>:server:</code> specifies an internal rsh
client, which is supported only by some <span class="sc">cvs</span> ports. 
This is not supported on most Unix-style systems. 
<code>:ext:</code> specifies an external rsh program.  By
default this is <code>rsh</code> (unless otherwise specified
by the <samp><span class="file">--with-rsh</span></samp> flag to configure) but you may set the
<code>CVS_RSH</code> environment variable to invoke another
program which can access the remote server (for
example, <code>remsh</code> on HP-UX 9 because <code>rsh</code> is
something different, or <code>ssh</code> to allow the use of secure
and/or compressed connections).  It must be a program which can
transmit data to and from the server without modifying
it; for example the Windows NT <code>rsh</code> is not
suitable since it by default translates between CRLF
and LF.  The OS/2 <span class="sc">cvs</span> port has a hack to pass &lsquo;<samp><span class="samp">-b</span></samp>&rsquo;
to <code>rsh</code> to get around this, but since this could
potentially cause problems for programs other than the
standard <code>rsh</code>, it may change in the future.  If
you set <code>CVS_RSH</code> to <code>SSH</code> or some other rsh
replacement, the instructions in the rest of this
section concerning <samp><span class="file">.rhosts</span></samp> and so on are likely
to be inapplicable; consult the documentation for your rsh
replacement.

   <p>In the Debian and MirBSD versions of <span class="sc">cvs</span>, you can
also specify <code>:extssh:</code> to force use of the Secure
Shell, or <code>:ext=prog:</code> or <code>:ext=/path/to/prog:</code>
to specify the remote shell to use without needing to
touch the <code>CVS_RSH</code> environment variable.

   <p>You may choose to specify the <var>CVS_RSH</var> option as a method option
in the <var>CVSROOT</var> string to allow you to use different connection tools
for different roots (see <a href="#The-connection-method">The connection method</a>).  For example, allowing
some roots to use <code>CVS_RSH=remsh</code> and some to use
<code>CVS_RSH=ssh</code> for the <code>ext</code> method.  See also
the <a href="#Remote-repositories">Remote repositories</a> for more details. 
<!-- See also the comment in src/client.c for rationale -->
<!-- concerning "rsh" being the default and never -->
<!-- "remsh". -->

   <p>Continuing our example, supposing you want to access
the module <samp><span class="file">foo</span></samp> in the repository
<samp><span class="file">/usr/local/cvsroot/</span></samp>, on machine
<samp><span class="file">faun.example.org</span></samp>, you are ready to go:

<pre class="example">     cvs -d :ext:bach@faun.example.org:/usr/local/cvsroot checkout foo
</pre>
   <p class="noindent">(The <samp><span class="file">bach@</span></samp> can be omitted if the username is
the same on both the local and remote hosts.)

<!-- Should we mention "rsh host echo hi" and "rsh host -->
<!-- cat" (the latter followed by typing text and ^D) -->
<!-- as troubleshooting techniques?  Probably yes -->
<!-- (people tend to have trouble setting this up), -->
<!-- but this kind of thing can be hard to spell out. -->
<div class="node">
<a name="Password-authenticated"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#GSSAPI-authenticated">GSSAPI authenticated</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Connecting-via-rsh">Connecting via rsh</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.4 Direct connection with password authentication</h4>

<p>The <span class="sc">cvs</span> client can also connect to the server
using a password protocol.  This is particularly useful
if using <code>rsh</code> is not feasible (for example,
the server is behind a firewall), and Kerberos also is
not available.

   <p>To use this method, it is necessary to make
some adjustments on both the server and client sides.

<ul class="menu">
<li><a accesskey="1" href="#Password-authentication-server">Password authentication server</a>:      Setting up the server
<li><a accesskey="2" href="#Password-authentication-client">Password authentication client</a>:      Using the client
<li><a accesskey="3" href="#Password-authentication-security">Password authentication security</a>:    What this method does and does not do
</ul>

<div class="node">
<a name="Password-authentication-server"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Password-authentication-client">Password authentication client</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Password-authenticated">Password authenticated</a>

</div>

<h5 class="subsubsection">2.9.4.1 Setting up the server for password authentication</h5>

<p>First of all, you probably want to tighten the
permissions on the <samp><span class="file">$CVSROOT</span></samp> and
<samp><span class="file">$CVSROOT/CVSROOT</span></samp> directories.  See <a href="#Password-authentication-security">Password authentication security</a>, for more details.

   <p><a name="index-pserver-_0028subcommand_0029-163"></a><a name="index-Remote-repositories_002c-port-specification-164"></a><a name="index-Repositories_002c-remote_002c-port-specification-165"></a><a name="index-Client_002fServer-Operation_002c-port-specification-166"></a><a name="index-pserver-_0028client_002fserver-connection-method_0029_002c-port-specification-167"></a><a name="index-kserver-_0028client_002fserver-connection-method_0029_002c-port-specification-168"></a><a name="index-gserver-_0028client_002fserver-connection-method_0029_002c-port-specification-169"></a><a name="index-port_002c-specifying-for-remote-repositories-170"></a><a name="index-Password-server_002c-setting-up-171"></a><a name="index-Authenticating-server_002c-setting-up-172"></a><a name="index-inetd_002c-configuring-for-pserver-173"></a><a name="index-xinetd_002c-configuring-for-pserver-174"></a><!-- FIXME: this isn't quite right regarding port -->
<!-- numbers; CVS looks up "cvspserver" in -->
<!-- /etc/services (on unix, but what about non-unix?). -->
On the server side, the file <samp><span class="file">/etc/inetd.conf</span></samp>
needs to be edited so <code>inetd</code> knows to run the
command <code>cvs pserver</code> when it receives a
connection on the right port.  By default, the port
number is 2401; it would be different if your client
were compiled with <code>CVS_AUTH_PORT</code> defined to
something else, though.  This can also be specified in the CVSROOT variable
(see <a href="#Remote-repositories">Remote repositories</a>) or overridden with the CVS_CLIENT_PORT
environment variable (see <a href="#Environment-variables">Environment variables</a>).

   <p>If your <code>inetd</code> allows raw port numbers in
<samp><span class="file">/etc/inetd.conf</span></samp>, then the following (all on a
single line in <samp><span class="file">inetd.conf</span></samp>) should be sufficient:

<pre class="example">     2401  stream  tcp  nowait  root  /usr/local/bin/cvs
     cvs -f --allow-root=/usr/cvsroot pserver
</pre>
   <p class="noindent">(You could also use the
&lsquo;<samp><span class="samp">-T</span></samp>&rsquo; option to specify a temporary directory.)

   <p>The &lsquo;<samp><span class="samp">--allow-root</span></samp>&rsquo; option specifies the allowable
<span class="sc">cvsroot</span> directory.  Clients which attempt to use a
different <span class="sc">cvsroot</span> directory will not be allowed to
connect.  If there is more than one <span class="sc">cvsroot</span>
directory which you want to allow, repeat the option. 
(Unfortunately, many versions of <code>inetd</code> have very small
limits on the number of arguments and/or the total length
of the command.  The usual solution to this problem is
to have <code>inetd</code> run a shell script which then invokes
<span class="sc">cvs</span> with the necessary arguments.)

   <p>If your <code>inetd</code> wants a symbolic service
name instead of a raw port number, then put this in
<samp><span class="file">/etc/services</span></samp>:

<pre class="example">     cvspserver      2401/tcp
</pre>
   <p class="noindent">and put <code>cvspserver</code> instead of <code>2401</code> in <samp><span class="file">inetd.conf</span></samp>.

   <p>If your system uses <code>xinetd</code> instead of <code>inetd</code>,
the procedure is slightly different. 
Create a file called <samp><span class="file">/etc/xinetd.d/cvspserver</span></samp> containing the following:

<pre class="example">     service cvspserver
     {
        port        = 2401
        socket_type = stream
        protocol    = tcp
        wait        = no
        user        = root
        passenv     = PATH
        server      = /usr/local/bin/cvs
        server_args = -f --allow-root=/usr/cvsroot pserver
     }
</pre>
   <p class="noindent">(If <code>cvspserver</code> is defined in <samp><span class="file">/etc/services</span></samp>, you can omit
the <code>port</code> line.)

   <p>Once the above is taken care of, restart your
<code>inetd</code>, or do whatever is necessary to force it
to reread its initialization files.

   <p>If you are having trouble setting this up, see
<a href="#Connection">Connection</a>.

   <p><a name="index-CVS-passwd-file-175"></a><a name="index-passwd-_0028admin-file_0029-176"></a>Because the client stores and transmits passwords in
cleartext (almost&mdash;see <a href="#Password-authentication-security">Password authentication security</a>, for details), a separate <span class="sc">cvs</span> password
file is generally used, so people don't compromise
their regular passwords when they access the
repository.  This file is
<samp><span class="file">$CVSROOT/CVSROOT/passwd</span></samp> (see <a href="#Intro-administrative-files">Intro administrative files</a>).  It uses a colon-separated
format, similar to <samp><span class="file">/etc/passwd</span></samp> on Unix systems,
except that it has fewer fields: <span class="sc">cvs</span> username,
optional password, and an optional system username for
<span class="sc">cvs</span> to run as if authentication succeeds.  Here is
an example <samp><span class="file">passwd</span></samp> file with five entries:

<pre class="example">     anonymous:
     bach:ULtgRLXo7NRxs
     spwang:1sOp854gDF3DY
     melissa:tGX1fS8sun6rY:pubcvs
     qproj:XR4EZcEs0szik:pubcvs
</pre>
   <p class="noindent">(The passwords are encrypted according to the standard
Unix <code>crypt()</code> function, so it is possible to
paste in passwords directly from regular Unix
<samp><span class="file">/etc/passwd</span></samp> files.)

   <p>The first line in the example will grant access to any
<span class="sc">cvs</span> client attempting to authenticate as user
<code>anonymous</code>, no matter what password they use,
including an empty password.  (This is typical for
sites granting anonymous read-only access; for
information on how to do the "read-only" part, see
<a href="#Read_002donly-access">Read-only access</a>.)

   <p>The second and third lines will grant access to
<code>bach</code> and <code>spwang</code> if they supply their
respective plaintext passwords.

   <p><a name="index-User-aliases-177"></a>The fourth line will grant access to <code>melissa</code>, if
she supplies the correct password, but her <span class="sc">cvs</span>
operations will actually run on the server side under
the system user <code>pubcvs</code>.  Thus, there need not be
any system user named <code>melissa</code>, but there
<em>must</em> be one named <code>pubcvs</code>.

   <p>The fifth line shows that system user identities can be
shared: any client who successfully authenticates as
<code>qproj</code> will actually run as <code>pubcvs</code>, just
as <code>melissa</code> does.  That way you could create a
single, shared system user for each project in your
repository, and give each developer their own line in
the <samp><span class="file">$CVSROOT/CVSROOT/passwd</span></samp> file.  The <span class="sc">cvs</span>
username on each line would be different, but the
system username would be the same.  The reason to have
different <span class="sc">cvs</span> usernames is that <span class="sc">cvs</span> will log their
actions under those names: when <code>melissa</code> commits
a change to a project, the checkin is recorded in the
project's history under the name <code>melissa</code>, not
<code>pubcvs</code>.  And the reason to have them share a
system username is so that you can arrange permissions
in the relevant area of the repository such that only
that account has write-permission there.

   <p>If the system-user field is present, all
password-authenticated <span class="sc">cvs</span> commands run as that
user; if no system user is specified, <span class="sc">cvs</span> simply
takes the <span class="sc">cvs</span> username as the system username and
runs commands as that user.  In either case, if there
is no such user on the system, then the <span class="sc">cvs</span>
operation will fail (regardless of whether the client
supplied a valid password).

   <p>The password and system-user fields can both be omitted
(and if the system-user field is omitted, then also
omit the colon that would have separated it from the
encrypted password).  For example, this would be a
valid <samp><span class="file">$CVSROOT/CVSROOT/passwd</span></samp> file:

<pre class="example">     anonymous::pubcvs
     fish:rKa5jzULzmhOo:kfogel
     sussman:1sOp854gDF3DY
</pre>
   <p class="noindent">When the password field is omitted or empty, then the
client's authentication attempt will succeed with any
password, including the empty string.  However, the
colon after the <span class="sc">cvs</span> username is always necessary,
even if the password is empty.

   <p><span class="sc">cvs</span> can also fall back to use system authentication. 
When authenticating a password, the server first checks
for the user in the <samp><span class="file">$CVSROOT/CVSROOT/passwd</span></samp>
file.  If it finds the user, it will use that entry for
authentication as described above.  But if it does not
find the user, or if the <span class="sc">cvs</span> <samp><span class="file">passwd</span></samp> file
does not exist, then the server can try to authenticate
the username and password using the operating system's
user-lookup routines (this "fallback" behavior can be
disabled by setting <code>SystemAuth=no</code> in the
<span class="sc">cvs</span> <samp><span class="file">config</span></samp> file, see <a href="#config">config</a>).

   <p>The default fallback behavior is to look in
<samp><span class="file">/etc/passwd</span></samp> for this system user unless your
system has PAM (Pluggable Authentication Modules)
and your <span class="sc">cvs</span> server executable was configured to
use it at compile time (using <code>./configure --enable-pam</code> - see the
INSTALL file for more).  In this case, PAM will be consulted instead. 
This means that <span class="sc">cvs</span> can be configured to use any password
authentication source PAM can be configured to use (possibilities
include a simple UNIX password, NIS, LDAP, and others) in its
global configuration file (usually <samp><span class="file">/etc/pam.conf</span></samp>
or possibly <samp><span class="file">/etc/pam.d/cvs</span></samp>).  See your PAM documentation
for more details on PAM configuration.

   <p>Note that PAM is an experimental feature in <span class="sc">cvs</span> and feedback is
encouraged.  Please send a mail to one of the <span class="sc">cvs</span> mailing lists
(<code>info-cvs@nongnu.org</code> or <code>bug-cvs@nongnu.org</code>) if you use the
<span class="sc">cvs</span> PAM support.

   <p><em>WARNING: Using PAM gives the system administrator much more
flexibility about how </em><span class="sc">cvs</span><em> users are authenticated but
no more security than other methods.  See below for more.</em>

   <p>CVS needs an "auth", "account" and "session" module in the
PAM configuration file. A typical PAM configuration
would therefore have the following lines
in <samp><span class="file">/etc/pam.conf</span></samp> to emulate the standard <span class="sc">cvs</span>
system <samp><span class="file">/etc/passwd</span></samp> authentication:

<pre class="example">     cvs	auth	    required	pam_unix.so
     cvs	account	    required	pam_unix.so
     cvs	session	    required	pam_unix.so
</pre>
   <p>The the equivalent <samp><span class="file">/etc/pam.d/cvs</span></samp> would contain

<pre class="example">     auth	    required	pam_unix.so
     account	    required	pam_unix.so
     session	    required	pam_unix.so
</pre>
   <p>Some systems require a full path to the module so that
<samp><span class="file">pam_unix.so</span></samp> (Linux) would become something like
<samp><span class="file">/usr/lib/security/$ISA/pam_unix.so.1</span></samp> (Sun Solaris). 
See the <samp><span class="file">contrib/pam</span></samp> subdirectory of the <span class="sc">cvs</span>
source distribution for further example configurations.

   <p>The PAM service name given above as "cvs" is just
the service name in the default configuration and can be
set using
<code>./configure --with-hardcoded-pam-service-name=&lt;pam-service-name&gt;</code>
before compiling.  <span class="sc">cvs</span> can also be configured to use whatever
name it is invoked as as its PAM service name using
<code>./configure --without-hardcoded-pam-service-name</code>, but this
feature should not be used if you may not have control of the name
<span class="sc">cvs</span> will be invoked as.

   <p>Be aware, also, that falling back to system
authentication might be a security risk: <span class="sc">cvs</span>
operations would then be authenticated with that user's
regular login password, and the password flies across
the network in plaintext.  See <a href="#Password-authentication-security">Password authentication security</a> for more on this. 
This may be more of a problem with PAM authentication
because it is likely that the source of the system
password is some central authentication service like
LDAP which is also used to authenticate other services.

   <p>On the other hand, PAM makes it very easy to change your password
regularly.  If they are given the option of a one-password system for
all of their activities, users are often more willing to change their
password on a regular basis.

   <p>In the non-PAM configuration where the password is stored in the
<samp><span class="file">CVSROOT/passwd</span></samp> file, it is difficult to change passwords on a
regular basis since only administrative users (or in some cases
processes that act as an administrative user) are typically given
access to modify this file.  Either there needs to be some
hand-crafted web page or set-uid program to update the file, or the
update needs to be done by submitting a request to an administrator to
perform the duty by hand.  In the first case, having to remember to
update a separate password on a periodic basis can be difficult.  In
the second case, the manual nature of the change will typically mean
that the password will not be changed unless it is absolutely
necessary.

   <p>Note that PAM administrators should probably avoid configuring
one-time-passwords (OTP) for <span class="sc">cvs</span> authentication/authorization.  If
OTPs are desired, the administrator may wish to encourage the use of
one of the other Client/Server access methods.  See the section on
see <a href="#Remote-repositories">Remote repositories</a> for a list of other methods.

   <p>Right now, the only way to put a password in the
<span class="sc">cvs</span> <samp><span class="file">passwd</span></samp> file is to paste it there from
somewhere else.  Someday, there may be a <code>cvs
passwd</code> command.

   <p>Unlike many of the files in <samp><span class="file">$CVSROOT/CVSROOT</span></samp>, it
is normal to edit the <samp><span class="file">passwd</span></samp> file in-place,
rather than via <span class="sc">cvs</span>.  This is because of the
possible security risks of having the <samp><span class="file">passwd</span></samp>
file checked out to people's working copies.  If you do
want to include the <samp><span class="file">passwd</span></samp> file in checkouts of
<samp><span class="file">$CVSROOT/CVSROOT</span></samp>, see <a href="#checkoutlist">checkoutlist</a>.

<!-- We might also suggest using the @code{htpasswd} command -->
<!-- from freely available web servers as well, but that -->
<!-- would open up a can of worms in that the users next -->
<!-- questions are likely to be "where do I get it?" and -->
<!-- "how do I use it?" -->
<!-- Also note that htpasswd, at least the version I had, -->
<!-- likes to clobber the third field. -->
<div class="node">
<a name="Password-authentication-client"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Password-authentication-security">Password authentication security</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Password-authentication-server">Password authentication server</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Password-authenticated">Password authenticated</a>

</div>

<h5 class="subsubsection">2.9.4.2 Using the client with password authentication</h5>

<p><a name="index-Login-_0028subcommand_0029-178"></a><a name="index-Password-client_002c-using-179"></a><a name="index-Authenticated-client_002c-using-180"></a><a name="index-pserver-method_002c-setting-up-181"></a>To run a <span class="sc">cvs</span> command on a remote repository via
the password-authenticating server, one specifies the
<code>pserver</code> protocol, optional username, repository host, an
optional port number, and path to the repository.  For example:

<pre class="example">     cvs -d :pserver:faun.example.org:/usr/local/cvsroot checkout someproj
</pre>
   <p class="noindent">or

<pre class="example">     CVSROOT=:pserver:bach@faun.example.org:2401/usr/local/cvsroot
     cvs checkout someproj
</pre>
   <p>However, unless you're connecting to a public-access
repository (i.e., one where that username doesn't
require a password), you'll need to supply a password or <dfn>log in</dfn> first. 
Logging in verifies your password with the repository and stores it in a file. 
It's done with the <code>login</code> command, which will
prompt you interactively for the password if you didn't supply one as part of
<var>$CVSROOT</var>:

<pre class="example">     cvs -d :pserver:bach@faun.example.org:/usr/local/cvsroot login
     CVS password:
</pre>
   <p class="noindent">or

<pre class="example">     cvs -d :pserver:bach:p4ss30rd@faun.example.org:/usr/local/cvsroot login
</pre>
   <p>After you enter the password, <span class="sc">cvs</span> verifies it with
the server.  If the verification succeeds, then that
combination of username, host, repository, and password
is permanently recorded, so future transactions with
that repository won't require you to run <code>cvs
login</code>.  (If verification fails, <span class="sc">cvs</span> will exit
complaining that the password was incorrect, and
nothing will be recorded.)

   <p>The records are stored, by default, in the file
<samp><span class="file">$HOME/.cvspass</span></samp>.  That file's format is
human-readable, and to a degree human-editable, but
note that the passwords are not stored in
cleartext&mdash;they are trivially encoded to protect them
from "innocent" compromise (i.e., inadvertent viewing
by a system administrator or other non-malicious
person).

   <p><a name="index-CVS_005fPASSFILE_002c-environment-variable-182"></a>You can change the default location of this file by
setting the <code>CVS_PASSFILE</code> environment variable. 
If you use this variable, make sure you set it
<em>before</em> <code>cvs login</code> is run.  If you were to
set it after running <code>cvs login</code>, then later
<span class="sc">cvs</span> commands would be unable to look up the
password for transmission to the server.

   <p>Once you have logged in, all <span class="sc">cvs</span> commands using
that remote repository and username will authenticate
with the stored password.  So, for example

<pre class="example">     cvs -d :pserver:bach@faun.example.org:/usr/local/cvsroot checkout foo
</pre>
   <p class="noindent">should just work (unless the password changes on the
server side, in which case you'll have to re-run
<code>cvs login</code>).

   <p>Note that if the &lsquo;<samp><span class="samp">:pserver:</span></samp>&rsquo; were not present in
the repository specification, <span class="sc">cvs</span> would assume it
should use <code>rsh</code> to connect with the server
instead (see <a href="#Connecting-via-rsh">Connecting via rsh</a>).

   <p>Of course, once you have a working copy checked out and
are running <span class="sc">cvs</span> commands from within it, there is
no longer any need to specify the repository
explicitly, because <span class="sc">cvs</span> can deduce the repository
from the working copy's <samp><span class="file">CVS</span></samp> subdirectory.

<!-- FIXME: seems to me this needs somewhat more -->
<!-- explanation. -->
   <p><a name="index-Logout-_0028subcommand_0029-183"></a>The password for a given remote repository can be
removed from the <code>CVS_PASSFILE</code> by using the
<code>cvs logout</code> command.

<div class="node">
<a name="Password-authentication-security"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Password-authentication-client">Password authentication client</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Password-authenticated">Password authenticated</a>

</div>

<h5 class="subsubsection">2.9.4.3 Security considerations with password authentication</h5>

<p><a name="index-Security_002c-of-pserver-184"></a>The passwords are stored on the client side in a
trivial encoding of the cleartext, and transmitted in
the same encoding.  The encoding is done only to
prevent inadvertent password compromises (i.e., a
system administrator accidentally looking at the file),
and will not prevent even a naive attacker from gaining
the password.

<!-- FIXME: The bit about "access to the repository -->
<!-- implies general access to the system is *not* specific -->
<!-- to pserver; it applies to kerberos and SSH and -->
<!-- everything else too.  Should reorganize the -->
<!-- documentation to make this clear. -->
   <p>The separate <span class="sc">cvs</span> password file (see <a href="#Password-authentication-server">Password authentication server</a>) allows people
to use a different password for repository access than
for login access.  On the other hand, once a user has
non-read-only
access to the repository, she can execute programs on
the server system through a variety of means.  Thus, repository
access implies fairly broad system access as well.  It
might be possible to modify <span class="sc">cvs</span> to prevent that,
but no one has done so as of this writing. 
<!-- OpenBSD uses chroot() and copies the repository to -->
<!-- provide anonymous read-only access (for details see -->
<!-- http://www.openbsd.org/anoncvs.shar).  While this -->
<!-- closes the most obvious holes, I'm not sure it -->
<!-- closes enough holes to recommend it (plus it is -->
<!-- *very* easy to accidentally screw up a setup of this -->
<!-- type). -->

   <p>Note that because the <samp><span class="file">$CVSROOT/CVSROOT</span></samp> directory
contains <samp><span class="file">passwd</span></samp> and other files which are used
to check security, you must control the permissions on
this directory as tightly as the permissions on
<samp><span class="file">/etc</span></samp>.  The same applies to the <samp><span class="file">$CVSROOT</span></samp>
directory itself and any directory
above it in the tree.  Anyone who has write access to
such a directory will have the ability to become any
user on the system.  Note that these permissions are
typically tighter than you would use if you are not
using pserver. 
<!-- TODO: Would be really nice to document/implement a -->
<!-- scheme where the CVS server can run as some non-root -->
<!-- user, e.g. "cvs".  CVSROOT/passwd would contain a -->
<!-- bunch of entries of the form foo:xxx:cvs (or the "cvs" -->
<!-- would be implicit).  This would greatly reduce -->
<!-- security risks such as those hinted at in the -->
<!-- previous paragraph.  I think minor changes to CVS -->
<!-- might be required but mostly this would just need -->
<!-- someone who wants to play with it, document it, &c. -->

   <p>In summary, anyone who gets the password gets
repository access (which may imply some measure of general system
access as well).  The password is available to anyone
who can sniff network packets or read a protected
(i.e., user read-only) file.  If you want real
security, get Kerberos.

<div class="node">
<a name="GSSAPI-authenticated"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Kerberos-authenticated">Kerberos authenticated</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Password-authenticated">Password authenticated</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.5 Direct connection with GSSAPI</h4>

<p><a name="index-GSSAPI-185"></a><a name="index-Security_002c-GSSAPI-186"></a><a name="index-gserver-method_002c-setting-up-187"></a><a name="index-Kerberos_002c-using-gserver-method-188"></a>GSSAPI is a generic interface to network security
systems such as Kerberos 5. 
If you have a working GSSAPI library, you can have
<span class="sc">cvs</span> connect via a direct <span class="sc">tcp</span> connection,
authenticating with GSSAPI.

   <p>To do this, <span class="sc">cvs</span> needs to be compiled with GSSAPI
support; when configuring <span class="sc">cvs</span> it tries to detect
whether GSSAPI libraries using Kerberos version 5 are
present.  You can also use the <samp><span class="file">--with-gssapi</span></samp>
flag to configure.

   <p>The connection is authenticated using GSSAPI, but the
message stream is <em>not</em> authenticated by default. 
You must use the <code>-a</code> global option to request
stream authentication.

   <p>The data transmitted is <em>not</em> encrypted by
default.  Encryption support must be compiled into both
the client and the server; use the
<samp><span class="file">--enable-encrypt</span></samp> configure option to turn it on. 
You must then use the <code>-x</code> global option to
request encryption.

   <p>GSSAPI connections are handled on the server side by
the same server which handles the password
authentication server; see <a href="#Password-authentication-server">Password authentication server</a>.  If you are using a GSSAPI mechanism such as
Kerberos which provides for strong authentication, you
will probably want to disable the ability to
authenticate via cleartext passwords.  To do so, create
an empty <samp><span class="file">CVSROOT/passwd</span></samp> password file, and set
<code>SystemAuth=no</code> in the config file
(see <a href="#config">config</a>).

   <p>The GSSAPI server uses a principal name of
cvs/<var>hostname</var>, where <var>hostname</var> is the
canonical name of the server host.  You will have to
set this up as required by your GSSAPI mechanism.

   <p>To connect using GSSAPI, use the &lsquo;<samp><span class="samp">:gserver:</span></samp>&rsquo; method.  For
example,

<pre class="example">     cvs -d :gserver:faun.example.org:/usr/local/cvsroot checkout foo
</pre>
   <div class="node">
<a name="Kerberos-authenticated"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Connecting-via-fork">Connecting via fork</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GSSAPI-authenticated">GSSAPI authenticated</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.6 Direct connection with Kerberos</h4>

<p><a name="index-Kerberos_002c-using-kserver-method-189"></a><a name="index-Security_002c-Kerberos-190"></a><a name="index-kserver-method_002c-setting-up-191"></a>The easiest way to use Kerberos is to use the Kerberos
<code>rsh</code>, as described in <a href="#Connecting-via-rsh">Connecting via rsh</a>. 
The main disadvantage of using rsh is that all the data
needs to pass through additional programs, so it may be
slower.  So if you have Kerberos installed you can
connect via a direct <span class="sc">tcp</span> connection,
authenticating with Kerberos.

   <p>This section concerns the Kerberos network security
system, version 4.  Kerberos version 5 is supported via
the GSSAPI generic network security interface, as
described in the previous section.

   <p>To do this, <span class="sc">cvs</span> needs to be compiled with Kerberos
support; when configuring <span class="sc">cvs</span> it tries to detect
whether Kerberos is present or you can use the
<samp><span class="file">--with-krb4</span></samp> flag to configure.

   <p>The data transmitted is <em>not</em> encrypted by
default.  Encryption support must be compiled into both
the client and server; use the
<samp><span class="file">--enable-encryption</span></samp> configure option to turn it
on.  You must then use the <code>-x</code> global option to
request encryption.

   <p>The CVS client will attempt to connect to port 1999 by default.

   <p><a name="index-kinit-192"></a>When you want to use <span class="sc">cvs</span>, get a ticket in the
usual way (generally <code>kinit</code>); it must be a ticket
which allows you to log into the server machine.  Then
you are ready to go:

<pre class="example">     cvs -d :kserver:faun.example.org:/usr/local/cvsroot checkout foo
</pre>
   <p>Previous versions of <span class="sc">cvs</span> would fall back to a
connection via rsh; this version will not do so.

<div class="node">
<a name="Connecting-via-fork"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Write-proxies">Write proxies</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Kerberos-authenticated">Kerberos authenticated</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.7 Connecting with fork</h4>

<p><a name="index-fork_002c-access-method-193"></a><a name="index-fork-method_002c-setting-up-194"></a>This access method allows you to connect to a
repository on your local disk via the remote protocol. 
In other words it does pretty much the same thing as
<code>:local:</code>, but various quirks, bugs and the like are
those of the remote <span class="sc">cvs</span> rather than the local
<span class="sc">cvs</span>.

   <p>For day-to-day operations you might prefer either
<code>:local:</code> or <code>:fork:</code>, depending on your
preferences.  Of course <code>:fork:</code> comes in
particularly handy in testing or
debugging <code>cvs</code> and the remote protocol. 
Specifically, we avoid all of the network-related
setup/configuration, timeouts, and authentication
inherent in the other remote access methods but still
create a connection which uses the remote protocol.

   <p>To connect using the <code>fork</code> method, use
&lsquo;<samp><span class="samp">:fork:</span></samp>&rsquo; and the pathname to your local
repository.  For example:

<pre class="example">     cvs -d :fork:/usr/local/cvsroot checkout foo
</pre>
   <p><a name="index-CVS_005fSERVER_002c-and-fork-method-195"></a>As with <code>:ext:</code>, the server is called &lsquo;<samp><span class="samp">cvs</span></samp>&rsquo;
by default, or the value of the <code>CVS_SERVER</code>
environment variable.

<div class="node">
<a name="Write-proxies"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Connecting-via-fork">Connecting via fork</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Remote-repositories">Remote repositories</a>

</div>

<h4 class="subsection">2.9.8 Distributing load across several CVS servers</h4>

<p><a name="index-PrimaryServer_002c-in-CVSROOT_002fconfig-196"></a><a name="index-Primary-server-197"></a><a name="index-Secondary-server-198"></a><a name="index-proxy_002c-write-199"></a><a name="index-write-proxy-200"></a><span class="sc">cvs</span> can be configured to distribute usage across several <span class="sc">cvs</span>
servers.  This is accomplished by means of one or more <dfn>write proxies</dfn>, or
<dfn>secondary servers</dfn>, for a single <dfn>primary server</dfn>.

   <p>When a <span class="sc">cvs</span> client accesses a secondary server and only sends read
requests, then the secondary server handles the entire request.  If the client
sends any write requests, however, the secondary server asks the client to
redirect its write request to the primary server, if the client supports
redirect requests, and otherwise becomes a transparent proxy for the primary
server, which actually handles the write request.

   <p>In this manner, any number of read-only secondary servers may be configured as
write proxies for the primary server, effectively distributing the load from
all read operations between the secondary servers and restricting the load on
the primary server to write operations and pushing changes to the secondaries.

   <p>Primary servers will not automatically push changes to secondaries.  This must
be configured via <samp><span class="file">loginfo</span></samp>, <samp><span class="file">postadmin</span></samp>, <samp><span class="file">posttag</span></samp>, &amp;
<samp><span class="file">postwatch</span></samp> scripts (see <a href="#Trigger-Scripts">Trigger Scripts</a>) like the following:

<pre class="example">     ALL	rsync -gopr -essh ./ secondary:/cvsroot/%p &amp;
</pre>
   <p>You would probably actually want to lock directories for write on the secondary
and for read on the primary before running the &lsquo;<samp><span class="samp">rsync</span></samp>&rsquo; in the above
example, but describing such a setup is beyond the scope of this document.

   <p>A secondary advantage of a write proxy setup is that users pointing at the
secondary server can still execute fast read operations while on a network that
connects to the primary over a slow link or even one where the link to the
primary is periodically broken.  Only write operations will require the network
link to the primary.

   <p>To configure write proxies, the primary must be specified with the
&lsquo;<samp><span class="samp">PrimaryServer</span></samp>&rsquo; option in <samp><span class="file">CVSROOT/config</span></samp> (see <a href="#config">config</a>).  For the
transparent proxy mode to work, all secondary servers must also be running the
same version of the <span class="sc">cvs</span> server, or at least one that provides the same
list of supported requests to the client as the primary server.  This is not
necessary for redirection.

   <p>Once a primary server is configured, secondary servers may be configured by:

     <ol type=1 start=1>
<li>Duplicating the primary repository at the new location. 
<li>Setting up the <samp><span class="file">loginfo</span></samp>, <samp><span class="file">postadmin</span></samp>, <samp><span class="file">posttag</span></samp>, and
<samp><span class="file">postwatch</span></samp> files on the primary to propagate writes to the new secondary. 
<li>Configure remote access to the secondary(ies) as you would configure access
to any other CVS server (see <a href="#Remote-repositories">Remote repositories</a>). 
<li>Ensuring that <code>--allow-root=</code><var>secondary-cvsroot</var> is passed to
<strong>all</strong> incovations of the secondary server if the path to the <span class="sc">cvs</span>
repository directory is different on the two servers and you wish to support
clients that do not handle the &lsquo;<samp><span class="samp">Redirect</span></samp>&rsquo; resopnse (CVS 1.12.9 and earlier
clients do not handle the &lsquo;<samp><span class="samp">Redirect</span></samp>&rsquo; response).

     <p>Please note, again, that writethrough proxy suport requires
<code>--allow-root=</code><var>secondary-cvsroot</var> to be specified for <strong>all</strong>
incovations of the secondary server, not just &lsquo;<samp><span class="samp">pserver</span></samp>&rsquo; invocations. 
This may require a wrapper script for the <span class="sc">cvs</span> executable
on your server machine.
        </ol>

<!--  -->
<div class="node">
<a name="Read-only-access"></a>
<a name="Read_002donly-access"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Server-temporary-directory">Server temporary directory</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Remote-repositories">Remote repositories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.10 Read-only repository access</h3>

<p><a name="index-Read_002donly-repository-access-201"></a><a name="index-readers-_0028admin-file_0029-202"></a><a name="index-writers-_0028admin-file_0029-203"></a>
        It is possible to grant read-only repository
access to people using the password-authenticated
server (see <a href="#Password-authenticated">Password authenticated</a>).  (The
other access methods do not have explicit support for
read-only users because those methods all assume login
access to the repository machine anyway, and therefore
the user can do whatever local file permissions allow
her to do.)

   <p>A user who has read-only access can do only
those <span class="sc">cvs</span> operations which do not modify the
repository, except for certain &ldquo;administrative&rdquo; files
(such as lock files and the history file).  It may be
desirable to use this feature in conjunction with
user-aliasing (see <a href="#Password-authentication-server">Password authentication server</a>).

   <p>Unlike with previous versions of <span class="sc">cvs</span>, read-only
users should be able merely to read the repository, and
not to execute programs on the server or otherwise gain
unexpected levels of access.  Or to be more accurate,
the <em>known</em> holes have been plugged.  Because this
feature is new and has not received a comprehensive
security audit, you should use whatever level of
caution seems warranted given your attitude concerning
security.

   <p>There are two ways to specify read-only access
for a user: by inclusion, and by exclusion.

   <p>"Inclusion" means listing that user
specifically in the <samp><span class="file">$CVSROOT/CVSROOT/readers</span></samp>
file, which is simply a newline-separated list of
users.  Here is a sample <samp><span class="file">readers</span></samp> file:

<pre class="example">     melissa
     splotnik
     jrandom
</pre>
   <p class="noindent">(Don't forget the newline after the last user.)

   <p>"Exclusion" means explicitly listing everyone
who has <em>write</em> access&mdash;if the file

<pre class="example">     $CVSROOT/CVSROOT/writers
</pre>
   <p class="noindent">exists, then only
those users listed in it have write access, and
everyone else has read-only access (of course, even the
read-only users still need to be listed in the
<span class="sc">cvs</span> <samp><span class="file">passwd</span></samp> file).  The
<samp><span class="file">writers</span></samp> file has the same format as the
<samp><span class="file">readers</span></samp> file.

   <p>Note: if your <span class="sc">cvs</span> <samp><span class="file">passwd</span></samp>
file maps cvs users onto system users (see <a href="#Password-authentication-server">Password authentication server</a>), make sure you deny or grant
read-only access using the <em>cvs</em> usernames, not
the system usernames.  That is, the <samp><span class="file">readers</span></samp> and
<samp><span class="file">writers</span></samp> files contain cvs usernames, which may
or may not be the same as system usernames.

   <p>Here is a complete description of the server's
behavior in deciding whether to grant read-only or
read-write access:

   <p>If <samp><span class="file">readers</span></samp> exists, and this user is
listed in it, then she gets read-only access.  Or if
<samp><span class="file">writers</span></samp> exists, and this user is NOT listed in
it, then she also gets read-only access (this is true
even if <samp><span class="file">readers</span></samp> exists but she is not listed
there).  Otherwise, she gets full read-write access.

   <p>Of course there is a conflict if the user is
listed in both files.  This is resolved in the more
conservative way, it being better to protect the
repository too much than too little: such a user gets
read-only access.

<div class="node">
<a name="Server-temporary-directory"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Read_002donly-access">Read-only access</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Repository">Repository</a>

</div>

<h3 class="section">2.11 Temporary directories for the server</h3>

<p><a name="index-Temporary-directories_002c-and-server-204"></a><a name="index-Server_002c-temporary-directories-205"></a>
While running, the <span class="sc">cvs</span> server creates temporary
directories.  They are named

<pre class="example">     cvs-serv<var>pid</var>
</pre>
   <p class="noindent">where <var>pid</var> is the process identification number of
the server. 
They are located in the directory specified by
the &lsquo;<samp><span class="samp">-T</span></samp>&rsquo; global option (see <a href="#Global-options">Global options</a>),
the <code>TMPDIR</code> environment variable (see <a href="#Environment-variables">Environment variables</a>),
or, failing that, <samp><span class="file">/tmp</span></samp>.

   <p>In most cases the server will remove the temporary
directory when it is done, whether it finishes normally
or abnormally.  However, there are a few cases in which
the server does not or cannot remove the temporary
directory, for example:

     <ul>
<li>If the server aborts due to an internal server error,
it may preserve the directory to aid in debugging

     <li>If the server is killed in a way that it has no way of
cleaning up (most notably, &lsquo;<samp><span class="samp">kill -KILL</span></samp>&rsquo; on unix).

     <li>If the system shuts down without an orderly shutdown,
which tells the server to clean up. 
</ul>

   <p>In cases such as this, you will need to manually remove
the <samp><span class="file">cvs-serv</span><var>pid</var></samp> directories.  As long as
there is no server running with process identification
number <var>pid</var>, it is safe to do so.

<!--  -->
<div class="node">
<a name="Starting-a-new-project"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Revisions">Revisions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Repository">Repository</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 Starting a project with CVS</h2>

<p><a name="index-Starting-a-project-with-CVS-206"></a><a name="index-Creating-a-project-207"></a>
<!-- moduledb- -->
Because renaming files and moving them between
directories is somewhat inconvenient, the first thing
you do when you start a new project should be to think
through your file organization.  It is not impossible
to rename or move files, but it does increase the
potential for confusion and <span class="sc">cvs</span> does have some
quirks particularly in the area of renaming
directories.  See <a href="#Moving-files">Moving files</a>.

   <p>What to do next depends on the situation at hand.

<ul class="menu">
<li><a accesskey="1" href="#Setting-up-the-files">Setting up the files</a>:         Getting the files into the repository
<li><a accesskey="2" href="#Defining-the-module">Defining the module</a>:          How to make a module of the files
</ul>
<!--  File permissions! -->

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Setting-up-the-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Defining-the-module">Defining the module</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Starting-a-new-project">Starting a new project</a>

</div>

<h3 class="section">3.1 Setting up the files</h3>

<p>The first step is to create the files inside the repository.  This can
be done in a couple of different ways.

<!--  The contributed scripts -->
<ul class="menu">
<li><a accesskey="1" href="#From-files">From files</a>:                   This method is useful with old projects
                                where files already exists. 
<li><a accesskey="2" href="#From-other-version-control-systems">From other version control systems</a>:   Old projects where you want to
                                        preserve history from another system. 
<li><a accesskey="3" href="#From-scratch">From scratch</a>:                 Creating a directory tree from scratch. 
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="From-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#From-other-version-control-systems">From other version control systems</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Setting-up-the-files">Setting up the files</a>

</div>

<h4 class="subsection">3.1.1 Creating a directory tree from a number of files</h4>

<p><a name="index-Importing-files-208"></a>
When you begin using <span class="sc">cvs</span>, you will probably already have several
projects that can be
put under <span class="sc">cvs</span> control.  In these cases the easiest way is to use the
<code>import</code> command.  An example is probably the easiest way to
explain how to use it.  If the files you want to install in
<span class="sc">cvs</span> reside in <samp><var>wdir</var></samp>, and you want them to appear in the
repository as <samp><span class="file">$CVSROOT/yoyodyne/</span><var>rdir</var></samp>, you can do this:

<pre class="example">     $ cd <var>wdir</var>
     $ cvs import -m "Imported sources" yoyodyne/<var>rdir</var> yoyo start
</pre>
   <p>Unless you supply a log message with the &lsquo;<samp><span class="samp">-m</span></samp>&rsquo;
flag, <span class="sc">cvs</span> starts an editor and prompts for a
message.  The string &lsquo;<samp><span class="samp">yoyo</span></samp>&rsquo; is a <dfn>vendor tag</dfn>,
and &lsquo;<samp><span class="samp">start</span></samp>&rsquo; is a <dfn>release tag</dfn>.  They may fill
no purpose in this context, but since <span class="sc">cvs</span> requires
them they must be present.  See <a href="#Tracking-sources">Tracking sources</a>, for
more information about them.

   <p>You can now verify that it worked, and remove your
original source directory. 
<!-- FIXME: Need to say more about "verify that it -->
<!-- worked".  What should the user look for in the output -->
<!-- from "diff -r"? -->

<pre class="example">     $ cd ..
     $ cvs checkout yoyodyne/<var>rdir</var>       # <span class="roman">Explanation below</span>
     $ diff -r <var>wdir</var> yoyodyne/<var>rdir</var>
     $ rm -r <var>wdir</var>
</pre>
   <p class="noindent">Erasing the original sources is a good idea, to make sure that you do
not accidentally edit them in <var>wdir</var>, bypassing <span class="sc">cvs</span>. 
Of course, it would be wise to make sure that you have
a backup of the sources before you remove them.

   <p>The <code>checkout</code> command can either take a module
name as argument (as it has done in all previous
examples) or a path name relative to <code>$CVSROOT</code>,
as it did in the example above.

   <p>It is a good idea to check that the permissions
<span class="sc">cvs</span> sets on the directories inside <code>$CVSROOT</code>
are reasonable, and that they belong to the proper
groups.  See <a href="#File-permissions">File permissions</a>.

   <p>If some of the files you want to import are binary, you
may want to use the wrappers features to specify which
files are binary and which are not.  See <a href="#Wrappers">Wrappers</a>.

<!-- The node name is too long, but I am having trouble -->
<!-- thinking of something more concise. -->
<div class="node">
<a name="From-other-version-control-systems"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#From-scratch">From scratch</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#From-files">From files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Setting-up-the-files">Setting up the files</a>

</div>

<h4 class="subsection">3.1.2 Creating Files From Other Version Control Systems</h4>

<p><a name="index-Importing-files_002c-from-other-version-control-systems-209"></a>
If you have a project which you are maintaining with
another version control system, such as <span class="sc">rcs</span>, you
may wish to put the files from that project into
<span class="sc">cvs</span>, and preserve the revision history of the
files.

     
<a name="index-RCS_002c-importing-files-from-210"></a>
<dl><dt>From RCS<dd>If you have been using <span class="sc">rcs</span>, find the <span class="sc">rcs</span>
files&mdash;usually a file named <samp><span class="file">foo.c</span></samp> will have its
<span class="sc">rcs</span> file in <samp><span class="file">RCS/foo.c,v</span></samp> (but it could be
other places; consult the <span class="sc">rcs</span> documentation for
details).  Then create the appropriate directories in
<span class="sc">cvs</span> if they do not already exist.  Then copy the
files into the appropriate directories in the <span class="sc">cvs</span>
repository (the name in the repository must be the name
of the source file with &lsquo;<samp><span class="samp">,v</span></samp>&rsquo; added; the files go
directly in the appropriate directory of the repository,
not in an <samp><span class="file">RCS</span></samp> subdirectory).  This is one of the
few times when it is a good idea to access the <span class="sc">cvs</span>
repository directly, rather than using <span class="sc">cvs</span>
commands.  Then you are ready to check out a new
working directory. 
<!-- Someday there probably should be a "cvs import -t -->
<!-- rcs" or some such.  It could even create magic -->
<!-- branches.  It could also do something about the case -->
<!-- where the RCS file had a (non-magic) "0" branch. -->

     <p>The <span class="sc">rcs</span> file should not be locked when you move it
into <span class="sc">cvs</span>; if it is, <span class="sc">cvs</span> will have trouble
letting you operate on it. 
<!-- What is the easiest way to unlock your files if you -->
<!-- have them locked?  Especially if you have a lot of them? -->
<!-- This is a CVS bug/misfeature; importing RCS files -->
<!-- should ignore whether they are locked and leave them in -->
<!-- an unlocked state.  Yet another reason for a separate -->
<!-- "import RCS file" command. -->

     <!-- How many is "many"? Or do they just import RCS files? -->
     <br><dt>From another version control system<dd>Many version control systems have the ability to export
<span class="sc">rcs</span> files in the standard format.  If yours does,
export the <span class="sc">rcs</span> files and then follow the above
instructions.

     <p>Failing that, probably your best bet is to write a
script that will check out the files one revision at a
time using the command line interface to the other
system, and then check the revisions into <span class="sc">cvs</span>. 
The <samp><span class="file">sccs2rcs</span></samp> script mentioned below may be a
useful example to follow.

     <p><a name="index-SCCS_002c-importing-files-from-211"></a><br><dt>From SCCS<dd>There is a script in the <samp><span class="file">contrib</span></samp> directory of
the <span class="sc">cvs</span> source distribution called <samp><span class="file">sccs2rcs</span></samp>
which converts <span class="sc">sccs</span> files to <span class="sc">rcs</span> files. 
Note: you must run it on a machine which has both
<span class="sc">sccs</span> and <span class="sc">rcs</span> installed, and like everything
else in contrib it is unsupported (your mileage may
vary).

     <p><a name="index-PVCS_002c-importing-files-from-212"></a><br><dt>From PVCS<dd>There is a script in the <samp><span class="file">contrib</span></samp> directory of
the <span class="sc">cvs</span> source distribution called <samp><span class="file">pvcs_to_rcs</span></samp>
which converts <span class="sc">pvcs</span> archives to <span class="sc">rcs</span> files. 
You must run it on a machine which has both
<span class="sc">pvcs</span> and <span class="sc">rcs</span> installed, and like everything
else in contrib it is unsupported (your mileage may
vary).  See the comments in the script for details. 
</dl>
   <!-- CMZ and/or PATCHY were systems that were used in the -->
<!-- high energy physics community (especially for -->
<!-- CERNLIB).  CERN has replaced them with CVS, but the -->
<!-- CAR format seems to live on as a way to submit -->
<!-- changes.  There is a program car2cvs which converts -->
<!-- but I'm not sure where one gets a copy. -->
<!-- Not sure it is worth mentioning here, since it would -->
<!-- appear to affect only one particular community. -->
<!-- Best page for more information is: -->
<!-- http://wwwcn1.cern.ch/asd/cvs/index.html -->
<!-- See also: -->
<!-- http://ecponion.cern.ch/ecpsa/cernlib.html -->

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="From-scratch"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#From-other-version-control-systems">From other version control systems</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Setting-up-the-files">Setting up the files</a>

</div>

<h4 class="subsection">3.1.3 Creating a directory tree from scratch</h4>

<!-- Also/instead should be documenting -->
<!-- $ cvs co -l . -->
<!-- $ mkdir tc -->
<!-- $ cvs add tc -->
<!-- $ cd tc -->
<!-- $ mkdir man -->
<!-- $ cvs add man -->
<!-- etc. -->
<!-- Using import to create the directories only is -->
<!-- probably a somewhat confusing concept. -->
<p>For a new project, the easiest thing to do is probably
to create an empty directory structure, like this:

<pre class="example">     $ mkdir tc
     $ mkdir tc/man
     $ mkdir tc/testing
</pre>
   <p>After that, you use the <code>import</code> command to create
the corresponding (empty) directory structure inside
the repository:

<pre class="example">     $ cd tc
     $ cvs import -m "Created directory structure" yoyodyne/<var>dir</var> yoyo start
</pre>
   <p>This will add yoyodyne/<var>dir</var> as a directory under
<code>$CVSROOT</code>.

   <p>Use <code>checkout</code> to get the new project.  Then, use <code>add</code>
to add files (and new directories) as needed.

<pre class="example">     $ cd ..
     $ cvs co yoyodyne/<var>dir</var>
</pre>
   <p>Check that the permissions <span class="sc">cvs</span> sets on the
directories inside <code>$CVSROOT</code> are reasonable.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Defining-the-module"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Setting-up-the-files">Setting up the files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Starting-a-new-project">Starting a new project</a>

</div>

<h3 class="section">3.2 Defining the module</h3>

<p><a name="index-Defining-a-module-213"></a><a name="index-Editing-the-modules-file-214"></a><a name="index-Module_002c-defining-215"></a><a name="index-Modules-file_002c-changing-216"></a>
The next step is to define the module in the
<samp><span class="file">modules</span></samp> file.  This is not strictly necessary,
but modules can be convenient in grouping together
related files and directories.

   <p>In simple cases these steps are sufficient to define a module.

     <ol type=1 start=1>
<li>Get a working copy of the modules file.

     <pre class="example">          $ cvs checkout CVSROOT/modules
          $ cd CVSROOT
</pre>
     <li>Edit the file and insert a line that defines the module.  See <a href="#Intro-administrative-files">Intro administrative files</a>, for an introduction.  See <a href="#modules">modules</a>, for a full
description of the modules file.  You can use the
following line to define the module &lsquo;<samp><span class="samp">tc</span></samp>&rsquo;:

     <pre class="example">          tc   yoyodyne/tc
</pre>
     <li>Commit your changes to the modules file.

     <pre class="example">          $ cvs commit -m "Added the tc module." modules
</pre>
     <li>Release the modules module.

     <pre class="example">          $ cd ..
          $ cvs release -d CVSROOT
</pre>
     </ol>

<!--  -->
<div class="node">
<a name="Revisions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Branching-and-merging">Branching and merging</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Starting-a-new-project">Starting a new project</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Revisions</h2>

<p>For many uses of <span class="sc">cvs</span>, one doesn't need to worry
too much about revision numbers; <span class="sc">cvs</span> assigns
numbers such as <code>1.1</code>, <code>1.2</code>, and so on, and
that is all one needs to know.  However, some people
prefer to have more knowledge and control concerning
how <span class="sc">cvs</span> assigns revision numbers.

   <p>If one wants to keep track of a set of revisions
involving more than one file, such as which revisions
went into a particular release, one uses a <dfn>tag</dfn>,
which is a symbolic revision which can be assigned to a
numeric revision in each file.

<ul class="menu">
<li><a accesskey="1" href="#Revision-numbers">Revision numbers</a>:             The meaning of a revision number
<li><a accesskey="2" href="#Versions-revisions-releases">Versions revisions releases</a>:   Terminology used in this manual
<li><a accesskey="3" href="#Assigning-revisions">Assigning revisions</a>:          Assigning revisions
<li><a accesskey="4" href="#Tags">Tags</a>:                         Tags--Symbolic revisions
<li><a accesskey="5" href="#Tagging-the-working-directory">Tagging the working directory</a>:   The cvs tag command
<li><a accesskey="6" href="#Tagging-by-date_002ftag">Tagging by date/tag</a>:          The cvs rtag command
<li><a accesskey="7" href="#Modifying-tags">Modifying tags</a>:               Adding, renaming, and deleting tags
<li><a accesskey="8" href="#Tagging-add_002fremove">Tagging add/remove</a>:           Tags with adding and removing files
<li><a accesskey="9" href="#Sticky-tags">Sticky tags</a>:                  Certain tags are persistent
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Revision-numbers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Versions-revisions-releases">Versions revisions releases</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.1 Revision numbers</h3>

<p><a name="index-Revision-numbers-217"></a><a name="index-Revision-tree-218"></a><a name="index-Linear-development-219"></a><a name="index-Number_002c-revision_002d-220"></a><a name="index-Decimal-revision-number-221"></a><a name="index-Branch-number-222"></a><a name="index-Number_002c-branch-223"></a>
Each version of a file has a unique <dfn>revision
number</dfn>.  Revision numbers look like &lsquo;<samp><span class="samp">1.1</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">1.2</span></samp>&rsquo;, &lsquo;<samp><span class="samp">1.3.2.2</span></samp>&rsquo; or even &lsquo;<samp><span class="samp">1.3.2.2.4.5</span></samp>&rsquo;. 
A revision number always has an even number of
period-separated decimal integers.  By default revision
1.1 is the first revision of a file.  Each successive
revision is given a new number by increasing the
rightmost number by one.  The following figure displays
a few revisions, with newer revisions to the right.

<pre class="example">            +-----+    +-----+    +-----+    +-----+    +-----+
            ! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !----! 1.5 !
            +-----+    +-----+    +-----+    +-----+    +-----+
</pre>
   <p>It is also possible to end up with numbers containing
more than one period, for example &lsquo;<samp><span class="samp">1.3.2.2</span></samp>&rsquo;.  Such
revisions represent revisions on branches
(see <a href="#Branching-and-merging">Branching and merging</a>); such revision numbers
are explained in detail in <a href="#Branches-and-revisions">Branches and revisions</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Versions-revisions-releases"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Assigning-revisions">Assigning revisions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Revision-numbers">Revision numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.2 Versions, revisions and releases</h3>

<p><a name="index-Revisions_002c-versions-and-releases-224"></a><a name="index-Versions_002c-revisions-and-releases-225"></a><a name="index-Releases_002c-revisions-and-versions-226"></a>
A file can have several versions, as described above. 
Likewise, a software product can have several versions. 
A software product is often given a version number such
as &lsquo;<samp><span class="samp">4.1.1</span></samp>&rsquo;.

   <p>Versions in the first sense are called <dfn>revisions</dfn>
in this document, and versions in the second sense are
called <dfn>releases</dfn>.  To avoid confusion, the word
<dfn>version</dfn> is almost never used in this document.

<div class="node">
<a name="Assigning-revisions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tags">Tags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Versions-revisions-releases">Versions revisions releases</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.3 Assigning revisions</h3>

<!-- We avoid the "major revision" terminology.  It seems -->
<!-- like jargon.  Hopefully "first number" is clear enough. -->
<!-- Well, in the context of software release numbers, -->
<!-- "major" and "minor" release or version numbers are -->
<!-- documented in at least the GNU Coding Standards, but I'm -->
<!-- still not sure I find that a valid reason to apply the -->
<!-- terminology to RCS revision numbers.  "First", "Second", -->
<!-- "subsequent", and so on is almost surely clearer, -->
<!-- especially to a novice reader. -DRP -->
<p>By default, <span class="sc">cvs</span> will assign numeric revisions by
leaving the first number the same and incrementing the
second number.  For example, <code>1.1</code>, <code>1.2</code>,
<code>1.3</code>, etc.

   <p>When adding a new file, the second number will always
be one and the first number will equal the highest
first number of any file in that directory.  For
example, the current directory contains files whose
highest numbered revisions are <code>1.7</code>, <code>3.1</code>,
and <code>4.12</code>, then an added file will be given the
numeric revision <code>4.1</code>. 
(When using client/server <span class="sc">cvs</span>,
only files that are actually sent to the server are considered.)

<!-- This is sort of redundant with something we said a -->
<!-- while ago.  Somewhere we need a better way of -->
<!-- introducing how the first number can be anything -->
<!-- except "1", perhaps.  Also I don't think this -->
<!-- presentation is clear on why we are discussing releases -->
<!-- and first numbers of numeric revisions in the same -->
<!-- breath. -->
   <p>Normally there is no reason to care
about the revision numbers&mdash;it is easier to treat them
as internal numbers that <span class="sc">cvs</span> maintains, and tags
provide a better way to distinguish between things like
release 1 versus release 2 of your product
(see <a href="#Tags">Tags</a>).  However, if you want to set the
numeric revisions, the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option to <code>cvs
commit</code> can do that.  The &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option implies the
&lsquo;<samp><span class="samp">-f</span></samp>&rsquo; option, in the sense that it causes the
files to be committed even if they are not modified.

   <p>For example, to bring all your files up to
revision 3.0 (including those that haven't changed),
you might invoke:

<pre class="example">     $ cvs commit -r 3.0
</pre>
   <p>Note that the number you specify with &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; must be
larger than any existing revision number.  That is, if
revision 3.0 exists, you cannot &lsquo;<samp><span class="samp">cvs commit
-r 1.3</span></samp>&rsquo;.  If you want to maintain several releases in
parallel, you need to use a branch (see <a href="#Branching-and-merging">Branching and merging</a>).

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Tags"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tagging-the-working-directory">Tagging the working directory</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assigning-revisions">Assigning revisions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.4 Tags&ndash;Symbolic revisions</h3>

<p><a name="index-Tags-227"></a>
The revision numbers live a life of their own.  They
need not have anything at all to do with the release
numbers of your software product.  Depending
on how you use <span class="sc">cvs</span> the revision numbers might change several times
between two releases.  As an example, some of the
source files that make up <span class="sc">rcs</span> 5.6 have the following
revision numbers:
<a name="index-RCS-revision-numbers-228"></a>
<pre class="example">     ci.c            5.21
     co.c            5.9
     ident.c         5.3
     rcs.c           5.12
     rcsbase.h       5.11
     rcsdiff.c       5.10
     rcsedit.c       5.11
     rcsfcmp.c       5.9
     rcsgen.c        5.10
     rcslex.c        5.11
     rcsmap.c        5.2
     rcsutil.c       5.10
</pre>
   <p><a name="index-tag-_0028subcommand_0029_002c-introduction-229"></a><a name="index-Tags_002c-symbolic-name-230"></a><a name="index-Symbolic-name-_0028tag_0029-231"></a><a name="index-Name_002c-symbolic-_0028tag_0029-232"></a><a name="index-HEAD_002c-as-reserved-tag-name-233"></a><a name="index-BASE_002c-as-reserved-tag-name-234"></a>You can use the <code>tag</code> command to give a symbolic name to a
certain revision of a file.  You can use the &lsquo;<samp><span class="samp">-v</span></samp>&rsquo; flag to the
<code>status</code> command to see all tags that a file has, and
which revision numbers they represent.  Tag names must
start with an uppercase or lowercase letter and can
contain uppercase and lowercase letters, digits,
&lsquo;<samp><span class="samp">-</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">_</span></samp>&rsquo;.  The two tag names <code>BASE</code>
and <code>HEAD</code> are reserved for use by <span class="sc">cvs</span>.  It
is expected that future names which are special to
<span class="sc">cvs</span> will be specially named, for example by
starting with &lsquo;<samp><span class="samp">.</span></samp>&rsquo;, rather than being named analogously to
<code>BASE</code> and <code>HEAD</code>, to avoid conflicts with
actual tag names. 
<!-- Including a character such as % or = has also been -->
<!-- suggested as the naming convention for future -->
<!-- special tag names.  Starting with . is nice because -->
<!-- that is not a legal tag name as far as RCS is concerned. -->
<!-- FIXME: CVS actually accepts quite a few characters -->
<!-- in tag names, not just the ones documented above -->
<!-- (see RCS_check_tag).  RCS -->
<!-- defines legitimate tag names by listing illegal -->
<!-- characters rather than legal ones.  CVS is said to lose its -->
<!-- mind if you try to use "/" (try making such a tag sticky -->
<!-- and using "cvs status" client/server-see remote -->
<!-- protocol format for entries line for probable cause). -->
<!-- TODO: The testsuite -->
<!-- should test for whatever are documented above as -->
<!-- officially-OK tag names, and CVS should at least reject -->
<!-- characters that won't work, like "/". -->

   <p>You'll want to choose some convention for naming tags,
based on information such as the name of the program
and the version number of the release.  For example,
one might take the name of the program, immediately
followed by the version number with &lsquo;<samp><span class="samp">.</span></samp>&rsquo; changed to
&lsquo;<samp><span class="samp">-</span></samp>&rsquo;, so that <span class="sc">cvs</span> 1.9 would be tagged with the name
<code>cvs1-9</code>.  If you choose a consistent convention,
then you won't constantly be guessing whether a tag is
<code>cvs-1-9</code> or <code>cvs1_9</code> or what.  You might
even want to consider enforcing your convention in the
<samp><span class="file">taginfo</span></samp> file (see <a href="#taginfo">taginfo</a>). 
<!-- Might be nice to say more about using taginfo this -->
<!-- way, like giving an example, or pointing out any particular -->
<!-- issues which arise. -->

   <p><a name="index-Adding-a-tag-235"></a><a name="index-Tags_002c-example-236"></a>The following example shows how you can add a tag to a
file.  The commands must be issued inside your working
directory.  That is, you should issue the
command in the directory where <samp><span class="file">backend.c</span></samp>
resides.

<pre class="example">     $ cvs tag rel-0-4 backend.c
     T backend.c
     $ cvs status -v backend.c
     ===================================================================
     File: backend.c         Status: Up-to-date
     
         Version:            1.4     Tue Dec  1 14:39:01 1992
         RCS Version:        1.4     /u/cvsroot/yoyodyne/tc/backend.c,v
         Sticky Tag:         (none)
         Sticky Date:        (none)
         Sticky Options:     (none)
     
         Existing Tags:
             rel-0-4                     (revision: 1.4)
     
</pre>
   <p>For a complete summary of the syntax of <code>cvs tag</code>,
including the various options, see <a href="#Invoking-CVS">Invoking CVS</a>.

   <p>There is seldom reason to tag a file in isolation.  A more common use is
to tag all the files that constitute a module with the same tag at
strategic points in the development life-cycle, such as when a release
is made.

<pre class="example">     $ cvs tag rel-1-0 .
     cvs tag: Tagging .
     T Makefile
     T backend.c
     T driver.c
     T frontend.c
     T parser.c
</pre>
   <p class="noindent">(When you give <span class="sc">cvs</span> a directory as argument, it generally applies the
operation to all the files in that directory, and (recursively), to any
subdirectories that it may contain.  See <a href="#Recursive-behavior">Recursive behavior</a>.)

   <p><a name="index-Retrieving-an-old-revision-using-tags-237"></a><a name="index-Tags_002c-retrieving-old-revisions-238"></a>The <code>checkout</code> command has a flag, &lsquo;<samp><span class="samp">-r</span></samp>&rsquo;, that lets you check out
a certain revision of a module.  This flag makes it easy to
retrieve the sources that make up release 1.0 of the module &lsquo;<samp><span class="samp">tc</span></samp>&rsquo; at
any time in the future:

<pre class="example">     $ cvs checkout -r rel-1-0 tc
</pre>
   <p class="noindent">This is useful, for instance, if someone claims that there is a bug in
that release, but you cannot find the bug in the current working copy.

   <p>You can also check out a module as it was on any branch at any given date. 
See <a href="#checkout-options">checkout options</a>.  When specifying &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-D</span></samp>&rsquo; to
any of these commands, you will need beware of sticky
tags; see <a href="#Sticky-tags">Sticky tags</a>.

   <p>When you tag more than one file with the same tag you
can think about the tag as "a curve drawn through a
matrix of filename vs. revision number."  Say we have 5
files with the following revisions:

<pre class="example">             file1   file2   file3   file4   file5
     
             1.1     1.1     1.1     1.1  /--1.1*      &lt;-*-  TAG
             1.2*-   1.2     1.2    -1.2*-
             1.3  \- 1.3*-   1.3   / 1.3
             1.4          \  1.4  /  1.4
                           \-1.5*-   1.5
                             1.6
</pre>
   <p>At some time in the past, the <code>*</code> versions were tagged. 
You can think of the tag as a handle attached to the curve
drawn through the tagged revisions.  When you pull on
the handle, you get all the tagged revisions.  Another
way to look at it is that you "sight" through a set of
revisions that is "flat" along the tagged revisions,
like this:

<pre class="example">             file1   file2   file3   file4   file5
     
                             1.1
                             1.2
                     1.1     1.3                       _
             1.1     1.2     1.4     1.1              /
             1.2*----1.3*----1.5*----1.2*----1.1*    (--- &lt;--- Look here
             1.3             1.6     1.3              \_
             1.4                     1.4
                                     1.5
</pre>
   <div class="node">
<a name="Tagging-the-working-directory"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tagging-by-date_002ftag">Tagging by date/tag</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tags">Tags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.5 Specifying what to tag from the working directory</h3>

<p><a name="index-tag-_0028subcommand_0029-239"></a>The example in the previous section demonstrates one of
the most common ways to choose which revisions to tag. 
Namely, running the <code>cvs tag</code> command without
arguments causes <span class="sc">cvs</span> to select the revisions which
are checked out in the current working directory.  For
example, if the copy of <samp><span class="file">backend.c</span></samp> in working
directory was checked out from revision 1.4, then
<span class="sc">cvs</span> will tag revision 1.4.  Note that the tag is
applied immediately to revision 1.4 in the repository;
tagging is not like modifying a file, or other
operations in which one first modifies the working
directory and then runs <code>cvs commit</code> to transfer
that modification to the repository.

   <p>One potentially surprising aspect of the fact that
<code>cvs tag</code> operates on the repository is that you
are tagging the checked-in revisions, which may differ
from locally modified files in your working directory. 
If you want to avoid doing this by mistake, specify the
&lsquo;<samp><span class="samp">-c</span></samp>&rsquo; option to <code>cvs tag</code>.  If there are any
locally modified files, <span class="sc">cvs</span> will abort with an
error before it tags any files:

<pre class="example">     $ cvs tag -c rel-0-4
     cvs tag: backend.c is locally modified
     cvs [tag aborted]: correct the above errors first!
</pre>
   <div class="node">
<a name="Tagging-by-date%2ftag"></a>
<a name="Tagging-by-date_002ftag"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Modifying-tags">Modifying tags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tagging-the-working-directory">Tagging the working directory</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.6 Specifying what to tag by date or revision</h3>

<p><a name="index-rtag-_0028subcommand_0029-240"></a>
The <code>cvs rtag</code> command tags the repository as of a
certain date or time (or can be used to tag the latest
revision).  <code>rtag</code> works directly on the
repository contents (it requires no prior checkout and
does not look for a working directory).

   <p>The following options specify which date or revision to
tag.  See <a href="#Common-options">Common options</a>, for a complete
description of them.

     <dl>
<dt><code>-D </code><var>date</var><dd>Tag the most recent revision no later than <var>date</var>.

     <br><dt><code>-f</code><dd>Only useful with the &lsquo;<samp><span class="samp">-D</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-r</span></samp>&rsquo;
flags.  If no matching revision is found, use the most
recent revision (instead of ignoring the file).

     <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Tag the revision already tagged with <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>. 
</dl>

   <p>The <code>cvs tag</code> command also allows one to specify
files by revision or date, using the same &lsquo;<samp><span class="samp">-r</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">-D</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; options.  However, this
feature is probably not what you want.  The reason is
that <code>cvs tag</code> chooses which files to tag based on
the files that exist in the working directory, rather
than the files which existed as of the given tag/date. 
Therefore, you are generally better off using <code>cvs
rtag</code>.  The exceptions might be cases like:

<pre class="example">     cvs tag -r 1.4 stable backend.c
</pre>
   <div class="node">
<a name="Modifying-tags"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tagging-add_002fremove">Tagging add/remove</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tagging-by-date_002ftag">Tagging by date/tag</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.7 Deleting, moving, and renaming tags</h3>

<!-- Also see: -->
<!-- "How do I move or rename a magic branch tag?" -->
<!-- in the FAQ (I think the issues it talks about still -->
<!-- apply, but this could use some sanity.sh work). -->
<p>Normally one does not modify tags.  They exist in order
to record the history of the repository and so deleting
them or changing their meaning would, generally, not be
what you want.

   <p>However, there might be cases in which one uses a tag
temporarily or accidentally puts one in the wrong
place.  Therefore, one might delete, move, or rename a
tag.

<p class="noindent"><em>WARNING: the commands in this section are
dangerous; they permanently discard historical
information and it can be difficult or impossible to
recover from errors.  If you are a </em><span class="sc">cvs</span><em>
administrator, you may consider restricting these
commands with the </em><samp><span class="file">taginfo</span></samp><em> file (see <a href="#taginfo">taginfo</a>).</em>

   <p><a name="index-Deleting-tags-241"></a><a name="index-Deleting-branch-tags-242"></a><a name="index-Removing-tags-243"></a><a name="index-Removing-branch-tags-244"></a><a name="index-Tags_002c-deleting-245"></a><a name="index-Branch-tags_002c-deleting-246"></a>To delete a tag, specify the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; option to either
<code>cvs tag</code> or <code>cvs rtag</code>.  For example:

<pre class="example">     cvs rtag -d rel-0-4 tc
</pre>
   <p class="noindent">deletes the non-branch tag <code>rel-0-4</code> from the module <code>tc</code>. 
In the event that branch tags are encountered within the repository
with the given name, a warning message will be issued and the branch
tag will not be deleted.  If you are absolutely certain you know what
you are doing, the <code>-B</code> option may be specified to allow deletion
of branch tags.  In that case, any non-branch tags encountered will
trigger warnings and will not be deleted.

<p class="noindent"><em>WARNING: Moving branch tags is very dangerous!  If you think
you need the </em><code>-B</code><em> option, think again and ask your </em><span class="sc">cvs</span><em>
administrator about it (if that isn't you).  There is almost certainly
another way to accomplish what you want to accomplish.</em>

   <p><a name="index-Moving-tags-247"></a><a name="index-Moving-branch-tags-248"></a><a name="index-Tags_002c-moving-249"></a><a name="index-Branch-tags_002c-moving-250"></a>When we say <dfn>move</dfn> a tag, we mean to make the same
name point to different revisions.  For example, the
<code>stable</code> tag may currently point to revision 1.4
of <samp><span class="file">backend.c</span></samp> and perhaps we want to make it
point to revision 1.6.  To move a non-branch tag, specify the
&lsquo;<samp><span class="samp">-F</span></samp>&rsquo; option to either <code>cvs tag</code> or <code>cvs
rtag</code>.  For example, the task just mentioned might be
accomplished as:

<pre class="example">     cvs tag -r 1.6 -F stable backend.c
</pre>
   <p class="noindent">If any branch tags are encountered in the repository
with the given name, a warning is issued and the branch
tag is not disturbed.  If you are absolutely certain you
wish to move the branch tag, the <code>-B</code> option may be specified. 
In that case, non-branch tags encountered with the given
name are ignored with a warning message.

<p class="noindent"><em>WARNING: Moving branch tags is very dangerous!  If you think you
need the </em><code>-B</code><em> option, think again and ask your </em><span class="sc">cvs</span><em>
administrator about it (if that isn't you).  There is almost certainly
another way to accomplish what you want to accomplish.</em>

   <p><a name="index-Renaming-tags-251"></a><a name="index-Tags_002c-renaming-252"></a>When we say <dfn>rename</dfn> a tag, we mean to make a
different name point to the same revisions as the old
tag.  For example, one may have misspelled the tag name
and want to correct it (hopefully before others are
relying on the old spelling).  To rename a tag, first
create a new tag using the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option to
<code>cvs rtag</code>, and then delete the old name.  (Caution:
this method will not work with branch tags.) 
This leaves the new tag on exactly the
same files as the old tag.  For example:

<pre class="example">     cvs rtag -r old-name-0-4 rel-0-4 tc
     cvs rtag -d old-name-0-4 tc
</pre>
   <div class="node">
<a name="Tagging-add%2fremove"></a>
<a name="Tagging-add_002fremove"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sticky-tags">Sticky tags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Modifying-tags">Modifying tags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.8 Tagging and adding and removing files</h3>

<p>The subject of exactly how tagging interacts with
adding and removing files is somewhat obscure; for the
most part <span class="sc">cvs</span> will keep track of whether files
exist or not without too much fussing.  By default,
tags are applied to only files which have a revision
corresponding to what is being tagged.  Files which did
not exist yet, or which were already removed, simply
omit the tag, and <span class="sc">cvs</span> knows to treat the absence
of a tag as meaning that the file didn't exist as of
that tag.

   <p>However, this can lose a small amount of information. 
For example, suppose a file was added and then removed. 
Then, if the tag is missing for that file, there is no
way to know whether the tag refers to the time before
the file was added, or the time after it was removed. 
If you specify the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option to <code>cvs rtag</code>,
then <span class="sc">cvs</span> tags the files which have been removed,
and thereby avoids this problem.  For example, one
might specify <code>-r HEAD</code> to tag the head.

   <p>On the subject of adding and removing files, the
<code>cvs rtag</code> command has a &lsquo;<samp><span class="samp">-a</span></samp>&rsquo; option which
means to clear the tag from removed files that would
not otherwise be tagged.  For example, one might
specify this option in conjunction with &lsquo;<samp><span class="samp">-F</span></samp>&rsquo; when
moving a tag.  If one moved a tag without &lsquo;<samp><span class="samp">-a</span></samp>&rsquo;,
then the tag in the removed files might still refer to
the old revision, rather than reflecting the fact that
the file had been removed.  I don't think this is
necessary if &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; is specified, as noted above.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Sticky-tags"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tagging-add_002fremove">Tagging add/remove</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Revisions">Revisions</a>

</div>

<h3 class="section">4.9 Sticky tags</h3>

<p><a name="index-Sticky-tags-253"></a><a name="index-Tags_002c-sticky-254"></a>
<!-- A somewhat related issue is per-directory sticky -->
<!-- tags (see comment at CVS/Tag in node Working -->
<!-- directory storage); we probably want to say -->
<!-- something like "you can set a sticky tag for only -->
<!-- some files, but you don't want to" or some such. -->

   <p>Sometimes a working copy's revision has extra data
associated with it, for example it might be on a branch
(see <a href="#Branching-and-merging">Branching and merging</a>), or restricted to
versions prior to a certain date by &lsquo;<samp><span class="samp">checkout -D</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">update -D</span></samp>&rsquo;.  Because this data persists &ndash;
that is, it applies to subsequent commands in the
working copy &ndash; we refer to it as <dfn>sticky</dfn>.

   <p>Most of the time, stickiness is an obscure aspect of
<span class="sc">cvs</span> that you don't need to think about.  However,
even if you don't want to use the feature, you may need
to know <em>something</em> about sticky tags (for
example, how to avoid them!).

   <p>You can use the <code>status</code> command to see if any
sticky tags or dates are set:

<pre class="example">     $ cvs status driver.c
     ===================================================================
     File: driver.c          Status: Up-to-date
     
         Version:            1.7.2.1 Sat Dec  5 19:35:03 1992
         RCS Version:        1.7.2.1 /u/cvsroot/yoyodyne/tc/driver.c,v
         Sticky Tag:         rel-1-0-patches (branch: 1.7.2)
         Sticky Date:        (none)
         Sticky Options:     (none)
     
</pre>
   <p><a name="index-Resetting-sticky-tags-255"></a><a name="index-Sticky-tags_002c-resetting-256"></a><a name="index-Deleting-sticky-tags-257"></a>The sticky tags will remain on your working files until
you delete them with &lsquo;<samp><span class="samp">cvs update -A</span></samp>&rsquo;.  The
&lsquo;<samp><span class="samp">-A</span></samp>&rsquo; option merges local changes into the version of the
file from the head of the trunk, removing any sticky tags,
dates, or options.  See <a href="#update">update</a> for more on the operation
of <code>cvs update</code>.

   <p><a name="index-Sticky-date-258"></a>The most common use of sticky tags is to identify which
branch one is working on, as described in
<a href="#Accessing-branches">Accessing branches</a>.  However, non-branch
sticky tags have uses as well.  For example,
suppose that you want to avoid updating your working
directory, to isolate yourself from possibly
destabilizing changes other people are making.  You
can, of course, just refrain from running <code>cvs
update</code>.  But if you want to avoid updating only a
portion of a larger tree, then sticky tags can help. 
If you check out a certain revision (such as 1.4) it
will become sticky.  Subsequent <code>cvs update</code>
commands will
not retrieve the latest revision until you reset the
tag with <code>cvs update -A</code>.  Likewise, use of the
&lsquo;<samp><span class="samp">-D</span></samp>&rsquo; option to <code>update</code> or <code>checkout</code>
sets a <dfn>sticky date</dfn>, which, similarly, causes that
date to be used for future retrievals.

   <p>People often want to retrieve an old version of
a file without setting a sticky tag.  This can
be done with the &lsquo;<samp><span class="samp">-p</span></samp>&rsquo; option to <code>checkout</code> or
<code>update</code>, which sends the contents of the file to
standard output.  For example:
<pre class="example">     $ cvs update -p -r 1.1 file1 &gt;file1
     ===================================================================
     Checking out file1
     RCS:  /tmp/cvs-sanity/cvsroot/first-dir/Attic/file1,v
     VERS: 1.1
     ***************
     $
</pre>
   <p>However, this isn't the easiest way, if you are asking
how to undo a previous checkin (in this example, put
<samp><span class="file">file1</span></samp> back to the way it was as of revision
1.1).  In that case you are better off using the
&lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option to <code>update</code>; for further
discussion see <a href="#Merging-two-revisions">Merging two revisions</a>.

<!--  -->
<div class="node">
<a name="Branching-and-merging"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Recursive-behavior">Recursive behavior</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Revisions">Revisions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 Branching and merging</h2>

<p><a name="index-Branching-259"></a><a name="index-Merging-260"></a><a name="index-Copying-changes-261"></a><a name="index-Main-trunk-and-branches-262"></a><a name="index-Revision-tree_002c-making-branches-263"></a><a name="index-Branches_002c-copying-changes-between-264"></a><a name="index-Changes_002c-copying-between-branches-265"></a><a name="index-Modifications_002c-copying-between-branches-266"></a>
<span class="sc">cvs</span> allows you to isolate changes onto a separate
line of development, known as a <dfn>branch</dfn>.  When you
change files on a branch, those changes do not appear
on the main trunk or other branches.

   <p>Later you can move changes from one branch to another
branch (or the main trunk) by <dfn>merging</dfn>.  Merging
involves first running <code>cvs update -j</code>, to merge
the changes into the working directory. 
You can then commit that revision, and thus effectively
copy the changes onto another branch.

<ul class="menu">
<li><a accesskey="1" href="#Branches-motivation">Branches motivation</a>:          What branches are good for
<li><a accesskey="2" href="#Creating-a-branch">Creating a branch</a>:            Creating a branch
<li><a accesskey="3" href="#Accessing-branches">Accessing branches</a>:           Checking out and updating branches
<li><a accesskey="4" href="#Branches-and-revisions">Branches and revisions</a>:       Branches are reflected in revision numbers
<li><a accesskey="5" href="#Magic-branch-numbers">Magic branch numbers</a>:         Magic branch numbers
<li><a accesskey="6" href="#Merging-a-branch">Merging a branch</a>:             Merging an entire branch
<li><a accesskey="7" href="#Merging-more-than-once">Merging more than once</a>:       Merging from a branch several times
<li><a accesskey="8" href="#Merging-two-revisions">Merging two revisions</a>:        Merging differences between two revisions
<li><a accesskey="9" href="#Merging-adds-and-removals">Merging adds and removals</a>:    What if files are added or removed? 
<li><a href="#Merging-and-keywords">Merging and keywords</a>:         Avoiding conflicts due to keyword substitution
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Branches-motivation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Creating-a-branch">Creating a branch</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.1 What branches are good for</h3>

<p><a name="index-Branches-motivation-267"></a><a name="index-What-branches-are-good-for-268"></a><a name="index-Motivation-for-branches-269"></a>
<!-- FIXME: this node mentions one way to use branches, -->
<!-- but it is by no means the only way.  For example, -->
<!-- the technique of committing a new feature on a branch, -->
<!-- until it is ready for the main trunk.  The whole -->
<!-- thing is generally speaking more akin to the -->
<!-- "Revision management" node although it isn't clear to -->
<!-- me whether policy matters should be centralized or -->
<!-- distributed throughout the relevant sections. -->
Suppose that release 1.0 of tc has been made.  You are continuing to
develop tc, planning to create release 1.1 in a couple of months.  After a
while your customers start to complain about a fatal bug.  You check
out release 1.0 (see <a href="#Tags">Tags</a>) and find the bug
(which turns out to have a trivial fix).  However, the current revision
of the sources are in a state of flux and are not expected to be stable
for at least another month.  There is no way to make a
bug fix release based on the newest sources.

   <p>The thing to do in a situation like this is to create a <dfn>branch</dfn> on
the revision trees for all the files that make up
release 1.0 of tc.  You can then make
modifications to the branch without disturbing the main trunk.  When the
modifications are finished you can elect to either incorporate them on
the main trunk, or leave them on the branch.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Creating-a-branch"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Accessing-branches">Accessing branches</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Branches-motivation">Branches motivation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.2 Creating a branch</h3>

<p><a name="index-Creating-a-branch-270"></a><a name="index-Branch_002c-creating-a-271"></a><a name="index-tag-_0028subcommand_0029_002c-creating-a-branch-using-272"></a><a name="index-rtag-_0028subcommand_0029_002c-creating-a-branch-using-273"></a>
You can create a branch with <code>tag -b</code>; for
example, assuming you're in a working copy:

<pre class="example">     $ cvs tag -b rel-1-0-patches
</pre>
   <!-- FIXME: we should be more explicit about the value of -->
<!-- having a tag on the branchpoint.  For example -->
<!-- "cvs tag rel-1-0-patches-branchpoint" before -->
<!-- the "cvs tag -b".  This points out that -->
<!-- rel-1-0-patches is a pretty awkward name for -->
<!-- this example (more so than for the rtag example -->
<!-- below). -->
   <p>This splits off a branch based on the current revisions
in the working copy, assigning that branch the name
&lsquo;<samp><span class="samp">rel-1-0-patches</span></samp>&rsquo;.

   <p>It is important to understand that branches get created
in the repository, not in the working copy.  Creating a
branch based on current revisions, as the above example
does, will <em>not</em> automatically switch the working
copy to be on the new branch.  For information on how
to do that, see <a href="#Accessing-branches">Accessing branches</a>.

   <p>You can also create a branch without reference to any
working copy, by using <code>rtag</code>:

<pre class="example">     $ cvs rtag -b -r rel-1-0 rel-1-0-patches tc
</pre>
   <p>&lsquo;<samp><span class="samp">-r rel-1-0</span></samp>&rsquo; says that this branch should be
rooted at the revision that
corresponds to the tag &lsquo;<samp><span class="samp">rel-1-0</span></samp>&rsquo;.  It need not
be the most recent revision &ndash; it's often useful to
split a branch off an old revision (for example, when
fixing a bug in a past release otherwise known to be
stable).

   <p>As with &lsquo;<samp><span class="samp">tag</span></samp>&rsquo;, the &lsquo;<samp><span class="samp">-b</span></samp>&rsquo; flag tells
<code>rtag</code> to create a branch (rather than just a
symbolic revision name).  Note that the numeric
revision number that matches &lsquo;<samp><span class="samp">rel-1-0</span></samp>&rsquo; will
probably be different from file to file.

   <p>So, the full effect of the command is to create a new
branch &ndash; named &lsquo;<samp><span class="samp">rel-1-0-patches</span></samp>&rsquo; &ndash; in module
&lsquo;<samp><span class="samp">tc</span></samp>&rsquo;, rooted in the revision tree at the point tagged
by &lsquo;<samp><span class="samp">rel-1-0</span></samp>&rsquo;.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Accessing-branches"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Branches-and-revisions">Branches and revisions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Creating-a-branch">Creating a branch</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.3 Accessing branches</h3>

<p><a name="index-Check-out-a-branch-274"></a><a name="index-Retrieve-a-branch-275"></a><a name="index-Access-a-branch-276"></a><a name="index-Identifying-a-branch-277"></a><a name="index-Branch_002c-check-out-278"></a><a name="index-Branch_002c-retrieving-279"></a><a name="index-Branch_002c-accessing-280"></a><a name="index-Branch_002c-identifying-281"></a>
You can retrieve a branch in one of two ways: by
checking it out fresh from the repository, or by
switching an existing working copy over to the branch.

   <p>To check out a branch from the repository, invoke
&lsquo;<samp><span class="samp">checkout</span></samp>&rsquo; with the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; flag, followed by
the tag name of the branch (see <a href="#Creating-a-branch">Creating a branch</a>):

<pre class="example">     $ cvs checkout -r rel-1-0-patches tc
</pre>
   <p>Or, if you already have a working copy, you can switch
it to a given branch with &lsquo;<samp><span class="samp">update -r</span></samp>&rsquo;:

<pre class="example">     $ cvs update -r rel-1-0-patches tc
</pre>
   <p class="noindent">or equivalently:

<pre class="example">     $ cd tc
     $ cvs update -r rel-1-0-patches
</pre>
   <p>It does not matter if the working copy was originally
on the main trunk or on some other branch &ndash; the above
command will switch it to the named branch.  And
similarly to a regular &lsquo;<samp><span class="samp">update</span></samp>&rsquo; command,
&lsquo;<samp><span class="samp">update -r</span></samp>&rsquo; merges any changes you have made,
notifying you of conflicts where they occur.

   <p>Once you have a working copy tied to a particular
branch, it remains there until you tell it otherwise. 
This means that changes checked in from the working
copy will add new revisions on that branch, while
leaving the main trunk and other branches unaffected.

   <p><a name="index-Branches_002c-sticky-282"></a>To find out what branch a working copy is on, you can
use the &lsquo;<samp><span class="samp">status</span></samp>&rsquo; command.  In its output, look for
the field named &lsquo;<samp><span class="samp">Sticky tag</span></samp>&rsquo; (see <a href="#Sticky-tags">Sticky tags</a>)
&ndash; that's <span class="sc">cvs</span>'s way of telling you the branch, if
any, of the current working files:

<pre class="example">     $ cvs status -v driver.c backend.c
     ===================================================================
     File: driver.c          Status: Up-to-date
     
         Version:            1.7     Sat Dec  5 18:25:54 1992
         RCS Version:        1.7     /u/cvsroot/yoyodyne/tc/driver.c,v
         Sticky Tag:         rel-1-0-patches (branch: 1.7.2)
         Sticky Date:        (none)
         Sticky Options:     (none)
     
         Existing Tags:
             rel-1-0-patches             (branch: 1.7.2)
             rel-1-0                     (revision: 1.7)
     
     ===================================================================
     File: backend.c         Status: Up-to-date
     
         Version:            1.4     Tue Dec  1 14:39:01 1992
         RCS Version:        1.4     /u/cvsroot/yoyodyne/tc/backend.c,v
         Sticky Tag:         rel-1-0-patches (branch: 1.4.2)
         Sticky Date:        (none)
         Sticky Options:     (none)
     
         Existing Tags:
             rel-1-0-patches             (branch: 1.4.2)
             rel-1-0                     (revision: 1.4)
             rel-0-4                     (revision: 1.4)
     
</pre>
   <p>Don't be confused by the fact that the branch numbers
for each file are different (&lsquo;<samp><span class="samp">1.7.2</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">1.4.2</span></samp>&rsquo; respectively).  The branch tag is the
same, &lsquo;<samp><span class="samp">rel-1-0-patches</span></samp>&rsquo;, and the files are
indeed on the same branch.  The numbers simply reflect
the point in each file's revision history at which the
branch was made.  In the above example, one can deduce
that &lsquo;<samp><span class="samp">driver.c</span></samp>&rsquo; had been through more changes than
&lsquo;<samp><span class="samp">backend.c</span></samp>&rsquo; before this branch was created.

   <p>See <a href="#Branches-and-revisions">Branches and revisions</a> for details about how
branch numbers are constructed.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Branches-and-revisions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Magic-branch-numbers">Magic branch numbers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Accessing-branches">Accessing branches</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.4 Branches and revisions</h3>

<p><a name="index-Branch-number-283"></a><a name="index-Number_002c-branch-284"></a><a name="index-Revision-numbers-_0028branches_0029-285"></a>
Ordinarily, a file's revision history is a linear
series of increments (see <a href="#Revision-numbers">Revision numbers</a>):

<pre class="example">            +-----+    +-----+    +-----+    +-----+    +-----+
            ! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !----! 1.5 !
            +-----+    +-----+    +-----+    +-----+    +-----+
</pre>
   <p>However, <span class="sc">cvs</span> is not limited to linear development.  The
<dfn>revision tree</dfn> can be split into <dfn>branches</dfn>,
where each branch is a self-maintained line of
development.  Changes made on one branch can easily be
moved back to the main trunk.

   <p>Each branch has a <dfn>branch number</dfn>, consisting of an
odd number of period-separated decimal integers.  The
branch number is created by appending an integer to the
revision number where the corresponding branch forked
off.  Having branch numbers allows more than one branch
to be forked off from a certain revision.

   <p>All revisions on a branch have revision numbers formed
by appending an ordinal number to the branch number. 
The following figure illustrates branching with an
example.

<pre class="example">     <!-- This example used to have a 1.2.2.4 revision, which -->
     <!-- might help clarify that development can continue on -->
     <!-- 1.2.2.  Might be worth reinstating if it can be done -->
     <!-- without overfull hboxes. -->
                                                           +-------------+
                                Branch 1.2.2.3.2 -&gt;        ! 1.2.2.3.2.1 !
                                                         / +-------------+
                                                        /
                                                       /
                      +---------+    +---------+    +---------+
     Branch 1.2.2 -&gt; _! 1.2.2.1 !----! 1.2.2.2 !----! 1.2.2.3 !
                    / +---------+    +---------+    +---------+
                   /
                  /
     +-----+    +-----+    +-----+    +-----+    +-----+
     ! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !----! 1.5 !  &lt;- The main trunk
     +-----+    +-----+    +-----+    +-----+    +-----+
                     !
                     !
                     !   +---------+    +---------+    +---------+
     Branch 1.2.4 -&gt; +---! 1.2.4.1 !----! 1.2.4.2 !----! 1.2.4.3 !
                         +---------+    +---------+    +---------+
</pre>
   <!--    However, at least for me the figure is not enough.  I suggest more -->
<!--    text to accompany it.  "A picture is worth a thousand words", so you -->
<!--    have to make sure the reader notices the couple of hundred words -->
<!--    *you* had in mind more than the others! -->
<!--    Why an even number of segments?  This section implies that this is -->
<!--    how the main trunk is distinguished from branch roots, but you never -->
<!--    explicitly say that this is the purpose of the [by itself rather -->
<!--    surprising] restriction to an even number of segments. -->
   <p>The exact details of how the branch number is
constructed is not something you normally need to be
concerned about, but here is how it works: When
<span class="sc">cvs</span> creates a branch number it picks the first
unused even integer, starting with 2.  So when you want
to create a branch from revision 6.4 it will be
numbered 6.4.2.  All branch numbers ending in a zero
(such as 6.4.0) are used internally by <span class="sc">cvs</span>
(see <a href="#Magic-branch-numbers">Magic branch numbers</a>).  The branch 1.1.1 has a
special meaning.  See <a href="#Tracking-sources">Tracking sources</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Magic-branch-numbers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Merging-a-branch">Merging a branch</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Branches-and-revisions">Branches and revisions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.5 Magic branch numbers</h3>

<!-- Want xref to here from "log"? -->
<p>This section describes a <span class="sc">cvs</span> feature called
<dfn>magic branches</dfn>.  For most purposes, you need not
worry about magic branches; <span class="sc">cvs</span> handles them for
you.  However, they are visible to you in certain
circumstances, so it may be useful to have some idea of
how it works.

   <p>Externally, branch numbers consist of an odd number of
dot-separated decimal integers.  See <a href="#Revision-numbers">Revision numbers</a>.  That is not the whole truth, however.  For
efficiency reasons <span class="sc">cvs</span> sometimes inserts an extra 0
in the second rightmost position (1.2.4 becomes
1.2.0.4, 8.9.10.11.12 becomes 8.9.10.11.0.12 and so
on).

   <p><span class="sc">cvs</span> does a pretty good job at hiding these so
called magic branches, but in a few places the hiding
is incomplete:

     <ul>
<li>The magic branch number appears in the output from
<code>cvs log</code>. 
<!-- What output should appear instead? -->

     <li>You cannot specify a symbolic branch name to <code>cvs
admin</code>.

   </ul>

<!-- Can CVS do this automatically the first time -->
<!-- you check something in to that branch?  Should -->
<!-- it? -->
   <p>You can use the <code>admin</code> command to reassign a
symbolic name to a branch the way <span class="sc">rcs</span> expects it
to be.  If <code>R4patches</code> is assigned to the branch
1.4.2 (magic branch number 1.4.0.2) in file
<samp><span class="file">numbers.c</span></samp> you can do this:

<pre class="example">     $ cvs admin -NR4patches:1.4.2 numbers.c
</pre>
   <p>It only works if at least one revision is already
committed on the branch.  Be very careful so that you
do not assign the tag to the wrong number.  (There is
no way to see how the tag was assigned yesterday).

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Merging-a-branch"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Merging-more-than-once">Merging more than once</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Magic-branch-numbers">Magic branch numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.6 Merging an entire branch</h3>

<p><a name="index-Merging-a-branch-286"></a><a name="index-g_t_002dj-_0028merging-branches_0029-287"></a>
You can merge changes made on a branch into your working copy by giving
the &lsquo;<samp><span class="samp">-j </span><var>branchname</var></samp>&rsquo; flag to the <code>update</code> subcommand.  With one
&lsquo;<samp><span class="samp">-j </span><var>branchname</var></samp>&rsquo; option it merges the changes made between the
greatest common ancestor (GCA) of the branch and the destination revision (in
the simple case below the GCA is the point where the branch forked) and the
newest revision on that branch into your working copy.

   <p><a name="index-Join-288"></a>The &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; stands for &ldquo;join&rdquo;.

   <p><a name="index-Branch-merge-example-289"></a><a name="index-Example_002c-branch-merge-290"></a><a name="index-Merge_002c-branch-example-291"></a>Consider this revision tree:

<pre class="example">     +-----+    +-----+    +-----+    +-----+
     ! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !      &lt;- The main trunk
     +-----+    +-----+    +-----+    +-----+
                     !
                     !
                     !   +---------+    +---------+
     Branch R1fix -&gt; +---! 1.2.2.1 !----! 1.2.2.2 !
                         +---------+    +---------+
</pre>
   <p class="noindent">The branch 1.2.2 has been given the tag (symbolic name) &lsquo;<samp><span class="samp">R1fix</span></samp>&rsquo;.  The
following example assumes that the module &lsquo;<samp><span class="samp">mod</span></samp>&rsquo; contains only one
file, <samp><span class="file">m.c</span></samp>.

<pre class="example">     $ cvs checkout mod               # <span class="roman">Retrieve the latest revision, 1.4</span>
     
     $ cvs update -j R1fix m.c        # <span class="roman">Merge all changes made on the branch,</span>
                                      # <span class="roman">i.e. the changes between revision 1.2</span>
                                      # <span class="roman">and 1.2.2.2, into your working copy</span>
                                      # <span class="roman">of the file.</span>
     
     $ cvs commit -m "Included R1fix" # <span class="roman">Create revision 1.5.</span>
</pre>
   <p>A conflict can result from a merge operation.  If that
happens, you should resolve it before committing the
new revision.  See <a href="#Conflicts-example">Conflicts example</a>.

   <p>If your source files contain keywords (see <a href="#Keyword-substitution">Keyword substitution</a>),
you might be getting more conflicts than strictly necessary.  See
<a href="#Merging-and-keywords">Merging and keywords</a>, for information on how to avoid this.

   <p>The <code>checkout</code> command also supports the &lsquo;<samp><span class="samp">-j </span><var>branchname</var></samp>&rsquo; flag.  The
same effect as above could be achieved with this:

<pre class="example">     $ cvs checkout -j R1fix mod
     $ cvs commit -m "Included R1fix"
</pre>
   <p>It should be noted that <code>update -j </code><var>tagname</var> will also work but may
not produce the desired result.  See <a href="#Merging-adds-and-removals">Merging adds and removals</a>, for more.

<div class="node">
<a name="Merging-more-than-once"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Merging-two-revisions">Merging two revisions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Merging-a-branch">Merging a branch</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.7 Merging from a branch several times</h3>

<p>Continuing our example, the revision tree now looks
like this:

<pre class="example">     +-----+    +-----+    +-----+    +-----+    +-----+
     ! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !----! 1.5 !   &lt;- The main trunk
     +-----+    +-----+    +-----+    +-----+    +-----+
                     !                           *
                     !                          *
                     !   +---------+    +---------+
     Branch R1fix -&gt; +---! 1.2.2.1 !----! 1.2.2.2 !
                         +---------+    +---------+
</pre>
   <p class="noindent">where the starred line represents the merge from the
&lsquo;<samp><span class="samp">R1fix</span></samp>&rsquo; branch to the main trunk, as just
discussed.

   <p>Now suppose that development continues on the
&lsquo;<samp><span class="samp">R1fix</span></samp>&rsquo; branch:

<pre class="example">     +-----+    +-----+    +-----+    +-----+    +-----+
     ! 1.1 !----! 1.2 !----! 1.3 !----! 1.4 !----! 1.5 !   &lt;- The main trunk
     +-----+    +-----+    +-----+    +-----+    +-----+
                     !                           *
                     !                          *
                     !   +---------+    +---------+    +---------+
     Branch R1fix -&gt; +---! 1.2.2.1 !----! 1.2.2.2 !----! 1.2.2.3 !
                         +---------+    +---------+    +---------+
</pre>
   <p class="noindent">and then you want to merge those new changes onto the
main trunk.  If you just use the <code>cvs update -j
R1fix m.c</code> command again, <span class="sc">cvs</span> will attempt to
merge again the changes which you have already merged,
which can have undesirable side effects.

   <p>So instead you need to specify that you only want to
merge the changes on the branch which have not yet been
merged into the trunk.  To do that you specify two
&lsquo;<samp><span class="samp">-j</span></samp>&rsquo; options, and <span class="sc">cvs</span> merges the changes from
the first revision to the second revision.  For
example, in this case the simplest way would be

<pre class="example">     cvs update -j 1.2.2.2 -j R1fix m.c    # <span class="roman">Merge changes from 1.2.2.2 to the</span>
                                           # <span class="roman">head of the R1fix branch</span>
</pre>
   <p>The problem with this is that you need to specify the
1.2.2.2 revision manually.  A slightly better approach
might be to use the date the last merge was done:

<pre class="example">     cvs update -j R1fix:yesterday -j R1fix m.c
</pre>
   <p>Better yet, tag the R1fix branch after every merge into
the trunk, and then use that tag for subsequent merges:

<pre class="example">     cvs update -j merged_from_R1fix_to_trunk -j R1fix m.c
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Merging-two-revisions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Merging-adds-and-removals">Merging adds and removals</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Merging-more-than-once">Merging more than once</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.8 Merging differences between any two revisions</h3>

<p><a name="index-Merging-two-revisions-292"></a><a name="index-Revisions_002c-merging-differences-between-293"></a><a name="index-Differences_002c-merging-294"></a>
With two &lsquo;<samp><span class="samp">-j </span><var>revision</var></samp>&rsquo; flags, the <code>update</code>
(and <code>checkout</code>) command can merge the differences
between any two revisions into your working file.

   <p><a name="index-Undoing-a-change-295"></a><a name="index-Removing-a-change-296"></a>
<pre class="example">     $ cvs update -j 1.5 -j 1.3 backend.c
</pre>
   <p class="noindent">will undo all changes made between revision
1.3 and 1.5.  Note the order of the revisions!

   <p>If you try to use this option when operating on
multiple files, remember that the numeric revisions will
probably be very different between the various files. 
You almost always use symbolic
tags rather than revision numbers when operating on
multiple files.

   <p><a name="index-Restoring-old-version-of-removed-file-297"></a><a name="index-Resurrecting-old-version-of-dead-file-298"></a>Specifying two &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; options can also undo file
removals or additions.  For example, suppose you have
a file
named <samp><span class="file">file1</span></samp> which existed as revision 1.1, and
you then removed it (thus adding a dead revision 1.2). 
Now suppose you want to add it again, with the same
contents it had previously.  Here is how to do it:

<pre class="example">     $ cvs update -j 1.2 -j 1.1 file1
     U file1
     $ cvs commit -m test
     Checking in file1;
     /tmp/cvs-sanity/cvsroot/first-dir/file1,v  &lt;--  file1
     new revision: 1.3; previous revision: 1.2
     done
     $
</pre>
   <div class="node">
<a name="Merging-adds-and-removals"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Merging-and-keywords">Merging and keywords</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Merging-two-revisions">Merging two revisions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.9 Merging can add or remove files</h3>

<p>If the changes which you are merging involve removing
or adding some files, <code>update -j</code> will reflect
such additions or removals.

<!-- FIXME: This example needs a lot more explanation. -->
<!-- We also need other examples for some of the other -->
<!-- cases (not all-there are too many-as long as we present a -->
<!-- coherent general principle). -->
   <p>For example:
<pre class="example">     cvs update -A
     touch a b c
     cvs add a b c ; cvs ci -m "added" a b c
     cvs tag -b branchtag
     cvs update -r branchtag
     touch d ; cvs add d
     rm a ; cvs rm a
     cvs ci -m "added d, removed a"
     cvs update -A
     cvs update -jbranchtag
</pre>
   <p>After these commands are executed and a &lsquo;<samp><span class="samp">cvs commit</span></samp>&rsquo; is done,
file <samp><span class="file">a</span></samp> will be removed and file <samp><span class="file">d</span></samp> added in the main branch. 
<!-- (which was determined by trying it) -->

   <p>Note that using a single static tag (&lsquo;<samp><span class="samp">-j </span><var>tagname</var></samp>&rsquo;)
rather than a dynamic tag (&lsquo;<samp><span class="samp">-j </span><var>branchname</var></samp>&rsquo;) to merge
changes from a branch will usually not remove files which were removed on the
branch since <span class="sc">cvs</span> does not automatically add static tags to dead revisions. 
The exception to this rule occurs when
a static tag has been attached to a dead revision manually.  Use the branch tag
to merge all changes from the branch or use two static tags as merge endpoints
to be sure that all intended changes are propagated in the merge.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Merging-and-keywords"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Merging-adds-and-removals">Merging adds and removals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Branching-and-merging">Branching and merging</a>

</div>

<h3 class="section">5.10 Merging and keywords</h3>

<p><a name="index-Merging_002c-and-keyword-substitution-299"></a><a name="index-Keyword-substitution_002c-and-merging-300"></a><a name="index-g_t_002dj-_0028merging-branches_0029_002c-and-keyword-substitution-301"></a><a name="index-g_t_002dkk_002c-to-avoid-conflicts-during-a-merge-302"></a>
If you merge files containing keywords (see <a href="#Keyword-substitution">Keyword substitution</a>), you will normally get numerous
conflicts during the merge, because the keywords are
expanded differently in the revisions which you are
merging.

   <p>Therefore, you will often want to specify the
&lsquo;<samp><span class="samp">-kk</span></samp>&rsquo; (see <a href="#Substitution-modes">Substitution modes</a>) switch to the
merge command line.  By substituting just the name of
the keyword, not the expanded value of that keyword,
this option ensures that the revisions which you are
merging will be the same as each other, and avoid
spurious conflicts.

   <p>For example, suppose you have a file like this:

<pre class="example">            +---------+
           _! 1.1.2.1 !   &lt;-  br1
          / +---------+
         /
        /
     +-----+    +-----+
     ! 1.1 !----! 1.2 !
     +-----+    +-----+
</pre>
   <p class="noindent">and your working directory is currently on the trunk
(revision 1.2).  Then you might get the following
results from a merge:

<pre class="example">     $ cat file1
     key $Revision: 1.2 $
     . . .
     $ cvs update -j br1
     U file1
     RCS file: /cvsroot/first-dir/file1,v
     retrieving revision 1.1
     retrieving revision 1.1.2.1
     Merging differences between 1.1 and 1.1.2.1 into file1
     rcsmerge: warning: conflicts during merge
     $ cat file1
     &lt;&lt;&lt;&lt;&lt;&lt;&lt; file1
     key $Revision: 1.2 $
     =======
     key $Revision: 1.1.2.1 $
     &gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.1.2.1
     . . .
</pre>
   <p>What happened was that the merge tried to merge the
differences between 1.1 and 1.1.2.1 into your working
directory.  So, since the keyword changed from
<code>Revision: 1.1</code> to <code>Revision: 1.1.2.1</code>,
<span class="sc">cvs</span> tried to merge that change into your working
directory, which conflicted with the fact that your
working directory had contained <code>Revision: 1.2</code>.

   <p>Here is what happens if you had used &lsquo;<samp><span class="samp">-kk</span></samp>&rsquo;:

<pre class="example">     $ cat file1
     key $Revision: 1.2 $
     . . .
     $ cvs update -kk -j br1
     U file1
     RCS file: /cvsroot/first-dir/file1,v
     retrieving revision 1.1
     retrieving revision 1.1.2.1
     Merging differences between 1.1 and 1.1.2.1 into file1
     $ cat file1
     key $Revision$
     . . .
</pre>
   <p>What is going on here is that revision 1.1 and 1.1.2.1
both expand as plain <code>Revision</code>, and therefore
merging the changes between them into the working
directory need not change anything.  Therefore, there
is no conflict.

   <p><em>WARNING: In versions of </em><span class="sc">cvs</span><em> prior to 1.12.2, there was a
major problem with using &lsquo;</em><samp><span class="samp">-kk</span></samp><em>&rsquo; on merges.  Namely, &lsquo;</em><samp><span class="samp">-kk</span></samp><em>&rsquo;
overrode any default keyword expansion mode set in the archive file in
the repository.  This could, unfortunately for some users, cause data
corruption in binary files (with a default keyword expansion mode set
to &lsquo;</em><samp><span class="samp">-kb</span></samp><em>&rsquo;).  Therefore, when a repository contained binary files,
conflicts had to be dealt with manually rather than using &lsquo;</em><samp><span class="samp">-kk</span></samp><em>&rsquo; in
a merge command.</em>

   <p>In <span class="sc">cvs</span> version 1.12.2 and later, the keyword expansion mode
provided on the command line to any <span class="sc">cvs</span> command no longer
overrides the &lsquo;<samp><span class="samp">-kb</span></samp>&rsquo; keyword expansion mode setting for binary
files, though it will still override other default keyword expansion
modes.  You can now safely merge using &lsquo;<samp><span class="samp">-kk</span></samp>&rsquo; to avoid spurious conflicts
on lines containing RCS keywords, even when your repository contains
binary files.

<!--  -->
<div class="node">
<a name="Recursive-behavior"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Adding-and-removing">Adding and removing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Branching-and-merging">Branching and merging</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 Recursive behavior</h2>

<p><a name="index-Recursive-_0028directory-descending_0029-303"></a><a name="index-Directory_002c-descending-304"></a><a name="index-Descending-directories-305"></a><a name="index-Subdirectories-306"></a>
Almost all of the subcommands of <span class="sc">cvs</span> work
recursively when you specify a directory as an
argument.  For instance, consider this directory
structure:

<pre class="example">           <code>$HOME</code>
             |
             +--<tt>tc</tt>
             |   |
                 +--<tt>CVS</tt>
                 |      (internal <span class="sc">cvs</span> files)
                 +--<tt>Makefile</tt>
                 +--<tt>backend.c</tt>
                 +--<tt>driver.c</tt>
                 +--<tt>frontend.c</tt>
                 +--<tt>parser.c</tt>
                 +--<tt>man</tt>
                 |    |
                 |    +--<tt>CVS</tt>
                 |    |  (internal <span class="sc">cvs</span> files)
                 |    +--<tt>tc.1</tt>
                 |
                 +--<tt>testing</tt>
                      |
                      +--<tt>CVS</tt>
                      |  (internal <span class="sc">cvs</span> files)
                      +--<tt>testpgm.t</tt>
                      +--<tt>test2.t</tt>
</pre>
   <p class="noindent">If <samp><span class="file">tc</span></samp> is the current working directory, the
following is true:

     <ul>
<li>&lsquo;<samp><span class="samp">cvs update testing</span></samp>&rsquo; is equivalent to

     <pre class="example">          cvs update testing/testpgm.t testing/test2.t
</pre>
     <li>&lsquo;<samp><span class="samp">cvs update testing man</span></samp>&rsquo; updates all files in the
subdirectories

     <li>&lsquo;<samp><span class="samp">cvs update .</span></samp>&rsquo; or just &lsquo;<samp><span class="samp">cvs update</span></samp>&rsquo; updates
all files in the <code>tc</code> directory
</ul>

   <p>If no arguments are given to <code>update</code> it will
update all files in the current working directory and
all its subdirectories.  In other words, <samp><span class="file">.</span></samp> is a
default argument to <code>update</code>.  This is also true
for most of the <span class="sc">cvs</span> subcommands, not only the
<code>update</code> command.

   <p>The recursive behavior of the <span class="sc">cvs</span> subcommands can be
turned off with the &lsquo;<samp><span class="samp">-l</span></samp>&rsquo; option. 
Conversely, the &lsquo;<samp><span class="samp">-R</span></samp>&rsquo; option can be used to force recursion if
&lsquo;<samp><span class="samp">-l</span></samp>&rsquo; is specified in <samp><span class="file">~/.cvsrc</span></samp> (see <a href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a>).

<pre class="example">     $ cvs update -l         # <span class="roman">Don't update files in subdirectories</span>
</pre>
   <!--  -->
<div class="node">
<a name="Adding-and-removing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#History-browsing">History browsing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Recursive-behavior">Recursive behavior</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">7 Adding, removing, and renaming files and directories</h2>

<p>In the course of a project, one will often add new
files.  Likewise with removing or renaming, or with
directories.  The general concept to keep in mind in
all these cases is that instead of making an
irreversible change you want <span class="sc">cvs</span> to record the
fact that a change has taken place, just as with
modifying an existing file.  The exact mechanisms to do
this in <span class="sc">cvs</span> vary depending on the situation.

<ul class="menu">
<li><a accesskey="1" href="#Adding-files">Adding files</a>:                 Adding files
<li><a accesskey="2" href="#Removing-files">Removing files</a>:               Removing files
<li><a accesskey="3" href="#Removing-directories">Removing directories</a>:         Removing directories
<li><a accesskey="4" href="#Moving-files">Moving files</a>:                 Moving and renaming files
<li><a accesskey="5" href="#Moving-directories">Moving directories</a>:           Moving and renaming directories
</ul>

<div class="node">
<a name="Adding-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Removing-files">Removing files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Adding-and-removing">Adding and removing</a>

</div>

<h3 class="section">7.1 Adding files to a directory</h3>

<p><a name="index-Adding-files-307"></a>
To add a new file to a directory, follow these steps.

     <ul>
<li>You must have a working copy of the directory. 
See <a href="#Getting-the-source">Getting the source</a>.

     <li>Create the new file inside your working copy of the directory.

     <li>Use &lsquo;<samp><span class="samp">cvs add </span><var>filename</var></samp>&rsquo; to tell <span class="sc">cvs</span> that you
want to version control the file.  If the file contains
binary data, specify &lsquo;<samp><span class="samp">-kb</span></samp>&rsquo; (see <a href="#Binary-files">Binary files</a>).

     <li>Use &lsquo;<samp><span class="samp">cvs commit </span><var>filename</var></samp>&rsquo; to actually check
in the file into the repository.  Other developers
cannot see the file until you perform this step. 
</ul>

   <p>You can also use the <code>add</code> command to add a new
directory. 
<!-- FIXCVS and/or FIXME: Adding a directory doesn't -->
<!-- require the commit step.  This probably can be -->
<!-- considered a CVS bug, but it is possible we should -->
<!-- warn people since this behavior probably won't be -->
<!-- changing right away. -->

   <p>Unlike most other commands, the <code>add</code> command is
not recursive.  You have to expcicitly name files and
directories that you wish to add to the repository. 
However, each directory will need to be added
separately before you will be able to add new files
to those directories.

<pre class="example">     $ mkdir -p foo/bar
     $ cp ~/myfile foo/bar/myfile
     $ cvs add foo foo/bar
     $ cvs add foo/bar/myfile
</pre>
   <p><a name="index-add-_0028subcommand_0029-308"></a>

<div class="defun">
&mdash; Command: <b>cvs add</b> [<code>-k</code><var> kflag</var>] [<code>-m</code><var> message</var>]<var> files <small class="dots">...</small><a name="index-cvs-add-309"></a></var><br>
<blockquote>
        <p>Schedule <var>files</var> to be added to the repository. 
The files or directories specified with <code>add</code> must
already exist in the current directory.  To add a whole
new directory hierarchy to the source repository (for
example, files received from a third-party vendor), use
the <code>import</code> command instead.  See <a href="#import">import</a>.

        <p>The added files are not placed in the source repository
until you use <code>commit</code> to make the change
permanent.  Doing an <code>add</code> on a file that was
removed with the <code>remove</code> command will undo the
effect of the <code>remove</code>, unless a <code>commit</code>
command intervened.  See <a href="#Removing-files">Removing files</a>, for an
example.

        <p>The &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; option specifies the default way that
this file will be checked out; for more information see
<a href="#Substitution-modes">Substitution modes</a>.

     <!-- As noted in BUGS, -m is broken client/server (Nov -->
     <!-- 96).  Also see testsuite log2-* tests. -->
        <p>The &lsquo;<samp><span class="samp">-m</span></samp>&rsquo; option specifies a description for the
file.  This description appears in the history log (if
it is enabled, see <a href="#history-file">history file</a>).  It will also be
saved in the version history inside the repository when
the file is committed.  The <code>log</code> command displays
this description.  The description can be changed using
&lsquo;<samp><span class="samp">admin -t</span></samp>&rsquo;.  See <a href="#admin">admin</a>.  If you omit the
&lsquo;<samp><span class="samp">-m </span><var>description</var></samp>&rsquo; flag, an empty string will
be used.  You will not be prompted for a description. 
</p></blockquote></div>

   <p>For example, the following commands add the file
<samp><span class="file">backend.c</span></samp> to the repository:

<!-- This example used to specify -->
<!-- m "Optimizer and code generation passes." -->
<!-- to the cvs add command, but that doesn't work -->
<!-- client/server (see log2 in sanity.sh).  Should fix CVS, -->
<!-- but also seems strange to document things which -->
<!-- don't work... -->
<pre class="example">     $ cvs add backend.c
     $ cvs commit -m "Early version. Not yet compilable." backend.c
</pre>
   <p>When you add a file it is added only on the branch
which you are working on (see <a href="#Branching-and-merging">Branching and merging</a>).  You can
later merge the additions to another branch if you want
(see <a href="#Merging-adds-and-removals">Merging adds and removals</a>). 
<!-- Should we mention that earlier versions of CVS -->
<!-- lacked this feature (1.3) or implemented it in a buggy -->
<!-- way (well, 1.8 had many bugs in cvs update -j)? -->
<!-- Should we mention the bug/limitation regarding a -->
<!-- file being a regular file on one branch and a directory -->
<!-- on another? -->
<!-- FIXME: This needs an example, or several, here or -->
<!-- elsewhere, for it to make much sense. -->
<!-- Somewhere we need to discuss the aspects of death -->
<!-- support which don't involve branching, I guess. -->
<!-- Like the ability to re-create a release from a tag. -->

<!--  -->
<div class="node">
<a name="Removing-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Removing-directories">Removing directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Adding-files">Adding files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Adding-and-removing">Adding and removing</a>

</div>

<h3 class="section">7.2 Removing files</h3>

<p><a name="index-Removing-files-310"></a><a name="index-Deleting-files-311"></a>
<!-- FIXME: this node wants to be split into several -->
<!-- smaller nodes.  Could make these children of -->
<!-- "Adding and removing", probably (death support could -->
<!-- be its own section, for example, as could the -->
<!-- various bits about undoing mistakes in adding and -->
<!-- removing). -->
Directories change.  New files are added, and old files
disappear.  Still, you want to be able to retrieve an
exact copy of old releases.

   <p>Here is what you can do to remove a file,
but remain able to retrieve old revisions:

     <ul>
<!-- FIXME: should probably be saying something about -->
<!-- having a working directory in the first place. -->
<li>Make sure that you have not made any uncommitted
modifications to the file.  See <a href="#Viewing-differences">Viewing differences</a>,
for one way to do that.  You can also use the
<code>status</code> or <code>update</code> command.  If you remove
the file without committing your changes, you will of
course not be able to retrieve the file as it was
immediately before you deleted it.

     <li>Remove the file from your working copy of the directory. 
You can for instance use <code>rm</code>.

     <li>Use &lsquo;<samp><span class="samp">cvs remove </span><var>filename</var></samp>&rsquo; to tell <span class="sc">cvs</span> that
you really want to delete the file.

     <li>Use &lsquo;<samp><span class="samp">cvs commit </span><var>filename</var></samp>&rsquo; to actually
perform the removal of the file from the repository. 
</ul>

<!-- FIXME: Somehow this should be linked in with a more -->
<!-- general discussion of death support.  I don't know -->
<!-- whether we want to use the term "death support" or -->
<!-- not (we can perhaps get by without it), but we do -->
<!-- need to discuss the "dead" state in "cvs log" and -->
<!-- related subjects.  The current discussion is -->
<!-- scattered around, and not xref'd to each other. -->
<!-- FIXME: I think this paragraph wants to be moved -->
<!-- later down, at least after the first example. -->
   <p>When you commit the removal of the file, <span class="sc">cvs</span>
records the fact that the file no longer exists.  It is
possible for a file to exist on only some branches and
not on others, or to re-add another file with the same
name later.  <span class="sc">cvs</span> will correctly create or not create
the file, based on the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; and &lsquo;<samp><span class="samp">-D</span></samp>&rsquo; options
specified to <code>checkout</code> or <code>update</code>.

<!-- FIXME: This style seems to clash with how we -->
<!-- document things in general. -->
   <p><a name="index-Remove-_0028subcommand_0029-312"></a>

<div class="defun">
&mdash; Command: <b>cvs remove</b> [<var>options</var>]<var> files <small class="dots">...</small><a name="index-cvs-remove-313"></a></var><br>
<blockquote>
        <p>Schedule file(s) to be removed from the repository
(files which have not already been removed from the
working directory are not processed).  This command
does not actually remove the file from the repository
until you commit the removal.  For a full list of
options, see <a href="#Invoking-CVS">Invoking CVS</a>. 
</p></blockquote></div>

   <p>Here is an example of removing several files:

<pre class="example">     $ cd test
     $ rm *.c
     $ cvs remove
     cvs remove: Removing .
     cvs remove: scheduling a.c for removal
     cvs remove: scheduling b.c for removal
     cvs remove: use 'cvs commit' to remove these files permanently
     $ cvs ci -m "Removed unneeded files"
     cvs commit: Examining .
     cvs commit: Committing .
</pre>
   <p>As a convenience you can remove the file and <code>cvs
remove</code> it in one step, by specifying the &lsquo;<samp><span class="samp">-f</span></samp>&rsquo;
option.  For example, the above example could also be
done like this:

<pre class="example">     $ cd test
     $ cvs remove -f *.c
     cvs remove: scheduling a.c for removal
     cvs remove: scheduling b.c for removal
     cvs remove: use 'cvs commit' to remove these files permanently
     $ cvs ci -m "Removed unneeded files"
     cvs commit: Examining .
     cvs commit: Committing .
</pre>
   <p>If you execute <code>remove</code> for a file, and then
change your mind before you commit, you can undo the
<code>remove</code> with an <code>add</code> command.

<!-- FIXME: what if you change your mind after you commit -->
<!-- it?  (answer is also "cvs add" but we don't say that...). -->
<!-- We need some index entries for thinks like "undoing -->
<!-- removal" too. -->
<pre class="example">     $ ls
     CVS   ja.h  oj.c
     $ rm oj.c
     $ cvs remove oj.c
     cvs remove: scheduling oj.c for removal
     cvs remove: use 'cvs commit' to remove this file permanently
     $ cvs add oj.c
     U oj.c
     cvs add: oj.c, version 1.1.1.1, resurrected
</pre>
   <p>If you realize your mistake before you run the
<code>remove</code> command you can use <code>update</code> to
resurrect the file:

<pre class="example">     $ rm oj.c
     $ cvs update oj.c
     cvs update: warning: oj.c was lost
     U oj.c
</pre>
   <p>When you remove a file it is removed only on the branch
which you are working on (see <a href="#Branching-and-merging">Branching and merging</a>).  You can
later merge the removals to another branch if you want
(see <a href="#Merging-adds-and-removals">Merging adds and removals</a>).

<div class="node">
<a name="Removing-directories"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Moving-files">Moving files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Removing-files">Removing files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Adding-and-removing">Adding and removing</a>

</div>

<h3 class="section">7.3 Removing directories</h3>

<p><a name="index-Removing-directories-314"></a><a name="index-Directories_002c-removing-315"></a>
In concept, removing directories is somewhat similar to
removing files&mdash;you want the directory to not exist in
your current working directories, but you also want to
be able to retrieve old releases in which the directory
existed.

   <p>The way that you remove a directory is to remove all
the files in it.  You don't remove the directory
itself; there is no way to do that. 
Instead you specify the &lsquo;<samp><span class="samp">-P</span></samp>&rsquo; option to
<code>cvs update</code> or <code>cvs checkout</code>,
which will cause <span class="sc">cvs</span> to remove empty
directories from working directories. 
(Note that <code>cvs export</code> always removes empty directories.) 
Probably the
best way to do this is to always specify &lsquo;<samp><span class="samp">-P</span></samp>&rsquo;; if
you want an empty directory then put a dummy file (for
example <samp><span class="file">.keepme</span></samp>) in it to prevent &lsquo;<samp><span class="samp">-P</span></samp>&rsquo; from
removing it.

<!-- I'd try to give a rationale for this, but I'm not -->
<!-- sure there is a particularly convincing one.  What -->
<!-- we would _like_ is for CVS to do a better job of version -->
<!-- controlling whether directories exist, to eliminate the -->
<!-- need for -P and so that a file can be a directory in -->
<!-- one revision and a regular file in another. -->
   <p>Note that &lsquo;<samp><span class="samp">-P</span></samp>&rsquo; is implied by the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-D</span></samp>&rsquo;
options of <code>checkout</code>.  This way,
<span class="sc">cvs</span> will be able to correctly create the directory
or not depending on whether the particular version you
are checking out contains any files in that directory.

<!--  -->
<div class="node">
<a name="Moving-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Moving-directories">Moving directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Removing-directories">Removing directories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Adding-and-removing">Adding and removing</a>

</div>

<h3 class="section">7.4 Moving and renaming files</h3>

<p><a name="index-Moving-files-316"></a><a name="index-Renaming-files-317"></a><a name="index-Files_002c-moving-318"></a>
Moving files to a different directory or renaming them
is not difficult, but some of the ways in which this
works may be non-obvious.  (Moving or renaming a
directory is even harder.  See <a href="#Moving-directories">Moving directories</a>.).

   <p>The examples below assume that the file <var>old</var> is renamed to
<var>new</var>.

<ul class="menu">
<li><a accesskey="1" href="#Outside">Outside</a>:                      The normal way to Rename
<li><a accesskey="2" href="#Inside">Inside</a>:                       A tricky, alternative way
<li><a accesskey="3" href="#Rename-by-copying">Rename by copying</a>:            Another tricky, alternative way
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Outside"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Inside">Inside</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Moving-files">Moving files</a>

</div>

<h4 class="subsection">7.4.1 The Normal way to Rename</h4>

<!-- More rename issues.  Not sure whether these are -->
<!-- worth documenting; I'm putting them here because -->
<!-- it seems to be as good a place as any to try to -->
<!-- set down the issues. -->
<!-- * "cvs annotate" will annotate either the new -->
<!-- file or the old file; it cannot annotate _each -->
<!-- line_ based on whether it was last changed in the -->
<!-- new or old file.  Unlike "cvs log", where the -->
<!-- consequences of having to select either the new -->
<!-- or old name seem fairly benign, this may be a -->
<!-- real advantage to having CVS know about renames -->
<!-- other than as a deletion and an addition. -->
<p>The normal way to move a file is to copy <var>old</var> to
<var>new</var>, and then issue the normal <span class="sc">cvs</span> commands
to remove <var>old</var> from the repository, and add
<var>new</var> to it. 
<!-- The following sentence is not true: one must cd into -->
<!-- the directory to run "cvs add". -->
<!-- (Both @var{old} and @var{new} could -->
<!-- contain relative paths, for example @file{foo/bar.c}). -->

<pre class="example">     $ mv <var>old</var> <var>new</var>
     $ cvs remove <var>old</var>
     $ cvs add <var>new</var>
     $ cvs commit -m "Renamed <var>old</var> to <var>new</var>" <var>old</var> <var>new</var>
</pre>
   <p>This is the simplest way to move a file, it is not
error-prone, and it preserves the history of what was
done.  Note that to access the history of the file you
must specify the old or the new name, depending on what
portion of the history you are accessing.  For example,
<code>cvs log </code><var>old</var> will give the log up until the
time of the rename.

   <p>When <var>new</var> is committed its revision numbers will
start again, usually at 1.1, so if that bothers you,
use the &lsquo;<samp><span class="samp">-r </span><var>tag</var></samp>&rsquo; option to commit.  For more
information see <a href="#Assigning-revisions">Assigning revisions</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Inside"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Rename-by-copying">Rename by copying</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Outside">Outside</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Moving-files">Moving files</a>

</div>

<h4 class="subsection">7.4.2 Moving the history file</h4>

<p>This method is more dangerous, since it involves moving
files inside the repository.  Read this entire section
before trying it out!

<pre class="example">     $ cd $CVSROOT/<var>dir</var>
     $ mv <var>old</var>,v <var>new</var>,v
</pre>
   <p class="noindent">Advantages:

     <ul>
<li>The log of changes is maintained intact.

     <li>The revision numbers are not affected. 
</ul>

<p class="noindent">Disadvantages:

     <ul>
<li>Old releases cannot easily be fetched from the
repository.  (The file will show up as <var>new</var> even
in revisions from the time before it was renamed).

     <li>There is no log information of when the file was renamed.

     <li>Nasty things might happen if someone accesses the history file
while you are moving it.  Make sure no one else runs any of the <span class="sc">cvs</span>
commands while you move it. 
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Rename-by-copying"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Inside">Inside</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Moving-files">Moving files</a>

</div>

<h4 class="subsection">7.4.3 Copying the history file</h4>

<p>This way also involves direct modifications to the
repository.  It is safe, but not without drawbacks.

<pre class="example">     # <span class="roman">Copy the rcs file inside the repository</span>
     $ cd $CVSROOT/<var>dir</var>
     $ cp <var>old</var>,v <var>new</var>,v
     # <span class="roman">Remove the old file</span>
     $ cd ~/<var>dir</var>
     $ rm <var>old</var>
     $ cvs remove <var>old</var>
     $ cvs commit <var>old</var>
     # <span class="roman">Remove all tags from </span><var>new</var>
     $ cvs update <var>new</var>
     $ cvs log <var>new</var>             # <span class="roman">Remember the non-branch tag names</span>
     $ cvs tag -d <var>tag1</var> <var>new</var>
     $ cvs tag -d <var>tag2</var> <var>new</var>
     ...
</pre>
   <p>By removing the tags you will be able to check out old
revisions.

<p class="noindent">Advantages:

     <ul>
<li><!-- FIXME: Is this true about -D now that we have death -->
<!-- support?  See 5B.3 in the FAQ. -->
Checking out old revisions works correctly, as long as
you use &lsquo;<samp><span class="samp">-r </span><var>tag</var></samp>&rsquo; and not &lsquo;<samp><span class="samp">-D </span><var>date</var></samp>&rsquo;
to retrieve the revisions.

     <li>The log of changes is maintained intact.

     <li>The revision numbers are not affected. 
</ul>

<p class="noindent">Disadvantages:

     <ul>
<li>You cannot easily see the history of the file across the rename.

   </ul>

<!--  -->
<div class="node">
<a name="Moving-directories"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Moving-files">Moving files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Adding-and-removing">Adding and removing</a>

</div>

<h3 class="section">7.5 Moving and renaming directories</h3>

<p><a name="index-Moving-directories-319"></a><a name="index-Renaming-directories-320"></a><a name="index-Directories_002c-moving-321"></a>
The normal way to rename or move a directory is to
rename or move each file within it as described in
<a href="#Outside">Outside</a>.  Then check out with the &lsquo;<samp><span class="samp">-P</span></samp>&rsquo;
option, as described in <a href="#Removing-directories">Removing directories</a>.

   <p>If you really want to hack the repository to rename or
delete a directory in the repository, you can do it
like this:

     <ol type=1 start=1>
<li>Inform everyone who has a checked out copy of the directory that the
directory will be renamed.  They should commit all their changes in all their
copies of the project containing the directory to be removed, and remove
all their working copies of said project, before you take the steps below.

     <li>Rename the directory inside the repository.

     <pre class="example">          $ cd $CVSROOT/<var>parent-dir</var>
          $ mv <var>old-dir</var> <var>new-dir</var>
</pre>
     <li>Fix the <span class="sc">cvs</span> administrative files, if necessary (for
instance if you renamed an entire module).

     <li>Tell everyone that they can check out again and continue
working.

        </ol>

   <p>If someone had a working copy the <span class="sc">cvs</span> commands will
cease to work for him, until he removes the directory
that disappeared inside the repository.

   <p>It is almost always better to move the files in the
directory instead of moving the directory.  If you move the
directory you are unlikely to be able to retrieve old
releases correctly, since they probably depend on the
name of the directories.

<!--  -->
<div class="node">
<a name="History-browsing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Binary-files">Binary files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Adding-and-removing">Adding and removing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">8 History browsing</h2>

<p><a name="index-History-browsing-322"></a><a name="index-Traceability-323"></a><a name="index-Isolation-324"></a>

<!-- kind of lame, in a lot of ways the above text inside -->
<!-- the @ignore motivates this chapter better -->
   <p>Once you have used <span class="sc">cvs</span> to store a version control
history&mdash;what files have changed when, how, and by
whom, there are a variety of mechanisms for looking
through the history.

<!-- FIXME: should also be talking about how you look at -->
<!-- old revisions (e.g. "cvs update -p -r 1.2 foo.c"). -->
<ul class="menu">
<li><a accesskey="1" href="#log-messages">log messages</a>:                 Log messages
<li><a accesskey="2" href="#history-database">history database</a>:             The history database
<li><a accesskey="3" href="#user_002ddefined-logging">user-defined logging</a>:         User-defined logging
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="log-messages"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#history-database">history database</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#History-browsing">History browsing</a>

</div>

<h3 class="section">8.1 Log messages</h3>

<!-- FIXME: @xref to place where we talk about how to -->
<!-- specify message to commit. -->
<p>Whenever you commit a file you specify a log message.

<!-- FIXME: bring the information here, and get rid of or -->
<!-- greatly shrink the "log" node. -->
   <p>To look through the log messages which have been
specified for every revision which has been committed,
use the <code>cvs log</code> command (see <a href="#log">log</a>).

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="history-database"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#user_002ddefined-logging">user-defined logging</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#log-messages">log messages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#History-browsing">History browsing</a>

</div>

<h3 class="section">8.2 The history database</h3>

<!-- FIXME: bring the information from the history file -->
<!-- and history nodes here.  Rewrite it to be motivated -->
<!-- better (start out by clearly explaining what gets -->
<!-- logged in history, for example). -->
<p>You can use the history file (see <a href="#history-file">history file</a>) to
log various <span class="sc">cvs</span> actions.  To retrieve the
information from the history file, use the <code>cvs
history</code> command (see <a href="#history">history</a>).

   <p>Note: you can control what is logged to this file by using the
&lsquo;<samp><span class="samp">LogHistory</span></samp>&rsquo; keyword in the <samp><span class="file">CVSROOT/config</span></samp> file
(see <a href="#config">config</a>).

<!-- The history database has many problems: -->
<!-- * It is very unclear what field means what.  This -->
<!-- could be improved greatly by better documentation, -->
<!-- but there are still non-orthogonalities (for -->
<!-- example, tag does not record the "repository" -->
<!-- field but most records do). -->
<!-- * Confusion about files, directories, and modules. -->
<!-- Some commands record one, some record others. -->
<!-- * File removal is not logged.  There is an 'R' -->
<!-- record type documented, but CVS never uses it. -->
<!-- * Tags are only logged for the "cvs rtag" command, -->
<!-- not "cvs tag".  The fix for this is not completely -->
<!-- clear (see above about modules vs. files). -->
<!-- * Are there other cases of operations that are not -->
<!-- logged?  One would hope for all changes to the -->
<!-- repository to be logged somehow (particularly -->
<!-- operations like tagging, "cvs admin -k", and other -->
<!-- operations which do not record a history that one -->
<!-- can get with "cvs log").  Operations on the working -->
<!-- directory, like export, get, and release, are a -->
<!-- second category also covered by the current "cvs -->
<!-- history". -->
<!-- * The history file does not record the options given -->
<!-- to a command.  The most serious manifestation of -->
<!-- this is perhaps that it doesn't record whether a command -->
<!-- was recursive.  It is not clear to me whether one -->
<!-- wants to log at a level very close to the command -->
<!-- line, as a sort of way of logging each command -->
<!-- (more or less), or whether one wants -->
<!-- to log more at the level of what was changed (or -->
<!-- something in between), but either way the current -->
<!-- information has pretty big gaps. -->
<!-- * Further details about a tag-like whether it is a -->
<!-- branch tag or, if a non-branch tag, which branch it -->
<!-- is on.  One can find out this information about the -->
<!-- tag as it exists _now_, but if the tag has been -->
<!-- moved, one doesn't know what it was like at the time -->
<!-- the history record was written. -->
<!-- * Whether operating on a particular tag, date, or -->
<!-- options was implicit (sticky) or explicit. -->
<!-- Another item, only somewhat related to the above, is a -->
<!-- way to control what is logged in the history file. -->
<!-- This is probably the only good way to handle -->
<!-- different people having different ideas about -->
<!-- information/space tradeoffs. -->
<!-- It isn't really clear that it makes sense to try to -->
<!-- patch up the history file format as it exists now to -->
<!-- include all that stuff.  It might be better to -->
<!-- design a whole new CVSROOT/nhistory file and "cvs -->
<!-- nhistory" command, or some such, or in some other -->
<!-- way trying to come up with a clean break from the -->
<!-- past, which can address the above concerns.  Another -->
<!-- open question is how/whether this relates to -->
<!-- taginfo/loginfo/etc. -->
<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="user-defined-logging"></a>
<a name="user_002ddefined-logging"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#history-database">history database</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#History-browsing">History browsing</a>

</div>

<h3 class="section">8.3 User-defined logging</h3>

<!-- FIXME: probably should centralize this information -->
<!-- here, at least to some extent.  Maybe by moving the -->
<!-- loginfo, etc., nodes here and replacing -->
<!-- the "user-defined logging" node with one node for -->
<!-- each method. -->
<p>You can customize <span class="sc">cvs</span> to log various kinds of
actions, in whatever manner you choose.  These
mechanisms operate by executing a script at various
times.  The script might append a message to a file
listing the information and the programmer who created
it, or send mail to a group of developers, or, perhaps,
post a message to a particular newsgroup.  To log
commits, use the <samp><span class="file">loginfo</span></samp> file (see <a href="#loginfo">loginfo</a>), and
to log tagging operations, use the <samp><span class="file">taginfo</span></samp> file
(see <a href="#taginfo">taginfo</a>).

<!-- FIXME: What is difference between doing it in the -->
<!-- modules file and using loginfo/taginfo?  Why should -->
<!-- user use one or the other? -->
   <p>To log commits, checkouts, exports, and tags,
respectively, you can also use the &lsquo;<samp><span class="samp">-i</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">-o</span></samp>&rsquo;, &lsquo;<samp><span class="samp">-e</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">-t</span></samp>&rsquo; options in the
modules file.  For a more flexible way of giving
notifications to various users, which requires less in
the way of keeping centralized scripts up to date, use
the <code>cvs watch add</code> command (see <a href="#Getting-Notified">Getting Notified</a>); this command is useful even if you are not
using <code>cvs watch on</code>.

<!--  -->
<div class="node">
<a name="Binary-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-developers">Multiple developers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#History-browsing">History browsing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">9 Handling binary files</h2>

<p><a name="index-Binary-files-325"></a>
The most common use for <span class="sc">cvs</span> is to store text
files.  With text files, <span class="sc">cvs</span> can merge revisions,
display the differences between revisions in a
human-visible fashion, and other such operations. 
However, if you are willing to give up a few of these
abilities, <span class="sc">cvs</span> can store binary files.  For
example, one might store a web site in <span class="sc">cvs</span>
including both text files and binary images.

<ul class="menu">
<li><a accesskey="1" href="#Binary-why">Binary why</a>:      More details on issues with binary files
<li><a accesskey="2" href="#Binary-howto">Binary howto</a>:    How to store them
</ul>

<div class="node">
<a name="Binary-why"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Binary-howto">Binary howto</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Binary-files">Binary files</a>

</div>

<h3 class="section">9.1 The issues with binary files</h3>

<p>While the need to manage binary files may seem obvious
if the files that you customarily work with are binary,
putting them into version control does present some
additional issues.

   <p>One basic function of version control is to show the
differences between two revisions.  For example, if
someone else checked in a new version of a file, you
may wish to look at what they changed and determine
whether their changes are good.  For text files,
<span class="sc">cvs</span> provides this functionality via the <code>cvs
diff</code> command.  For binary files, it may be possible to
extract the two revisions and then compare them with a
tool external to <span class="sc">cvs</span> (for example, word processing
software often has such a feature).  If there is no
such tool, one must track changes via other mechanisms,
such as urging people to write good log messages, and
hoping that the changes they actually made were the
changes that they intended to make.

   <p>Another ability of a version control system is the
ability to merge two revisions.  For <span class="sc">cvs</span> this
happens in two contexts.  The first is when users make
changes in separate working directories
(see <a href="#Multiple-developers">Multiple developers</a>).  The second is when one
merges explicitly with the &lsquo;<samp><span class="samp">update -j</span></samp>&rsquo; command
(see <a href="#Branching-and-merging">Branching and merging</a>).

   <p>In the case of text
files, <span class="sc">cvs</span> can merge changes made independently,
and signal a conflict if the changes conflict.  With
binary files, the best that <span class="sc">cvs</span> can do is present
the two different copies of the file, and leave it to
the user to resolve the conflict.  The user may choose
one copy or the other, or may run an external merge
tool which knows about that particular file format, if
one exists. 
Note that having the user merge relies primarily on the
user to not accidentally omit some changes, and thus is
potentially error prone.

   <p>If this process is thought to be undesirable, the best
choice may be to avoid merging.  To avoid the merges
that result from separate working directories, see the
discussion of reserved checkouts (file locking) in
<a href="#Multiple-developers">Multiple developers</a>.  To avoid the merges
resulting from branches, restrict use of branches.

<div class="node">
<a name="Binary-howto"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Binary-why">Binary why</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Binary-files">Binary files</a>

</div>

<h3 class="section">9.2 How to store binary files</h3>

<p>There are two issues with using <span class="sc">cvs</span> to store
binary files.  The first is that <span class="sc">cvs</span> by default
converts line endings between the canonical form in
which they are stored in the repository (linefeed
only), and the form appropriate to the operating system
in use on the client (for example, carriage return
followed by line feed for Windows NT).

   <p>The second is that a binary file might happen to
contain data which looks like a keyword (see <a href="#Keyword-substitution">Keyword substitution</a>), so keyword expansion must be turned
off.

<!-- FIXME: the third is that one can't do merges with -->
<!-- binary files.  xref to Multiple Developers and the -->
<!-- reserved checkout issues. -->
   <p>The &lsquo;<samp><span class="samp">-kb</span></samp>&rsquo; option available with some <span class="sc">cvs</span>
commands insures that neither line ending conversion
nor keyword expansion will be done.

   <p>Here is an example of how you can create a new file
using the &lsquo;<samp><span class="samp">-kb</span></samp>&rsquo; flag:

<pre class="example">     $ echo '$Id$' &gt; kotest
     $ cvs add -kb -m"A test file" kotest
     $ cvs ci -m"First checkin; contains a keyword" kotest
</pre>
   <p>If a file accidentally gets added without &lsquo;<samp><span class="samp">-kb</span></samp>&rsquo;,
one can use the <code>cvs admin</code> command to recover. 
For example:

<pre class="example">     $ echo '$Id$' &gt; kotest
     $ cvs add -m"A test file" kotest
     $ cvs ci -m"First checkin; contains a keyword" kotest
     $ cvs admin -kb kotest
     $ cvs update -A kotest
     # <span class="roman">For non-unix systems:</span>
     # <span class="roman">Copy in a good copy of the file from outside CVS</span>
     $ cvs commit -m "make it binary" kotest
</pre>
   <!-- Trying to describe this for both unix and non-unix -->
<!-- in the same description is very confusing.  Might -->
<!-- want to split the two, or just ditch the unix "shortcut" -->
<!-- (unixheads don't do much with binary files, anyway). -->
<!-- This used to say "(Try the above example, and do a -->
<!-- @code{cat kotest} after every command)".  But that -->
<!-- only really makes sense for the unix case. -->
   <p>When you check in the file <samp><span class="file">kotest</span></samp> the file is
not preserved as a binary file, because you did not
check it in as a binary file.  The <code>cvs
admin -kb</code> command sets the default keyword
substitution method for this file, but it does not
alter the working copy of the file that you have.  If you need to
cope with line endings (that is, you are using
<span class="sc">cvs</span> on a non-unix system), then you need to
check in a new copy of the file, as shown by the
<code>cvs commit</code> command above. 
On unix, the <code>cvs update -A</code> command suffices. 
<!-- FIXME: should also describe what the *other users* -->
<!-- need to do, if they have checked out copies which -->
<!-- have been corrupted by lack of -kb.  I think maybe -->
<!-- "cvs update -kb" or "cvs -->
<!-- update -A" would suffice, although the user who -->
<!-- reported this suggested removing the file, manually -->
<!-- removing it from CVS/Entries, and then "cvs update" -->
(Note that you can use <code>cvs log</code> to determine the default keyword
substitution method for a file and <code>cvs status</code> to determine
the keyword substitution method for a working copy.)

   <p>However, in using <code>cvs admin -k</code> to change the
keyword expansion, be aware that the keyword expansion
mode is not version controlled.  This means that, for
example, that if you have a text file in old releases,
and a binary file with the same name in new releases,
<span class="sc">cvs</span> provides no way to check out the file in text
or binary mode depending on what version you are
checking out.  There is no good workaround for this
problem.

   <p>You can also set a default for whether <code>cvs add</code>
and <code>cvs import</code> treat a file as binary based on
its name; for example you could say that files who
names end in &lsquo;<samp><span class="samp">.exe</span></samp>&rsquo; are binary.  See <a href="#Wrappers">Wrappers</a>. 
There is currently no way to have <span class="sc">cvs</span> detect
whether a file is binary based on its contents.  The
main difficulty with designing such a feature is that
it is not clear how to distinguish between binary and
non-binary files, and the rules to apply would vary
considerably with the operating system. 
<!-- For example, it would be good on MS-DOS-family OSes -->
<!-- for anything containing ^Z to be binary.  Having -->
<!-- characters with the 8th bit set imply binary is almost -->
<!-- surely a bad idea in the context of ISO-8859-* and -->
<!-- other such character sets.  On VMS or the Mac, we -->
<!-- could use the OS's file typing.  This is a -->
<!-- commonly-desired feature, and something of this sort -->
<!-- may make sense.  But there are a lot of pitfalls here. -->
<!-- Another, probably better, way to tell is to read the -->
<!-- file in text mode, write it to a temp file in text -->
<!-- mode, and then do a binary mode compare of the two -->
<!-- files.  If they differ, it is a binary file.  This -->
<!-- might have problems on VMS (or some other system -->
<!-- with several different text modes), but in general -->
<!-- should be relatively portable.  The only other -->
<!-- downside I can think of is that it would be fairly -->
<!-- slow, but that is perhaps a small price to pay for -->
<!-- not having your files corrupted.  Another issue is -->
<!-- what happens if you import a text file with bare -->
<!-- linefeeds on Windows.  Such files will show up on -->
<!-- Windows sometimes (I think some native windows -->
<!-- programs even write them, on occasion).  Perhaps it -->
<!-- is reasonable to treat such files as binary; after -->
<!-- all it is something of a presumption to assume that -->
<!-- the user would want the linefeeds converted to CRLF. -->

<!--  -->
<div class="node">
<a name="Multiple-developers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Revision-management">Revision management</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Binary-files">Binary files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">10 Multiple developers</h2>

<p><a name="index-Multiple-developers-326"></a><a name="index-Team-of-developers-327"></a><a name="index-File-locking-328"></a><a name="index-Locking-files-329"></a><a name="index-Working-copy-330"></a><a name="index-Reserved-checkouts-331"></a><a name="index-Unreserved-checkouts-332"></a><a name="index-RCS_002dstyle-locking-333"></a>
When more than one person works on a software project
things often get complicated.  Often, two people try to
edit the same file simultaneously.  One solution, known
as <dfn>file locking</dfn> or <dfn>reserved checkouts</dfn>, is
to allow only one person to edit each file at a time. 
This is the only solution with some version control
systems, including <span class="sc">rcs</span> and <span class="sc">sccs</span>.  Currently
the usual way to get reserved checkouts with <span class="sc">cvs</span>
is the <code>cvs admin -l</code> command (see <a href="#admin-options">admin options</a>).  This is not as nicely integrated into
<span class="sc">cvs</span> as the watch features, described below, but it
seems that most people with a need for reserved
checkouts find it adequate. 
<!-- Or "find it better than worrying about implementing -->
<!-- nicely integrated reserved checkouts" or ...? -->

   <p>As of <span class="sc">cvs</span> version 1.12.10, another technique for getting most of the
effect of reserved checkouts is to enable advisory locks.  To enable advisory
locks, have all developers put "edit -c", "commit -c" in their
.cvsrc file, and turn on watches in the repository.  This
prevents them from doing a <code>cvs edit</code> if anyone is
already editing the file.  It also may
be possible to use plain watches together with suitable
procedures (not enforced by software), to avoid having
two people edit at the same time.

<!-- Our unreserved checkout model might not -->
<!-- be quite the same as others.  For example, I -->
<!-- think that some systems will tend to create a branch -->
<!-- in the case where CVS prints "up-to-date check failed". -->
<!-- It isn't clear to me whether we should try to -->
<!-- explore these subtleties; it could easily just -->
<!-- confuse people. -->
   <p>The default model with <span class="sc">cvs</span> is known as
<dfn>unreserved checkouts</dfn>.  In this model, developers
can edit their own <dfn>working copy</dfn> of a file
simultaneously.  The first person that commits his
changes has no automatic way of knowing that another
has started to edit it.  Others will get an error
message when they try to commit the file.  They must
then use <span class="sc">cvs</span> commands to bring their working copy
up to date with the repository revision.  This process
is almost automatic.

<!-- FIXME? should probably use the word "watch" here, to -->
<!-- tie this into the text below and above. -->
   <p><span class="sc">cvs</span> also supports mechanisms which facilitate
various kinds of communication, without actually
enforcing rules like reserved checkouts do.

   <p>The rest of this chapter describes how these various
models work, and some of the issues involved in
choosing between them.

<ul class="menu">
<li><a accesskey="1" href="#File-status">File status</a>:                  A file can be in several states
<li><a accesskey="2" href="#Updating-a-file">Updating a file</a>:              Bringing a file up-to-date
<li><a accesskey="3" href="#Conflicts-example">Conflicts example</a>:            An informative example
<li><a accesskey="4" href="#Informing-others">Informing others</a>:             To cooperate you must inform
<li><a accesskey="5" href="#Concurrency">Concurrency</a>:                  Simultaneous repository access
<li><a accesskey="6" href="#Watches">Watches</a>:                      Mechanisms to track who is editing files
<li><a accesskey="7" href="#Choosing-a-model">Choosing a model</a>:             Reserved or unreserved checkouts? 
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="File-status"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Updating-a-file">Updating a file</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-developers">Multiple developers</a>

</div>

<h3 class="section">10.1 File status</h3>

<p><a name="index-File-status-334"></a><a name="index-Status-of-a-file-335"></a>
<!-- Shouldn't this start with an example or something, -->
<!-- introducing the unreserved checkout model?  Before we -->
<!-- dive into listing states? -->
Based on what operations you have performed on a
checked out file, and what operations others have
performed to that file in the repository, one can
classify a file in a number of states.  The states, as
reported by the <code>status</code> command, are:

<!-- The order of items is chosen to group logically -->
<!-- similar outputs together. -->
<!-- People who want alphabetical can use the index... -->
     
<a name="index-Up_002dto_002ddate-336"></a>
<dl><dt>Up-to-date<dd>The file is identical with the latest revision in the
repository for the branch in use. 
<!-- FIXME: should we clarify "in use"?  The answer is -->
<!-- sticky tags, and trying to distinguish branch sticky -->
<!-- tags from non-branch sticky tags seems rather awkward -->
<!-- here. -->
<!-- FIXME: What happens with non-branch sticky tags?  Is -->
<!-- a stuck file "Up-to-date" or "Needs checkout" or what? -->

     <br><dt>Locally Modified<dd><a name="index-Locally-Modified-337"></a>You have edited the file, and not yet committed your changes.

     <br><dt>Locally Added<dd><a name="index-Locally-Added-338"></a>You have added the file with <code>add</code>, and not yet
committed your changes. 
<!-- There are many cases involving the file being -->
<!-- added/removed/modified in the working directory, and -->
<!-- added/removed/modified in the repository, which we -->
<!-- don't try to describe here.  I'm not sure that "cvs -->
<!-- status" produces a non-confusing output in most of -->
<!-- those cases. -->

     <br><dt>Locally Removed<dd><a name="index-Locally-Removed-339"></a>You have removed the file with <code>remove</code>, and not yet
committed your changes.

     <br><dt>Needs Checkout<dd><a name="index-Needs-Checkout-340"></a>Someone else has committed a newer revision to the
repository.  The name is slightly misleading; you will
ordinarily use <code>update</code> rather than
<code>checkout</code> to get that newer revision.

     <br><dt>Needs Patch<dd><a name="index-Needs-Patch-341"></a><!-- See also newb-123j0 in sanity.sh (although that case -->
<!-- should probably be changed rather than documented). -->
Like Needs Checkout, but the <span class="sc">cvs</span> server will send
a patch rather than the entire file.  Sending a patch or
sending an entire file accomplishes the same thing.

     <br><dt>Needs Merge<dd><a name="index-Needs-Merge-342"></a>Someone else has committed a newer revision to the repository, and you
have also made modifications to the file.

     <br><dt>Unresolved Conflict<dd><a name="index-Unresolved-Conflict-343"></a><!-- FIXCVS - This file status needs to be changed to some more informative -->
<!-- text that distinguishes it more clearly from each of the Locally Added, -->
<!-- File had conflicts on merge, and Unknown status types, but an exact and -->
<!-- succinct wording escapes me at the moment. -->
A file with the same name as this new file has been added to the repository
from a second workspace.  This file will need to be moved out of the way
to allow an <code>update</code> to complete.

     <br><dt>File had conflicts on merge<dd><a name="index-File-had-conflicts-on-merge-344"></a><!-- is it worth saying that this message was "Unresolved -->
<!-- Conflict" in CVS 1.9 and earlier?  I'm inclined to -->
<!-- think that is unnecessarily confusing to new users. -->
This is like Locally Modified, except that a previous
<code>update</code> command gave a conflict.  If you have not
already done so, you need to
resolve the conflict as described in <a href="#Conflicts-example">Conflicts example</a>.

     <br><dt>Unknown<dd><a name="index-Unknown-345"></a><span class="sc">cvs</span> doesn't know anything about this file.  For
example, you have created a new file and have not run
<code>add</code>. 
<!-- "Entry Invalid" and "Classify Error" are also in the -->
<!-- status.c.  The latter definitely indicates a CVS bug -->
<!-- (should it be worded more like "internal error" so -->
<!-- people submit bug reports if they see it?).  The former -->
<!-- I'm not as sure; I haven't tracked down whether/when it -->
<!-- appears in "cvs status" output. -->

   </dl>

   <p>To help clarify the file status, <code>status</code> also
reports the <code>Working revision</code> which is the
revision that the file in the working directory derives
from, and the <code>Repository revision</code> which is the
latest revision in the repository for the branch in
use. 
The &lsquo;<samp><span class="samp">Commit Identifier</span></samp>&rsquo; reflects the unique commitid
of the <code>commit</code>. 
<!-- FIXME: should we clarify "in use"?  The answer is -->
<!-- sticky tags, and trying to distinguish branch sticky -->
<!-- tags from non-branch sticky tags seems rather awkward -->
<!-- here. -->
<!-- FIXME: What happens with non-branch sticky tags? -->
<!-- What is the Repository Revision there?  See the -->
<!-- comment at vn_rcs in cvs.h, which is kind of -->
<!-- confused-we really need to document better what this -->
<!-- field contains. -->
<!-- Q: Should we document "New file!" and other such -->
<!-- outputs or are they self-explanatory? -->
<!-- FIXME: what about the date to the right of "Working -->
<!-- revision"?  It doesn't appear with client/server and -->
<!-- seems unnecessary (redundant with "ls -l") so -->
<!-- perhaps it should be removed for non-client/server too? -->
<!-- FIXME: Need some examples. -->
<!-- FIXME: Working revision can also be something like -->
<!-- "-1.3" for a locally removed file.  Not at all -->
<!-- self-explanatory (and it is possible that CVS should -->
<!-- be changed rather than documenting this). -->

<!-- Would be nice to have an @example showing output -->
<!-- from cvs status, with comments showing the xref -->
<!-- where each part of the output is described.  This -->
<!-- might fit in nicely if it is desirable to split this -->
<!-- node in two; one to introduce "cvs status" and one -->
<!-- to list each of the states. -->
   <p>The options to <code>status</code> are listed in
<a href="#Invoking-CVS">Invoking CVS</a>.  For information on its <code>Sticky tag</code>
and <code>Sticky date</code> output, see <a href="#Sticky-tags">Sticky tags</a>. 
For information on its <code>Sticky options</code> output,
see the &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; option in <a href="#update-options">update options</a>.

   <p>You can think of the <code>status</code> and <code>update</code>
commands as somewhat complementary.  You use
<code>update</code> to bring your files up to date, and you
can use <code>status</code> to give you some idea of what an
<code>update</code> would do (of course, the state of the
repository might change before you actually run
<code>update</code>).  In fact, if you want a command to
display file status in a more brief format than is
displayed by the <code>status</code> command, you can invoke

   <p><a name="index-update_002c-to-display-file-status-346"></a>
<pre class="example">     $ cvs -n -q update
</pre>
   <p>The &lsquo;<samp><span class="samp">-n</span></samp>&rsquo; option means to not actually do the
update, but merely to display statuses; the &lsquo;<samp><span class="samp">-q</span></samp>&rsquo;
option avoids printing the name of each directory.  For
more information on the <code>update</code> command, and
these options, see <a href="#Invoking-CVS">Invoking CVS</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Updating-a-file"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conflicts-example">Conflicts example</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-status">File status</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-developers">Multiple developers</a>

</div>

<h3 class="section">10.2 Bringing a file up to date</h3>

<p><a name="index-Bringing-a-file-up-to-date-347"></a><a name="index-Updating-a-file-348"></a><a name="index-Merging-a-file-349"></a><a name="index-Update_002c-introduction-350"></a>
When you want to update or merge a file, use the <code>cvs update -d</code>
command.  For files that are not up to date this is roughly equivalent
to a <code>checkout</code> command: the newest revision of the file is
extracted from the repository and put in your working directory.  The
<code>-d</code> option, not necessary with <code>checkout</code>, tells <span class="sc">cvs</span>
that you wish it to create directories added by other developers.

   <p>Your modifications to a file are never lost when you
use <code>update</code>.  If no newer revision exists,
running <code>update</code> has no effect.  If you have
edited the file, and a newer revision is available,
<span class="sc">cvs</span> will merge all changes into your working copy.

   <p>For instance, imagine that you checked out revision 1.4 and started
editing it.  In the meantime someone else committed revision 1.5, and
shortly after that revision 1.6.  If you run <code>update</code> on the file
now, <span class="sc">cvs</span> will incorporate all changes between revision 1.4 and 1.6 into
your file.

   <p><a name="index-Overlap-351"></a>If any of the changes between 1.4 and 1.6 were made too
close to any of the changes you have made, an
<dfn>overlap</dfn> occurs.  In such cases a warning is
printed, and the resulting file includes both
versions of the lines that overlap, delimited by
special markers. 
See <a href="#update">update</a>, for a complete description of the
<code>update</code> command.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Conflicts-example"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Informing-others">Informing others</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Updating-a-file">Updating a file</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-developers">Multiple developers</a>

</div>

<h3 class="section">10.3 Conflicts example</h3>

<p><a name="index-Merge_002c-an-example-352"></a><a name="index-Example-of-merge-353"></a><a name="index-driver_002ec-_0028merge-example_0029-354"></a>
Suppose revision 1.4 of <samp><span class="file">driver.c</span></samp> contains this:

<pre class="example">     #include &lt;stdio.h&gt;
     
     void main()
     {
         parse();
         if (nerr == 0)
             gencode();
         else
             fprintf(stderr, "No code generated.\n");
         exit(nerr == 0 ? 0 : 1);
     }
</pre>
   <p class="noindent">Revision 1.6 of <samp><span class="file">driver.c</span></samp> contains this:

<pre class="example">     #include &lt;stdio.h&gt;
     
     int main(int argc,
              char **argv)
     {
         parse();
         if (argc != 1)
         {
             fprintf(stderr, "tc: No args expected.\n");
             exit(1);
         }
         if (nerr == 0)
             gencode();
         else
             fprintf(stderr, "No code generated.\n");
         exit(!!nerr);
     }
</pre>
   <p class="noindent">Your working copy of <samp><span class="file">driver.c</span></samp>, based on revision
1.4, contains this before you run &lsquo;<samp><span class="samp">cvs update</span></samp>&rsquo;:
<!--  Really include "cvs"? -->

<pre class="example">     #include &lt;stdlib.h&gt;
     #include &lt;stdio.h&gt;
     
     void main()
     {
         init_scanner();
         parse();
         if (nerr == 0)
             gencode();
         else
             fprintf(stderr, "No code generated.\n");
         exit(nerr == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
     }
</pre>
   <p class="noindent">You run &lsquo;<samp><span class="samp">cvs update</span></samp>&rsquo;:
<!--  Really include "cvs"? -->

<pre class="example">     $ cvs update driver.c
     RCS file: /usr/local/cvsroot/yoyodyne/tc/driver.c,v
     retrieving revision 1.4
     retrieving revision 1.6
     Merging differences between 1.4 and 1.6 into driver.c
     rcsmerge warning: overlaps during merge
     cvs update: conflicts found in driver.c
     C driver.c
</pre>
   <p class="noindent"><a name="index-Conflicts-_0028merge-example_0029-355"></a><span class="sc">cvs</span> tells you that there were some conflicts. 
Your original working file is saved unmodified in
<samp><span class="file">.#driver.c.1.4</span></samp>.  The new version of
<samp><span class="file">driver.c</span></samp> contains this:

<pre class="example">     #include &lt;stdlib.h&gt;
     #include &lt;stdio.h&gt;
     
     int main(int argc,
              char **argv)
     {
         init_scanner();
         parse();
         if (argc != 1)
         {
             fprintf(stderr, "tc: No args expected.\n");
             exit(1);
         }
         if (nerr == 0)
             gencode();
         else
             fprintf(stderr, "No code generated.\n");
     &lt;&lt;&lt;&lt;&lt;&lt;&lt; driver.c
         exit(nerr == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
     =======
         exit(!!nerr);
     &gt;&gt;&gt;&gt;&gt;&gt;&gt; 1.6
     }
</pre>
   <p class="noindent"><a name="index-Markers_002c-conflict-356"></a><a name="index-Conflict-markers-357"></a><a name="index-g_t_003c_003c_003c_003c_003c_003c_003c-358"></a><a name="index-g_t_003e_003e_003e_003e_003e_003e_003e-359"></a><a name="index-g_t_003d_003d_003d_003d_003d_003d_003d-360"></a>
Note how all non-overlapping modifications are incorporated in your working
copy, and that the overlapping section is clearly marked with
&lsquo;<samp><span class="samp">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">=======</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></samp>&rsquo;.

   <p><a name="index-Resolving-a-conflict-361"></a><a name="index-Conflict-resolution-362"></a>You resolve the conflict by editing the file, removing the markers and
the erroneous line.  Suppose you end up with this file:
<!--  Add xref to the pcl-cvs manual when it talks -->
<!--  about this. -->
<pre class="example">     #include &lt;stdlib.h&gt;
     #include &lt;stdio.h&gt;
     
     int main(int argc,
              char **argv)
     {
         init_scanner();
         parse();
         if (argc != 1)
         {
             fprintf(stderr, "tc: No args expected.\n");
             exit(1);
         }
         if (nerr == 0)
             gencode();
         else
             fprintf(stderr, "No code generated.\n");
         exit(nerr == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
     }
</pre>
   <p class="noindent">You can now go ahead and commit this as revision 1.7.

<pre class="example">     $ cvs commit -m "Initialize scanner. Use symbolic exit values." driver.c
     Checking in driver.c;
     /usr/local/cvsroot/yoyodyne/tc/driver.c,v  &lt;--  driver.c
     new revision: 1.7; previous revision: 1.6
     done
</pre>
   <p>For your protection, <span class="sc">cvs</span> will refuse to check in a
file if a conflict occurred and you have not resolved
the conflict.  Currently to resolve a conflict, you
must change the timestamp on the file.  In previous
versions of <span class="sc">cvs</span>, you also needed to
insure that the file contains no conflict markers. 
Because
your file may legitimately contain conflict markers (that
is, occurrences of &lsquo;<samp><span class="samp">&gt;&gt;&gt;&gt;&gt;&gt;&gt; </span></samp>&rsquo; at the start of a
line that don't mark a conflict), the current
version of <span class="sc">cvs</span> will print a warning and proceed to
check in the file. 
<!-- The old behavior was really icky; the only way out -->
<!-- was to start hacking on -->
<!-- the @code{CVS/Entries} file or other such workarounds. -->
<!-- If the timestamp thing isn't considered nice enough, -->
<!-- maybe there should be a "cvs resolved" command -->
<!-- which clears the conflict indication.  For a nice user -->
<!-- interface, this should be invoked by an interactive -->
<!-- merge tool like emerge rather than by the user -->
<!-- directly-such a tool can verify that the user has -->
<!-- really dealt with each conflict. -->

   <p><a name="index-emerge-363"></a>If you use release 1.04 or later of pcl-cvs (a <span class="sc">gnu</span>
Emacs front-end for <span class="sc">cvs</span>) you can use an Emacs
package called emerge to help you resolve conflicts. 
See the documentation for pcl-cvs.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Informing-others"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Concurrency">Concurrency</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conflicts-example">Conflicts example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-developers">Multiple developers</a>

</div>

<h3 class="section">10.4 Informing others about commits</h3>

<p><a name="index-Informing-others-364"></a><a name="index-Spreading-information-365"></a><a name="index-Mail_002c-automatic-mail-on-commit-366"></a>
It is often useful to inform others when you commit a
new revision of a file.  The &lsquo;<samp><span class="samp">-i</span></samp>&rsquo; option of the
<samp><span class="file">modules</span></samp> file, or the <samp><span class="file">loginfo</span></samp> file, can be
used to automate this process.  See <a href="#modules">modules</a>. 
See <a href="#loginfo">loginfo</a>.  You can use these features of <span class="sc">cvs</span>
to, for instance, instruct <span class="sc">cvs</span> to mail a
message to all developers, or post a message to a local
newsgroup. 
<!--  More text would be nice here. -->

<div class="node">
<a name="Concurrency"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Watches">Watches</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Informing-others">Informing others</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-developers">Multiple developers</a>

</div>

<h3 class="section">10.5 Several developers simultaneously attempting to run CVS</h3>

<p><a name="index-Locks_002c-cvs_002c-introduction-367"></a><!-- For a discussion of *why* CVS creates locks, see -->
<!-- the comment at the start of src/lock.c -->
If several developers try to run <span class="sc">cvs</span> at the same
time, one may get the following message:

<pre class="example">     [11:43:23] waiting for bach's lock in /usr/local/cvsroot/foo
</pre>
   <p><a name="index-g_t_0023cvs_002erfl_002c-removing-368"></a><a name="index-g_t_0023cvs_002ewfl_002c-removing-369"></a><a name="index-g_t_0023cvs_002elock_002c-removing-370"></a><span class="sc">cvs</span> will try again every 30 seconds, and either
continue with the operation or print the message again,
if it still needs to wait.  If a lock seems to stick
around for an undue amount of time, find the person
holding the lock and ask them about the cvs command
they are running.  If they aren't running a cvs
command, look in the repository directory mentioned in
the message and remove files which they own whose names
start with <samp><span class="file">#cvs.rfl</span></samp>,
<samp><span class="file">#cvs.wfl</span></samp>, or <samp><span class="file">#cvs.lock</span></samp>.

   <p>Note that these locks are to protect <span class="sc">cvs</span>'s
internal data structures and have no relationship to
the word <dfn>lock</dfn> in the sense used by
<span class="sc">rcs</span>&mdash;which refers to reserved checkouts
(see <a href="#Multiple-developers">Multiple developers</a>).

   <p>Any number of people can be reading from a given
repository at a time; only when someone is writing do
the locks prevent other people from reading or writing.

   <p><a name="index-Atomic-transactions_002c-lack-of-371"></a><a name="index-Transactions_002c-atomic_002c-lack-of-372"></a><!-- the following talks about what one might call commit/update -->
<!-- atomicity. -->
<!-- Probably also should say something about -->
<!-- commit/commit atomicity, that is, "An update will -->
<!-- not get partial versions of more than one commit". -->
<!-- CVS currently has this property and I guess we can -->
<!-- make it a documented feature. -->
<!-- For example one person commits -->
<!-- a/one.c and b/four.c and another commits a/two.c and -->
<!-- b/three.c.  Then an update cannot get the new a/one.c -->
<!-- and a/two.c and the old b/four.c and b/three.c. -->
One might hope for the following property:

   <blockquote>
If someone commits some changes in one cvs command,
then an update by someone else will either get all the
changes, or none of them. 
</blockquote>

<p class="noindent">but <span class="sc">cvs</span> does <em>not</em> have this property.  For
example, given the files

<pre class="example">     a/one.c
     a/two.c
     b/three.c
     b/four.c
</pre>
   <p class="noindent">if someone runs

<pre class="example">     cvs ci a/two.c b/three.c
</pre>
   <p class="noindent">and someone else runs <code>cvs update</code> at the same
time, the person running <code>update</code> might get only
the change to <samp><span class="file">b/three.c</span></samp> and not the change to
<samp><span class="file">a/two.c</span></samp>.

<div class="node">
<a name="Watches"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Choosing-a-model">Choosing a model</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Concurrency">Concurrency</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-developers">Multiple developers</a>

</div>

<h3 class="section">10.6 Mechanisms to track who is editing files</h3>

<p><a name="index-Watches-373"></a>
For many groups, use of <span class="sc">cvs</span> in its default mode is
perfectly satisfactory.  Users may sometimes go to
check in a modification only to find that another
modification has intervened, but they deal with it and
proceed with their check in.  Other groups prefer to be
able to know who is editing what files, so that if two
people try to edit the same file they can choose to
talk about who is doing what when rather than be
surprised at check in time.  The features in this
section allow such coordination, while retaining the
ability of two developers to edit the same file at the
same time.

<!-- Some people might ask why CVS does not enforce the -->
<!-- rule on chmod, by requiring a cvs edit before a cvs -->
<!-- commit.  The main reason is that it could always be -->
<!-- circumvented-one could edit the file, and -->
<!-- then when ready to check it in, do the cvs edit and put -->
<!-- in the new contents and do the cvs commit.  One -->
<!-- implementation note: if we _do_ want to have cvs commit -->
<!-- require a cvs edit, we should store the state on -->
<!-- whether the cvs edit has occurred in the working -->
<!-- directory, rather than having the server try to keep -->
<!-- track of what working directories exist. -->
<!-- FIXME: should the above discussion be part of the -->
<!-- manual proper, somewhere, not just in a comment? -->
   <p>For maximum benefit developers should use <code>cvs
edit</code> (not <code>chmod</code>) to make files read-write to
edit them, and <code>cvs release</code> (not <code>rm</code>) to
discard a working directory which is no longer in use,
but <span class="sc">cvs</span> is not able to enforce this behavior.

   <p>If a development team wants stronger enforcement of
watches and all team members are using a <span class="sc">cvs</span> client version 1.12.10 or
greater to access a <span class="sc">cvs</span> server version 1.12.10 or greater, they can
enable advisory locks.  To enable advisory locks, have all developers
put "edit -c" and "commit -c" into all .cvsrc files,
and make files default to read only by turning on watches
or putting "cvs -r" into all .cvsrc files. 
This prevents multiple people from editing a file at
the same time (unless explicitly overriden with &lsquo;<samp><span class="samp">-f</span></samp>&rsquo;).

<!-- I'm a little dissatisfied with this presentation, -->
<!-- because "watch on"/"edit"/"editors" are one set of -->
<!-- functionality, and "watch add"/"watchers" is another -->
<!-- which is somewhat orthogonal even though they interact in -->
<!-- various ways.  But I think it might be -->
<!-- confusing to describe them separately (e.g. "watch -->
<!-- add" with loginfo).  I don't know. -->
<ul class="menu">
<li><a accesskey="1" href="#Setting-a-watch">Setting a watch</a>:              Telling CVS to watch certain files
<li><a accesskey="2" href="#Getting-Notified">Getting Notified</a>:             Telling CVS to notify you
<li><a accesskey="3" href="#Editing-files">Editing files</a>:                How to edit a file which is being watched
<li><a accesskey="4" href="#Watch-information">Watch information</a>:            Information about who is watching and editing
<li><a accesskey="5" href="#Watches-Compatibility">Watches Compatibility</a>:        Watches interact poorly with CVS 1.6 or earlier
</ul>

<div class="node">
<a name="Setting-a-watch"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getting-Notified">Getting Notified</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Watches">Watches</a>

</div>

<h4 class="subsection">10.6.1 Telling CVS to watch certain files</h4>

<p>To enable the watch features, you first specify that
certain files are to be watched.

   <p><a name="index-watch-on-_0028subcommand_0029-374"></a>

<div class="defun">
&mdash; Command: <b>cvs watch on</b> [<code>-lR</code>] [<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-watch-on-375"></a></var><br>
<blockquote>
        <p><a name="index-Read_002donly-files_002c-and-watches-376"></a>Specify that developers should run <code>cvs edit</code>
before editing <var>files</var>.  <span class="sc">cvs</span> will create working
copies of <var>files</var> read-only, to remind developers
to run the <code>cvs edit</code> command before working on
them.

        <p>If <var>files</var> includes the name of a directory, <span class="sc">cvs</span>
arranges to watch all files added to the corresponding
repository directory, and sets a default for files
added in the future; this allows the user to set
notification policies on a per-directory basis.  The
contents of the directory are processed recursively,
unless the <code>-l</code> option is given. 
The <code>-R</code> option can be used to force recursion if the <code>-l</code>
option is set in <samp><span class="file">~/.cvsrc</span></samp> (see <a href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a>).

        <p>If <var>files</var> is omitted, it defaults to the current directory.

        <p><a name="index-watch-off-_0028subcommand_0029-377"></a></p></blockquote></div>

<div class="defun">
&mdash; Command: <b>cvs watch off</b> [<code>-lR</code>] [<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-watch-off-378"></a></var><br>
<blockquote>
        <p>Do not create <var>files</var> read-only on checkout; thus,
developers will not be reminded to use <code>cvs edit</code>
and <code>cvs unedit</code>.

        <p>The <var>files</var> and options are processed as for <code>cvs
watch on</code>.

        </blockquote></div>

<div class="node">
<a name="Getting-Notified"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Editing-files">Editing files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Setting-a-watch">Setting a watch</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Watches">Watches</a>

</div>

<h4 class="subsection">10.6.2 Telling CVS to notify you</h4>

<p>You can tell <span class="sc">cvs</span> that you want to receive
notifications about various actions taken on a file. 
You can do this without using <code>cvs watch on</code> for
the file, but generally you will want to use <code>cvs
watch on</code>, to remind developers to use the <code>cvs edit</code>
command.

   <p><a name="index-watch-add-_0028subcommand_0029-379"></a>

<div class="defun">
&mdash; Command: <b>cvs watch add</b> [<code>-lR</code>] [<code>-a</code><var> action</var>]<var><small class="dots">...</small> </var>[<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-watch-add-380"></a></var><br>
<blockquote>
        <p>Add the current user to the list of people to receive notification of
work done on <var>files</var>.

        <p>The <code>-a</code> option specifies what kinds of events <span class="sc">cvs</span> should notify
the user about.  <var>action</var> is one of the following:

          <dl>
<dt><code>edit</code><dd>Another user has applied the <code>cvs edit</code> command (described
below) to a watched file.

          <br><dt><code>commit</code><dd>Another user has committed changes to one of the named <var>files</var>.

          <br><dt><code>unedit</code><dd>Another user has abandoned editing a file (other than by committing changes). 
They can do this in several ways, by:

               <ul>
<li>applying the <code>cvs unedit</code> command (described below) to the file

               <li>applying the <code>cvs release</code> command (see <a href="#release">release</a>) to the file's parent directory
(or recursively to a directory more than one level up)

               <li>deleting the file and allowing <code>cvs update</code> to recreate it

          </ul>

          <br><dt><code>all</code><dd>All of the above.

          <br><dt><code>none</code><dd>None of the above.  (This is useful with <code>cvs edit</code>,
described below.)

        </dl>

        <p>The <code>-a</code> option may appear more than once, or not at all.  If
omitted, the action defaults to <code>all</code>.

        <p>The <var>files</var> and options are processed as for
<code>cvs watch on</code>.

        </blockquote></div>

   <p><a name="index-watch-remove-_0028subcommand_0029-381"></a>

<div class="defun">
&mdash; Command: <b>cvs watch remove</b> [<code>-lR</code>] [<code>-a</code><var> action</var>]<var><small class="dots">...</small> </var>[<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-watch-remove-382"></a></var><br>
<blockquote>
        <p>Remove a notification request established using <code>cvs watch add</code>;
the arguments are the same.  If the <code>-a</code> option is present, only
watches for the specified actions are removed.

        </blockquote></div>

   <p><a name="index-notify-_0028admin-file_0029-383"></a>When the conditions exist for notification, <span class="sc">cvs</span>
calls the <samp><span class="file">notify</span></samp> administrative file.  Edit
<samp><span class="file">notify</span></samp> as one edits the other administrative
files (see <a href="#Intro-administrative-files">Intro administrative files</a>).  This
file follows the usual conventions for administrative
files (see <a href="#syntax">syntax</a>), where each line is a regular
expression followed by a command to execute.  The
command should contain a single occurrence of &lsquo;<samp><span class="samp">%s</span></samp>&rsquo;
which will be replaced by the user to notify; the rest
of the information regarding the notification will be
supplied to the command on standard input.  The
standard thing to put in the <code>notify</code> file is the
single line:

<pre class="example">     ALL mail %s -s "CVS notification"
</pre>
   <p class="noindent">This causes users to be notified by electronic mail. 
<!-- FIXME: should it be this hard to set up this -->
<!-- behavior (and the result when one fails to do so, -->
<!-- silent failure to notify, so non-obvious)?  Should -->
<!-- CVS give a warning if no line in notify matches (and -->
<!-- document the use of "DEFAULT :" for the case where -->
<!-- skipping the notification is indeed desired)? -->

   <p><a name="index-users-_0028admin-file_0029-384"></a>Note that if you set this up in the straightforward
way, users receive notifications on the server machine. 
One could of course write a <samp><span class="file">notify</span></samp> script which
directed notifications elsewhere, but to make this
easy, <span class="sc">cvs</span> allows you to associate a notification
address for each user.  To do so create a file
<samp><span class="file">users</span></samp> in <samp><span class="file">CVSROOT</span></samp> with a line for each
user in the format <var>user</var>:<var>value</var>.  Then
instead of passing the name of the user to be notified
to <samp><span class="file">notify</span></samp>, <span class="sc">cvs</span> will pass the <var>value</var>
(normally an email address on some other machine).

   <p><span class="sc">cvs</span> does not notify you for your own changes. 
Currently this check is done based on whether the user
name of the person taking the action which triggers
notification matches the user name of the person
getting notification.  In fact, in general, the watches
features only track one edit by each user.  It probably
would be more useful if watches tracked each working
directory separately, so this behavior might be worth
changing. 
<!-- "behavior might be worth changing" is an effort to -->
<!-- point to future directions while also not promising -->
<!-- that "they" (as in "why don't they fix CVS to....") -->
<!-- will do this. -->
<!-- one implementation issue is identifying whether a -->
<!-- working directory is same or different.  Comparing -->
<!-- pathnames/hostnames is hopeless, but having the server -->
<!-- supply a serial number which the client stores in the -->
<!-- CVS directory as a magic cookie should work. -->

<div class="node">
<a name="Editing-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Watch-information">Watch information</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getting-Notified">Getting Notified</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Watches">Watches</a>

</div>

<h4 class="subsection">10.6.3 How to edit a file which is being watched</h4>

<p><a name="index-Checkout_002c-as-term-for-getting-ready-to-edit-385"></a>Since a file which is being watched is checked out
read-only, you cannot simply edit it.  To make it
read-write, and inform others that you are planning to
edit it, use the <code>cvs edit</code> command.  Some systems
call this a <dfn>checkout</dfn>, but <span class="sc">cvs</span> uses that term
for obtaining a copy of the sources (see <a href="#Getting-the-source">Getting the source</a>), an operation which those systems call a
<dfn>get</dfn> or a <dfn>fetch</dfn>. 
<!-- Issue to think about: should we transition CVS -->
<!-- towards the "get" terminology?  "cvs get" is already a -->
<!-- synonym for "cvs checkout" and that section of the -->
<!-- manual refers to "Getting the source".  If this is -->
<!-- done, needs to be done gingerly (for example, we should -->
<!-- still accept "checkout" in .cvsrc files indefinitely -->
<!-- even if the CVS's messages are changed from "cvs checkout: " -->
<!-- to "cvs get: "). -->
<!-- There is a concern about whether "get" is not as -->
<!-- good for novices because it is a more general term -->
<!-- than "checkout" (and thus arguably harder to assign -->
<!-- a technical meaning for). -->

   <p><a name="index-edit-_0028subcommand_0029-386"></a>

<div class="defun">
&mdash; Command: <b>cvs edit</b> [<code>-lR</code>] [<code>-a</code><var> action</var>]<var><small class="dots">...</small> </var>[<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-edit-387"></a></var><br>
<blockquote>
        <p>Prepare to edit the working files <var>files</var>.  <span class="sc">cvs</span> makes the
<var>files</var> read-write, and notifies users who have requested
<code>edit</code> notification for any of <var>files</var>.

        <p>The <code>cvs edit</code> command accepts the same options as the
<code>cvs watch add</code> command, and establishes a temporary watch for the
user on <var>files</var>; <span class="sc">cvs</span> will remove the watch when <var>files</var> are
<code>unedit</code>ed or <code>commit</code>ted.  If the user does not wish to
receive notifications, she should specify <code>-a none</code>.

        <p>The <var>files</var> and the options are processed as for the <code>cvs
watch</code> commands.

        <p>There are two additional options that <code>cvs edit</code> understands as of
<span class="sc">cvs</span> client and server versions 1.12.10 but <code>cvs watch</code> does not. 
The first is <code>-c</code>, which causes <code>cvs edit</code> to fail if anyone else
is editing the file.  This is probably only useful when &lsquo;<samp><span class="samp">edit -c</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">commit -c</span></samp>&rsquo; are specified in all developers' <samp><span class="file">.cvsrc</span></samp> files.  This
behavior may be overriden this via the <code>-f</code> option, which overrides
<code>-c</code> and allows multiple edits to succeed.

        </blockquote></div>

   <p>Normally when you are done with a set of changes, you
use the <code>cvs commit</code> command, which checks in your
changes and returns the watched files to their usual
read-only state.  But if you instead decide to abandon
your changes, or not to make any changes, you can use
the <code>cvs unedit</code> command.

   <p><a name="index-unedit-_0028subcommand_0029-388"></a><a name="index-Abandoning-work-389"></a><a name="index-Reverting-to-repository-version-390"></a>

<div class="defun">
&mdash; Command: <b>cvs unedit</b> [<code>-lR</code>] [<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-unedit-391"></a></var><br>
<blockquote>
        <p>Abandon work on the working files <var>files</var>, and revert them to the
repository versions on which they are based.  <span class="sc">cvs</span> makes those
<var>files</var> read-only for which users have requested notification using
<code>cvs watch on</code>.  <span class="sc">cvs</span> notifies users who have requested <code>unedit</code>
notification for any of <var>files</var>.

        <p>The <var>files</var> and options are processed as for the
<code>cvs watch</code> commands.

        <p>If watches are not in use, the <code>unedit</code> command
probably does not work, and the way to revert to the
repository version is with the command <code>cvs update -C file</code>
(see <a href="#update">update</a>). 
The meaning is
not precisely the same; the latter may also
bring in some changes which have been made in the
repository since the last time you updated. 
<!-- It would be a useful enhancement to CVS to make -->
<!-- unedit work in the non-watch case as well. -->
</p></blockquote></div>

   <p>When using client/server <span class="sc">cvs</span>, you can use the
<code>cvs edit</code> and <code>cvs unedit</code> commands even if
<span class="sc">cvs</span> is unable to successfully communicate with the
server; the notifications will be sent upon the next
successful <span class="sc">cvs</span> command.

<div class="node">
<a name="Watch-information"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Watches-Compatibility">Watches Compatibility</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Editing-files">Editing files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Watches">Watches</a>

</div>

<h4 class="subsection">10.6.4 Information about who is watching and editing</h4>

<p><a name="index-watchers-_0028subcommand_0029-392"></a>

<div class="defun">
&mdash; Command: <b>cvs watchers</b> [<code>-lR</code>] [<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-watchers-393"></a></var><br>
<blockquote>
        <p>List the users currently watching changes to <var>files</var>.  The report
includes the files being watched, and the mail address of each watcher.

        <p>The <var>files</var> and options are processed as for the
<code>cvs watch</code> commands.

        </blockquote></div>

   <p><a name="index-editors-_0028subcommand_0029-394"></a>

<div class="defun">
&mdash; Command: <b>cvs editors</b> [<code>-lR</code>] [<var>files</var>]<var><small class="dots">...</small><a name="index-cvs-editors-395"></a></var><br>
<blockquote>
        <p>List the users currently working on <var>files</var>.  The report
includes the mail address of each user, the time when the user began
working with the file, and the host and path of the working directory
containing the file.

        <p>The <var>files</var> and options are processed as for the
<code>cvs watch</code> commands.

        </blockquote></div>

<div class="node">
<a name="Watches-Compatibility"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Watch-information">Watch information</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Watches">Watches</a>

</div>

<h4 class="subsection">10.6.5 Using watches with old versions of CVS</h4>

<p><a name="index-CVS-1_002e6_002c-and-watches-396"></a>If you use the watch features on a repository, it
creates <samp><span class="file">CVS</span></samp> directories in the repository and
stores the information about watches in that directory. 
If you attempt to use <span class="sc">cvs</span> 1.6 or earlier with the
repository, you get an error message such as the
following (all on one line):

<pre class="example">     cvs update: cannot open CVS/Entries for reading:
     No such file or directory
</pre>
   <p class="noindent">and your operation will likely be aborted.  To use the
watch features, you must upgrade all copies of <span class="sc">cvs</span>
which use that repository in local or server mode.  If
you cannot upgrade, use the <code>watch off</code> and
<code>watch remove</code> commands to remove all watches, and
that will restore the repository to a state which
<span class="sc">cvs</span> 1.6 can cope with.

<div class="node">
<a name="Choosing-a-model"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Watches">Watches</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Multiple-developers">Multiple developers</a>

</div>

<h3 class="section">10.7 Choosing between reserved or unreserved checkouts</h3>

<p><a name="index-Choosing_002c-reserved-or-unreserved-checkouts-397"></a>
Reserved and unreserved checkouts each have pros and
cons.  Let it be said that a lot of this is a matter of
opinion or what works given different groups' working
styles, but here is a brief description of some of the
issues.  There are many ways to organize a team of
developers.  <span class="sc">cvs</span> does not try to enforce a certain
organization.  It is a tool that can be used in several
ways.

   <p>Reserved checkouts can be very counter-productive.  If
two persons want to edit different parts of a file,
there may be no reason to prevent either of them from
doing so.  Also, it is common for someone to take out a
lock on a file, because they are planning to edit it,
but then forget to release the lock.

<!-- "many groups"?  specifics?  cites to papers on this? -->
<!-- some way to weasel-word it a bit more so we don't -->
<!-- need facts :-)? -->
   <p>People, especially people who are familiar with
reserved checkouts, often wonder how often conflicts
occur if unreserved checkouts are used, and how
difficult they are to resolve.  The experience with
many groups is that they occur rarely and usually are
relatively straightforward to resolve.

   <p>The rarity of serious conflicts may be surprising, until one realizes
that they occur only when two developers disagree on the proper design
for a given section of code; such a disagreement suggests that the
team has not been communicating properly in the first place.  In order
to collaborate under <em>any</em> source management regimen, developers
must agree on the general design of the system; given this agreement,
overlapping changes are usually straightforward to merge.

   <p>In some cases unreserved checkouts are clearly
inappropriate.  If no merge tool exists for the kind of
file you are managing (for example word processor files
or files edited by Computer Aided Design programs), and
it is not desirable to change to a program which uses a
mergeable data format, then resolving conflicts is
going to be unpleasant enough that you generally will
be better off to simply avoid the conflicts instead, by
using reserved checkouts.

   <p>The watches features described above in <a href="#Watches">Watches</a>
can be considered to be an intermediate model between
reserved checkouts and unreserved checkouts.  When you
go to edit a file, it is possible to find out who else
is editing it.  And rather than having the system
simply forbid both people editing the file, it can tell
you what the situation is and let you figure out
whether it is a problem in that particular case or not. 
Therefore, for some groups watches can be
considered the best of both the reserved checkout and unreserved
checkout worlds.

   <p>As of <span class="sc">cvs</span> client and server versions 1.12.10, you may also enable
advisory locks by putting &lsquo;<samp><span class="samp">edit -c</span></samp>&rsquo; and &lsquo;<samp><span class="samp">commit -c</span></samp>&rsquo; in all
developers' <samp><span class="file">.cvsrc</span></samp> files.  After this is done, <code>cvs edit</code>
will fail if there are any other editors, and <code>cvs commit</code> will
fail if the committer has not registered to edit the file via <code>cvs edit</code>. 
This is most effective in conjunction with files checked out read-only by
default, which may be enabled by turning on watches in the repository or by
putting &lsquo;<samp><span class="samp">cvs -r</span></samp>&rsquo; in all <samp><span class="file">.cvsrc</span></samp> files.

<!--  -->
<div class="node">
<a name="Revision-management"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Keyword-substitution">Keyword substitution</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-developers">Multiple developers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">11 Revision management</h2>

<p><a name="index-Revision-management-398"></a>
<!--  This chapter could be expanded a lot. -->
<!--  Experiences are very welcome! -->

   <p>If you have read this far, you probably have a pretty
good grasp on what <span class="sc">cvs</span> can do for you.  This
chapter talks a little about things that you still have
to decide.

   <p>If you are doing development on your own using <span class="sc">cvs</span>
you could probably skip this chapter.  The questions
this chapter takes up become more important when more
than one person is working in a repository.

<ul class="menu">
<li><a accesskey="1" href="#When-to-commit">When to commit</a>:               Some discussion on the subject
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="When-to-commit"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#Revision-management">Revision management</a>

</div>

<h3 class="section">11.1 When to commit?</h3>

<p><a name="index-When-to-commit-399"></a><a name="index-Committing_002c-when-to-400"></a><a name="index-Policy-401"></a>
Your group should decide which policy to use regarding
commits.  Several policies are possible, and as your
experience with <span class="sc">cvs</span> grows you will probably find
out what works for you.

   <p>If you commit files too quickly you might commit files
that do not even compile.  If your partner updates his
working sources to include your buggy file, he will be
unable to compile the code.  On the other hand, other
persons will not be able to benefit from the
improvements you make to the code if you commit very
seldom, and conflicts will probably be more common.

   <p>It is common to only commit files after making sure
that they can be compiled.  Some sites require that the
files pass a test suite.  Policies like this can be
enforced using the commitinfo file
(see <a href="#commitinfo">commitinfo</a>), but you should think twice before
you enforce such a convention.  By making the
development environment too controlled it might become
too regimented and thus counter-productive to the real
goal, which is to get software written.

<!--  -->
<div class="node">
<a name="Keyword-substitution"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tracking-sources">Tracking sources</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Revision-management">Revision management</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">12 Keyword substitution</h2>

<p><a name="index-Keyword-substitution-402"></a><a name="index-Keyword-expansion-403"></a><a name="index-Identifying-files-404"></a>
<!-- Be careful when editing this chapter. -->
<!-- Remember that this file is kept under -->
<!-- version control, so we must not accidentally -->
<!-- include a valid keyword in the running text. -->

   <p>As long as you edit source files inside a working
directory you can always find out the state of
your files via &lsquo;<samp><span class="samp">cvs status</span></samp>&rsquo; and &lsquo;<samp><span class="samp">cvs log</span></samp>&rsquo;. 
But as soon as you export the files from your
development environment it becomes harder to identify
which revisions they are.

   <p><span class="sc">cvs</span> can use a mechanism known as <dfn>keyword
substitution</dfn> (or <dfn>keyword expansion</dfn>) to help
identifying the files.  Embedded strings of the form
<code>$</code><var>keyword</var><code>$</code> and
<code>$</code><var>keyword</var><code>:...$</code> in a file are replaced
with strings of the form
<code>$</code><var>keyword</var><code>:</code><var>value</var><code>$</code> whenever you obtain
a new revision of the file.

<ul class="menu">
<li><a accesskey="1" href="#Keyword-list">Keyword list</a>:                    Keywords
<li><a accesskey="2" href="#Using-keywords">Using keywords</a>:                  Using keywords
<li><a accesskey="3" href="#Avoiding-substitution">Avoiding substitution</a>:           Avoiding substitution
<li><a accesskey="4" href="#Substitution-modes">Substitution modes</a>:              Substitution modes
<li><a accesskey="5" href="#Configuring-keyword-expansion">Configuring keyword expansion</a>:   Configuring keyword expansion
<li><a accesskey="6" href="#Log-keyword">Log keyword</a>:                     Problems with the $Log$ keyword. 
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Keyword-list"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-keywords">Using keywords</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Keyword-substitution">Keyword substitution</a>

</div>

<h3 class="section">12.1 Keyword List</h3>

<p><a name="index-Keyword-List-405"></a>
<!-- FIXME: need some kind of example here I think, -->
<!-- perhaps in a -->
<!-- "Keyword intro" node.  The intro in the "Keyword -->
<!-- substitution" node itself seems OK, but to launch -->
<!-- into a list of the keywords somehow seems too abrupt. -->

   <p>This is a list of the keywords:

     
<a name="index-Author-keyword-406"></a>
<dl><dt><code>$</code><code>Author$</code><dd>The login name of the user who checked in the revision.

     <p><a name="index-CVSHeader-keyword-407"></a><br><dt><code>$</code><code>CVSHeader$</code><dd>A standard header (similar to $Header$, but with
the CVS root stripped off). It contains the relative
pathname of the <span class="sc">rcs</span> file to the CVS root, the
revision number, the date (UTC), the author, the state,
and the locker (if locked). Files will normally never
be locked when you use <span class="sc">cvs</span>.

     <p>Note that this keyword has only been recently
introduced to <span class="sc">cvs</span> and may cause problems with
existing installations if $CVSHeader$ is already
in the files for a different purpose. This keyword may
be excluded using the <code>KeywordExpand=eCVSHeader</code>
in the <samp><span class="file">CVSROOT/config</span></samp> file. 
See <a href="#Configuring-keyword-expansion">Configuring keyword expansion</a> for more details.

     <p><a name="index-Date-keyword-408"></a><br><dt><code>$</code><code>Date$</code><dd>The date and time (UTC) the revision was checked in.

     <p><a name="index-Mdocdate-keyword-409"></a><br><dt><code>$</code><code>Mdocdate$</code><dd>The date (UTC) the revision was checked in, in a format suitable
for the Berkeley mdoc macro processing.

     <pre class="example">          $Mdocdate: December 4 2011 $
</pre>
     <p><a name="index-Header-keyword-410"></a><br><dt><code>$</code><code>Header$</code><dd>A standard header containing the full pathname of the
<span class="sc">rcs</span> file, the revision number, the date (UTC), the
author, the state, and the locker (if locked).  Files
will normally never be locked when you use <span class="sc">cvs</span>.

     <p><a name="index-Id-keyword-411"></a><br><dt><code>$</code><code>Id$</code><dd>Same as <code>$</code><code>Header$</code>, except that the <span class="sc">rcs</span>
filename is without a path.

     <p><a name="index-Name-keyword-412"></a><br><dt><code>$</code><code>Name$</code><dd>Tag name used to check out this file.  The keyword is
expanded only if one checks out with an explicit tag
name.  For example, when running the command <code>cvs
co -r first</code>, the keyword expands to &lsquo;<samp><span class="samp">Name: first</span></samp>&rsquo;.

     <p><a name="index-Locker-keyword-413"></a><br><dt><code>$</code><code>Locker$</code><dd>The login name of the user who locked the revision
(empty if not locked, which is the normal case unless
<code>cvs admin -l</code> is in use).

     <p><a name="index-Log-keyword-414"></a><a name="index-MaxCommentLeaderLength-415"></a><a name="index-UseArchiveCommentLeader-416"></a><a name="index-Log-keyword_002c-configuring-substitution-behavior-417"></a><br><dt><code>$</code><code>Log$</code><dd>The log message supplied during commit, preceded by a
header containing the <span class="sc">rcs</span> filename, the revision
number, the author, and the date (UTC).  Existing log
messages are <em>not</em> replaced.  Instead, the new log
message is inserted after <code>$</code><code>Log:...$</code>. 
By default, each new line is prefixed with the same string which
precedes the <code>$</code><code>Log$</code> keyword, unless it exceeds the
<code>MaxCommentLeaderLength</code> set in <samp><span class="file">CVSROOT/config</span></samp>.

     <p>For example, if the file contains:

     <pre class="example">            /* Here is what people have been up to:
             *
             * $Log: frob.c,v $
             * Revision 1.1  1997/01/03 14:23:51  joe
             * Add the superfrobnicate option
             *
             */
</pre>
     <p class="noindent">then additional lines which are added when expanding
the <code>$</code><code>Log$</code> keyword will be preceded by &lsquo;<samp><span class="samp">   * </span></samp>&rsquo;. 
Unlike previous versions of <span class="sc">cvs</span> and <span class="sc">rcs</span>, the
<dfn>comment leader</dfn> from the <span class="sc">rcs</span> file is not used. 
The <code>$</code><code>Log$</code> keyword is useful for
accumulating a complete change log in a source file,
but for several reasons it can be problematic.

     <p>If the prefix of the <code>$</code><code>Log$</code> keyword turns out to be
longer than <code>MaxCommentLeaderLength</code>, CVS will skip expansion of this
keyword unless <code>UseArchiveCommentLeader</code> is also set in
<samp><span class="file">CVSROOT/config</span></samp> and a &lsquo;<samp><span class="samp">comment leader</span></samp>&rsquo; is set in the RCS archive
file, in which case the comment leader will be used instead.  For more on
setting the comment leader in the RCS archive file, See <a href="#admin">admin</a>.  For more
on configuring the default <code>$</code><code>Log$</code> substitution
behavior, See <a href="#config">config</a>.

     <p>See <a href="#Log-keyword">Log keyword</a>.

     <p><a name="index-RCSfile-keyword-418"></a><br><dt><code>$</code><code>RCSfile$</code><dd>The name of the RCS file without a path.

     <p><a name="index-Revision-keyword-419"></a><br><dt><code>$</code><code>Revision$</code><dd>The revision number assigned to the revision.

     <p><a name="index-Source-keyword-420"></a><br><dt><code>$</code><code>Source$</code><dd>The full pathname of the RCS file.

     <p><a name="index-State-keyword-421"></a><br><dt><code>$</code><code>State$</code><dd>The state assigned to the revision.  States can be
assigned with <code>cvs admin -s</code>&mdash;see <a href="#admin-options">admin options</a>.

     <p><a name="index-Local-keyword-422"></a><br><dt><code>Local keyword</code><dd>The <code>LocalKeyword</code> option in the <samp><span class="file">CVSROOT/config</span></samp> file
may be used to specify a local keyword which is to be
used as an alias for one of the keywords: $Id$,
$Header$, or $CVSHeader$. For
example, if the <samp><span class="file">CVSROOT/config</span></samp> file contains
a line with <code>LocalKeyword=MYBSD=CVSHeader</code>, then a
file with the local keyword $MYBSD$ will be
expanded as if it were a $CVSHeader$ keyword. If
the src/frob.c file contained this keyword, it might
look something like this:

     <pre class="example">            /*
             * $MYBSD: src/frob.c,v 1.1 2003/05/04 09:27:45 john Exp $
             */
</pre>
     <p>Many repositories make use of a such a &ldquo;local
keyword&rdquo; feature. An old patch to <span class="sc">cvs</span> provided
the <code>LocalKeyword</code> feature using a <code>tag=</code>
option and called this the &ldquo;custom tag&rdquo; or &ldquo;local
tag&rdquo; feature. It was used in conjunction with the
what they called the <code>tagexpand=</code> option. In
<span class="sc">cvs</span> this other option is known as the
<code>KeywordExpand</code> option. 
See <a href="#Configuring-keyword-expansion">Configuring keyword expansion</a> for more
details.

     <p>Examples from popular projects include:
$FreeBSD$, $NetBSD$,
$OpenBSD$, $XFree86$,
$Xorg$.

     <p>The advantage of this is that you can include your
local version information in a file using this local
keyword without disrupting the upstream version
information (which may be a different local keyword or
a standard keyword). Allowing bug reports and the like
to more properly identify the source of the original
bug to the third-party and reducing the number of
conflicts that arise during an import of a new version.

     <p>All keyword expansion except the local keyword may be
disabled using the <code>KeywordExpand</code> option in
the <samp><span class="file">CVSROOT/config</span></samp> file&mdash;see
<a href="#Configuring-keyword-expansion">Configuring keyword expansion</a> for more details.

   </dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Using-keywords"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Avoiding-substitution">Avoiding substitution</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Keyword-list">Keyword list</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Keyword-substitution">Keyword substitution</a>

</div>

<h3 class="section">12.2 Using keywords</h3>

<p>To include a keyword string you simply include the
relevant text string, such as <code>$</code><code>Id$</code>, inside the
file, and commit the file.  <span class="sc">cvs</span> will automatically (Or,
more accurately, as part of the update run that
automatically happens after a commit.) 
expand the string as part of the commit operation.

   <p>It is common to embed the <code>$</code><code>Id$</code> string in
the source files so that it gets passed through to
generated files.  For example, if you are managing
computer program source code, you might include a
variable which is initialized to contain that string. 
Or some C compilers may provide a <code>#pragma ident</code>
directive.  Or a document management system might
provide a way to pass a string through to generated
files.

<!-- Would be nice to give an example, but doing this in -->
<!-- portable C is not possible and the problem with -->
<!-- picking any one language (VMS HELP files, Ada, -->
<!-- troff, whatever) is that people use CVS for all -->
<!-- kinds of files. -->
   <p><a name="index-Ident-_0028shell-command_0029-423"></a>The <code>ident</code> command (which is part of the <span class="sc">rcs</span>
package) can be used to extract keywords and their
values from a file.  This can be handy for text files,
but it is even more useful for extracting keywords from
binary files.

<pre class="example">     $ ident samp.c
     samp.c:
          $Id: samp.c,v 1.5 1993/10/19 14:57:32 ceder Exp $
     $ gcc samp.c
     $ ident a.out
     a.out:
          $Id: samp.c,v 1.5 1993/10/19 14:57:32 ceder Exp $
</pre>
   <p><a name="index-What-_0028shell-command_0029-424"></a>S<span class="sc">ccs</span> is another popular revision control system. 
It has a command, <code>what</code>, which is very similar to
<code>ident</code> and used for the same purpose.  Many sites
without <span class="sc">rcs</span> have <span class="sc">sccs</span>.  Since <code>what</code>
looks for the character sequence <code>@(#)</code> it is
easy to include keywords that are detected by either
command.  Simply prefix the keyword with the
magic <span class="sc">sccs</span> phrase, like this:

<pre class="example">     static char *id="@(#) $Id: ab.c,v 1.5 1993/10/19 14:57:32 ceder Exp $";
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Avoiding-substitution"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Substitution-modes">Substitution modes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-keywords">Using keywords</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Keyword-substitution">Keyword substitution</a>

</div>

<h3 class="section">12.3 Avoiding substitution</h3>

<p>Keyword substitution has its disadvantages.  Sometimes
you might want the literal text string
&lsquo;<samp><span class="samp">$</span><span class="samp">Author$</span></samp>&rsquo; to appear inside a file without
<span class="sc">cvs</span> interpreting it as a keyword and expanding it
into something like &lsquo;<samp><span class="samp">$</span><span class="samp">Author: ceder $</span></samp>&rsquo;.

   <p>There is unfortunately no way to selectively turn off
keyword substitution.  You can use &lsquo;<samp><span class="samp">-ko</span></samp>&rsquo;
(see <a href="#Substitution-modes">Substitution modes</a>) to turn off keyword
substitution entirely.

   <p>In many cases you can avoid using keywords in
the source, even though they appear in the final
product.  For example, the source for this manual
contains &lsquo;<samp><span class="samp">$@asis{}Author$</span></samp>&rsquo; whenever the text
&lsquo;<samp><span class="samp">$</span><span class="samp">Author$</span></samp>&rsquo; should appear.  In <code>nroff</code>
and <code>troff</code> you can embed the null-character
<code>\&amp;</code> inside the keyword for a similar effect.

   <p>It is also possible to specify an explicit list of
keywords to include or exclude using the
<code>KeywordExpand</code> option in the
<samp><span class="file">CVSROOT/config</span></samp> file&ndash;see <a href="#Configuring-keyword-expansion">Configuring keyword expansion</a>
for more details. This feature is intended primarily
for use with the <code>LocalKeyword</code> option&ndash;see
<a href="#Keyword-list">Keyword list</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Substitution-modes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Configuring-keyword-expansion">Configuring keyword expansion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Avoiding-substitution">Avoiding substitution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Keyword-substitution">Keyword substitution</a>

</div>

<h3 class="section">12.4 Substitution modes</h3>

<p><a name="index-Keyword-substitution_002c-changing-modes-425"></a><a name="index-g_t_002dk-_0028keyword-substitution_0029-426"></a><a name="index-Kflag-427"></a>
<!-- FIXME: This could be made more coherent, by expanding it -->
<!-- with more examples or something. -->
Each file has a stored default substitution mode, and
each working directory copy of a file also has a
substitution mode.  The former is set by the &lsquo;<samp><span class="samp">-k</span></samp>&rsquo;
option to <code>cvs add</code> and <code>cvs admin</code>; the
latter is set by the &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-A</span></samp>&rsquo; options to <code>cvs
checkout</code> or <code>cvs update</code>. 
<code>cvs diff</code> and <code>cvs rdiff</code> also
have &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; options. 
For some examples,
see <a href="#Binary-files">Binary files</a>, and <a href="#Merging-and-keywords">Merging and keywords</a>. 
<!-- The fact that -A is overloaded to mean both reset -->
<!-- sticky options and reset sticky tags/dates is -->
<!-- somewhat questionable.  Perhaps there should be -->
<!-- separate options to reset sticky options (e.g. -k -->
<!-- A") and tags/dates (someone suggested -r HEAD could -->
<!-- do this instead of setting a sticky tag of "HEAD" -->
<!-- as in the status quo but I haven't thought much -->
<!-- about that idea.  Of course -r .reset or something -->
<!-- could be coined if this needs to be a new option). -->
<!-- On the other hand, having -A mean "get things back -->
<!-- into the state after a fresh checkout" has a certain -->
<!-- appeal, and maybe there is no sufficient reason for -->
<!-- creeping featurism in this area. -->

   <p>The modes available are:

     <dl>
<dt>&lsquo;<samp><span class="samp">-kkv</span></samp>&rsquo;<dd>Generate keyword strings using the default form, e.g. 
<code>$</code><code>Revision: 5.7 $</code> for the <code>Revision</code>
keyword.

     <br><dt>&lsquo;<samp><span class="samp">-kkvl</span></samp>&rsquo;<dd>Like &lsquo;<samp><span class="samp">-kkv</span></samp>&rsquo;, except that a locker's name is always
inserted if the given revision is currently locked. 
The locker's name is only relevant if <code>cvs admin
-l</code> is in use.

     <br><dt>&lsquo;<samp><span class="samp">-kk</span></samp>&rsquo;<dd>Generate only keyword names in keyword strings; omit
their values.  For example, for the <code>Revision</code>
keyword, generate the string <code>$</code><code>Revision$</code>
instead of <code>$</code><code>Revision: 5.7 $</code>.  This option
is useful to ignore differences due to keyword
substitution when comparing different revisions of a
file (see <a href="#Merging-and-keywords">Merging and keywords</a>).

     <br><dt>&lsquo;<samp><span class="samp">-ko</span></samp>&rsquo;<dd>Generate the old keyword string, present in the working
file just before it was checked in.  For example, for
the <code>Revision</code> keyword, generate the string
<code>$</code><code>Revision: 1.1 $</code> instead of
<code>$</code><code>Revision: 5.7 $</code> if that is how the
string appeared when the file was checked in.

     <br><dt>&lsquo;<samp><span class="samp">-kb</span></samp>&rsquo;<dd>Like &lsquo;<samp><span class="samp">-ko</span></samp>&rsquo;, but also inhibit conversion of line
endings between the canonical form in which they are
stored in the repository (linefeed only), and the form
appropriate to the operating system in use on the
client.  For systems, like unix, which use linefeed
only to terminate lines, this is very similar to
&lsquo;<samp><span class="samp">-ko</span></samp>&rsquo;.  For more information on binary files, see
<a href="#Binary-files">Binary files</a>.  In <span class="sc">cvs</span> version 1.12.2 and later
&lsquo;<samp><span class="samp">-kb</span></samp>&rsquo;, as set by <code>cvs add</code>, <code>cvs admin</code>, or
<code>cvs import</code> may not be overridden by a &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; option
specified on the command line.

     <br><dt>&lsquo;<samp><span class="samp">-kv</span></samp>&rsquo;<dd>Generate only keyword values for keyword strings.  For
example, for the <code>Revision</code> keyword, generate the string
<code>5.7</code> instead of <code>$</code><code>Revision: 5.7 $</code>. 
This can help generate files in programming languages
where it is hard to strip keyword delimiters like
<code>$</code><code>Revision: $</code> from a string.  However,
further keyword substitution cannot be performed once
the keyword names are removed, so this option should be
used with care.

     <p>One often would like to use &lsquo;<samp><span class="samp">-kv</span></samp>&rsquo; with <code>cvs
export</code>&mdash;see <a href="#export">export</a>.  But be aware that doesn't
handle an export containing binary files correctly.

   </dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Configuring-keyword-expansion"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Log-keyword">Log keyword</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Substitution-modes">Substitution modes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Keyword-substitution">Keyword substitution</a>

</div>

<h3 class="section">12.5 Configuring Keyword Expansion</h3>

<p><a name="index-Configuring-keyword-expansion-428"></a>
In a repository that includes third-party software on
vendor branches, it is sometimes helpful to configure
CVS to use a local keyword instead of the standard
$Id$ or $Header$ keywords. Examples from
real projects include $Xorg$, $XFree86$,
$FreeBSD$, $NetBSD$,
$OpenBSD$, and even $dotat$. 
The advantage of this is that
you can include your local version information in a
file using this local keyword (sometimes called a
&ldquo;custom tag&rdquo; or a &ldquo;local tag&rdquo;) without disrupting
the upstream version information (which may be a
different local keyword or a standard keyword). In
these cases, it is typically desirable to disable the
expansion of all keywords except the configured local
keyword.

   <p>The <code>KeywordExpand</code> option in the
<samp><span class="file">CVSROOT/config</span></samp> file is intended to allow for the
either the explicit exclusion of a keyword or list of
keywords, or for the explicit inclusion of a keyword or
a list of keywords. This list may include the
<code>LocalKeyword</code> that has been configured.

   <p>The <code>KeywordExpand</code> option is followed by
<code>=</code> and the next character may either be <code>i</code>
to start an inclusion list or <code>e</code> to start an
exclusion list. If the following lines were added to
the <samp><span class="file">CVSROOT/config</span></samp> file:

<pre class="example">             # Add a "MyBSD" keyword and restrict keyword
             # expansion
             LocalKeyword=MyBSD=CVSHeader
             KeywordExpand=iMyBSD
</pre>
   <p>then only the $MyBSD$ keyword would be expanded. 
A list may be used. The this example:

<pre class="example">             # Add a "MyBSD" keyword and restrict keyword
             # expansion to the MyBSD, Name, Date and Mdocdate keywords.
             LocalKeyword=MyBSD=CVSHeader
             KeywordExpand=iMyBSD,Name,Date,Mdocdate
</pre>
   <p>would allow $MyBSD$, $Name$,
$Mdocdate and
$Date$ to be expanded.

   <p>It is also possible to configure an exclusion list
using the following:

<pre class="example">             # Do not expand the non-RCS keyword CVSHeader
             KeywordExpand=eCVSHeader
</pre>
   <p>This allows <span class="sc">cvs</span> to ignore the recently introduced
$CVSHeader$ keyword and retain all of the
others. The exclusion entry could also contain the
standard RCS keyword list, but this could be confusing
to users that expect RCS keywords to be expanded, so
care should be taken to properly set user expectations
for a repository that is configured in that manner.

   <p>If there is a desire to not have any RCS keywords
expanded and not use the <code>-ko</code> flags everywhere,
an administrator may disable all keyword expansion
using the <samp><span class="file">CVSROOT/config</span></samp> line:

<pre class="example">     	# Do not expand any RCS keywords
     	KeywordExpand=i
</pre>
   <p>this could be confusing to users that expect RCS
keywords like $Id$ to be expanded properly,
so care should be taken to properly set user
expectations for a repository so configured.

   <p>It should be noted that a patch to provide both the
<code>KeywordExpand</code> and <code>LocalKeyword</code> features
has been around a long time. However, that patch
implemented these features using <code>tag=</code> and
<code>tagexpand=</code> keywords and those keywords are NOT
recognized.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Log-keyword"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Configuring-keyword-expansion">Configuring keyword expansion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Keyword-substitution">Keyword substitution</a>

</div>

<h3 class="section">12.6 Problems with the $Log$ keyword.</h3>

<p>The <code>$</code><code>Log$</code> keyword is somewhat
controversial.  As long as you are working on your
development system the information is easily accessible
even if you do not use the <code>$</code><code>Log$</code>
keyword&mdash;just do a <code>cvs log</code>.  Once you export
the file the history information might be useless
anyhow.

   <p>A more serious concern is that <span class="sc">cvs</span> is not good at
handling <code>$</code><code>Log$</code> entries when a branch is
merged onto the main trunk.  Conflicts often result
from the merging operation. 
<!-- Might want to check whether the CVS implementation -->
<!-- of RCS_merge has this problem the same way rcsmerge -->
<!-- does.  I would assume so.... -->

   <p>People also tend to "fix" the log entries in the file
(correcting spelling mistakes and maybe even factual
errors).  If that is done the information from
<code>cvs log</code> will not be consistent with the
information inside the file.  This may or may not be a
problem in real life.

   <p>It has been suggested that the <code>$</code><code>Log$</code>
keyword should be inserted <em>last</em> in the file, and
not in the files header, if it is to be used at all. 
That way the long list of change messages will not
interfere with everyday source file browsing.

<!--  -->
<div class="node">
<a name="Tracking-sources"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Builds">Builds</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Keyword-substitution">Keyword substitution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">13 Tracking third-party sources</h2>

<p><a name="index-Third_002dparty-sources-429"></a><a name="index-Tracking-sources-430"></a>
<!-- FIXME: Need discussion of added and removed files. -->
<!-- FIXME: This doesn't really adequately introduce the -->
<!-- concepts of "vendor" and "you".  They don't *have* -->
<!-- to be separate organizations or separate people. -->
<!-- We want a description which is somewhat more based on -->
<!-- the technical issues of which sources go where, but -->
<!-- also with enough examples of how this relates to -->
<!-- relationships like customer-supplier, developer-QA, -->
<!-- maintainer-contributor, or whatever, to make it -->
<!-- seem concrete. -->
If you modify a program to better fit your site, you
probably want to include your modifications when the next
release of the program arrives.  <span class="sc">cvs</span> can help you with
this task.

   <p><a name="index-Vendor-431"></a><a name="index-Vendor-branch-432"></a><a name="index-Branch_002c-vendor_002d-433"></a>In the terminology used in <span class="sc">cvs</span>, the supplier of the
program is called a <dfn>vendor</dfn>.  The unmodified
distribution from the vendor is checked in on its own
branch, the <dfn>vendor branch</dfn>.  <span class="sc">cvs</span> reserves branch
1.1.1 for this use.

   <p>When you modify the source and commit it, your revision
will end up on the main trunk.  When a new release is
made by the vendor, you commit it on the vendor branch
and copy the modifications onto the main trunk.

   <p>Use the <code>import</code> command to create and update
the vendor branch.  When you import a new file,
(usually) the vendor branch is made the `head' revision, so
anyone that checks out a copy of the file gets that
revision.  When a local modification is committed it is
placed on the main trunk, and made the `head'
revision.

<ul class="menu">
<li><a accesskey="1" href="#First-import">First import</a>:                 Importing for the first time
<li><a accesskey="2" href="#Update-imports">Update imports</a>:               Updating with the import command
<li><a accesskey="3" href="#Reverting-local-changes">Reverting local changes</a>:      Reverting to the latest vendor release
<li><a accesskey="4" href="#Binary-files-in-imports">Binary files in imports</a>:      Binary files require special handling
<li><a accesskey="5" href="#Keywords-in-imports">Keywords in imports</a>:          Keyword substitution might be undesirable
<li><a accesskey="6" href="#Multiple-vendor-branches">Multiple vendor branches</a>:     What if you get sources from several places? 
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="First-import"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Update-imports">Update imports</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tracking-sources">Tracking sources</a>

</div>

<h3 class="section">13.1 Importing for the first time</h3>

<p><a name="index-Importing-modules-434"></a>
<!-- Should mention naming conventions for vendor tags, -->
<!-- release tags, and perhaps directory names. -->
Use the <code>import</code> command to check in the sources
for the first time.  When you use the <code>import</code>
command to track third-party sources, the <dfn>vendor
tag</dfn> and <dfn>release tags</dfn> are useful.  The
<dfn>vendor tag</dfn> is a symbolic name for the branch
(which is always 1.1.1, unless you use the &lsquo;<samp><span class="samp">-b
</span><var>branch</var></samp>&rsquo; flag&mdash;see <a href="#Multiple-vendor-branches">Multiple vendor branches</a>.).  The
<dfn>release tags</dfn> are symbolic names for a particular
release, such as &lsquo;<samp><span class="samp">FSF_0_04</span></samp>&rsquo;.

<!-- I'm not completely sure this belongs here.  But -->
<!-- we need to say it _somewhere_ reasonably obvious; it -->
<!-- is a common misconception among people first learning CVS -->
   <p>Note that <code>import</code> does <em>not</em> change the
directory in which you invoke it.  In particular, it
does not set up that directory as a <span class="sc">cvs</span> working
directory; if you want to work with the sources import
them first and then check them out into a different
directory (see <a href="#Getting-the-source">Getting the source</a>).

   <p><a name="index-wdiff-_0028import-example_0029-435"></a>Suppose you have the sources to a program called
<code>wdiff</code> in a directory <samp><span class="file">wdiff-0.04</span></samp>,
and are going to make private modifications that you
want to be able to use even when new releases are made
in the future.  You start by importing the source to
your repository:

<pre class="example">     $ cd wdiff-0.04
     $ cvs import -m "Import of FSF v. 0.04" fsf/wdiff FSF_DIST WDIFF_0_04
</pre>
   <p>The vendor tag is named &lsquo;<samp><span class="samp">FSF_DIST</span></samp>&rsquo; in the above
example, and the only release tag assigned is
&lsquo;<samp><span class="samp">WDIFF_0_04</span></samp>&rsquo;. 
<!-- FIXME: Need to say where fsf/wdiff comes from. -->

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Update-imports"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Reverting-local-changes">Reverting local changes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#First-import">First import</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tracking-sources">Tracking sources</a>

</div>

<h3 class="section">13.2 Updating with the import command</h3>

<p>When a new release of the source arrives, you import it into the
repository with the same <code>import</code> command that you used to set up
the repository in the first place.  The only difference is that you
specify a different release tag this time:

<pre class="example">     $ tar xfz wdiff-0.05.tar.gz
     $ cd wdiff-0.05
     $ cvs import -m "Import of FSF v. 0.05" fsf/wdiff FSF_DIST WDIFF_0_05
</pre>
   <p><em>WARNING: If you use a release tag that already exists in one of the
repository archives, files removed by an import may not be detected.</em>

   <p>For files that have not been modified locally, the newly created
revision becomes the head revision.  If you have made local
changes, <code>import</code> will warn you that you must merge the changes
into the main trunk, and tell you to use &lsquo;<samp><span class="samp">checkout -j</span></samp>&rsquo; to do so:

<!-- FIXME: why "wdiff" here and "fsf/wdiff" in the -->
<!-- "import"?  I think the assumption is that one has -->
<!-- "wdiff fsf/wdiff" or some such in modules, but it -->
<!-- would be better to not use modules in this example. -->
<pre class="example">     $ cvs checkout -jFSF_DIST:yesterday -jFSF_DIST wdiff
</pre>
   <p class="noindent">The above command will check out the latest revision of
&lsquo;<samp><span class="samp">wdiff</span></samp>&rsquo;, merging the changes made on the vendor branch &lsquo;<samp><span class="samp">FSF_DIST</span></samp>&rsquo;
since yesterday into the working copy.  If any conflicts arise during
the merge they should be resolved in the normal way (see <a href="#Conflicts-example">Conflicts example</a>).  Then, the modified files may be committed.

   <p>However, it is much better to use the two release tags rather than using
a date on the branch as suggested above:

<pre class="example">     $ cvs checkout -jWDIFF_0_04 -jWDIFF_0_05 wdiff
</pre>
   <p class="noindent">The reason this is better is that
using a date, as suggested above, assumes that you do
not import more than one release of a product per day. 
More importantly, using the release tags allows <span class="sc">cvs</span> to detect files
that were removed between the two vendor releases and mark them for
removal.  Since <code>import</code> has no way to detect removed files, you
should do a merge like this even if <code>import</code> doesn't tell you to.

<div class="node">
<a name="Reverting-local-changes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Binary-files-in-imports">Binary files in imports</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Update-imports">Update imports</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tracking-sources">Tracking sources</a>

</div>

<h3 class="section">13.3 Reverting to the latest vendor release</h3>

<p>You can also revert local changes completely and return
to the latest vendor release by changing the `head'
revision back to the vendor branch on all files.  This
does, however, produce weird results if you should ever
edit this file again, for anyone looking at the output
from the <code>log</code> command or CVSweb.  To fix this,
first commit a revision of the file which equals the
vendor branch, then use <code>admin</code> &lsquo;<samp><span class="samp">-b</span></samp>&rsquo;. For
example, if you have a checked-out copy of the sources
in <samp><span class="file">~/work.d/wdiff</span></samp>, and you want to revert to the
vendor's version for all the files in that directory,
you would type:

<pre class="example">     $ cd ~/work.d/wdiff
     $ cvs admin -bFSF_DIST .
</pre>
   <p class="noindent">You must specify the &lsquo;<samp><span class="samp">-bFSF_DIST</span></samp>&rsquo; without any space
after the &lsquo;<samp><span class="samp">-b</span></samp>&rsquo;.  See <a href="#admin-options">admin options</a>.

<div class="node">
<a name="Binary-files-in-imports"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Keywords-in-imports">Keywords in imports</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reverting-local-changes">Reverting local changes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tracking-sources">Tracking sources</a>

</div>

<h3 class="section">13.4 How to handle binary files with cvs import</h3>

<p>Use the &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; wrapper option to tell import which
files are binary.  See <a href="#Wrappers">Wrappers</a>.

<div class="node">
<a name="Keywords-in-imports"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-vendor-branches">Multiple vendor branches</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Binary-files-in-imports">Binary files in imports</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tracking-sources">Tracking sources</a>

</div>

<h3 class="section">13.5 How to handle keyword substitution with cvs import</h3>

<p>The sources which you are importing may contain
keywords (see <a href="#Keyword-substitution">Keyword substitution</a>).  For example,
the vendor may use <span class="sc">cvs</span> or some other system
which uses similar keyword expansion syntax.  If you
just import the files in the default fashion, then
the keyword expansions supplied by the vendor will
be replaced by keyword expansions supplied by your
own copy of <span class="sc">cvs</span>.  It may be more convenient to
maintain the expansions supplied by the vendor, so
that this information can supply information about
the sources that you imported from the vendor.

   <p>To maintain the keyword expansions supplied by the
vendor, supply the &lsquo;<samp><span class="samp">-ko</span></samp>&rsquo; option to <code>cvs
import</code> the first time you import the file. 
This will turn off keyword expansion
for that file entirely, so if you want to be more
selective you'll have to think about what you want
and use the &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; option to <code>cvs update</code> or
<code>cvs admin</code> as appropriate. 
<!-- Supplying -ko to import if the file already existed -->
<!-- has no effect.  Not clear to me whether it should -->
<!-- or not. -->

<div class="node">
<a name="Multiple-vendor-branches"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Keywords-in-imports">Keywords in imports</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Tracking-sources">Tracking sources</a>

</div>

<h3 class="section">13.6 Multiple vendor branches</h3>

<p>All the examples so far assume that there is only one
vendor from which you are getting sources.  In some
situations you might get sources from a variety of
places.  For example, suppose that you are dealing with
a project where many different people and teams are
modifying the software.  There are a variety of ways to
handle this, but in some cases you have a bunch of
source trees lying around and what you want to do more
than anything else is just to all put them in <span class="sc">cvs</span> so
that you at least have them in one place.

   <p>For handling situations in which there may be more than
one vendor, you may specify the &lsquo;<samp><span class="samp">-b</span></samp>&rsquo; option to
<code>cvs import</code>.  It takes as an argument the vendor
branch to import to.  The default is &lsquo;<samp><span class="samp">-b 1.1.1</span></samp>&rsquo;.

   <p>Vendor branches can only be in the format 1.1.x where
&lsquo;<samp><span class="samp">x</span></samp>&rsquo; is an <em>uneven</em> number, because branch
tags use even numbers.

   <p>For example, suppose that there are two teams, the red
team and the blue team, that are sending you sources. 
You want to import the red team's efforts to branch
1.1.1 and use the vendor tag RED.  You want to import
the blue team's efforts to branch 1.1.3 and use the
vendor tag BLUE.  So the commands you might use are:

<pre class="example">     $ cvs import dir RED RED_1-0
     $ cvs import -b 1.1.3 dir BLUE BLUE_1-5
</pre>
   <p>Note that if your vendor tag does not match your
&lsquo;<samp><span class="samp">-b</span></samp>&rsquo; option, <span class="sc">cvs</span> will not detect this case!  For
example,

<pre class="example">     $ cvs import -b 1.1.3 dir RED RED_1-0
</pre>
   <p class="noindent">Be careful; this kind of mismatch is sure to sow
confusion or worse.  I can't think of a useful purpose
for the ability to specify a mismatch here, but if you
discover such a use, don't.  <span class="sc">cvs</span> is likely to make this
an error in some future release.

<!-- Probably should say more about the semantics of -->
<!-- multiple branches.  What about the default branch? -->
<!-- What about joining (perhaps not as useful with -->
<!-- multiple branches, or perhaps it is.  Either way -->
<!-- should be mentioned). -->
<!-- I'm not sure about the best location for this.  In -->
<!-- one sense, it might belong right after we've introduced -->
<!-- CVS's basic version control model, because people need -->
<!-- to figure out builds right away.  The current location -->
<!-- is based on the theory that it kind of akin to the -->
<!-- "Revision management" section. -->
<div class="node">
<a name="Builds"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Special-Files">Special Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tracking-sources">Tracking sources</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">14 How your build system interacts with CVS</h2>

<p><a name="index-Builds-436"></a><a name="index-make-437"></a>
As mentioned in the introduction, <span class="sc">cvs</span> does not
contain software for building your software from source
code.  This section describes how various aspects of
your build system might interact with <span class="sc">cvs</span>.

<!-- Is there a way to discuss this without reference to -->
<!-- tools other than CVS?  I'm not sure there is; I -->
<!-- wouldn't think that people who learn CVS first would -->
<!-- even have this concern. -->
   <p>One common question, especially from people who are
accustomed to <span class="sc">rcs</span>, is how to make their build get
an up to date copy of the sources.  The answer to this
with <span class="sc">cvs</span> is two-fold.  First of all, since
<span class="sc">cvs</span> itself can recurse through directories, there
is no need to modify your <samp><span class="file">Makefile</span></samp> (or whatever
configuration file your build tool uses) to make sure
each file is up to date.  Instead, just use two
commands, first <code>cvs -q update</code> and then
<code>make</code> or whatever the command is to invoke your
build tool.  Secondly, you do not necessarily
<em>want</em> to get a copy of a change someone else made
until you have finished your own work.  One suggested
approach is to first update your sources, then
implement, build and
test the change you were thinking of, and then commit
your sources (updating first if necessary).  By
periodically (in between changes, using the approach
just described) updating your entire tree, you ensure
that your sources are sufficiently up to date.

   <p><a name="index-Bill-of-materials-438"></a>One common need is to record which versions of which
source files went into a particular build.  This kind
of functionality is sometimes called <dfn>bill of
materials</dfn> or something similar.  The best way to do
this with <span class="sc">cvs</span> is to use the <code>tag</code> command to
record which versions went into a given build
(see <a href="#Tags">Tags</a>).

   <p>Using <span class="sc">cvs</span> in the most straightforward manner
possible, each developer will have a copy of the entire
source tree which is used in a particular build.  If
the source tree is small, or if developers are
geographically dispersed, this is the preferred
solution.  In fact one approach for larger projects is
to break a project down into smaller
<!-- I say subsystem instead of module because they may or -->
<!-- may not use the modules file. -->
separately-compiled subsystems, and arrange a way of
releasing them internally so that each developer need
check out only those subsystems which they are
actively working on.

   <p>Another approach is to set up a structure which allows
developers to have their own copies of some files, and
for other files to access source files from a central
location.  Many people have come up with some such a
<!-- two such people are paul@sander.cupertino.ca.us (for -->
<!-- a previous employer) -->
<!-- and gunnar.tornblom@se.abb.com (spicm and related tools), -->
<!-- but as far as I know -->
<!-- no one has nicely packaged or released such a system (or -->
<!-- instructions for constructing one). -->
system using features such as the symbolic link feature
found in many operating systems, or the <code>VPATH</code>
feature found in many versions of <code>make</code>.  One build
tool which is designed to help with this kind of thing
is Odin (see
<code>ftp://ftp.cs.colorado.edu/pub/distribs/odin</code>). 
<!-- Should we be saying more about Odin?  Or how you use -->
<!-- it with CVS?  Also, the Prime Time Freeware for Unix -->
<!-- disk (see http://www.ptf.com/) has Odin (with a nice -->
<!-- paragraph summarizing it on the web), so that might be a -->
<!-- semi-"official" place to point people. -->
<!-- Of course, many non-CVS systems have this kind of -->
<!-- functionality, for example OSF's ODE -->
<!-- (http://www.osf.org/ode/) or mk -->
<!-- (http://www.grin.net/~pzi/mk-3.18.4.docs/mk_toc.html -->
<!-- He has changed providers in the past; a search engine search -->
<!-- for "Peter Ziobrzynski" probably won't get too many -->
<!-- spurious hits :-).  A more stable URL might be -->
<!-- ftp://ftp.uu.net/pub/cmvc/mk).  But I'm not sure -->
<!-- there is any point in mentioning them here unless they -->
<!-- can work with CVS. -->

<!--  -->
<div class="node">
<a name="Special-Files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#CVS-commands">CVS commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Builds">Builds</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">15 Special Files</h2>

<p><a name="index-Special-files-439"></a><a name="index-Device-nodes-440"></a><a name="index-Ownership_002c-saving-in-CVS-441"></a><a name="index-Permissions_002c-saving-in-CVS-442"></a><a name="index-Hard-links-443"></a><a name="index-Symbolic-links-444"></a>
In normal circumstances, <span class="sc">cvs</span> works only with regular
files.  Every file in a project is assumed to be
persistent; it must be possible to open, read and close
them; and so on.  <span class="sc">cvs</span> also ignores file permissions and
ownerships, leaving such issues to be resolved by the
developer at installation time.  In other words, it is
not possible to "check in" a device into a repository;
if the device file cannot be opened, <span class="sc">cvs</span> will refuse to
handle it.  Files also lose their ownerships and
permissions during repository transactions.

<!--  -->
<!--  START MAN 1 - -->
<div class="node">
<a name="CVS-commands"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-CVS">Invoking CVS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Special-Files">Special Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix A Guide to CVS commands</h2>

<p>This appendix describes the overall structure of
<span class="sc">cvs</span> commands, and describes some commands in
detail (others are described elsewhere; for a quick
reference to <span class="sc">cvs</span> commands, see <a href="#Invoking-CVS">Invoking CVS</a>). 
<!-- The idea is that we want to move the commands which -->
<!-- are described here into the main body of the manual, -->
<!-- in the process reorganizing the manual to be -->
<!-- organized around what the user wants to do, not -->
<!-- organized around CVS commands. -->
<!-- Note that many users do expect a manual which is -->
<!-- organized by command.  At least some users do. -->
<!-- One good addition to the "organized by command" -->
<!-- section (if any) would be "see also" links. -->
<!-- The awk manual might be a good example; it has a -->
<!-- reference manual which is more verbose than Invoking -->
<!-- CVS but probably somewhat less verbose than CVS -->
<!-- Commands. -->

<ul class="menu">
<li><a accesskey="1" href="#Structure">Structure</a>:                    Overall structure of CVS commands
<li><a accesskey="2" href="#Exit-status">Exit status</a>:                  Indicating CVS's success or failure
<li><a accesskey="3" href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a>:                     Default options with the ~/.cvsrc file
<li><a accesskey="4" href="#Global-options">Global options</a>:               Options you give to the left of cvs_command
<li><a accesskey="5" href="#Common-options">Common options</a>:               Options you give to the right of cvs_command
<li><a accesskey="6" href="#Date-input-formats">Date input formats</a>: 		Acceptable formats for date specifications
<li><a accesskey="7" href="#admin">admin</a>:                        Administration
<li><a accesskey="8" href="#annotate">annotate</a>:                     What revision modified each line of a file? 
<li><a accesskey="9" href="#checkout">checkout</a>:                     Checkout sources for editing
<li><a href="#commit">commit</a>:                       Check files into the repository
<li><a href="#diff">diff</a>:                         Show differences between revisions
<li><a href="#export">export</a>:                       Export sources from CVS, similar to checkout
<li><a href="#history">history</a>:                      Show status of files and users
<li><a href="#import">import</a>:                       Import sources into CVS, using vendor branches
<li><a href="#log">log</a>:                          Show log messages for files
<li><a href="#ls-_0026-rls">ls &amp; rls</a>:                     List files in the repository
<li><a href="#rdiff">rdiff</a>:                        'patch' format diffs between releases
<li><a href="#release">release</a>:                      Indicate that a directory is no longer in use
<li><a href="#server-_0026-pserver">server &amp; pserver</a>:             Act as a server for a client on stdin/stdout
<li><a href="#suck">suck</a>:                         Download RCS ,v file raw
<li><a href="#update">update</a>:                       Bring work tree in sync with repository
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Structure"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Exit-status">Exit status</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.1 Overall structure of CVS commands</h3>

<p><a name="index-Structure-445"></a><a name="index-CVS-command-structure-446"></a><a name="index-Command-structure-447"></a><a name="index-Format-of-CVS-commands-448"></a>
The overall format of all <span class="sc">cvs</span> commands is:

<pre class="example">     cvs [ cvs_options ] cvs_command [ command_options ] [ command_args ]
</pre>
     <dl>
<dt><code>cvs</code><dd>The name of the <span class="sc">cvs</span> program.

     <br><dt><code>cvs_options</code><dd>Some options that affect all sub-commands of <span class="sc">cvs</span>.  These are
described below.

     <br><dt><code>cvs_command</code><dd>One of several different sub-commands.  Some of the commands have
aliases that can be used instead; those aliases are noted in the
reference manual for that command.  There are only two situations
where you may omit &lsquo;<samp><span class="samp">cvs_command</span></samp>&rsquo;: &lsquo;<samp><span class="samp">cvs -H</span></samp>&rsquo; elicits a
list of available commands, and &lsquo;<samp><span class="samp">cvs -v</span></samp>&rsquo; displays version
information on <span class="sc">cvs</span> itself.

     <br><dt><code>command_options</code><dd>Options that are specific for the command.

     <br><dt><code>command_args</code><dd>Arguments to the commands. 
</dl>

   <p>There is unfortunately some confusion between
<code>cvs_options</code> and <code>command_options</code>. 
When given as a <code>cvs_option</code>, some options only
affect some of the commands.  When given as a
<code>command_option</code> it may have a different meaning, and
be accepted by more commands.  In other words, do not
take the above categorization too seriously.  Look at
the documentation instead.

<div class="node">
<a name="Exit-status"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Structure">Structure</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.2 CVS's exit status</h3>

<p><a name="index-Exit-status_002c-of-CVS-449"></a>
<span class="sc">cvs</span> can indicate to the calling environment whether it
succeeded or failed by setting its <dfn>exit status</dfn>. 
The exact way of testing the exit status will vary from
one operating system to another.  For example in a unix
shell script the &lsquo;<samp><span class="samp">$?</span></samp>&rsquo; variable will be 0 if the
last command returned a successful exit status, or
greater than 0 if the exit status indicated failure.

   <p>If <span class="sc">cvs</span> is successful, it returns a successful status;
if there is an error, it prints an error message and
returns a failure status.  The one exception to this is
the <code>cvs diff</code> command.  It will return a
successful status if it found no differences, or a
failure status if there were differences or if there
was an error.  Because this behavior provides no good
way to detect errors, in the future it is possible that
<code>cvs diff</code> will be changed to behave like the
other <span class="sc">cvs</span> commands. 
<!-- It might seem like checking whether cvs -q diff -->
<!-- produces empty or non-empty output can tell whether -->
<!-- there were differences or not.  But it seems like -->
<!-- there are cases with output but no differences -->
<!-- (testsuite basica-8b).  It is not clear to me how -->
<!-- useful it is for a script to be able to check -->
<!-- whether there were differences. -->
<!-- FIXCVS? In previous versions of CVS, cvs diff -->
<!-- returned 0 for no differences, 1 for differences, or -->
<!-- 2 for errors.  Is this behavior worth trying to -->
<!-- bring back (but what does it mean for VMS?)? -->

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="%7e%2f.cvsrc"></a>
<a name="g_t_007e_002f_002ecvsrc"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Global-options">Global options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Exit-status">Exit status</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.3 Default options and the ~/.cvsrc file</h3>

<p><a name="index-g_t_002ecvsrc-file-450"></a><a name="index-Option-defaults-451"></a>
There are some <code>command_options</code> that are used so
often that you might have set up an alias or some other
means to make sure you always specify that option.  One
example (the one that drove the implementation of the
<samp><span class="file">.cvsrc</span></samp> support, actually) is that many people find the
default output of the &lsquo;<samp><span class="samp">diff</span></samp>&rsquo; command to be very
hard to read, and that either context diffs or unidiffs
are much easier to understand.

   <p>The <samp><span class="file">~/.cvsrc</span></samp> file is a way that you can add
default options to <code>cvs_commands</code> within cvs,
instead of relying on aliases or other shell scripts.

   <p>The format of the <samp><span class="file">~/.cvsrc</span></samp> file is simple.  The
file is searched for a line that begins with the same
name as the <code>cvs_command</code> being executed.  If a
match is found, then the remainder of the line is split
up (at whitespace characters) into separate options and
added to the command arguments <em>before</em> any
options from the command line.

   <p>If a command has two names (e.g., <code>checkout</code> and
<code>co</code>), the official name, not necessarily the one
used on the command line, will be used to match against
the file.  So if this is the contents of the user's
<samp><span class="file">~/.cvsrc</span></samp> file:

<pre class="example">     log -N
     diff -uN
     rdiff -u
     update -Pd
     checkout -P
     release -d
</pre>
   <p class="noindent">the command &lsquo;<samp><span class="samp">cvs checkout foo</span></samp>&rsquo; would have the
&lsquo;<samp><span class="samp">-P</span></samp>&rsquo; option added to the arguments, as well as
&lsquo;<samp><span class="samp">cvs co foo</span></samp>&rsquo;.

   <p>With the example file above, the output from &lsquo;<samp><span class="samp">cvs
diff foobar</span></samp>&rsquo; will be in unidiff format.  &lsquo;<samp><span class="samp">cvs diff
-c foobar</span></samp>&rsquo; will provide context diffs, as usual. 
Getting "old" format diffs would be slightly more
complicated, because <code>diff</code> doesn't have an option
to specify use of the "old" format, so you would need
&lsquo;<samp><span class="samp">cvs -f diff foobar</span></samp>&rsquo;.

   <p>In place of the command name you can use <code>cvs</code> to
specify global options (see <a href="#Global-options">Global options</a>).  For
example the following line in <samp><span class="file">.cvsrc</span></samp>

<pre class="example">     cvs -z6
</pre>
   <p class="noindent">causes <span class="sc">cvs</span> to use compression level 6.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Global-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Common-options">Common options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.4 Global options</h3>

<p><a name="index-Options_002c-global-452"></a><a name="index-Global-options-453"></a><a name="index-Left_002dhand-options-454"></a>
The available &lsquo;<samp><span class="samp">cvs_options</span></samp>&rsquo; (that are given to the
left of &lsquo;<samp><span class="samp">cvs_command</span></samp>&rsquo;) are:

     <dl>
<dt><code>--allow-root=</code><var>rootdir</var><dd>May be invoked multiple times to specify one legal <span class="sc">cvsroot</span> directory with
each invocation.  Also causes CVS to preparse the configuration file for each
specified root, which can be useful when configuring write proxies,  See
<a href="#Password-authentication-server">Password authentication server</a> &amp; <a href="#Write-proxies">Write proxies</a>.

     <p><a name="index-Authentication_002c-stream-455"></a><a name="index-Stream-authentication-456"></a><br><dt><code>-a</code><dd>Authenticate all communication between the client and
the server.  Only has an effect on the <span class="sc">cvs</span> client. 
As of this writing, this is only implemented when using
a GSSAPI connection (see <a href="#GSSAPI-authenticated">GSSAPI authenticated</a>). 
Authentication prevents certain sorts of attacks
involving hijacking the active <span class="sc">tcp</span> connection. 
Enabling authentication does not enable encryption.

     <p><a name="index-RCSBIN_002c-overriding-457"></a><a name="index-Overriding-RCSBIN-458"></a><br><dt><code>-b </code><var>bindir</var><dd>In <span class="sc">cvs</span> 1.9.18 and older, this specified that
<span class="sc">rcs</span> programs are in the <var>bindir</var> directory. 
Current versions of <span class="sc">cvs</span> do not run <span class="sc">rcs</span>
programs; for compatibility this option is accepted,
but it does nothing.

     <p><a name="index-TMPDIR_002c-environment-variable-459"></a><a name="index-temporary-file-directory_002c-set-via-command-line-460"></a><a name="index-temporary-file-directory_002c-set-via-environment-variable-461"></a><a name="index-temporary-file-directory_002c-set-via-config-462"></a><a name="index-temporary-files_002c-location-of-463"></a><br><dt><code>-T </code><var>tempdir</var><dd>Use <var>tempdir</var> as the directory where temporary files are
located.

     <p>The <span class="sc">cvs</span> client and server store temporary files in a temporary directory. 
The path to this temporary directory is set via, in order of precedence:

          <ul>
<li>The argument to the global &lsquo;<samp><span class="samp">-T</span></samp>&rsquo; option.

          <li>The value set for <code>TmpDir</code> in the config file (server only -
see <a href="#config">config</a>).

          <li>The contents of the <code>$TMPDIR</code> environment variable (<code>%TMPDIR%</code> on
Windows - see <a href="#Environment-variables">Environment variables</a>).

          <li>/tmp

     </ul>

     <p>Temporary directories should always be specified as an absolute pathname. 
When running a CVS client, &lsquo;<samp><span class="samp">-T</span></samp>&rsquo; affects only the local process;
specifying &lsquo;<samp><span class="samp">-T</span></samp>&rsquo; for the client has no effect on the server and
vice versa.

     <p><a name="index-CVSROOT_002c-overriding-464"></a><a name="index-Overriding-CVSROOT-465"></a><br><dt><code>-d </code><var>cvs_root_directory</var><dd>Use <var>cvs_root_directory</var> as the root directory
pathname of the repository.  Overrides the setting of
the <code>$CVSROOT</code> environment variable.  See <a href="#Repository">Repository</a>.

     <p><a name="index-EDITOR_002c-overriding-466"></a><a name="index-Overriding-EDITOR-467"></a><br><dt><code>-e </code><var>editor</var><dd>Use <var>editor</var> to enter revision log information.  Overrides the
setting of the <code>$CVSEDITOR</code> and <code>$EDITOR</code>
environment variables.  For more information, see
<a href="#Committing-your-changes">Committing your changes</a>.

     <br><dt><code>-f</code><dd>Do not read the <samp><span class="file">~/.cvsrc</span></samp> file.  This
option is most often used because of the
non-orthogonality of the <span class="sc">cvs</span> option set.  For
example, the &lsquo;<samp><span class="samp">cvs log</span></samp>&rsquo; option &lsquo;<samp><span class="samp">-N</span></samp>&rsquo; (turn off
display of tag names) does not have a corresponding
option to turn the display on.  So if you have
&lsquo;<samp><span class="samp">-N</span></samp>&rsquo; in the <samp><span class="file">~/.cvsrc</span></samp> entry for &lsquo;<samp><span class="samp">log</span></samp>&rsquo;,
you may need to use &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; to show the tag names.

     <br><dt><code>-g</code><dd>Forges group-writable permissions on files in the working copy. 
This option is typically used when you have multiple users sharing
a single checked out source tree, allowing them to operate their
shells with a less dangerous umask at the expense of <span class="sc">cvs</span> security. 
To use this feature, create a directory to hold the checked-out
source tree, set it to a private group, and set up the directory
such that files created under it inherit the gid of the directory. 
On BSD systems, this occurs automatically. On SYSV systems and
GNU/Linux, the sgid bit must be set on the directory for this. 
The users who are to share the checked out tree must be placed in
that group which owns the directory.

     <p>Note that the sharing of a single checked-out source tree is very
different from giving several users access to a common <span class="sc">cvs</span> repository. 
Access to a common <span class="sc">cvs</span> repository already maintains shared group-write
permissions and does not require this option.

     <p>Due to the security implications, setting this option globally in
your <samp><span class="file">.cvsrc</span></samp> file is strongly discouraged; if you must, ensure
all source checkouts are "firewalled" within a private group or a
private mode 0700 directory.

     <p>This option is a MidnightBSD extension merged into MirBSD <span class="sc">cvs</span>.

     <br><dt><code>-H</code><dt><code>--help</code><dd>Display usage information about the specified &lsquo;<samp><span class="samp">cvs_command</span></samp>&rsquo;
(but do not actually execute the command).  If you don't specify
a command name, &lsquo;<samp><span class="samp">cvs -H</span></samp>&rsquo; displays overall help for
<span class="sc">cvs</span>, including a list of other help options. 
<!-- It seems to me it is better to document it this way -->
<!-- rather than trying to update this documentation -->
<!-- every time that we add a -help-foo option.  But -->
<!-- perhaps that is confusing... -->

     <p><a name="index-Read_002donly-repository-mode-468"></a><br><dt><code>-R</code><dd>Turns on read-only repository mode.  This allows one to check out from a
read-only repository, such as within an anoncvs server, or from a <span class="sc">cd-rom</span>
repository.

     <p>Same effect as if the <code>CVSREADONLYFS</code> environment
variable is set. Using &lsquo;<samp><span class="samp">-R</span></samp>&rsquo; can also considerably
speed up checkouts over NFS.

     <p><a name="index-Read_002donly-mode-469"></a><br><dt><code>-n</code><dd>Do not change any files.  Attempt to execute the
&lsquo;<samp><span class="samp">cvs_command</span></samp>&rsquo;, but only to issue reports; do not remove,
update, or merge any existing files, or create any new files.

     <p>Note that <span class="sc">cvs</span> will not necessarily produce exactly
the same output as without &lsquo;<samp><span class="samp">-n</span></samp>&rsquo;.  In some cases
the output will be the same, but in other cases
<span class="sc">cvs</span> will skip some of the processing that would
have been required to produce the exact same output.

     <br><dt><code>-Q</code><dd>Cause the command to be really quiet; the command will only
generate output for serious problems.

     <br><dt><code>-q</code><dd>Cause the command to be somewhat quiet; informational messages,
such as reports of recursion through subdirectories, are
suppressed.

     <p><a name="index-Read_002donly-files_002c-and-_002dr-470"></a><br><dt><code>-r</code><dd>Make new working files read-only.  Same effect
as if the <code>$CVSREAD</code> environment variable is set
(see <a href="#Environment-variables">Environment variables</a>).  The default is to
make working files writable, unless watches are on
(see <a href="#Watches">Watches</a>).

     <br><dt><code>-s </code><var>variable</var><code>=</code><var>value</var><dd>Set a user variable (see <a href="#Variables">Variables</a>).

     <p><a name="index-Trace-471"></a><br><dt><code>-t</code><dd>Trace program execution; display messages showing the steps of
<span class="sc">cvs</span> activity.  Particularly useful with &lsquo;<samp><span class="samp">-n</span></samp>&rsquo; to explore the
potential impact of an unfamiliar command.

     <br><dt><code>-v</code><br><dt><code>--version</code><dd>Display version and copyright information for <span class="sc">cvs</span>.

     <p><a name="index-CVSREAD_002c-overriding-472"></a><a name="index-Overriding-CVSREAD-473"></a><br><dt><code>-w</code><dd>Make new working files read-write.  Overrides the
setting of the <code>$CVSREAD</code> environment variable. 
Files are created read-write by default, unless <code>$CVSREAD</code> is
set or &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; is given. 
<!-- Note that -w only overrides -r and CVSREAD; it has -->
<!-- no effect on files which are readonly because of -->
<!-- "cvs watch on".  My guess is that is the way it -->
<!-- should be (or should "cvs -w get" on a watched file -->
<!-- be the same as a get and a cvs edit?), but I'm not -->
<!-- completely sure whether to document it this way. -->

     <br><dt><code>-x</code><dd><a name="index-Encryption-474"></a>Encrypt all communication between the client and the
server.  Only has an effect on the <span class="sc">cvs</span> client.  As
of this writing, this is only implemented when using a
GSSAPI connection (see <a href="#GSSAPI-authenticated">GSSAPI authenticated</a>) or a
Kerberos connection (see <a href="#Kerberos-authenticated">Kerberos authenticated</a>). 
Enabling encryption implies that message traffic is
also authenticated.  Encryption support is not
available by default; it must be enabled using a
special configure option, <samp><span class="file">--enable-encryption</span></samp>,
when you build <span class="sc">cvs</span>.

     <br><dt><code>-z </code><var>level</var><dd><a name="index-Compression-475"></a><a name="index-Gzip-476"></a>Request compression <var>level</var> for network traffic. 
<span class="sc">cvs</span> interprets <var>level</var> identically to the <code>gzip</code> program. 
Valid levels are 1 (high speed, low compression) to
9 (low speed, high compression), or 0 to disable
compression (the default).  Data sent to the server will
be compressed at the requested level and the client will request
the server use the same compression level for data returned.  The
server will use the closest level allowed by the server administrator to
compress returned data.  This option only has an effect when passed to
the <span class="sc">cvs</span> client. 
</dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Common-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Date-input-formats">Date input formats</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Global-options">Global options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.5 Common command options</h3>

<p><a name="index-Common-options-477"></a><a name="index-Right_002dhand-options-478"></a>
This section describes the &lsquo;<samp><span class="samp">command_options</span></samp>&rsquo; that
are available across several <span class="sc">cvs</span> commands.  These
options are always given to the right of
&lsquo;<samp><span class="samp">cvs_command</span></samp>&rsquo;. Not all
commands support all of these options; each option is
only supported for commands where it makes sense. 
However, when a command has one of these options you
can almost always count on the same behavior of the
option as in other commands.  (Other command options,
which are listed with the individual commands, may have
different behavior from one <span class="sc">cvs</span> command to the other).

   <p><em>Note: the &lsquo;</em><samp><span class="samp">history</span></samp><em>&rsquo; command is an exception; it supports
many options that conflict even with these standard options.</em>

     
<a name="index-Dates-479"></a>
<a name="index-Time-480"></a>
<a name="index-Specifying-dates-481"></a>
<dl><dt><code>-D </code><var>date_spec</var><dd>Use the most recent revision no later than <var>date_spec</var>. 
<var>date_spec</var> is a single argument, a date description
specifying a date in the past.

     <p>The specification is <dfn>sticky</dfn> when you use it to make a
private copy of a source file; that is, when you get a working
file using &lsquo;<samp><span class="samp">-D</span></samp>&rsquo;, <span class="sc">cvs</span> records the date you specified, so that
further updates in the same directory will use the same date
(for more information on sticky tags/dates, see <a href="#Sticky-tags">Sticky tags</a>).

     <p>&lsquo;<samp><span class="samp">-D</span></samp>&rsquo; is available with the <code>annotate</code>, <code>checkout</code>,
<code>diff</code>, <code>export</code>, <code>history</code>, <code>ls</code>,
<code>rdiff</code>, <code>rls</code>, <code>rtag</code>, <code>tag</code>, and <code>update</code> commands. 
(The <code>history</code> command uses this option in a
slightly different way; see <a href="#history-options">history options</a>).

     <p>For a complete description of the date formats accepted by <span class="sc">cvs</span>,
see <a href="#Date-input-formats">Date input formats</a>. 
<!-- What other formats should we accept?  I don't want -->
<!-- to start accepting a whole mess of non-standard -->
<!-- new formats (there are a lot which are in wide use in -->
<!-- one context or another), but practicality does -->
<!-- dictate some level of flexibility. -->
<!-- * POSIX.2 (e.g. touch, ls output, date) and other -->
<!-- POSIX and/or de facto unix standards (e.g. at).  The -->
<!-- practice here is too inconsistent to be of any use. -->
<!-- * VMS dates.  This is not a formal standard, but -->
<!-- there is a published specification (see SYS$ASCTIM -->
<!-- and SYS$BINTIM in the _VMS System Services Reference -->
<!-- Manual_), it is implemented consistently in VMS -->
<!-- utilities, and VMS users will expect CVS running on -->
<!-- VMS to support this format (and if we're going to do -->
<!-- that, better to make CVS support it on all -->
<!-- platforms.  Maybe). -->
<!-- One more note: In output, CVS should consistently -->
<!-- use one date format, and that format should be one that -->
<!-- it accepts in input as well.  The former isn't -->
<!-- really true (see survey below), and I'm not -->
<!-- sure that either of those formats is accepted in -->
<!-- input. -->
<!-- cvs log -->
<!-- current 1996/01/02 13:45:31 -->
<!-- Internet 02 Jan 1996 13:45:31 UT -->
<!-- ISO 1996-01-02 13:45:31 -->
<!-- cvs ann -->
<!-- current 02-Jan-96 -->
<!-- Internet-like 02 Jan 96 -->
<!-- ISO 96-01-02 -->
<!-- cvs status -->
<!-- current Tue Jun 11 02:54:53 1996 -->
<!-- Internet [Tue,] 11 Jun 1996 02:54:53 -->
<!-- ISO 1996-06-11 02:54:53 -->
<!-- note: date possibly should be omitted entirely for -->
<!-- other reasons. -->
<!-- cvs editors -->
<!-- current Tue Jun 11 02:54:53 1996 GMT -->
<!-- cvs history -->
<!-- current 06/11 02:54 +0000 -->
<!-- any others? -->
<!-- There is a good chance the proper solution has to -->
<!-- involve at least some level of letting the user -->
<!-- decide which format (with the default being the -->
<!-- formats CVS has always used; changing these might be -->
<!-- _very_ disruptive since scripts may very well be -->
<!-- parsing them). -->
<!-- Another random bit of prior art concerning dates is -->
<!-- the strptime function which takes templates such as -->
<!-- "%m/%d/%y", and apparent a variant of getdate() -->
<!-- which also honors them.  See -->
<!-- X/Open CAE Specification, System Interfaces and -->
<!-- Headers Issue 4, Version 2 (September 1994), in the -->
<!-- entry for getdate() on page 231 -->

     <p>Remember to quote the argument to the &lsquo;<samp><span class="samp">-D</span></samp>&rsquo;
flag so that your shell doesn't interpret spaces as
argument separators.  A command using the &lsquo;<samp><span class="samp">-D</span></samp>&rsquo;
flag can look like this:

     <pre class="example">          $ cvs diff -D "1 hour ago" cvs.texinfo
</pre>
     <p><a name="index-Forcing-a-tag-match-482"></a><br><dt><code>-f</code><dd>When you specify a particular date or tag to <span class="sc">cvs</span> commands, they
normally ignore files that do not contain the tag (or did not
exist prior to the date) that you specified.  Use the &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; option
if you want files retrieved even when there is no match for the
tag or date.  (The most recent revision of the file
will be used).

     <p>Note that even with &lsquo;<samp><span class="samp">-f</span></samp>&rsquo;, a tag that you specify
must exist (that is, in some file, not necessary in
every file).  This is so that <span class="sc">cvs</span> will continue to
give an error if you mistype a tag name.

     <p>&lsquo;<samp><span class="samp">-f</span></samp>&rsquo; is available with these commands:
<code>annotate</code>, <code>checkout</code>, <code>export</code>,
<code>rdiff</code>, <code>rtag</code>, and <code>update</code>.

     <p><em>WARNING:  The </em><code>commit</code><em> and </em><code>remove</code><em>
commands also have a
&lsquo;</em><samp><span class="samp">-f</span></samp><em>&rsquo; option, but it has a different behavior for
those commands.  See <a href="#commit-options">commit options</a>, and
<a href="#Removing-files">Removing files</a>.</em>

     <br><dt><code>-k </code><var>kflag</var><dd>Override the default processing of RCS keywords other than
&lsquo;<samp><span class="samp">-kb</span></samp>&rsquo;.  See <a href="#Keyword-substitution">Keyword substitution</a>, for the meaning of
<var>kflag</var>.  Used with the <code>checkout</code> and <code>update</code>
commands, your <var>kflag</var> specification is
<dfn>sticky</dfn>; that is, when you use this option
with a <code>checkout</code> or <code>update</code> command,
<span class="sc">cvs</span> associates your selected <var>kflag</var> with any files
it operates on, and continues to use that <var>kflag</var> with future
commands on the same files until you specify otherwise.

     <p>The &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; option is available with the <code>add</code>,
<code>checkout</code>, <code>diff</code>, <code>export</code>, <code>import</code>,
<code>rdiff</code>, and <code>update</code> commands.

     <p><em>WARNING: Prior to CVS version 1.12.2, the &lsquo;</em><samp><span class="samp">-k</span></samp><em>&rsquo; flag
overrode the &lsquo;</em><samp><span class="samp">-kb</span></samp><em>&rsquo; indication for a binary file.  This could
sometimes corrupt binary files.  See <a href="#Merging-and-keywords">Merging and keywords</a>, for
more.</em>

     <br><dt><code>-l</code><dd>Local; run only in current working directory, rather than
recursing through subdirectories.

     <p>Available with the following commands: <code>annotate</code>, <code>checkout</code>,
<code>commit</code>, <code>diff</code>, <code>edit</code>, <code>editors</code>, <code>export</code>,
<code>log</code>, <code>rdiff</code>, <code>remove</code>, <code>rtag</code>,
<code>status</code>, <code>tag</code>, <code>unedit</code>, <code>update</code>, <code>watch</code>,
and <code>watchers</code>.

     <p><a name="index-Editor_002c-avoiding-invocation-of-483"></a><a name="index-Avoiding-editor-invocation-484"></a><br><dt><code>-m </code><var>message</var><dd>Use <var>message</var> as log information, instead of
invoking an editor.

     <p>Available with the following commands: <code>add</code>,
<code>commit</code> and <code>import</code>.

     <br><dt><code>-n</code><dd>Do not run any tag program.  (A program can be
specified to run in the modules
database (see <a href="#modules">modules</a>); this option bypasses it).

     <p><em>Note: this is not the same as the &lsquo;</em><samp><span class="samp">cvs -n</span></samp><em>&rsquo;
program option, which you can specify to the left of a cvs command!</em>

     <p>Available with the <code>checkout</code>, <code>commit</code>, <code>export</code>,
and <code>rtag</code> commands.

     <br><dt><code>-P</code><dd>Prune empty directories.  See <a href="#Removing-directories">Removing directories</a>.

     <br><dt><code>-p</code><dd>Pipe the files retrieved from the repository to standard output,
rather than writing them in the current directory.  Available
with the <code>checkout</code> and <code>update</code> commands.

     <br><dt><code>-R</code><dd>Process directories recursively.  This is the default for all <span class="sc">cvs</span>
commands, with the exception of <code>ls</code> &amp; <code>rls</code>.

     <p>Available with the following commands: <code>annotate</code>, <code>checkout</code>,
<code>commit</code>, <code>diff</code>, <code>edit</code>, <code>editors</code>, <code>export</code>,
<code>ls</code>, <code>rdiff</code>, <code>remove</code>, <code>rls</code>, <code>rtag</code>,
<code>status</code>, <code>tag</code>, <code>unedit</code>, <code>update</code>, <code>watch</code>,
and <code>watchers</code>.

     <br><dt><code>-r </code><var>tag</var><br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd><a name="index-HEAD_002c-special-tag-485"></a><a name="index-BASE_002c-special-tag-486"></a><a name="index-BASE_002c-special-date-487"></a>Use the revision specified by the <var>tag</var> argument (and the <var>date</var>
argument for the commands which accept it) instead of the
default <dfn>head</dfn> revision.  As well as arbitrary tags defined
with the <code>tag</code> or <code>rtag</code> command, two special tags are
always available: &lsquo;<samp><span class="samp">HEAD</span></samp>&rsquo; refers to the most recent version
available in the repository (also known as the tip of the &lsquo;<samp><span class="samp">MAIN</span></samp>&rsquo;
branch, also known as trunk; the name of a branch refers to its tip;
this version of <span class="sc">cvs</span> introduces &lsquo;<samp><span class="samp">.bhead</span></samp>&rsquo;, but only for the
<span class="sc">diff</span> command, for the same), and &lsquo;<samp><span class="samp">BASE</span></samp>&rsquo; refers to the
revision you last checked out into the current working directory.

     <!-- fixed: HEAD is changed now; .bhead is the name of the branch, -->
     <!-- but added for cases where it is unknown. -->
     <!-- mirabilos -->
     <!-- FIXME: What does HEAD really mean?  I believe that -->
     <!-- the current answer is the head of the default branch -->
     <!-- for all cvs commands except diff.  For diff, it -->
     <!-- seems to be (a) the head of the trunk (or the default -->
     <!-- branch?) if there is no sticky tag, (b) the head of the -->
     <!-- branch for the sticky tag, if there is a sticky tag. -->
     <!-- (b) is ugly as it differs -->
     <!-- from what HEAD means for other commands, but people -->
     <!-- and/or scripts are quite possibly used to it. -->
     <!-- See "head" tests in sanity.sh. -->
     <!-- Probably the best fix is to introduce two new -->
     <!-- special tags, ".thead" for the head of the trunk, -->
     <!-- and ".bhead" for the head of the current branch. -->
     <!-- Then deprecate HEAD.  This has the advantage of -->
     <!-- not surprising people with a change to HEAD, and a -->
     <!-- side benefit of also phasing out the poorly-named -->
     <!-- HEAD (see discussion of reserved tag names in node -->
     <!-- "Tags").  Of course, .thead and .bhead should be -->
     <!-- carefully implemented (with the implementation the -->
     <!-- same for "diff" as for everyone else), test cases -->
     <!-- written (similar to the ones in "head"), new tests -->
     <!-- cases written for things like default branches, &c. -->
     <p>The tag specification is sticky when you use this
with <code>checkout</code> or <code>update</code> to make your own
copy of a file: <span class="sc">cvs</span> remembers the tag and continues to use it on
future update commands, until you specify otherwise (for more information
on sticky tags/dates, see <a href="#Sticky-tags">Sticky tags</a>).

     <p>The tag can be either a symbolic or numeric tag, as
described in <a href="#Tags">Tags</a>, or the name of a branch, as
described in <a href="#Branching-and-merging">Branching and merging</a>. 
When <var>tag</var> is the name of a
branch, some commands accept the optional <var>date</var> argument to specify
the revision as of the given date on the branch. 
When a command expects a specific revision,
the name of a branch is interpreted as the most recent
revision on that branch.

     <p>As a MirOS <span class="sc">cvs</span> extension, specifying &lsquo;<samp><span class="samp">BASE</span></samp>&rsquo; as the <var>date</var>
portion of the argument yields the <em>base revision</em> of the branch
specified by the <var>tag</var> portion of the argument, i.e. the revision
on the parent branch the <var>tag</var> branch split off, or, where both
branches were the same. 
This option has not received very much testing, beware!

     <p>Specifying the &lsquo;<samp><span class="samp">-q</span></samp>&rsquo; global option along with the
&lsquo;<samp><span class="samp">-r</span></samp>&rsquo; command option is often useful, to suppress
the warning messages when the <span class="sc">rcs</span> file
does not contain the specified tag.

     <p><em>Note: this is not the same as the overall &lsquo;</em><samp><span class="samp">cvs -r</span></samp><em>&rsquo; option,
which you can specify to the left of a </em><span class="sc">cvs</span><em> command!</em>

     <p>&lsquo;<samp><span class="samp">-r </span><var>tag</var></samp>&rsquo; is available with the <code>commit</code> and <code>history</code>
commands.

     <p>&lsquo;<samp><span class="samp">-r </span><var>tag</var><span class="samp">[:</span><var>date</var><span class="samp">]</span></samp>&rsquo; is available with the <code>annotate</code>,
<code>checkout</code>, <code>diff</code>, <code>export</code>, <code>rdiff</code>, <code>rtag</code>,
and <code>update</code> commands.

     <br><dt><code>-W</code><dd>Specify file names that should be filtered.  You can
use this option repeatedly.  The spec can be a file
name pattern of the same type that you can specify in
the <samp><span class="file">.cvswrappers</span></samp> file. 
Available with the following commands: <code>import</code>,
and <code>update</code>.

   </dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- This file is generated via a rule in Makefile.am from the -->
<!-- getdate.texi file. -->
<!-- *** DO NOT EDIT THIS FILE DIRECTLY *** -->
<!-- Edit getdate.texi instead. -->
<!-- GNU date syntax documentation -->
<!-- Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, -->
<!-- 2003, 2004, 2005 Free Software Foundation, Inc. -->
<!-- This file is part of the CVS distribution. -->
<!-- CVS is free software; you can redistribute it and/or modify -->
<!-- it under the terms of the GNU General Public License as published by -->
<!-- the Free Software Foundation; either version 2, or (at your option) -->
<!-- any later version. -->
<!-- CVS is distributed in the hope that it will be useful, -->
<!-- but WITHOUT ANY WARRANTY; without even the implied warranty of -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the -->
<!-- GNU General Public License for more details. -->
<div class="node">
<a name="Date-input-formats"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#admin">admin</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Common-options">Common options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.6 Date input formats</h3>

<p><a name="index-date-input-formats-488"></a><a name="index-get_005fdate-489"></a>
First, a quote:

   <blockquote>
Our units of temporal measurement, from seconds on up to months, are so
complicated, asymmetrical and disjunctive so as to make coherent mental
reckoning in time all but impossible.  Indeed, had some tyrannical god
contrived to enslave our minds to time, to make it all but impossible
for us to escape subjection to sodden routines and unpleasant surprises,
he could hardly have done better than handing down our present system. 
It is like a set of trapezoidal building blocks, with no vertical or
horizontal surfaces, like a language in which the simplest thought
demands ornate constructions, useless particles and lengthy
circumlocutions.  Unlike the more successful patterns of language and
science, which enable us to face experience boldly or at least
level-headedly, our system of temporal calculation silently and
persistently encourages our terror of time.

<small class="dots">...</small><p>It is as though architects had to measure length in feet, width
in meters and height in ells; as though basic instruction manuals
demanded a knowledge of five different languages.  It is no wonder then
that we often look into our own immediate past or future, last Tuesday
or a week from Sunday, with feelings of helpless confusion.  <small class="dots">...</small>

   <p>&mdash; Robert Grudin, <cite>Time and the Art of Living</cite>. 
</blockquote>

   <p>This section describes the textual date representations that <span class="sc">gnu</span>
programs accept.  These are the strings you, as a user, can supply as
arguments to the various programs.  The C interface (via the
<code>get_date</code> function) is not described here.

<ul class="menu">
<li><a accesskey="1" href="#General-date-syntax">General date syntax</a>:             Common rules. 
<li><a accesskey="2" href="#Calendar-date-items">Calendar date items</a>:             19 Dec 1994. 
<li><a accesskey="3" href="#Time-of-day-items">Time of day items</a>:               9:20pm. 
<li><a accesskey="4" href="#Time-zone-items">Time zone items</a>:                 <span class="sc">est</span>, <span class="sc">pdt</span>, <span class="sc">gmt</span>. 
<li><a accesskey="5" href="#Day-of-week-items">Day of week items</a>:               Monday and others. 
<li><a accesskey="6" href="#Relative-items-in-date-strings">Relative items in date strings</a>:  next tuesday, 2 years ago. 
<li><a accesskey="7" href="#Pure-numbers-in-date-strings">Pure numbers in date strings</a>:    19931219, 1440. 
<li><a accesskey="8" href="#Seconds-since-the-Epoch">Seconds since the Epoch</a>:         @1101064456
<li><a accesskey="9" href="#Authors-of-get_005fdate">Authors of get_date</a>:             Bellovin, Eggert, Salz, Berets, et al. 
</ul>

<div class="node">
<a name="General-date-syntax"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Calendar-date-items">Calendar date items</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.1 General date syntax</h4>

<p><a name="index-general-date-syntax-490"></a>
<a name="index-items-in-date-strings-491"></a>A <dfn>date</dfn> is a string, possibly empty, containing many items
separated by whitespace.  The whitespace may be omitted when no
ambiguity arises.  The empty string means the beginning of today (i.e.,
midnight).  Order of the items is immaterial.  A date string may contain
many flavors of items:

     <ul>
<li>calendar date items
<li>time of the day items
<li>time zone items
<li>day of the week items
<li>relative items
<li>pure numbers. 
</ul>

<p class="noindent">We describe each of these item types in turn, below.

   <p><a name="index-numbers_002c-written_002dout-492"></a><a name="index-ordinal-numbers-493"></a><a name="index-first-_0040r_007bin-date-strings_007d-494"></a><a name="index-next-_0040r_007bin-date-strings_007d-495"></a><a name="index-last-_0040r_007bin-date-strings_007d-496"></a>A few ordinal numbers may be written out in words in some contexts.  This is
most useful for specifying day of the week items or relative items (see
below).  Among the most commonly used ordinal numbers, the word
&lsquo;<samp><span class="samp">last</span></samp>&rsquo; stands for -1, &lsquo;<samp><span class="samp">this</span></samp>&rsquo; stands for 0, and
&lsquo;<samp><span class="samp">first</span></samp>&rsquo; and &lsquo;<samp><span class="samp">next</span></samp>&rsquo; both stand for 1.  Because the word
&lsquo;<samp><span class="samp">second</span></samp>&rsquo; stands for the unit of time there is no way to write the
ordinal number 2, but for convenience &lsquo;<samp><span class="samp">third</span></samp>&rsquo; stands for 3,
&lsquo;<samp><span class="samp">fourth</span></samp>&rsquo; for 4, &lsquo;<samp><span class="samp">fifth</span></samp>&rsquo; for 5,
&lsquo;<samp><span class="samp">sixth</span></samp>&rsquo; for 6, &lsquo;<samp><span class="samp">seventh</span></samp>&rsquo; for 7, &lsquo;<samp><span class="samp">eighth</span></samp>&rsquo; for 8,
&lsquo;<samp><span class="samp">ninth</span></samp>&rsquo; for 9, &lsquo;<samp><span class="samp">tenth</span></samp>&rsquo; for 10, &lsquo;<samp><span class="samp">eleventh</span></samp>&rsquo; for 11 and
&lsquo;<samp><span class="samp">twelfth</span></samp>&rsquo; for 12.

   <p><a name="index-months_002c-written_002dout-497"></a>When a month is written this way, it is still considered to be written
numerically, instead of being &ldquo;spelled in full&rdquo;; this changes the
allowed strings.

   <p><a name="index-language_002c-in-dates-498"></a>In the current implementation, only English is supported for words and
abbreviations like &lsquo;<samp><span class="samp">AM</span></samp>&rsquo;, &lsquo;<samp><span class="samp">DST</span></samp>&rsquo;, &lsquo;<samp><span class="samp">EST</span></samp>&rsquo;, &lsquo;<samp><span class="samp">first</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">January</span></samp>&rsquo;, &lsquo;<samp><span class="samp">Sunday</span></samp>&rsquo;, &lsquo;<samp><span class="samp">tomorrow</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">year</span></samp>&rsquo;.

   <p><a name="index-language_002c-in-dates-499"></a><a name="index-time-zone-item-500"></a>The output of <samp><span class="command">date</span></samp> is not always acceptable as a date string,
not only because of the language problem, but also because there is no
standard meaning for time zone items like &lsquo;<samp><span class="samp">IST</span></samp>&rsquo;.  When using
<samp><span class="command">date</span></samp> to generate a date string intended to be parsed later,
specify a date format that is independent of language and that does not
use time zone items other than &lsquo;<samp><span class="samp">UTC</span></samp>&rsquo; and &lsquo;<samp><span class="samp">Z</span></samp>&rsquo;.  Here are some
ways to do this:

<pre class="example">     $ LC_ALL=C TZ=UTC0 date
     Fri Dec 15 19:48:05 UTC 2000
     $ TZ=UTC0 date +"%Y-%m-%d %H:%M:%SZ"
     2000-12-15 19:48:05Z
     $ date --iso-8601=seconds  # a GNU extension
     2000-12-15T11:48:05-0800
     $ date --iso-8601=ns  # a GNU extension
     2004-02-29T16:21:42,692722128-0800
     $ date --iso-8601=ns | tr T ' '  # --iso-8601 is a GNU extension.
     2004-02-29 16:21:42,692722128-0800
     $ date --rfc-2822  # a GNU extension
     Fri, 15 Dec 2000 11:48:05 -0800
     $ date +"%Y-%m-%d %H:%M:%S %z"  # %z is a GNU extension.
     2000-12-15 11:48:05 -0800
     $ date +'@%s'  # %s is a MirOS extension.
     @1101064210
     $ date +'@%s.%N'  # %s and %N are GNU extensions.
     @1078100502.692722128
</pre>
   <p><a name="index-case_002c-ignored-in-dates-501"></a><a name="index-comments_002c-in-dates-502"></a>Alphabetic case is completely ignored in dates.  Comments may be introduced
between round parentheses, as long as included parentheses are properly
nested.  Hyphens not followed by a digit are currently ignored.  Leading
zeros on numbers are ignored.

<div class="node">
<a name="Calendar-date-items"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Time-of-day-items">Time of day items</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-date-syntax">General date syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.2 Calendar date items</h4>

<p><a name="index-calendar-date-item-503"></a>
A <dfn>calendar date item</dfn> specifies a day of the year.  It is
specified differently, depending on whether the month is specified
numerically or literally.  All these strings specify the same calendar date:

<pre class="example">     1972-09-24     # <span class="sc">iso</span> 8601.
     72-9-24        # Assume 19xx for 69 through 99,
                    # 20xx for 00 through 68.
     72-09-24       # Leading zeros are ignored.
     9/24/72        # Common U.S. writing.
     24 September 1972
     24 Sept 72     # September has a special abbreviation.
     24 Sep 72      # Three-letter abbreviations always allowed.
     Sep 24, 1972
     24-sep-72
     24sep72
</pre>
   <p>The year can also be omitted.  In this case, the last specified year is
used, or the current year if none.  For example:

<pre class="example">     9/24
     sep 24
</pre>
   <p>Here are the rules.

   <p><a name="index-g_t_0040sc_007biso_007d-8601-date-format-504"></a><a name="index-date-format_002c-_0040sc_007biso_007d-8601-505"></a>For numeric months, the <span class="sc">iso</span> 8601 format
&lsquo;<samp><var>year</var><span class="samp">-</span><var>month</var><span class="samp">-</span><var>day</var></samp>&rsquo; is allowed, where <var>year</var> is
any positive number, <var>month</var> is a number between 01 and 12, and
<var>day</var> is a number between 01 and 31.  A leading zero must be present
if a number is less than ten.  If <var>year</var> is 68 or smaller, then 2000
is added to it; otherwise, if <var>year</var> is less than 100,
then 1900 is added to it.  The construct
&lsquo;<samp><var>month</var><span class="samp">/</span><var>day</var><span class="samp">/</span><var>year</var></samp>&rsquo;, popular in the United States,
is accepted.  Also &lsquo;<samp><var>month</var><span class="samp">/</span><var>day</var></samp>&rsquo;, omitting the year.

   <p><a name="index-month-names-in-date-strings-506"></a><a name="index-abbreviations-for-months-507"></a>Literal months may be spelled out in full: &lsquo;<samp><span class="samp">January</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">February</span></samp>&rsquo;, &lsquo;<samp><span class="samp">March</span></samp>&rsquo;, &lsquo;<samp><span class="samp">April</span></samp>&rsquo;, &lsquo;<samp><span class="samp">May</span></samp>&rsquo;, &lsquo;<samp><span class="samp">June</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">July</span></samp>&rsquo;, &lsquo;<samp><span class="samp">August</span></samp>&rsquo;, &lsquo;<samp><span class="samp">September</span></samp>&rsquo;, &lsquo;<samp><span class="samp">October</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">November</span></samp>&rsquo; or &lsquo;<samp><span class="samp">December</span></samp>&rsquo;.  Literal months may be abbreviated
to their first three letters, possibly followed by an abbreviating dot. 
It is also permitted to write &lsquo;<samp><span class="samp">Sept</span></samp>&rsquo; instead of &lsquo;<samp><span class="samp">September</span></samp>&rsquo;.

   <p>When months are written literally, the calendar date may be given as any
of the following:

<pre class="example">     <var>day</var> <var>month</var> <var>year</var>
     <var>day</var> <var>month</var>
     <var>month</var> <var>day</var> <var>year</var>
     <var>day</var>-<var>month</var>-<var>year</var>
</pre>
   <p>Or, omitting the year:

<pre class="example">     <var>month</var> <var>day</var>
</pre>
   <div class="node">
<a name="Time-of-day-items"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Time-zone-items">Time zone items</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Calendar-date-items">Calendar date items</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.3 Time of day items</h4>

<p><a name="index-time-of-day-item-508"></a>
A <dfn>time of day item</dfn> in date strings specifies the time on a given
day.  Here are some examples, all of which represent the same time:

<pre class="example">     20:02:00.000000
     20:02
     8:02pm
     20:02-0500      # In <span class="sc">est</span> (U.S. Eastern Standard Time).
</pre>
   <p>More generally, the time of the day may be given as
&lsquo;<samp><var>hour</var><span class="samp">:</span><var>minute</var><span class="samp">:</span><var>second</var></samp>&rsquo;, where <var>hour</var> is
a number between 0 and 23, <var>minute</var> is a number between 0 and
59, and <var>second</var> is a number between 0 and 59, with an optional
fraction separated by &lsquo;<samp><span class="samp">.</span></samp>&rsquo; or &lsquo;<samp><span class="samp">,</span></samp>&rsquo; consisting of digits. 
Alternatively, &lsquo;<samp><span class="samp">:</span><var>second</var></samp>&rsquo; can be omitted, in which case
it is taken to be zero.

   <p><a name="index-am-_0040r_007bin-date-strings_007d-509"></a><a name="index-pm-_0040r_007bin-date-strings_007d-510"></a><a name="index-midnight-_0040r_007bin-date-strings_007d-511"></a><a name="index-noon-_0040r_007bin-date-strings_007d-512"></a>If the time is followed by &lsquo;<samp><span class="samp">am</span></samp>&rsquo; or &lsquo;<samp><span class="samp">pm</span></samp>&rsquo; (or &lsquo;<samp><span class="samp">a.m.</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">p.m.</span></samp>&rsquo;), <var>hour</var> is restricted to run from 1 to 12, and
&lsquo;<samp><span class="samp">:</span><var>minute</var></samp>&rsquo; may be omitted (taken to be zero).  &lsquo;<samp><span class="samp">am</span></samp>&rsquo;
indicates the first half of the day, &lsquo;<samp><span class="samp">pm</span></samp>&rsquo; indicates the second
half of the day.  In this notation, 12 is the predecessor of 1:
midnight is &lsquo;<samp><span class="samp">12am</span></samp>&rsquo; while noon is &lsquo;<samp><span class="samp">12pm</span></samp>&rsquo;. 
(This is the zero-oriented interpretation of &lsquo;<samp><span class="samp">12am</span></samp>&rsquo; and &lsquo;<samp><span class="samp">12pm</span></samp>&rsquo;,
as opposed to the old tradition derived from Latin
which uses &lsquo;<samp><span class="samp">12m</span></samp>&rsquo; for noon and &lsquo;<samp><span class="samp">12pm</span></samp>&rsquo; for midnight.)

   <p><a name="index-time-zone-correction-513"></a><a name="index-minutes_002c-time-zone-correction-by-514"></a>The time may alternatively be followed by a time zone correction,
expressed as &lsquo;<samp><var>s</var><var>hh</var><var>mm</var></samp>&rsquo;, where <var>s</var> is &lsquo;<samp><span class="samp">+</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">-</span></samp>&rsquo;, <var>hh</var> is a number of zone hours and <var>mm</var> is a number
of zone minutes.  You can also separate <var>hh</var> from <var>mm</var> with a colon. 
When a time zone correction is given this way, it
forces interpretation of the time relative to
Coordinated Universal Time (<span class="sc">utc</span>), overriding any previous
specification for the time zone or the local time zone.  For example,
&lsquo;<samp><span class="samp">+0530</span></samp>&rsquo; and &lsquo;<samp><span class="samp">+05:30</span></samp>&rsquo; both stand for the time zone 5.5 hours
ahead of <span class="sc">utc</span> (e.g., India).  The <var>minute</var>
part of the time of day may not be elided when a time zone correction
is used.  This is the best way to specify a time zone correction by
fractional parts of an hour.

   <p>Either &lsquo;<samp><span class="samp">am</span></samp>&rsquo;/&lsquo;<samp><span class="samp">pm</span></samp>&rsquo; or a time zone correction may be specified,
but not both.

<div class="node">
<a name="Time-zone-items"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Day-of-week-items">Day of week items</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Time-of-day-items">Time of day items</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.4 Time zone items</h4>

<p><a name="index-time-zone-item-515"></a>
A <dfn>time zone item</dfn> specifies an international time zone, indicated
by a small set of letters, e.g., &lsquo;<samp><span class="samp">UTC</span></samp>&rsquo; or &lsquo;<samp><span class="samp">Z</span></samp>&rsquo;
for Coordinated Universal
Time.  Any included periods are ignored.  By following a
non-daylight-saving time zone by the string &lsquo;<samp><span class="samp">DST</span></samp>&rsquo; in a separate
word (that is, separated by some white space), the corresponding
daylight saving time zone may be specified. 
Alternatively, a non-daylight-saving time zone can be followed by a
time zone correction, to add the two values.  This is normally done
only for &lsquo;<samp><span class="samp">UTC</span></samp>&rsquo;; for example, &lsquo;<samp><span class="samp">UTC+05:30</span></samp>&rsquo; is equivalent to
&lsquo;<samp><span class="samp">+05:30</span></samp>&rsquo;.

   <p>Time zone items other than &lsquo;<samp><span class="samp">UTC</span></samp>&rsquo; and &lsquo;<samp><span class="samp">Z</span></samp>&rsquo;
are obsolescent and are not recommended, because they
are ambiguous; for example, &lsquo;<samp><span class="samp">EST</span></samp>&rsquo; has a different meaning in
Australia than in the United States.  Instead, it's better to use
unambiguous numeric time zone corrections like &lsquo;<samp><span class="samp">-0500</span></samp>&rsquo;, as
described in the previous section.

   <p>If neither a time zone item nor a time zone correction is supplied,
time stamps are interpreted using the rules of the default time zone.

<div class="node">
<a name="Day-of-week-items"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Relative-items-in-date-strings">Relative items in date strings</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Time-zone-items">Time zone items</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.5 Day of week items</h4>

<p><a name="index-day-of-week-item-516"></a>
The explicit mention of a day of the week will forward the date
(only if necessary) to reach that day of the week in the future.

   <p>Days of the week may be spelled out in full: &lsquo;<samp><span class="samp">Sunday</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">Monday</span></samp>&rsquo;, &lsquo;<samp><span class="samp">Tuesday</span></samp>&rsquo;, &lsquo;<samp><span class="samp">Wednesday</span></samp>&rsquo;, &lsquo;<samp><span class="samp">Thursday</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">Friday</span></samp>&rsquo; or &lsquo;<samp><span class="samp">Saturday</span></samp>&rsquo;.  Days may be abbreviated to their
first three letters, optionally followed by a period.  The special
abbreviations &lsquo;<samp><span class="samp">Tues</span></samp>&rsquo; for &lsquo;<samp><span class="samp">Tuesday</span></samp>&rsquo;, &lsquo;<samp><span class="samp">Wednes</span></samp>&rsquo; for
&lsquo;<samp><span class="samp">Wednesday</span></samp>&rsquo; and &lsquo;<samp><span class="samp">Thur</span></samp>&rsquo; or &lsquo;<samp><span class="samp">Thurs</span></samp>&rsquo; for &lsquo;<samp><span class="samp">Thursday</span></samp>&rsquo; are
also allowed.

   <p><a name="index-next-_0040var_007bday_007d-517"></a><a name="index-last-_0040var_007bday_007d-518"></a>A number may precede a day of the week item to move forward
supplementary weeks.  It is best used in expression like &lsquo;<samp><span class="samp">third
monday</span></samp>&rsquo;.  In this context, &lsquo;<samp><span class="samp">last </span><var>day</var></samp>&rsquo; or &lsquo;<samp><span class="samp">next
</span><var>day</var></samp>&rsquo; is also acceptable; they move one week before or after
the day that <var>day</var> by itself would represent.

   <p>A comma following a day of the week item is ignored.

<div class="node">
<a name="Relative-items-in-date-strings"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Pure-numbers-in-date-strings">Pure numbers in date strings</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Day-of-week-items">Day of week items</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.6 Relative items in date strings</h4>

<p><a name="index-relative-items-in-date-strings-519"></a><a name="index-displacement-of-dates-520"></a>
<dfn>Relative items</dfn> adjust a date (or the current date if none) forward
or backward.  The effects of relative items accumulate.  Here are some
examples:

<pre class="example">     1 year
     1 year ago
     3 years
     2 days
</pre>
   <p><a name="index-year-_0040r_007bin-date-strings_007d-521"></a><a name="index-month-_0040r_007bin-date-strings_007d-522"></a><a name="index-fortnight-_0040r_007bin-date-strings_007d-523"></a><a name="index-week-_0040r_007bin-date-strings_007d-524"></a><a name="index-day-_0040r_007bin-date-strings_007d-525"></a><a name="index-hour-_0040r_007bin-date-strings_007d-526"></a><a name="index-minute-_0040r_007bin-date-strings_007d-527"></a>The unit of time displacement may be selected by the string &lsquo;<samp><span class="samp">year</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">month</span></samp>&rsquo; for moving by whole years or months.  These are fuzzy
units, as years and months are not all of equal duration.  More precise
units are &lsquo;<samp><span class="samp">fortnight</span></samp>&rsquo; which is worth 14 days, &lsquo;<samp><span class="samp">week</span></samp>&rsquo; worth 7
days, &lsquo;<samp><span class="samp">day</span></samp>&rsquo; worth 24 hours, &lsquo;<samp><span class="samp">hour</span></samp>&rsquo; worth 60 minutes,
&lsquo;<samp><span class="samp">minute</span></samp>&rsquo; or &lsquo;<samp><span class="samp">min</span></samp>&rsquo; worth 60 seconds, and &lsquo;<samp><span class="samp">second</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">sec</span></samp>&rsquo; worth one second.  An &lsquo;<samp><span class="samp">s</span></samp>&rsquo; suffix on these units is
accepted and ignored.

   <p><a name="index-ago-_0040r_007bin-date-strings_007d-528"></a>The unit of time may be preceded by a multiplier, given as an optionally
signed number.  Unsigned numbers are taken as positively signed.  No
number at all implies 1 for a multiplier.  Following a relative item by
the string &lsquo;<samp><span class="samp">ago</span></samp>&rsquo; is equivalent to preceding the unit by a
multiplier with value -1.

   <p><a name="index-day-_0040r_007bin-date-strings_007d-529"></a><a name="index-tomorrow-_0040r_007bin-date-strings_007d-530"></a><a name="index-yesterday-_0040r_007bin-date-strings_007d-531"></a>The string &lsquo;<samp><span class="samp">tomorrow</span></samp>&rsquo; is worth one day in the future (equivalent
to &lsquo;<samp><span class="samp">day</span></samp>&rsquo;), the string &lsquo;<samp><span class="samp">yesterday</span></samp>&rsquo; is worth
one day in the past (equivalent to &lsquo;<samp><span class="samp">day ago</span></samp>&rsquo;).

   <p><a name="index-now-_0040r_007bin-date-strings_007d-532"></a><a name="index-today-_0040r_007bin-date-strings_007d-533"></a><a name="index-this-_0040r_007bin-date-strings_007d-534"></a>The strings &lsquo;<samp><span class="samp">now</span></samp>&rsquo; or &lsquo;<samp><span class="samp">today</span></samp>&rsquo; are relative items corresponding
to zero-valued time displacement, these strings come from the fact
a zero-valued time displacement represents the current time when not
otherwise changed by previous items.  They may be used to stress other
items, like in &lsquo;<samp><span class="samp">12:00 today</span></samp>&rsquo;.  The string &lsquo;<samp><span class="samp">this</span></samp>&rsquo; also has
the meaning of a zero-valued time displacement, but is preferred in
date strings like &lsquo;<samp><span class="samp">this thursday</span></samp>&rsquo;.

   <p>When a relative item causes the resulting date to cross a boundary
where the clocks were adjusted, typically for daylight-saving time,
the resulting date and time are adjusted accordingly.

   <p>The fuzz in units can cause problems with relative items.  For
example, &lsquo;<samp><span class="samp">2003-07-31 -1 month</span></samp>&rsquo; might evaluate to 2003-07-01,
because 2003-06-31 is an invalid date.  To determine the previous
month more reliably, you can ask for the month before the 15th of the
current month.  For example:

<pre class="example">     $ date -R
     Thu, 31 Jul 2003 13:02:39 -0700
     $ date --date="-1 month" +'Last month was %B?'
     Last month was July?
     $ date --date="$(date +%Y-%m-15) -1 month" +'Last month was %B!'
     Last month was June!
</pre>
   <p>Also, take care when manipulating dates around clock changes such as
daylight saving leaps.  In a few cases these have added or subtracted
as much as 24 hours from the clock, so it is often wise to adopt
universal time by setting the <samp><span class="env">TZ</span></samp> environment variable to
&lsquo;<samp><span class="samp">UTC0</span></samp>&rsquo; before embarking on calendrical calculations.

<div class="node">
<a name="Pure-numbers-in-date-strings"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Seconds-since-the-Epoch">Seconds since the Epoch</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Relative-items-in-date-strings">Relative items in date strings</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.7 Pure numbers in date strings</h4>

<p><a name="index-pure-numbers-in-date-strings-535"></a>
The precise interpretation of a pure decimal number depends
on the context in the date string.

   <p>If the decimal number is of the form <var>yyyy</var><var>mm</var><var>dd</var> and no
other calendar date item (see <a href="#Calendar-date-items">Calendar date items</a>) appears before it
in the date string, then <var>yyyy</var> is read as the year, <var>mm</var> as the
month number and <var>dd</var> as the day of the month, for the specified
calendar date.

   <p>If the decimal number is of the form <var>hh</var><var>mm</var> and no other time
of day item appears before it in the date string, then <var>hh</var> is read
as the hour of the day and <var>mm</var> as the minute of the hour, for the
specified time of the day.  <var>mm</var> can also be omitted.

   <p>If both a calendar date and a time of day appear to the left of a number
in the date string, but no relative item, then the number overrides the
year.

<div class="node">
<a name="Seconds-since-the-Epoch"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Authors-of-get_005fdate">Authors of get_date</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Pure-numbers-in-date-strings">Pure numbers in date strings</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.8 Seconds since the Epoch</h4>

<p>If you give a string consisting of &lsquo;<samp><span class="samp">@</span></samp>&rsquo; followed by a decimal
number, it is parsed as an internal time stamp, <span class="sc">utc</span> for
<acronym>POSIX</acronym> compliant systems, <span class="sc">tai</span> for systems which keep
time correctly, and directly mapped to a kernel time.  The implementation
handles an optional fraction separated by &lsquo;<samp><span class="samp">.</span></samp>&rsquo; or &lsquo;<samp><span class="samp">,</span></samp>&rsquo; and
truncates to a supported internal precision, rounding towards the
negative infinity.  Since the kernel time stamp represents complete
date and time information, it cannot be combined with any other
format given.

   <p><a name="index-beginning-of-time_002c-for-_0040acronym_007bPOSIX_007d-536"></a><a name="index-epoch_002c-for-_0040acronym_007bPOSIX_007d-537"></a>Although the date syntax here can represent any possible time since the
year zero, computer integers often cannot represent such a wide range of
time.  On <acronym>POSIX</acronym> systems, the clock starts at 1970-01-01 00:00:00
<span class="sc">utc</span>: <acronym>POSIX</acronym> does not require support for times before the
<acronym>POSIX</acronym> Epoch and times far in the future.  <acronym>GNU</acronym> and
traditional Unix systems have 32-bit signed <code>time_t</code> and can represent
times from 1901-12-13 20:45:52 through 2038-01-19 03:14:07 <span class="sc">utc</span>, such
that &lsquo;<samp><span class="samp">@0</span></samp>&rsquo; represents the epoch, &lsquo;<samp><span class="samp">@1</span></samp>&rsquo; represents 1970-01-01
00:00:01 <span class="sc">utc</span>, and so forth, whereas &lsquo;<samp><span class="samp">@-1</span></samp>&rsquo;, not mandated by
<acronym>POSIX</acronym>, represents 1969-12-31 23:59:59 <span class="sc">utc</span>.  Systems with
64-bit signed <code>time_t</code> can represent all the times in the known
lifetime of the universe. Modern <acronym>UNIX</acronym> systems also can give
precise timecounters in the nanosecond or even attosecond range with
a resolution often only a small multiply, like 10000, of the CPU
frequency (on fast machines).

   <p><acronym>POSIX</acronym> conformant systems do not count leap seconds, and their
kernel time is a seconds-since-epoch representation of <span class="sc">utc</span> (which
is a calendar time); the MirOS family of operating systems keeps time
as seconds since the epoch, <span class="sc">tai</span>, correctly counting leap seconds
and providing conversion functions.  Most MirOS ports have already
switched to a 64-bit signed <code>time_t</code>, some are using a
<span class="sc">djb</span>-compatible <code>tai_t</code> internally.  The rest of this
document has not been throughoutly checked for <span class="sc">utc</span> vs <span class="sc">tai</span>
correctness.  For <acronym>POSIX</acronym>ly broken systems, &lsquo;<samp><span class="samp">@915148799</span></samp>&rsquo;
represents 1998-12-31 23:59:59 <span class="sc">utc</span>, &lsquo;<samp><span class="samp">@915148800</span></samp>&rsquo; represents
1999-01-01 00:00:00 <span class="sc">utc</span>, and there is no way to represent the
intervening leap second 1998-12-31 23:59:60 <span class="sc">utc</span>.  Also, calculation
of time deltas is wrong, such as the age of the MirOS founder is already
off by more than 10 seconds in 2000.

<div class="node">
<a name="Authors-of-get_date"></a>
<a name="Authors-of-get_005fdate"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Seconds-since-the-Epoch">Seconds since the Epoch</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Date-input-formats">Date input formats</a>

</div>

<h4 class="appendixsubsec">A.6.9 Authors of <code>get_date</code></h4>

<p><a name="index-authors-of-_0040code_007bget_005fdate_007d-538"></a>
<a name="index-Bellovin_002c-Steven-M_002e-539"></a><a name="index-Salz_002c-Rich-540"></a><a name="index-Berets_002c-Jim-541"></a><a name="index-MacKenzie_002c-David-542"></a><a name="index-Meyering_002c-Jim-543"></a><a name="index-Eggert_002c-Paul-544"></a><code>get_date</code> was originally implemented by Steven M. Bellovin
(<a href="mailto:smb@research.att.com">smb@research.att.com</a>) while at the University of North Carolina
at Chapel Hill.  The code was later tweaked by a couple of people on
Usenet, then completely overhauled by Rich $alz (<a href="mailto:rsalz@bbn.com">rsalz@bbn.com</a>)
and Jim Berets (<a href="mailto:jberets@bbn.com">jberets@bbn.com</a>) in August, 1990.  Various
revisions for the <span class="sc">gnu</span> system were made by David MacKenzie, Jim Meyering,
Paul Eggert and others.

   <p><a name="index-Pinard_002c-F_002e-545"></a><a name="index-Berry_002c-K_002e-546"></a>This chapter was originally produced by Fran&ccedil;ois Pinard
(<a href="mailto:pinard@iro.umontreal.ca">pinard@iro.umontreal.ca</a>) from the <samp><span class="file">getdate.y</span></samp> source code,
and then edited by K. Berry (<a href="mailto:kb@cs.umb.edu">kb@cs.umb.edu</a>).

   <p>The version of this chapter you are reading comes with CVS 1.12 and
the MirOS family of operating systems; it is based upon an older
version of the <acronym>GNU</acronym> coreutils manual which is not yet
restricted by the licencing conditions of the GNU Free Documentation
License, but more freely redistributable.  Appropriate changes for
the in-tree <code>get_date</code> version of CVS have been applied. 
The MirOS version is maintained by Thorsten Glaser <a href="mailto:tg@mirbsd.de">tg@mirbsd.de</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="admin"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#annotate">annotate</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Date-input-formats">Date input formats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.7 admin&mdash;Administration</h3>

<p><a name="index-Admin-_0028subcommand_0029-547"></a>
     <ul>
<li>Requires: repository, working directory. 
<li>Changes: repository. 
<li>Synonym: rcs
</ul>

   <p>This is the <span class="sc">cvs</span> interface to assorted
administrative facilities.  Some of them have
questionable usefulness for <span class="sc">cvs</span> but exist for
historical purposes.  Some of the questionable options
are likely to disappear in the future.  This command
<em>does</em> work recursively, so extreme care should be
used.

   <p><a name="index-cvsadmin-548"></a><a name="index-UserAdminOptions_002c-in-CVSROOT_002fconfig-549"></a>On unix, if there is a group named <code>cvsadmin</code>,
only members of that group can run <code>cvs admin</code>
commands, except for those specified using the
<code>UserAdminOptions</code> configuration option in the
<samp><span class="file">CVSROOT/config</span></samp> file.  Options specified using
<code>UserAdminOptions</code> can be run by any user.  See
<a href="#config">config</a> for more on <code>UserAdminOptions</code>.

   <p>The <code>cvsadmin</code> group should exist on the server,
or any system running the non-client/server <span class="sc">cvs</span>. 
To disallow <code>cvs admin</code> for all users, create a
group with no users in it.  On NT, the <code>cvsadmin</code>
feature does not exist and all users
can run <code>cvs admin</code>.

<ul class="menu">
<li><a accesskey="1" href="#admin-options">admin options</a>:                admin options
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="admin-options"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#admin">admin</a>

</div>

<h4 class="appendixsubsec">A.7.1 admin options</h4>

<p>Some of these options have questionable usefulness for
<span class="sc">cvs</span> but exist for historical purposes.  Some even
make it impossible to use <span class="sc">cvs</span> until you undo the
effect!

     <dl>
<dt><code>-A</code><var>oldfile</var><dd>Might not work together with <span class="sc">cvs</span>.  Append the
access list of <var>oldfile</var> to the access list of the
<span class="sc">rcs</span> file.

     <br><dt><code>-a</code><var>logins</var><dd>Might not work together with <span class="sc">cvs</span>.  Append the
login names appearing in the comma-separated list
<var>logins</var> to the access list of the <span class="sc">rcs</span> file.

     <br><dt><code>-b[</code><var>rev</var><code>]</code><dd>Set the default branch to <var>rev</var>.  In <span class="sc">cvs</span>, you
normally do not manipulate default branches; sticky
tags (see <a href="#Sticky-tags">Sticky tags</a>) are a better way to decide
which branch you want to work on.  There is one reason
to run <code>cvs admin -b</code>: to revert to the vendor's
version when using vendor branches (see <a href="#Reverting-local-changes">Reverting local changes</a>). 
There can be no space between &lsquo;<samp><span class="samp">-b</span></samp>&rsquo; and its argument. 
<!-- Hmm, we don't document the usage where rev is -->
<!-- omitted.  Maybe that usage can/should be deprecated -->
<!-- (and replaced with -bHEAD or something?) (so we can toss -->
<!-- the optional argument).  Note that -bHEAD does not -->
<!-- work, as of 17 Sep 1997, but probably will once "cvs -->
<!-- admin" is internal to CVS. -->

     <p><a name="index-Comment-leader-550"></a><br><dt><code>-c</code><var>string</var><dd>Sets the comment leader to <var>string</var>.  The comment
leader is not used by current versions of <span class="sc">cvs</span> or
<span class="sc">rcs</span> 5.7.  Therefore, you can almost surely not
worry about it.  See <a href="#Keyword-substitution">Keyword substitution</a>.

     <br><dt><code>-e[</code><var>logins</var><code>]</code><dd>Might not work together with <span class="sc">cvs</span>.  Erase the login
names appearing in the comma-separated list
<var>logins</var> from the access list of the RCS file.  If
<var>logins</var> is omitted, erase the entire access list. 
There can be no space between &lsquo;<samp><span class="samp">-e</span></samp>&rsquo; and its argument.

     <br><dt><code>-I</code><dd>Run interactively, even if the standard input is not a
terminal.  This option does not work with the
client/server <span class="sc">cvs</span> and is likely to disappear in
a future release of <span class="sc">cvs</span>.

     <br><dt><code>-i</code><dd>Useless with <span class="sc">cvs</span>.  This creates and initializes a
new <span class="sc">rcs</span> file, without depositing a revision.  With
<span class="sc">cvs</span>, add files with the <code>cvs add</code> command
(see <a href="#Adding-files">Adding files</a>).

     <br><dt><code>-k</code><var>subst</var><dd>Set the default keyword
substitution to <var>subst</var>.  See <a href="#Keyword-substitution">Keyword substitution</a>.  Giving an explicit &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; option to
<code>cvs update</code>, <code>cvs export</code>, or <code>cvs
checkout</code> overrides this default.

     <br><dt><code>-l[</code><var>rev</var><code>]</code><dd>Lock the revision with number <var>rev</var>.  If a branch
is given, lock the latest revision on that branch.  If
<var>rev</var> is omitted, lock the latest revision on the
default branch.  There can be no space between
&lsquo;<samp><span class="samp">-l</span></samp>&rsquo; and its argument.

     <p>This can be used in conjunction with the
<samp><span class="file">rcslock.pl</span></samp> script in the <samp><span class="file">contrib</span></samp>
directory of the <span class="sc">cvs</span> source distribution to
provide reserved checkouts (where only one user can be
editing a given file at a time).  See the comments in
that file for details (and see the <samp><span class="file">README</span></samp> file
in that directory for disclaimers about the unsupported
nature of contrib).  According to comments in that
file, locking must set to strict (which is the default).

     <br><dt><code>-L</code><dd>Set locking to strict.  Strict locking means that the
owner of an RCS file is not exempt from locking for
checkin.  For use with <span class="sc">cvs</span>, strict locking must be
set; see the discussion under the &lsquo;<samp><span class="samp">-l</span></samp>&rsquo; option above.

     <p><a name="index-Changing-a-log-message-551"></a><a name="index-Replacing-a-log-message-552"></a><a name="index-Correcting-a-log-message-553"></a><a name="index-Fixing-a-log-message-554"></a><a name="index-Log-message_002c-correcting-555"></a><br><dt><code>-m</code><var>rev</var><code>:</code><var>msg</var><dd>Replace the log message of revision <var>rev</var> with
<var>msg</var>.

     <!-- The rcs -M option, to suppress sending mail, has never been -->
     <!-- documented as a cvs admin option. -->
     <br><dt><code>-N</code><var>name</var><code>[:[</code><var>rev</var><code>]]</code><dd>Act like &lsquo;<samp><span class="samp">-n</span></samp>&rsquo;, except override any previous
assignment of <var>name</var>.  For use with magic branches,
see <a href="#Magic-branch-numbers">Magic branch numbers</a>.

     <br><dt><code>-n</code><var>name</var><code>[:[</code><var>rev</var><code>]]</code><dd>Associate the symbolic name <var>name</var> with the branch
or revision <var>rev</var>.  It is normally better to use
&lsquo;<samp><span class="samp">cvs tag</span></samp>&rsquo; or &lsquo;<samp><span class="samp">cvs rtag</span></samp>&rsquo; instead.  Delete the
symbolic name if both &lsquo;<samp><span class="samp">:</span></samp>&rsquo; and <var>rev</var> are
omitted; otherwise, print an error message if
<var>name</var> is already associated with another number. 
If <var>rev</var> is symbolic, it is expanded before
association.  A <var>rev</var> consisting of a branch number
followed by a &lsquo;<samp><span class="samp">.</span></samp>&rsquo; stands for the current latest
revision in the branch.  A &lsquo;<samp><span class="samp">:</span></samp>&rsquo; with an empty
<var>rev</var> stands for the current latest revision on the
default branch, normally the trunk.  For example,
&lsquo;<samp><span class="samp">cvs admin -n</span><var>name</var><span class="samp">:</span></samp>&rsquo; associates <var>name</var> with the
current latest revision of all the RCS files;
this contrasts with &lsquo;<samp><span class="samp">cvs admin -n</span><var>name</var><span class="samp">:$</span></samp>&rsquo; which
associates <var>name</var> with the revision numbers
extracted from keyword strings in the corresponding
working files.

     <p><a name="index-Deleting-revisions-556"></a><a name="index-Outdating-revisions-557"></a><a name="index-Saving-space-558"></a><br><dt><code>-o</code><var>range</var><dd>Deletes (<dfn>outdates</dfn>) the revisions given by
<var>range</var>.

     <p>Note that this command can be quite dangerous unless
you know <em>exactly</em> what you are doing (for example
see the warnings below about how the
<var>rev1</var>:<var>rev2</var> syntax is confusing).

     <p>If you are short on disc this option might help you. 
But think twice before using it&mdash;there is no way short
of restoring the latest backup to undo this command! 
If you delete different revisions than you planned,
either due to carelessness or (heaven forbid) a <span class="sc">cvs</span>
bug, there is no opportunity to correct the error
before the revisions are deleted.  It probably would be
a good idea to experiment on a copy of the repository
first.

     <p>Specify <var>range</var> in one of the following ways:

          <dl>
<dt><var>rev1</var><code>::</code><var>rev2</var><dd>Collapse all revisions between rev1 and rev2, so that
<span class="sc">cvs</span> only stores the differences associated with going
from rev1 to rev2, not intermediate steps.  For
example, after &lsquo;<samp><span class="samp">-o 1.3::1.5</span></samp>&rsquo; one can retrieve
revision 1.3, revision 1.5, or the differences to get
from 1.3 to 1.5, but not the revision 1.4, or the
differences between 1.3 and 1.4.  Other examples:
&lsquo;<samp><span class="samp">-o 1.3::1.4</span></samp>&rsquo; and &lsquo;<samp><span class="samp">-o 1.3::1.3</span></samp>&rsquo; have no
effect, because there are no intermediate revisions to
remove.

          <br><dt><code>::</code><var>rev</var><dd>Collapse revisions between the beginning of the branch
containing <var>rev</var> and <var>rev</var> itself.  The
branchpoint and <var>rev</var> are left intact.  For
example, &lsquo;<samp><span class="samp">-o ::1.3.2.6</span></samp>&rsquo; deletes revision 1.3.2.1,
revision 1.3.2.5, and everything in between, but leaves
1.3 and 1.3.2.6 intact.

          <br><dt><var>rev</var><code>::</code><dd>Collapse revisions between <var>rev</var> and the end of the
branch containing <var>rev</var>.  Revision <var>rev</var> is
left intact but the head revision is deleted.

          <br><dt><var>rev</var><dd>Delete the revision <var>rev</var>.  For example, &lsquo;<samp><span class="samp">-o
1.3</span></samp>&rsquo; is equivalent to &lsquo;<samp><span class="samp">-o 1.2::1.4</span></samp>&rsquo;.

          <br><dt><var>rev1</var><code>:</code><var>rev2</var><dd>Delete the revisions from <var>rev1</var> to <var>rev2</var>,
inclusive, on the same branch.  One will not be able to
retrieve <var>rev1</var> or <var>rev2</var> or any of the
revisions in between.  For example, the command
&lsquo;<samp><span class="samp">cvs admin -oR_1_01:R_1_02 .</span></samp>&rsquo; is rarely useful. 
It means to delete revisions up to, and including, the
tag R_1_02.  But beware!  If there are files that have not
changed between R_1_02 and R_1_03 the file will have
<em>the same</em> numerical revision number assigned to
the tags R_1_02 and R_1_03.  So not only will it be
impossible to retrieve R_1_02; R_1_03 will also have to
be restored from the tapes!  In most cases you want to
specify <var>rev1</var>::<var>rev2</var> instead.

          <br><dt><code>:</code><var>rev</var><dd>Delete revisions from the beginning of the
branch containing <var>rev</var> up to and including
<var>rev</var>.

          <br><dt><var>rev</var><code>:</code><dd>Delete revisions from revision <var>rev</var>, including
<var>rev</var> itself, to the end of the branch containing
<var>rev</var>. 
</dl>

     <p>None of the revisions to be deleted may have
branches or locks.

     <p>If any of the revisions to be deleted have symbolic
names, and one specifies one of the &lsquo;<samp><span class="samp">::</span></samp>&rsquo; syntaxes,
then <span class="sc">cvs</span> will give an error and not delete any
revisions.  If you really want to delete both the
symbolic names and the revisions, first delete the
symbolic names with <code>cvs tag -d</code>, then run
<code>cvs admin -o</code>.  If one specifies the
non-&lsquo;<samp><span class="samp">::</span></samp>&rsquo; syntaxes, then <span class="sc">cvs</span> will delete the
revisions but leave the symbolic names pointing to
nonexistent revisions.  This behavior is preserved for
compatibility with previous versions of <span class="sc">cvs</span>, but
because it isn't very useful, in the future it may
change to be like the &lsquo;<samp><span class="samp">::</span></samp>&rsquo; case.

     <p>Due to the way <span class="sc">cvs</span> handles branches <var>rev</var>
cannot be specified symbolically if it is a branch. 
See <a href="#Magic-branch-numbers">Magic branch numbers</a>, for an explanation. 
<!-- FIXME: is this still true?  I suspect not. -->

     <p>Make sure that no-one has checked out a copy of the
revision you outdate.  Strange things will happen if he
starts to edit it and tries to check it back in.  For
this reason, this option is not a good way to take back
a bogus commit; commit a new revision undoing the bogus
change instead (see <a href="#Merging-two-revisions">Merging two revisions</a>).

     <br><dt><code>-q</code><dd>Run quietly; do not print diagnostics.

     <br><dt><code>-s</code><var>state</var><code>[:</code><var>rev</var><code>]</code><dd>Useful with <span class="sc">cvs</span>.  Set the state attribute of the
revision <var>rev</var> to <var>state</var>.  If <var>rev</var> is a
branch number, assume the latest revision on that
branch.  If <var>rev</var> is omitted, assume the latest
revision on the default branch.  Any identifier is
acceptable for <var>state</var>.  A useful set of states is
&lsquo;<samp><span class="samp">Exp</span></samp>&rsquo; (for experimental), &lsquo;<samp><span class="samp">Stab</span></samp>&rsquo; (for
stable), and &lsquo;<samp><span class="samp">Rel</span></samp>&rsquo; (for released).  By default,
the state of a new revision is set to &lsquo;<samp><span class="samp">Exp</span></samp>&rsquo; when
it is created.  The state is visible in the output from
<var>cvs log</var> (see <a href="#log">log</a>), and in the
&lsquo;<samp><span class="samp">$</span><span class="samp">Log$</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$</span><span class="samp">State$</span></samp>&rsquo; keywords
(see <a href="#Keyword-substitution">Keyword substitution</a>).  Note that <span class="sc">cvs</span>
uses the <code>dead</code> state for its own purposes (see <a href="#Attic">Attic</a>); to
take a file to or from the <code>dead</code> state use
commands like <code>cvs remove</code> and <code>cvs add</code>
(see <a href="#Adding-and-removing">Adding and removing</a>), not <code>cvs admin -s</code>.

     <br><dt><code>-t[</code><var>file</var><code>]</code><dd>Useful with <span class="sc">cvs</span>.  Write descriptive text from the
contents of the named <var>file</var> into the RCS file,
deleting the existing text.  The <var>file</var> pathname
may not begin with &lsquo;<samp><span class="samp">-</span></samp>&rsquo;.  The descriptive text can be seen in the
output from &lsquo;<samp><span class="samp">cvs log</span></samp>&rsquo; (see <a href="#log">log</a>). 
There can be no space between &lsquo;<samp><span class="samp">-t</span></samp>&rsquo; and its argument.

     <p>If <var>file</var> is omitted,
obtain the text from standard input, terminated by
end-of-file or by a line containing &lsquo;<samp><span class="samp">.</span></samp>&rsquo; by itself. 
Prompt for the text if interaction is possible; see
&lsquo;<samp><span class="samp">-I</span></samp>&rsquo;.

     <br><dt><code>-t-</code><var>string</var><dd>Similar to &lsquo;<samp><span class="samp">-t</span><var>file</var></samp>&rsquo;. Write descriptive text
from the <var>string</var> into the <span class="sc">rcs</span> file, deleting
the existing text. 
There can be no space between &lsquo;<samp><span class="samp">-t</span></samp>&rsquo; and its argument.

     <!-- The rcs -T option, do not update last-mod time for -->
     <!-- minor changes, has never been documented as a -->
     <!-- cvs admin option. -->
     <br><dt><code>-U</code><dd>Set locking to non-strict.  Non-strict locking means
that the owner of a file need not lock a revision for
checkin.  For use with <span class="sc">cvs</span>, strict locking must be
set; see the discussion under the &lsquo;<samp><span class="samp">-l</span></samp>&rsquo; option
above.

     <br><dt><code>-u[</code><var>rev</var><code>]</code><dd>See the option &lsquo;<samp><span class="samp">-l</span></samp>&rsquo; above, for a discussion of
using this option with <span class="sc">cvs</span>.  Unlock the revision
with number <var>rev</var>.  If a branch is given, unlock
the latest revision on that branch.  If <var>rev</var> is
omitted, remove the latest lock held by the caller. 
Normally, only the locker of a revision may unlock it;
somebody else unlocking a revision breaks the lock. 
This causes the original locker to be sent a <code>commit</code>
notification (see <a href="#Getting-Notified">Getting Notified</a>). 
There can be no space between &lsquo;<samp><span class="samp">-u</span></samp>&rsquo; and its argument.

     <br><dt><code>-V</code><var>n</var><dd>In previous versions of <span class="sc">cvs</span>, this option meant to
write an <span class="sc">rcs</span> file which would be acceptable to
<span class="sc">rcs</span> version <var>n</var>, but it is now obsolete and
specifying it will produce an error. 
<!-- Note that -V without an argument has never been -->
<!-- documented as a cvs admin option. -->

     <br><dt><code>-x</code><var>suffixes</var><dd>In previous versions of <span class="sc">cvs</span>, this was documented
as a way of specifying the names of the <span class="sc">rcs</span>
files.  However, <span class="sc">cvs</span> has always required that the
<span class="sc">rcs</span> files used by <span class="sc">cvs</span> end in &lsquo;<samp><span class="samp">,v</span></samp>&rsquo;, so
this option has never done anything useful.

     <!-- The rcs -z option, to specify the timezone, has -->
     <!-- never been documented as a cvs admin option. -->
   </dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="annotate"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#checkout">checkout</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#admin">admin</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.8 annotate&mdash;What revision modified each line of a file?</h3>

<p><a name="index-annotate-_0028subcommand_0029-559"></a>
     <ul>
<li>Synopsis: annotate [options] files<small class="dots">...</small>
<li>Requires: repository. 
<li>Changes: nothing. 
</ul>

   <p>For each file in <var>files</var>, print the head revision
of the trunk, together with information on the last
modification for each line.  If backwards annotation
is requested, show the first modification after the
specified revision.  (Backwards annotation currently
appears to be broken.)

<ul class="menu">
<li><a accesskey="1" href="#annotate-options">annotate options</a>:             annotate options
<li><a accesskey="2" href="#annotate-example">annotate example</a>:             annotate example
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="annotate-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#annotate-example">annotate example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#annotate">annotate</a>

</div>

<h4 class="appendixsubsec">A.8.1 annotate options</h4>

<p>These standard options are supported by <code>annotate</code>
(see <a href="#Common-options">Common options</a>, for a complete description of
them):

     <dl>
<dt><code>-b</code><dd>Backwards, show when a line was removed. 
Currently appears to be broken.

     <br><dt><code>-l</code><dd>Local directory only, no recursion.

     <br><dt><code>-R</code><dd>Process directories recursively.

     <br><dt><code>-f</code><dd>Use head revision if tag/date not found.

     <br><dt><code>-F</code><dd>Annotate binary files.

     <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Annotate file as of specified revision/tag or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>.

     <br><dt><code>-D </code><var>date</var><dd>Annotate file as of specified date. 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="annotate-example"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#annotate-options">annotate options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#annotate">annotate</a>

</div>

<h4 class="appendixsubsec">A.8.2 annotate example</h4>

<p>For example:

<pre class="example">     $ cvs annotate ssfile
     Annotations for ssfile
     ***************
     1.1          (mary     27-Mar-96): ssfile line 1
     1.2          (joe      28-Mar-96): ssfile line 2
</pre>
   <p>The file <samp><span class="file">ssfile</span></samp> currently contains two lines. 
The <code>ssfile line 1</code> line was checked in by
<code>mary</code> on March 27.  Then, on March 28, <code>joe</code>
added a line <code>ssfile line 2</code>, without modifying
the <code>ssfile line 1</code> line.  This report doesn't
tell you anything about lines which have been deleted
or replaced; you need to use <code>cvs diff</code> for that
(see <a href="#diff">diff</a>).

   <p>The options to <code>cvs annotate</code> are listed in
<a href="#Invoking-CVS">Invoking CVS</a>, and can be used to select the files
and revisions to annotate.  The options are described
in more detail there and in <a href="#Common-options">Common options</a>.

<!-- FIXME: maybe an example using the options?  Just -->
<!-- what it means to select a revision might be worth a -->
<!-- few words of explanation ("you want to see who -->
<!-- changed this line *before* 1.4"...). -->
<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="checkout"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#commit">commit</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#annotate">annotate</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.9 checkout&mdash;Check out sources for editing</h3>

<p><a name="index-checkout-_0028subcommand_0029-560"></a><a name="index-co-_0028subcommand_0029-561"></a>
     <ul>
<li>Synopsis: checkout [options] modules<small class="dots">...</small>
<li>Requires: repository. 
<li>Changes: working directory. 
<li>Synonyms: co, get
</ul>

   <p>Create or update a working directory containing copies of the
source files specified by <var>modules</var>.  You must execute
<code>checkout</code> before using most of the other <span class="sc">cvs</span>
commands, since most of them operate on your working
directory.

   <p>The <var>modules</var> are either
symbolic names for some
collection of source directories and files, or paths to
directories or files in the repository.  The symbolic
names are defined in the &lsquo;<samp><span class="samp">modules</span></samp>&rsquo; file. 
See <a href="#modules">modules</a>. 
<!-- Needs an example, particularly of the non-"modules" -->
<!-- case but probably of both. -->

<!-- FIXME: this seems like a very odd place to introduce -->
<!-- people to how CVS works.  The bit about unreserved -->
<!-- checkouts is also misleading as it depends on how -->
<!-- things are set up. -->
   <p>Depending on the modules you specify, <code>checkout</code> may
recursively create directories and populate them with
the appropriate source files.  You can then edit these
source files at any time (regardless of whether other
software developers are editing their own copies of the
sources); update them to include new changes applied by
others to the source repository; or commit your work as
a permanent change to the source repository.

   <p>Note that <code>checkout</code> is used to create
directories.  The top-level directory created is always
added to the directory where <code>checkout</code> is
invoked, and usually has the same name as the specified
module.  In the case of a module alias, the created
sub-directory may have a different name, but you can be
sure that it will be a sub-directory, and that
<code>checkout</code> will show the relative path leading to
each file as it is extracted into your private work
area (unless you specify the &lsquo;<samp><span class="samp">-Q</span></samp>&rsquo; global option).

   <p>The files created by <code>checkout</code> are created
read-write, unless the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option to <span class="sc">cvs</span>
(see <a href="#Global-options">Global options</a>) is specified, the
<code>CVSREAD</code> environment variable is specified
(see <a href="#Environment-variables">Environment variables</a>), or a watch is in
effect for that file (see <a href="#Watches">Watches</a>).

   <p>Note that running <code>checkout</code> on a directory that was already
built by a prior <code>checkout</code> is also permitted. 
This is similar to specifying the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; option
to the <code>update</code> command in the sense that new
directories that have been created in the repository
will appear in your work area. 
However, <code>checkout</code> takes a module name whereas
<code>update</code> takes a directory name.  Also
to use <code>checkout</code> this way it must be run from the
top level directory (where you originally ran
<code>checkout</code> from), so before you run
<code>checkout</code> to update an existing directory, don't
forget to change your directory to the top level
directory.

   <p>For the output produced by the <code>checkout</code> command
see <a href="#update-output">update output</a>.

<ul class="menu">
<li><a accesskey="1" href="#checkout-options">checkout options</a>:             checkout options
<li><a accesskey="2" href="#checkout-examples">checkout examples</a>:            checkout examples
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="checkout-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#checkout-examples">checkout examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#checkout">checkout</a>

</div>

<h4 class="appendixsubsec">A.9.1 checkout options</h4>

<p>These standard options are supported by <code>checkout</code>
(see <a href="#Common-options">Common options</a>, for a complete description of
them):

     <dl>
<dt><code>-D </code><var>date</var><dd>Use the most recent revision no later than <var>date</var>. 
This option is sticky, and implies &lsquo;<samp><span class="samp">-P</span></samp>&rsquo;.  See
<a href="#Sticky-tags">Sticky tags</a>, for more information on sticky tags/dates.

     <br><dt><code>-f</code><dd>Only useful with the &lsquo;<samp><span class="samp">-D</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; flags.  If no matching revision is
found, retrieve the most recent revision (instead of ignoring the file).

     <br><dt><code>-k </code><var>kflag</var><dd>Process keywords according to <var>kflag</var>.  See
<a href="#Keyword-substitution">Keyword substitution</a>. 
This option is sticky; future updates of
this file in this working directory will use the same
<var>kflag</var>.  The <code>status</code> command can be viewed
to see the sticky options.  See <a href="#Invoking-CVS">Invoking CVS</a>, for
more information on the <code>status</code> command.

     <br><dt><code>-l</code><dd>Local; run only in current working directory.

     <br><dt><code>-n</code><dd>Do not run any checkout program (as specified
with the &lsquo;<samp><span class="samp">-o</span></samp>&rsquo; option in the modules file;
see <a href="#modules">modules</a>).

     <br><dt><code>-P</code><dd>Prune empty directories.  See <a href="#Moving-directories">Moving directories</a>.

     <br><dt><code>-p</code><dd>Pipe files to the standard output.

     <br><dt><code>-R</code><dd>Checkout directories recursively.  This option is on by default.

     <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Checkout the revision specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  This option is sticky, and implies &lsquo;<samp><span class="samp">-P</span></samp>&rsquo;. 
See <a href="#Sticky-tags">Sticky tags</a>, for more information on sticky tags/dates.  Also,
see <a href="#Common-options">Common options</a>. 
</dl>

   <p>In addition to those, you can use these special command
options with <code>checkout</code>:

     <dl>
<dt><code>-A</code><dd>Reset any sticky tags, dates, or &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; options. 
See <a href="#Sticky-tags">Sticky tags</a>, for more information on sticky tags/dates.

     <br><dt><code>-c</code><dd>Copy the module file, sorted, to the standard output,
instead of creating or modifying any files or
directories in your working directory.

     <br><dt><code>-d </code><var>dir</var><dd>Create a directory called <var>dir</var> for the working
files, instead of using the module name.  In general,
using this flag is equivalent to using &lsquo;<samp><span class="samp">mkdir
</span><var>dir</var><span class="samp">; cd </span><var>dir</var></samp>&rsquo; followed by the checkout
command without the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; flag.

     <p>There is an important exception, however.  It is very
convenient when checking out a single item to have the
output appear in a directory that doesn't contain empty
intermediate directories.  In this case <em>only</em>,
<span class="sc">cvs</span> tries to &ldquo;shorten&rdquo; pathnames to avoid those empty
directories.

     <p>For example, given a module &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; that contains
the file &lsquo;<samp><span class="samp">bar.c</span></samp>&rsquo;, the command &lsquo;<samp><span class="samp">cvs co -d dir
foo</span></samp>&rsquo; will create directory &lsquo;<samp><span class="samp">dir</span></samp>&rsquo; and place
&lsquo;<samp><span class="samp">bar.c</span></samp>&rsquo; inside.  Similarly, given a module
&lsquo;<samp><span class="samp">bar</span></samp>&rsquo; which has subdirectory &lsquo;<samp><span class="samp">baz</span></samp>&rsquo; wherein
there is a file &lsquo;<samp><span class="samp">quux.c</span></samp>&rsquo;, the command &lsquo;<samp><span class="samp">cvs co
-d dir bar/baz</span></samp>&rsquo; will create directory &lsquo;<samp><span class="samp">dir</span></samp>&rsquo; and
place &lsquo;<samp><span class="samp">quux.c</span></samp>&rsquo; inside.

     <p>Using the &lsquo;<samp><span class="samp">-N</span></samp>&rsquo; flag will defeat this behavior. 
Given the same module definitions above, &lsquo;<samp><span class="samp">cvs co
-N -d dir foo</span></samp>&rsquo; will create directories &lsquo;<samp><span class="samp">dir/foo</span></samp>&rsquo;
and place &lsquo;<samp><span class="samp">bar.c</span></samp>&rsquo; inside, while &lsquo;<samp><span class="samp">cvs co -N -d
dir bar/baz</span></samp>&rsquo; will create directories &lsquo;<samp><span class="samp">dir/bar/baz</span></samp>&rsquo;
and place &lsquo;<samp><span class="samp">quux.c</span></samp>&rsquo; inside.

     <br><dt><code>-j </code><var>tag</var><dd>With two &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; options, merge changes from the
revision specified with the first &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option to
the revision specified with the second &lsquo;<samp><span class="samp">j</span></samp>&rsquo; option,
into the working directory.

     <p>With one &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option, merge changes from the
ancestor revision to the revision specified with the
&lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option, into the working directory.  The
ancestor revision is the common ancestor of the
revision which the working directory is based on, and
the revision specified in the &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option.

     <p>In addition, each -j option can contain an optional
date specification which, when used with branches, can
limit the chosen revision to one within a specific
date.  An optional date is specified by adding a colon
(:) to the tag:
&lsquo;<samp><span class="samp">-j</span><var>Symbolic_Tag</var><span class="samp">:</span><var>Date_Specifier</var></samp>&rsquo;.

     <p>See <a href="#Branching-and-merging">Branching and merging</a>.

     <br><dt><code>-N</code><dd>Only useful together with &lsquo;<samp><span class="samp">-d </span><var>dir</var></samp>&rsquo;.  With
this option, <span class="sc">cvs</span> will not &ldquo;shorten&rdquo; module paths
in your working directory when you check out a single
module.  See the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; flag for examples and a
discussion.

     <br><dt><code>-s</code><dd>Like &lsquo;<samp><span class="samp">-c</span></samp>&rsquo;, but include the status of all modules,
and sort it by the status string.  See <a href="#modules">modules</a>, for
info about the &lsquo;<samp><span class="samp">-s</span></samp>&rsquo; option that is used inside the
modules file to set the module status. 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="checkout-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#checkout-options">checkout options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#checkout">checkout</a>

</div>

<h4 class="appendixsubsec">A.9.2 checkout examples</h4>

<p>Get a copy of the module &lsquo;<samp><span class="samp">tc</span></samp>&rsquo;:

<pre class="example">     $ cvs checkout tc
</pre>
   <p>Get a copy of the module &lsquo;<samp><span class="samp">tc</span></samp>&rsquo; as it looked one day
ago:

<pre class="example">     $ cvs checkout -D yesterday tc
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="commit"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#diff">diff</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#checkout">checkout</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.10 commit&mdash;Check files into the repository</h3>

<p><a name="index-commit-_0028subcommand_0029-562"></a>
     <ul>
<li>Synopsis: commit [-lnRf] [-m 'log_message' |
-F file] [-r revision] [files<small class="dots">...</small>]
<li>Requires: working directory, repository. 
<li>Changes: repository. 
<li>Synonym: ci
</ul>

   <p>Use <code>commit</code> when you want to incorporate changes
from your working source files into the source
repository.

   <p>If you don't specify particular files to commit, all of
the files in your working current directory are
examined.  <code>commit</code> is careful to change in the
repository only those files that you have really
changed.  By default (or if you explicitly specify the
&lsquo;<samp><span class="samp">-R</span></samp>&rsquo; option), files in subdirectories are also
examined and committed if they have changed; you can
use the &lsquo;<samp><span class="samp">-l</span></samp>&rsquo; option to limit <code>commit</code> to the
current directory only.

   <p><code>commit</code> verifies that the selected files are up
to date with the current revisions in the source
repository; it will notify you, and exit without
committing, if any of the specified files must be made
current first with <code>update</code> (see <a href="#update">update</a>). 
<code>commit</code> does not call the <code>update</code> command
for you, but rather leaves that for you to do when the
time is right.

   <p>When all is well, an editor is invoked to allow you to
enter a log message that will be written to one or more
logging programs (see <a href="#modules">modules</a>, and see <a href="#loginfo">loginfo</a>)
and placed in the <span class="sc">rcs</span> file inside the
repository.  This log message can be retrieved with the
<code>log</code> command; see <a href="#log">log</a>.  You can specify the
log message on the command line with the &lsquo;<samp><span class="samp">-m
</span><var>message</var></samp>&rsquo; option, and thus avoid the editor invocation,
or use the &lsquo;<samp><span class="samp">-F </span><var>file</var></samp>&rsquo; option to specify
that the argument file contains the log message.

   <p>At <code>commit</code>, a unique commitid is placed in the <span class="sc">rcs</span>
file inside the repository. All files committed at once
get the same commitid, a string consisting only of hexadecimal
digits (usually 16 in GNU <span class="sc">cvs</span>, 19 in MirBSD and MirDebian GNU <span class="sc">cvs</span>). 
FSF GNU <span class="sc">cvs</span> 1.11, MirOS GNU <span class="sc">cvs</span> 1.11, and OpenBSD OpenCVS do not
support commitids yet. 
The commitid can be retrieved with
the <code>log</code> and <code>status</code> command; see <a href="#log">log</a> and
<a href="#File-status">File status</a>.

<ul class="menu">
<li><a accesskey="1" href="#commit-options">commit options</a>:               commit options
<li><a accesskey="2" href="#commit-examples">commit examples</a>:              commit examples
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="commit-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#commit-examples">commit examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#commit">commit</a>

</div>

<h4 class="appendixsubsec">A.10.1 commit options</h4>

<p>These standard options are supported by <code>commit</code>
(see <a href="#Common-options">Common options</a>, for a complete description of
them):

     <dl>
<dt><code>-l</code><dd>Local; run only in current working directory.

     <br><dt><code>-R</code><dd>Commit directories recursively.  This is on by default.

     <br><dt><code>-r </code><var>revision</var><dd>Commit to <var>revision</var>.  <var>revision</var> must be
either a branch, or a revision on the main trunk that
is higher than any existing revision number
(see <a href="#Assigning-revisions">Assigning revisions</a>).  You
cannot commit to a specific revision on a branch. 
<!-- FIXME: Need xref for branch case. -->
</dl>

   <p><code>commit</code> also supports these options:

     <dl>
<dt><code>-c</code><dd>Refuse to commit files unless the user has registered a valid edit on the
file via <code>cvs edit</code>.  This is most useful when &lsquo;<samp><span class="samp">commit -c</span></samp>&rsquo;
and &lsquo;<samp><span class="samp">edit -c</span></samp>&rsquo; have been placed in all <samp><span class="file">.cvsrc</span></samp> files. 
A commit can be forced anyways by either regestering an edit retroactively
via <code>cvs edit</code> (no changes to the file will be lost) or using the
<code>-f</code> option to commit.  Support for <code>commit -c</code> requires both
client and a server versions 1.12.10 or greater.

     <br><dt><code>-F </code><var>file</var><dd>Read the log message from <var>file</var>, instead
of invoking an editor.

     <br><dt><code>-f</code><dd>Note that this is not the standard behavior of
the &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; option as defined in <a href="#Common-options">Common options</a>.

     <p>Force <span class="sc">cvs</span> to commit a new revision even if you haven't
made any changes to the file.  As of <span class="sc">cvs</span> version 1.12.10,
it also causes the <code>-c</code> option to be ignored.  If the current revision
of <var>file</var> is 1.7, then the following two commands
are equivalent:

     <pre class="example">          $ cvs commit -f <var>file</var>
          $ cvs commit -r 1.8 <var>file</var>
</pre>
     <!-- This is odd, but it's how CVS has worked for some -->
     <!-- time. -->
     <p>The &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; option disables recursion (i.e., it
implies &lsquo;<samp><span class="samp">-l</span></samp>&rsquo;).  To force <span class="sc">cvs</span> to commit a new
revision for all files in all subdirectories, you must
use &lsquo;<samp><span class="samp">-f -R</span></samp>&rsquo;.

     <br><dt><code>-m </code><var>message</var><dd>Use <var>message</var> as the log message, instead of
invoking an editor. 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="commit-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#commit-options">commit options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#commit">commit</a>

</div>

<h4 class="appendixsubsec">A.10.2 commit examples</h4>

<!-- FIXME: this material wants to be somewhere -->
<!-- in "Branching and merging". -->
<h5 class="appendixsubsubsec">A.10.2.1 Committing to a branch</h5>

<p>You can commit to a branch revision (one that has an
even number of dots) with the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option.  To
create a branch revision, use the &lsquo;<samp><span class="samp">-b</span></samp>&rsquo; option
of the <code>rtag</code> or <code>tag</code> commands
(see <a href="#Branching-and-merging">Branching and merging</a>).  Then, either <code>checkout</code> or
<code>update</code> can be used to base your sources on the
newly created branch.  From that point on, all
<code>commit</code> changes made within these working sources
will be automatically added to a branch revision,
thereby not disturbing main-line development in any
way.  For example, if you had to create a patch to the
1.2 version of the product, even though the 2.0 version
is already under development, you might do:

<pre class="example">     $ cvs rtag -b -r FCS1_2 FCS1_2_Patch product_module
     $ cvs checkout -r FCS1_2_Patch product_module
     $ cd product_module
     [[ hack away ]]
     $ cvs commit
</pre>
   <p class="noindent">This works automatically since the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option is
sticky.

<h5 class="appendixsubsubsec">A.10.2.2 Creating the branch after editing</h5>

<p>Say you have been working on some extremely
experimental software, based on whatever revision you
happened to checkout last week.  If others in your
group would like to work on this software with you, but
without disturbing main-line development, you could
commit your change to a new branch.  Others can then
checkout your experimental stuff and utilize the full
benefit of <span class="sc">cvs</span> conflict resolution.  The scenario might
look like:

<!-- FIXME: Should we be recommending tagging the branchpoint? -->
<pre class="example">     [[ hacked sources are present ]]
     $ cvs tag -b EXPR1
     $ cvs update -r EXPR1
     $ cvs commit
</pre>
   <p>The <code>update</code> command will make the &lsquo;<samp><span class="samp">-r
EXPR1</span></samp>&rsquo; option sticky on all files.  Note that your
changes to the files will never be removed by the
<code>update</code> command.  The <code>commit</code> will
automatically commit to the correct branch, because the
&lsquo;<samp><span class="samp">-r</span></samp>&rsquo; is sticky.  You could also do like this:

<!-- FIXME: Should we be recommending tagging the branchpoint? -->
<pre class="example">     [[ hacked sources are present ]]
     $ cvs tag -b EXPR1
     $ cvs commit -r EXPR1
</pre>
   <p class="noindent">but then, only those files that were changed by you
will have the &lsquo;<samp><span class="samp">-r EXPR1</span></samp>&rsquo; sticky flag.  If you hack
away, and commit without specifying the &lsquo;<samp><span class="samp">-r EXPR1</span></samp>&rsquo;
flag, some files may accidentally end up on the main
trunk.

   <p>To work with you on the experimental change, others
would simply do

<pre class="example">     $ cvs checkout -r EXPR1 whatever_module
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="diff"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#export">export</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#commit">commit</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.11 diff&mdash;Show differences between revisions</h3>

<p><a name="index-diff-_0028subcommand_0029-563"></a>
     <ul>
<li>Synopsis: diff [-lR] [-k kflag] [format_options] [(-r rev1[:date1] | -D date1) [-r rev2[:date2] | -D date2]] [files<small class="dots">...</small>]
<li>Requires: working directory, repository. 
<li>Changes: nothing. 
</ul>

   <p>The <code>diff</code> command is used to compare different
revisions of files.  The default action is to compare
your working files with the revisions they were based
on, and report any differences that are found.

   <p>If any file names are given, only those files are
compared.  If any directories are given, all files
under them will be compared.

   <p>The exit status for diff is different than for other
<span class="sc">cvs</span> commands; for details see <a href="#Exit-status">Exit status</a>.

<ul class="menu">
<li><a accesskey="1" href="#diff-options">diff options</a>:                 diff options
<li><a accesskey="2" href="#diff-examples">diff examples</a>:                diff examples
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="diff-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#diff-examples">diff examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#diff">diff</a>

</div>

<h4 class="appendixsubsec">A.11.1 diff options</h4>

<p>These standard options are supported by <code>diff</code>
(see <a href="#Common-options">Common options</a>, for a complete description of
them):

     <dl>
<dt><code>-D </code><var>date</var><dd>Use the most recent revision no later than <var>date</var>. 
See &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; for how this affects the comparison.

     <br><dt><code>-k </code><var>kflag</var><dd>Process keywords according to <var>kflag</var>.  See
<a href="#Keyword-substitution">Keyword substitution</a>.

     <br><dt><code>-l</code><dd>Local; run only in current working directory.

     <br><dt><code>-R</code><dd>Examine directories recursively.  This option is on by
default.

     <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Compare with revision specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  Zero, one or two
&lsquo;<samp><span class="samp">-r</span></samp>&rsquo; options can be present.  With no &lsquo;<samp><span class="samp">-r</span></samp>&rsquo;
option, the working file will be compared with the
revision it was based on.  With one &lsquo;<samp><span class="samp">-r</span></samp>&rsquo;, that
revision will be compared to your current working file. 
With two &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; options those two revisions will be
compared (and your working file will not affect the
outcome in any way). 
<!-- We should be a lot more explicit, with examples, -->
<!-- about the difference between "cvs diff" and "cvs -->
<!-- diff -r HEAD".  This often confuses new users. -->

     <p>One or both &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; options can be replaced by a
&lsquo;<samp><span class="samp">-D </span><var>date</var></samp>&rsquo; option, described above. 
</dl>

<!-- Conceptually, this is a disaster.  There are 3 -->
<!-- zillion diff formats that we support via the diff -->
<!-- library.  It is not obvious to me that we should -->
<!-- document them all.  Maybe just the most common ones -->
<!-- like -c and -u, and think about phasing out the -->
<!-- obscure ones. -->
<!-- FIXCVS: also should be a way to specify an external -->
<!-- diff program (which can be different for different -->
<!-- file types) and pass through -->
<!-- arbitrary options, so that the user can do -->
<!-- "-pass=-Z -pass=foo" or something even if CVS -->
<!-- doesn't know about the "-Z foo" option to diff. -->
<!-- This would fit nicely with deprecating/eliminating -->
<!-- the obscure options of the diff library, because it -->
<!-- would let people specify an external GNU diff if -->
<!-- they are into that sort of thing. -->
   <p>The following options specify the format of the
output.  They have the same meaning as in GNU diff. 
Most options have two equivalent names, one of which is a single letter
preceded by &lsquo;<samp><span class="samp">-</span></samp>&rsquo;, and the other of which is a long name preceded by
&lsquo;<samp><span class="samp">--</span></samp>&rsquo;.

     <dl>
<dt>&lsquo;<samp><span class="samp">-</span><var>lines</var></samp>&rsquo;<dd>Show <var>lines</var> (an integer) lines of context.  This option does not
specify an output format by itself; it has no effect unless it is
combined with &lsquo;<samp><span class="samp">-c</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-u</span></samp>&rsquo;.  This option is obsolete.  For proper
operation, <code>patch</code> typically needs at least two lines of context.

     <br><dt>&lsquo;<samp><span class="samp">-a</span></samp>&rsquo;<dd>Treat all files as text and compare them line-by-line, even if they
do not seem to be text.

     <br><dt>&lsquo;<samp><span class="samp">-b</span></samp>&rsquo;<dd>Ignore trailing white space and consider all other sequences of one or
more white space characters to be equivalent.

     <br><dt>&lsquo;<samp><span class="samp">-B</span></samp>&rsquo;<dd>Ignore changes that just insert or delete blank lines.

     <br><dt>&lsquo;<samp><span class="samp">--binary</span></samp>&rsquo;<dd>Read and write data in binary mode.

     <br><dt>&lsquo;<samp><span class="samp">--brief</span></samp>&rsquo;<dd>Report only whether the files differ, not the details of the
differences.

     <br><dt>&lsquo;<samp><span class="samp">-c</span></samp>&rsquo;<dd>Use the context output format.

     <br><dt>&lsquo;<samp><span class="samp">-C </span><var>lines</var></samp>&rsquo;<dt>&lsquo;<samp><span class="samp">--context[=</span><var>lines</var><span class="samp">]</span></samp>&rsquo;<dd>Use the context output format, showing <var>lines</var> (an integer) lines of
context, or three if <var>lines</var> is not given. 
For proper operation, <code>patch</code> typically needs at least two lines of
context.

     <br><dt>&lsquo;<samp><span class="samp">--changed-group-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output a line group containing differing lines from
both files in if-then-else format.  See <a href="#Line-group-formats">Line group formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">-d</span></samp>&rsquo;<dd>Change the algorithm to perhaps find a smaller set of changes.  This makes
<code>diff</code> slower (sometimes much slower).

     <br><dt>&lsquo;<samp><span class="samp">-e</span></samp>&rsquo;<dt>&lsquo;<samp><span class="samp">--ed</span></samp>&rsquo;<dd>Make output that is a valid <code>ed</code> script.

     <br><dt>&lsquo;<samp><span class="samp">--expand-tabs</span></samp>&rsquo;<dd>Expand tabs to spaces in the output, to preserve the alignment of tabs
in the input files.

     <br><dt>&lsquo;<samp><span class="samp">-f</span></samp>&rsquo;<dd>Make output that looks vaguely like an <code>ed</code> script but has changes
in the order they appear in the file.

     <br><dt>&lsquo;<samp><span class="samp">-F </span><var>regexp</var></samp>&rsquo;<dd>In context and unified format, for each hunk of differences, show some
of the last preceding line that matches <var>regexp</var>.

     <br><dt>&lsquo;<samp><span class="samp">--forward-ed</span></samp>&rsquo;<dd>Make output that looks vaguely like an <code>ed</code> script but has changes
in the order they appear in the file.

     <br><dt>&lsquo;<samp><span class="samp">-H</span></samp>&rsquo;<dd>Use heuristics to speed handling of large files that have numerous
scattered small changes.

     <br><dt>&lsquo;<samp><span class="samp">--horizon-lines=</span><var>lines</var></samp>&rsquo;<dd>Do not discard the last <var>lines</var> lines of the common prefix
and the first <var>lines</var> lines of the common suffix.

     <br><dt>&lsquo;<samp><span class="samp">-i</span></samp>&rsquo;<dd>Ignore changes in case; consider upper- and lower-case letters
equivalent.

     <br><dt>&lsquo;<samp><span class="samp">-I </span><var>regexp</var></samp>&rsquo;<dd>Ignore changes that just insert or delete lines that match <var>regexp</var>.

     <br><dt>&lsquo;<samp><span class="samp">--ifdef=</span><var>name</var></samp>&rsquo;<dd>Make merged if-then-else output using <var>name</var>.

     <br><dt>&lsquo;<samp><span class="samp">--ignore-all-space</span></samp>&rsquo;<dd>Ignore white space when comparing lines.

     <br><dt>&lsquo;<samp><span class="samp">--ignore-blank-lines</span></samp>&rsquo;<dd>Ignore changes that just insert or delete blank lines.

     <br><dt>&lsquo;<samp><span class="samp">--ignore-case</span></samp>&rsquo;<dd>Ignore changes in case; consider upper- and lower-case to be the same.

     <br><dt>&lsquo;<samp><span class="samp">--ignore-matching-lines=</span><var>regexp</var></samp>&rsquo;<dd>Ignore changes that just insert or delete lines that match <var>regexp</var>.

     <br><dt>&lsquo;<samp><span class="samp">--ignore-space-change</span></samp>&rsquo;<dd>Ignore trailing white space and consider all other sequences of one or
more white space characters to be equivalent.

     <br><dt>&lsquo;<samp><span class="samp">--initial-tab</span></samp>&rsquo;<dd>Output a tab rather than a space before the text of a line in normal or
context format.  This causes the alignment of tabs in the line to look
normal.

     <br><dt>&lsquo;<samp><span class="samp">-L </span><var>label</var></samp>&rsquo;<dd>Use <var>label</var> instead of the file name in the context format
and unified format headers.

     <br><dt>&lsquo;<samp><span class="samp">--label=</span><var>label</var></samp>&rsquo;<dd>Use <var>label</var> instead of the file name in the context format
and unified format headers.

     <br><dt>&lsquo;<samp><span class="samp">--left-column</span></samp>&rsquo;<dd>Print only the left column of two common lines in side by side format.

     <br><dt>&lsquo;<samp><span class="samp">--line-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output all input lines in if-then-else format. 
See <a href="#Line-formats">Line formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">--minimal</span></samp>&rsquo;<dd>Change the algorithm to perhaps find a smaller set of changes.  This
makes <code>diff</code> slower (sometimes much slower).

     <br><dt>&lsquo;<samp><span class="samp">-n</span></samp>&rsquo;<dd>Output RCS-format diffs; like &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; except that each command
specifies the number of lines affected.

     <br><dt>&lsquo;<samp><span class="samp">-N</span></samp>&rsquo;<dt>&lsquo;<samp><span class="samp">--new-file</span></samp>&rsquo;<dd>In directory comparison, if a file is found in only one directory,
treat it as present but empty in the other directory.

     <br><dt>&lsquo;<samp><span class="samp">--new-group-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output a group of lines taken from just the second
file in if-then-else format.  See <a href="#Line-group-formats">Line group formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">--new-line-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output a line taken from just the second file in
if-then-else format.  See <a href="#Line-formats">Line formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">--old-group-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output a group of lines taken from just the first
file in if-then-else format.  See <a href="#Line-group-formats">Line group formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">--old-line-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output a line taken from just the first file in
if-then-else format.  See <a href="#Line-formats">Line formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">-p</span></samp>&rsquo;<dd>Show which C function each change is in.

     <br><dt>&lsquo;<samp><span class="samp">--rcs</span></samp>&rsquo;<dd>Output RCS-format diffs; like &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; except that each command
specifies the number of lines affected.

     <br><dt>&lsquo;<samp><span class="samp">--report-identical-files</span></samp>&rsquo;<dt>&lsquo;<samp><span class="samp">-s</span></samp>&rsquo;<dd>Report when two files are the same.

     <br><dt>&lsquo;<samp><span class="samp">--show-c-function</span></samp>&rsquo;<dd>Show which C function each change is in.

     <br><dt>&lsquo;<samp><span class="samp">--show-function-line=</span><var>regexp</var></samp>&rsquo;<dd>In context and unified format, for each hunk of differences, show some
of the last preceding line that matches <var>regexp</var>.

     <br><dt>&lsquo;<samp><span class="samp">--side-by-side</span></samp>&rsquo;<dd>Use the side by side output format.

     <br><dt>&lsquo;<samp><span class="samp">--speed-large-files</span></samp>&rsquo;<dd>Use heuristics to speed handling of large files that have numerous
scattered small changes.

     <br><dt>&lsquo;<samp><span class="samp">--suppress-common-lines</span></samp>&rsquo;<dd>Do not print common lines in side by side format.

     <br><dt>&lsquo;<samp><span class="samp">-t</span></samp>&rsquo;<dd>Expand tabs to spaces in the output, to preserve the alignment of tabs
in the input files.

     <br><dt>&lsquo;<samp><span class="samp">-T</span></samp>&rsquo;<dd>Output a tab rather than a space before the text of a line in normal or
context format.  This causes the alignment of tabs in the line to look
normal.

     <br><dt>&lsquo;<samp><span class="samp">--text</span></samp>&rsquo;<dd>Treat all files as text and compare them line-by-line, even if they
do not appear to be text.

     <br><dt>&lsquo;<samp><span class="samp">-u</span></samp>&rsquo;<dd>Use the unified output format.

     <br><dt>&lsquo;<samp><span class="samp">--unchanged-group-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output a group of common lines taken from both files
in if-then-else format.  See <a href="#Line-group-formats">Line group formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">--unchanged-line-format=</span><var>format</var></samp>&rsquo;<dd>Use <var>format</var> to output a line common to both files in if-then-else
format.  See <a href="#Line-formats">Line formats</a>.

     <br><dt>&lsquo;<samp><span class="samp">-U </span><var>lines</var></samp>&rsquo;<dt>&lsquo;<samp><span class="samp">--unified[=</span><var>lines</var><span class="samp">]</span></samp>&rsquo;<dd>Use the unified output format, showing <var>lines</var> (an integer) lines of
context, or three if <var>lines</var> is not given. 
For proper operation, <code>patch</code> typically needs at least two lines of
context.

     <br><dt>&lsquo;<samp><span class="samp">-w</span></samp>&rsquo;<dd>Ignore white space when comparing lines.

     <br><dt>&lsquo;<samp><span class="samp">-W </span><var>columns</var></samp>&rsquo;<dt>&lsquo;<samp><span class="samp">--width=</span><var>columns</var></samp>&rsquo;<dd>Use an output width of <var>columns</var> in side by side format.

     <br><dt>&lsquo;<samp><span class="samp">-y</span></samp>&rsquo;<dd>Use the side by side output format. 
</dl>

<ul class="menu">
<li><a accesskey="1" href="#Line-group-formats">Line group formats</a>:           Line group formats
<li><a accesskey="2" href="#Line-formats">Line formats</a>:                 Line formats
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="Line-group-formats"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Line-formats">Line formats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#diff-options">diff options</a>

</div>

<h5 class="appendixsubsubsec">A.11.1.1 Line group formats</h5>

<p>Line group formats let you specify formats suitable for many
applications that allow if-then-else input, including programming
languages and text formatting languages.  A line group format specifies
the output format for a contiguous group of similar lines.

   <p>For example, the following command compares the TeX file <samp><span class="file">myfile</span></samp>
with the original version from the repository,
and outputs a merged file in which old regions are
surrounded by &lsquo;<samp><span class="samp">\begin{em}</span></samp>&rsquo;-&lsquo;<samp><span class="samp">\end{em}</span></samp>&rsquo; lines, and new
regions are surrounded by &lsquo;<samp><span class="samp">\begin{bf}</span></samp>&rsquo;-&lsquo;<samp><span class="samp">\end{bf}</span></samp>&rsquo; lines.

<pre class="example">     cvs diff \
        --old-group-format='\begin{em}
     %&lt;\end{em}
     ' \
        --new-group-format='\begin{bf}
     %&gt;\end{bf}
     ' \
        myfile
</pre>
   <p>The following command is equivalent to the above example, but it is a
little more verbose, because it spells out the default line group formats.

<pre class="example">     cvs diff \
        --old-group-format='\begin{em}
     %&lt;\end{em}
     ' \
        --new-group-format='\begin{bf}
     %&gt;\end{bf}
     ' \
        --unchanged-group-format='%=' \
        --changed-group-format='\begin{em}
     %&lt;\end{em}
     \begin{bf}
     %&gt;\end{bf}
     ' \
        myfile
</pre>
   <p>Here is a more advanced example, which outputs a diff listing with
headers containing line numbers in a &ldquo;plain English&rdquo; style.

<pre class="example">     cvs diff \
        --unchanged-group-format='' \
        --old-group-format='-------- %dn line%(n=1?:s) deleted at %df:
     %&lt;' \
        --new-group-format='-------- %dN line%(N=1?:s) added after %de:
     %&gt;' \
        --changed-group-format='-------- %dn line%(n=1?:s) changed at %df:
     %&lt;-------- to:
     %&gt;' \
        myfile
</pre>
   <p>To specify a line group format, use one of the options
listed below.  You can specify up to four line group formats, one for
each kind of line group.  You should quote <var>format</var>, because it
typically contains shell metacharacters.

     <dl>
<dt>&lsquo;<samp><span class="samp">--old-group-format=</span><var>format</var></samp>&rsquo;<dd>These line groups are hunks containing only lines from the first file. 
The default old group format is the same as the changed group format if
it is specified; otherwise it is a format that outputs the line group as-is.

     <br><dt>&lsquo;<samp><span class="samp">--new-group-format=</span><var>format</var></samp>&rsquo;<dd>These line groups are hunks containing only lines from the second
file.  The default new group format is same as the changed group
format if it is specified; otherwise it is a format that outputs the
line group as-is.

     <br><dt>&lsquo;<samp><span class="samp">--changed-group-format=</span><var>format</var></samp>&rsquo;<dd>These line groups are hunks containing lines from both files.  The
default changed group format is the concatenation of the old and new
group formats.

     <br><dt>&lsquo;<samp><span class="samp">--unchanged-group-format=</span><var>format</var></samp>&rsquo;<dd>These line groups contain lines common to both files.  The default
unchanged group format is a format that outputs the line group as-is. 
</dl>

   <p>In a line group format, ordinary characters represent themselves;
conversion specifications start with &lsquo;<samp><span class="samp">%</span></samp>&rsquo; and have one of the
following forms.

     <dl>
<dt>&lsquo;<samp><span class="samp">%&lt;</span></samp>&rsquo;<dd>stands for the lines from the first file, including the trailing newline. 
Each line is formatted according to the old line format (see <a href="#Line-formats">Line formats</a>).

     <br><dt>&lsquo;<samp><span class="samp">%&gt;</span></samp>&rsquo;<dd>stands for the lines from the second file, including the trailing newline. 
Each line is formatted according to the new line format.

     <br><dt>&lsquo;<samp><span class="samp">%=</span></samp>&rsquo;<dd>stands for the lines common to both files, including the trailing newline. 
Each line is formatted according to the unchanged line format.

     <br><dt>&lsquo;<samp><span class="samp">%%</span></samp>&rsquo;<dd>stands for &lsquo;<samp><span class="samp">%</span></samp>&rsquo;.

     <br><dt>&lsquo;<samp><span class="samp">%c'</span><var>C</var><span class="samp">'</span></samp>&rsquo;<dd>where <var>C</var> is a single character, stands for <var>C</var>. 
<var>C</var> may not be a backslash or an apostrophe. 
For example, &lsquo;<samp><span class="samp">%c':'</span></samp>&rsquo; stands for a colon, even inside
the then-part of an if-then-else format, which a colon would
normally terminate.

     <br><dt>&lsquo;<samp><span class="samp">%c'\</span><var>O</var><span class="samp">'</span></samp>&rsquo;<dd>where <var>O</var> is a string of 1, 2, or 3 octal digits,
stands for the character with octal code <var>O</var>. 
For example, &lsquo;<samp><span class="samp">%c'\0'</span></samp>&rsquo; stands for a null character.

     <br><dt>&lsquo;<samp><var>F</var><var>n</var></samp>&rsquo;<dd>where <var>F</var> is a <code>printf</code> conversion specification and <var>n</var> is one
of the following letters, stands for <var>n</var>'s value formatted with <var>F</var>.

          <dl>
<dt>&lsquo;<samp><span class="samp">e</span></samp>&rsquo;<dd>The line number of the line just before the group in the old file.

          <br><dt>&lsquo;<samp><span class="samp">f</span></samp>&rsquo;<dd>The line number of the first line in the group in the old file;
equals <var>e</var> + 1.

          <br><dt>&lsquo;<samp><span class="samp">l</span></samp>&rsquo;<dd>The line number of the last line in the group in the old file.

          <br><dt>&lsquo;<samp><span class="samp">m</span></samp>&rsquo;<dd>The line number of the line just after the group in the old file;
equals <var>l</var> + 1.

          <br><dt>&lsquo;<samp><span class="samp">n</span></samp>&rsquo;<dd>The number of lines in the group in the old file; equals <var>l</var> - <var>f</var> + 1.

          <br><dt>&lsquo;<samp><span class="samp">E, F, L, M, N</span></samp>&rsquo;<dd>Likewise, for lines in the new file.

     </dl>

     <p>The <code>printf</code> conversion specification can be &lsquo;<samp><span class="samp">%d</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">%o</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%x</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">%X</span></samp>&rsquo;, specifying decimal, octal,
lower case hexadecimal, or upper case hexadecimal output
respectively.  After the &lsquo;<samp><span class="samp">%</span></samp>&rsquo; the following options can appear in
sequence: a &lsquo;<samp><span class="samp">-</span></samp>&rsquo; specifying left-justification; an integer
specifying the minimum field width; and a period followed by an
optional integer specifying the minimum number of digits. 
For example, &lsquo;<samp><span class="samp">%5dN</span></samp>&rsquo; prints the number of new lines in the group
in a field of width 5 characters, using the <code>printf</code> format <code>"%5d"</code>.

     <br><dt>&lsquo;<samp><span class="samp">(</span><var>A</var><span class="samp">=</span><var>B</var><span class="samp">?</span><var>T</var><span class="samp">:</span><var>E</var><span class="samp">)</span></samp>&rsquo;<dd>If <var>A</var> equals <var>B</var> then <var>T</var> else <var>E</var>. 
<var>A</var> and <var>B</var> are each either a decimal constant
or a single letter interpreted as above. 
This format spec is equivalent to <var>T</var> if
<var>A</var>'s value equals <var>B</var>'s; otherwise it is equivalent to <var>E</var>.

     <p>For example, &lsquo;<samp><span class="samp">%(N=0?no:%dN) line%(N=1?:s)</span></samp>&rsquo; is equivalent to
&lsquo;<samp><span class="samp">no lines</span></samp>&rsquo; if <var>N</var> (the number of lines in the group in the
new file) is 0, to &lsquo;<samp><span class="samp">1 line</span></samp>&rsquo; if <var>N</var> is 1, and to &lsquo;<samp><span class="samp">%dN lines</span></samp>&rsquo;
otherwise. 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="Line-formats"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Line-group-formats">Line group formats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#diff-options">diff options</a>

</div>

<h5 class="appendixsubsubsec">A.11.1.2 Line formats</h5>

<p>Line formats control how each line taken from an input file is
output as part of a line group in if-then-else format.

   <p>For example, the following command outputs text with a one-column
change indicator to the left of the text.  The first column of output
is &lsquo;<samp><span class="samp">-</span></samp>&rsquo; for deleted lines, &lsquo;<samp><span class="samp">|</span></samp>&rsquo; for added lines, and a space
for unchanged lines.  The formats contain newline characters where
newlines are desired on output.

<pre class="example">     cvs diff \
        --old-line-format='-%l
     ' \
        --new-line-format='|%l
     ' \
        --unchanged-line-format=' %l
     ' \
        myfile
</pre>
   <p>To specify a line format, use one of the following options.  You should
quote <var>format</var>, since it often contains shell metacharacters.

     <dl>
<dt>&lsquo;<samp><span class="samp">--old-line-format=</span><var>format</var></samp>&rsquo;<dd>formats lines just from the first file.

     <br><dt>&lsquo;<samp><span class="samp">--new-line-format=</span><var>format</var></samp>&rsquo;<dd>formats lines just from the second file.

     <br><dt>&lsquo;<samp><span class="samp">--unchanged-line-format=</span><var>format</var></samp>&rsquo;<dd>formats lines common to both files.

     <br><dt>&lsquo;<samp><span class="samp">--line-format=</span><var>format</var></samp>&rsquo;<dd>formats all lines; in effect, it sets all three above options simultaneously. 
</dl>

   <p>In a line format, ordinary characters represent themselves;
conversion specifications start with &lsquo;<samp><span class="samp">%</span></samp>&rsquo; and have one of the
following forms.

     <dl>
<dt>&lsquo;<samp><span class="samp">%l</span></samp>&rsquo;<dd>stands for the contents of the line, not counting its trailing
newline (if any).  This format ignores whether the line is incomplete.

     <br><dt>&lsquo;<samp><span class="samp">%L</span></samp>&rsquo;<dd>stands for the contents of the line, including its trailing newline
(if any).  If a line is incomplete, this format preserves its
incompleteness.

     <br><dt>&lsquo;<samp><span class="samp">%%</span></samp>&rsquo;<dd>stands for &lsquo;<samp><span class="samp">%</span></samp>&rsquo;.

     <br><dt>&lsquo;<samp><span class="samp">%c'</span><var>C</var><span class="samp">'</span></samp>&rsquo;<dd>where <var>C</var> is a single character, stands for <var>C</var>. 
<var>C</var> may not be a backslash or an apostrophe. 
For example, &lsquo;<samp><span class="samp">%c':'</span></samp>&rsquo; stands for a colon.

     <br><dt>&lsquo;<samp><span class="samp">%c'\</span><var>O</var><span class="samp">'</span></samp>&rsquo;<dd>where <var>O</var> is a string of 1, 2, or 3 octal digits,
stands for the character with octal code <var>O</var>. 
For example, &lsquo;<samp><span class="samp">%c'\0'</span></samp>&rsquo; stands for a null character.

     <br><dt>&lsquo;<samp><var>F</var><span class="samp">n</span></samp>&rsquo;<dd>where <var>F</var> is a <code>printf</code> conversion specification,
stands for the line number formatted with <var>F</var>. 
For example, &lsquo;<samp><span class="samp">%.5dn</span></samp>&rsquo; prints the line number using the
<code>printf</code> format <code>"%.5d"</code>.  See <a href="#Line-group-formats">Line group formats</a>, for
more about printf conversion specifications.

   </dl>

   <p>The default line format is &lsquo;<samp><span class="samp">%l</span></samp>&rsquo; followed by a newline character.

   <p>If the input contains tab characters and it is important that they line
up on output, you should ensure that &lsquo;<samp><span class="samp">%l</span></samp>&rsquo; or &lsquo;<samp><span class="samp">%L</span></samp>&rsquo; in a line
format is just after a tab stop (e.g. by preceding &lsquo;<samp><span class="samp">%l</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">%L</span></samp>&rsquo; with a tab character), or you should use the &lsquo;<samp><span class="samp">-t</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">--expand-tabs</span></samp>&rsquo; option.

   <p>Taken together, the line and line group formats let you specify many
different formats.  For example, the following command uses a format
similar to <code>diff</code>'s normal format.  You can tailor this command
to get fine control over <code>diff</code>'s output.

<pre class="example">     cvs diff \
        --old-line-format='&lt; %l
     ' \
        --new-line-format='&gt; %l
     ' \
        --old-group-format='%df%(f=l?:,%dl)d%dE
     %&lt;' \
        --new-group-format='%dea%dF%(F=L?:,%dL)
     %&gt;' \
        --changed-group-format='%df%(f=l?:,%dl)c%dF%(F=L?:,%dL)
     %&lt;---
     %&gt;' \
        --unchanged-group-format='' \
        myfile
</pre>
   <!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="diff-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#diff-options">diff options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#diff">diff</a>

</div>

<h4 class="appendixsubsec">A.11.2 diff examples</h4>

<p>The following line produces a Unidiff (&lsquo;<samp><span class="samp">-u</span></samp>&rsquo; flag)
between revision 1.14 and 1.19 of
<samp><span class="file">backend.c</span></samp>.  Due to the &lsquo;<samp><span class="samp">-kk</span></samp>&rsquo; flag no
keywords are substituted, so differences that only depend
on keyword substitution are ignored.

<pre class="example">     $ cvs diff -kk -u -r 1.14 -r 1.19 backend.c
</pre>
   <p>Suppose the experimental branch EXPR1 was based on a
set of files tagged RELEASE_1_0.  To see what has
happened on that branch, the following can be used:

<pre class="example">     $ cvs diff -r RELEASE_1_0 -r EXPR1
</pre>
   <p>A command like this can be used to produce a context
diff between two releases:

<pre class="example">     $ cvs diff -c -r RELEASE_1_0 -r RELEASE_1_1 &gt; diffs
</pre>
   <p>If you are maintaining ChangeLogs, a command like the following
just before you commit your changes may help you write
the ChangeLog entry.  All local modifications that have
not yet been committed will be printed.

<pre class="example">     $ cvs diff -u | less
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="export"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#history">history</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#diff">diff</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.12 export&mdash;Export sources from CVS, similar to checkout</h3>

<p><a name="index-export-_0028subcommand_0029-564"></a>
     <ul>
<li>Synopsis: export [-flNnR] (-r rev[:date] | -D date) [-k subst] [-d dir] module<small class="dots">...</small>
<li>Requires: repository. 
<li>Changes: current directory. 
</ul>

   <p>This command is a variant of <code>checkout</code>; use it
when you want a copy of the source for module without
the <span class="sc">cvs</span> administrative directories.  For example, you
might use <code>export</code> to prepare source for shipment
off-site.  This command requires that you specify a
date or tag (with &lsquo;<samp><span class="samp">-D</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-r</span></samp>&rsquo;), so that you
can count on reproducing the source you ship to others
(and thus it always prunes empty directories).

   <p>One often would like to use &lsquo;<samp><span class="samp">-kv</span></samp>&rsquo; with <code>cvs
export</code>.  This causes any keywords to be
expanded such that an import done at some other site
will not lose the keyword revision information.  But be
aware that doesn't handle an export containing binary
files correctly.  Also be aware that after having used
&lsquo;<samp><span class="samp">-kv</span></samp>&rsquo;, one can no longer use the <code>ident</code>
command (which is part of the <span class="sc">rcs</span> suite&mdash;see
ident(1)) which looks for keyword strings.  If
you want to be able to use <code>ident</code> you must not
use &lsquo;<samp><span class="samp">-kv</span></samp>&rsquo;.

<ul class="menu">
<li><a accesskey="1" href="#export-options">export options</a>:               export options
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="export-options"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#export">export</a>

</div>

<h4 class="appendixsubsec">A.12.1 export options</h4>

<p>These standard options are supported by <code>export</code>
(see <a href="#Common-options">Common options</a>, for a complete description of
them):

     <dl>
<dt><code>-D </code><var>date</var><dd>Use the most recent revision no later than <var>date</var>.

     <br><dt><code>-f</code><dd>If no matching revision is found, retrieve the most
recent revision (instead of ignoring the file).

     <br><dt><code>-l</code><dd>Local; run only in current working directory.

     <br><dt><code>-n</code><dd>Do not run any checkout program.

     <br><dt><code>-R</code><dd>Export directories recursively.  This is on by default.

     <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Export the revision specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>. 
</dl>

   <p>In addition, these options (that are common to
<code>checkout</code> and <code>export</code>) are also supported:

     <dl>
<dt><code>-d </code><var>dir</var><dd>Create a directory called <var>dir</var> for the working
files, instead of using the module name. 
See <a href="#checkout-options">checkout options</a>, for complete details on how
<span class="sc">cvs</span> handles this flag.

     <br><dt><code>-k </code><var>subst</var><dd>Set keyword expansion mode (see <a href="#Substitution-modes">Substitution modes</a>).

     <br><dt><code>-N</code><dd>Only useful together with &lsquo;<samp><span class="samp">-d </span><var>dir</var></samp>&rsquo;. 
See <a href="#checkout-options">checkout options</a>, for complete details on how
<span class="sc">cvs</span> handles this flag. 
</dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="history"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#import">import</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#export">export</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.13 history&mdash;Show status of files and users</h3>

<p><a name="index-history-_0028subcommand_0029-565"></a>
     <ul>
<li>Synopsis:     history [-report] [-flags] [-options args] [files<small class="dots">...</small>]
<li>Requires: the file <samp><span class="file">$CVSROOT/CVSROOT/history</span></samp>
<li>Changes: nothing. 
</ul>

   <p><span class="sc">cvs</span> can keep a history log that tracks each use of most <span class="sc">cvs</span>
commands.  You can use <code>history</code> to display this information in
various formats.

   <p>To enable logging, the &lsquo;<samp><span class="samp">LogHistory</span></samp>&rsquo; config option must be set to
some value other than the empty string and the history file specified by
the &lsquo;<samp><span class="samp">HistoryLogPath</span></samp>&rsquo; option must be writable by all users who may run
the <span class="sc">cvs</span> executable (see <a href="#config">config</a>).

   <p>To enable the <code>history</code> command, logging must be enabled as above and
the &lsquo;<samp><span class="samp">HistorySearchPath</span></samp>&rsquo; config option (see <a href="#config">config</a>) must be set to
specify some number of the history logs created thereby and these files must
be readable by each user who might run the <code>history</code> command.

   <p>Creating a repository via the <code>cvs init</code> command will enable logging of
all possible events to a single history log file
(<samp><span class="file">$CVSROOT/CVSROOT/history</span></samp>) with read and write permissions for all
users (see <a href="#Creating-a-repository">Creating a repository</a>).

   <p><em>Note: </em><code>history</code><em> uses &lsquo;</em><samp><span class="samp">-f</span></samp><em>&rsquo;, &lsquo;</em><samp><span class="samp">-l</span></samp><em>&rsquo;,
&lsquo;</em><samp><span class="samp">-n</span></samp><em>&rsquo;, and &lsquo;</em><samp><span class="samp">-p</span></samp><em>&rsquo; in ways that conflict with the
normal use inside </em><span class="sc">cvs</span><em> (see <a href="#Common-options">Common options</a>).</em>

<ul class="menu">
<li><a accesskey="1" href="#history-options">history options</a>:              history options
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="history-options"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#history">history</a>

</div>

<h4 class="appendixsubsec">A.13.1 history options</h4>

<p>Several options (shown above as &lsquo;<samp><span class="samp">-report</span></samp>&rsquo;)  control  what
kind of report is generated:

     <dl>
<dt><code>-c</code><dd>Report on each time commit was used (i.e., each time
the repository was modified).

     <br><dt><code>-e</code><dd>Everything (all record types).  Equivalent to
specifying &lsquo;<samp><span class="samp">-x</span></samp>&rsquo; with all record types.  Of course,
&lsquo;<samp><span class="samp">-e</span></samp>&rsquo; will also include record types which are
added in a future version of <span class="sc">cvs</span>; if you are
writing a script which can only handle certain record
types, you'll want to specify &lsquo;<samp><span class="samp">-x</span></samp>&rsquo;.

     <br><dt><code>-m </code><var>module</var><dd>Report on a particular module.  (You can meaningfully
use &lsquo;<samp><span class="samp">-m</span></samp>&rsquo; more than once on the command line.)

     <br><dt><code>-o</code><dd>Report on checked-out modules.  This is the default report type.

     <br><dt><code>-T</code><dd>Report on all tags.

     <br><dt><code>-x </code><var>type</var><dd>Extract a particular set of record types <var>type</var> from the <span class="sc">cvs</span>
history.  The types are indicated by single letters,
which you may specify in combination.

     <p>Certain commands have a single record type:

          <dl>
<dt><code>F</code><dd>release
<br><dt><code>O</code><dd>checkout
<br><dt><code>E</code><dd>export
<br><dt><code>T</code><dd>rtag
</dl>

     <p class="noindent">One of five record types may result from an update:

          <dl>
<dt><code>C</code><dd>A merge was necessary but collisions were
detected (requiring manual merging). 
<br><dt><code>G</code><dd>A merge was necessary and it succeeded. 
<br><dt><code>U</code><dd>A working file was copied from the repository. 
<br><dt><code>P</code><dd>A working file was patched to match the repository. 
<br><dt><code>W</code><dd>The working copy of a file was deleted during
update (because it was gone from the repository). 
</dl>

     <p class="noindent">One of three record types results from commit:

          <dl>
<dt><code>A</code><dd>A file was added for the first time. 
<br><dt><code>M</code><dd>A file was modified. 
<br><dt><code>R</code><dd>A file was removed. 
</dl>
     </dl>

   <p>The options shown as &lsquo;<samp><span class="samp">-flags</span></samp>&rsquo; constrain or expand
the report without requiring option arguments:

     <dl>
<dt><code>-a</code><dd>Show data for all users (the default is to show data
only for the user executing <code>history</code>).

     <br><dt><code>-l</code><dd>Show last modification only.

     <br><dt><code>-w</code><dd>Show only the records for modifications done from the
same working directory where <code>history</code> is
executing. 
</dl>

   <p>The options shown as &lsquo;<samp><span class="samp">-options </span><var>args</var></samp>&rsquo; constrain the report
based on an argument:

     <dl>
<dt><code>-b </code><var>str</var><dd>Show data back to a record containing  the  string
<var>str</var>  in  either the module name, the file name, or
the repository path.

     <br><dt><code>-D </code><var>date</var><dd>Show data since <var>date</var>.  This is slightly different
from the normal use of &lsquo;<samp><span class="samp">-D </span><var>date</var></samp>&rsquo;, which
selects the newest revision older than <var>date</var>.

     <br><dt><code>-f </code><var>file</var><dd>Show data for a particular file
(you can specify several &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; options on the same command line). 
This is equivalent to specifying the file on the command line.

     <br><dt><code>-n </code><var>module</var><dd>Show data for a particular module
(you can specify several &lsquo;<samp><span class="samp">-n</span></samp>&rsquo; options on the same command line).

     <br><dt><code>-p </code><var>repository</var><dd>Show data for a particular source repository  (you
can specify several &lsquo;<samp><span class="samp">-p</span></samp>&rsquo; options on the same command
line).

     <br><dt><code>-r </code><var>rev</var><dd>Show records referring to revisions since the revision
or tag named <var>rev</var> appears in individual <span class="sc">rcs</span>
files.  Each <span class="sc">rcs</span> file is searched for the revision or
tag.

     <br><dt><code>-t </code><var>tag</var><dd>Show records since tag <var>tag</var> was last added to the
history file.  This differs from the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; flag
above in that it reads only the history file, not the
<span class="sc">rcs</span> files, and is much faster.

     <br><dt><code>-u </code><var>name</var><dd>Show records for user <var>name</var>.

     <br><dt><code>-z </code><var>timezone</var><dd>Show times in the selected records using the specified
time zone instead of UTC. 
</dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="import"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#log">log</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#history">history</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.14 import&mdash;Import sources into CVS, using vendor branches</h3>

<p><a name="index-import-_0028subcommand_0029-566"></a>
<!-- FIXME: This node is way too long for one which has subnodes. -->

     <ul>
<li>Synopsis: import [-options] repository vendortag releasetag<small class="dots">...</small>
<li>Requires: Repository, source distribution directory. 
<li>Changes: repository. 
</ul>

   <p>Use <code>import</code> to incorporate an entire source
distribution from an outside source (e.g., a source
vendor) into your source repository directory.  You can
use this command both for initial creation of a
repository, and for wholesale updates to the module
from the outside source.  See <a href="#Tracking-sources">Tracking sources</a>, for
a discussion on this subject.

   <p>The <var>repository</var> argument gives a directory name
(or a path to a directory) under the <span class="sc">cvs</span> root directory
for repositories; if the directory did not exist,
import creates it.

   <p>When you use import for updates to source that has been
modified in your source repository (since a prior
import), it will notify you of any files that conflict
in the two branches of development; use &lsquo;<samp><span class="samp">checkout
-j</span></samp>&rsquo; to reconcile the differences, as import instructs
you to do.

   <p>If <span class="sc">cvs</span> decides a file should be ignored
(see <a href="#cvsignore">cvsignore</a>), it does not import it and prints
&lsquo;<samp><span class="samp">I </span></samp>&rsquo; followed by the filename (see <a href="#import-output">import output</a>, for a
complete description of the output).

   <p>If the file <samp><span class="file">$CVSROOT/CVSROOT/cvswrappers</span></samp> exists,
any file whose names match the specifications in that
file will be treated as packages and the appropriate
filtering will be performed on the file/directory
before being imported.  See <a href="#Wrappers">Wrappers</a>.

   <p>The outside source is saved in a first-level
branch, by default 1.1.1.  Updates are leaves of this
branch; for example, files from the first imported
collection of source will be revision 1.1.1.1, then
files from the first imported update will be revision
1.1.1.2, and so on.

   <p>At least three arguments are required. 
<var>repository</var> is needed to identify the collection
of source.  <var>vendortag</var> is a tag for the entire
branch (e.g., for 1.1.1).  You must also specify at
least one <var>releasetag</var> to uniquely identify the files at
the leaves created each time you execute <code>import</code>.  The
<var>releasetag</var> should be new, not previously existing in the
repository file, and uniquely identify the imported release,

<!-- I'm not completely sure this belongs here.  But -->
<!-- we need to say it _somewhere_ reasonably obvious; it -->
<!-- is a common misconception among people first learning CVS -->
   <p>Note that <code>import</code> does <em>not</em> change the
directory in which you invoke it.  In particular, it
does not set up that directory as a <span class="sc">cvs</span> working
directory; if you want to work with the sources import
them first and then check them out into a different
directory (see <a href="#Getting-the-source">Getting the source</a>).

<ul class="menu">
<li><a accesskey="1" href="#import-options">import options</a>:               import options
<li><a accesskey="2" href="#import-output">import output</a>:                import output
<li><a accesskey="3" href="#import-examples">import examples</a>:              import examples
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="import-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#import-output">import output</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#import">import</a>

</div>

<h4 class="appendixsubsec">A.14.1 import options</h4>

<p>This standard option is supported by <code>import</code>
(see <a href="#Common-options">Common options</a>, for a complete description):

     <dl>
<dt><code>-m </code><var>message</var><dd>Use <var>message</var> as log information, instead of
invoking an editor. 
</dl>

   <p>There are the following additional special options.

     <dl>
<dt><code>-b </code><var>branch</var><dd>See <a href="#Multiple-vendor-branches">Multiple vendor branches</a>.

     <br><dt><code>-k </code><var>subst</var><dd>Indicate the keyword expansion mode desired.  This
setting will apply to all files created during the
import, but not to any files that previously existed in
the repository.  See <a href="#Substitution-modes">Substitution modes</a>, for a
list of valid &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; settings.

     <br><dt><code>-I </code><var>name</var><dd>Specify file names that should be ignored during
import.  You can use this option repeatedly.  To avoid
ignoring any files at all (even those ignored by
default), specify `-I !'.

     <p><var>name</var> can be a file name pattern of the same type
that you can specify in the <samp><span class="file">.cvsignore</span></samp> file. 
See <a href="#cvsignore">cvsignore</a>. 
<!--  Is this really true? -->

     <br><dt><code>-W </code><var>spec</var><dd>Specify file names that should be filtered during
import.  You can use this option repeatedly.

     <p><var>spec</var> can be a file name pattern of the same type
that you can specify in the <samp><span class="file">.cvswrappers</span></samp>
file. See <a href="#Wrappers">Wrappers</a>.

     <br><dt><code>-X</code><dd>Modify the algorithm used by <span class="sc">cvs</span> when importing new files
so that new files do not immediately appear on the main trunk.

     <p>Specifically, this flag causes <span class="sc">cvs</span> to mark new files as
if they were deleted on the main trunk, by taking the following
steps for each file in addition to those normally taken on import:
creating a new revision on the main trunk indicating that
the new file is <code>dead</code>, resetting the new file's default branch,
and placing the file in the Attic (see <a href="#Attic">Attic</a>) directory.

     <p>Use of this option can be forced on a repository-wide basis
by setting the &lsquo;<samp><span class="samp">ImportNewFilesToVendorBranchOnly</span></samp>&rsquo; option in
CVSROOT/config (see <a href="#config">config</a>). 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="import-output"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#import-examples">import examples</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#import-options">import options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#import">import</a>

</div>

<h4 class="appendixsubsec">A.14.2 import output</h4>

<p><code>import</code> keeps you informed of its progress by printing a line
for each file, preceded by one character indicating the status of the file:

     <dl>
<dt><code>U </code><var>file</var><dd>The file already exists in the repository and has not been locally
modified; a new revision has been created (if necessary).

     <br><dt><code>N </code><var>file</var><dd>The file is a new file which has been added to the repository.

     <br><dt><code>C </code><var>file</var><dd>The file already exists in the repository but has been locally modified;
you will have to merge the changes.

     <br><dt><code>I </code><var>file</var><dd>The file is being ignored (see <a href="#cvsignore">cvsignore</a>).

     <p><a name="index-Symbolic-link_002c-importing-567"></a><a name="index-Link_002c-symbolic_002c-importing-568"></a><!-- FIXME: also (somewhere else) probably -->
<!-- should be documenting what happens if you "cvs add" -->
<!-- a symbolic link.  Also maybe what happens if -->
<!-- you manually create symbolic links within the -->
<!-- repository (? - not sure why we'd want to suggest -->
<!-- doing that). -->
<br><dt><code>L </code><var>file</var><dd>The file is a symbolic link; <code>cvs import</code> ignores symbolic links. 
People periodically suggest that this behavior should
be changed, but if there is a consensus on what it
should be changed to, it is not apparent. 
(Various options in the <samp><span class="file">modules</span></samp> file can be used
to recreate symbolic links on checkout, update, etc.;
see <a href="#modules">modules</a>.) 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="import-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#import-output">import output</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#import">import</a>

</div>

<h4 class="appendixsubsec">A.14.3 import examples</h4>

<p>See <a href="#Tracking-sources">Tracking sources</a>, and <a href="#From-files">From files</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="log"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#ls-_0026-rls">ls &amp; rls</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#import">import</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.15 log&mdash;Print out log information for files</h3>

<p><a name="index-log-_0028subcommand_0029-569"></a>
     <ul>
<li>Synopsis: log [options] [files<small class="dots">...</small>]
<li>Requires: repository, working directory. 
<li>Changes: nothing. 
</ul>

   <p>Display log information for files.  <code>log</code> used to
call the <span class="sc">rcs</span> utility <code>rlog</code>.  Although this
is no longer true in the current sources, this history
determines the format of the output and the options,
which are not quite in the style of the other <span class="sc">cvs</span>
commands.

   <p><a name="index-Timezone_002c-in-output-570"></a><a name="index-Zone_002c-time_002c-in-output-571"></a>The output includes the location of the <span class="sc">rcs</span> file,
the <dfn>head</dfn> revision (the latest revision on the
trunk), all symbolic names (tags) and some other
things.  For each revision, the revision number, the
date, the author, the number of lines added/deleted, the commitid
and the log message are printed.  All dates are displayed
in local time at the client. This is typically specified in
the <code>$TZ</code> environment variable, which can be set to
govern how <code>log</code> displays dates.

   <p><em>Note: </em><code>log</code><em> uses &lsquo;</em><samp><span class="samp">-R</span></samp><em>&rsquo; in a way that conflicts
with the normal use inside </em><span class="sc">cvs</span><em> (see <a href="#Common-options">Common options</a>).</em>

<ul class="menu">
<li><a accesskey="1" href="#log-options">log options</a>:                  log options
<li><a accesskey="2" href="#log-examples">log examples</a>:                 log examples
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="log-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#log-examples">log examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#log">log</a>

</div>

<h4 class="appendixsubsec">A.15.1 log options</h4>

<p>By default, <code>log</code> prints all information that is
available.  All other options restrict the output.  Note that the revision
selection options (<code>-d</code>, <code>-r</code>, <code>-s</code>, and <code>-w</code>) have no
effect, other than possibly causing a search for files in Attic directories,
when used in conjunction with the options that restrict the output to only
<code>log</code> header fields (<code>-b</code>, <code>-h</code>, <code>-R</code>, and <code>-t</code>)
unless the <code>-S</code> option is also specified.

     <dl>
<dt><code>-b</code><dd>Print information about the revisions on the default
branch, normally the highest branch on the trunk.

     <br><dt><code>-d </code><var>dates</var><dd>Print information about revisions with a checkin
date/time in the range given by the
semicolon-separated list of dates.  The date formats
accepted are those accepted by the &lsquo;<samp><span class="samp">-D</span></samp>&rsquo; option to
many other <span class="sc">cvs</span> commands (see <a href="#Common-options">Common options</a>). 
Dates can be combined into ranges as follows:

     <!-- Should we be thinking about accepting ISO8601 -->
     <!-- ranges?  For example "1972-09-10/1972-09-12". -->
          <dl>
<dt><var>d1</var><code>&lt;</code><var>d2</var><dt><var>d2</var><code>&gt;</code><var>d1</var><dd>Select the revisions that were deposited between
<var>d1</var> and <var>d2</var>.

          <br><dt><code>&lt;</code><var>d</var><dt><var>d</var><code>&gt;</code><dd>Select all revisions dated <var>d</var> or earlier.

          <br><dt><var>d</var><code>&lt;</code><dt><code>&gt;</code><var>d</var><dd>Select all revisions dated <var>d</var> or later.

          <br><dt><var>d</var><dd>Select the single, latest revision dated <var>d</var> or
earlier. 
</dl>

     <p>The &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; or &lsquo;<samp><span class="samp">&lt;</span></samp>&rsquo; characters may be followed by
&lsquo;<samp><span class="samp">=</span></samp>&rsquo; to indicate an inclusive range rather than an
exclusive one.

     <p>Note that the separator is a semicolon (;).

     <br><dt><code>-h</code><dd>Print only the name of the <span class="sc">rcs</span> file, name
of the file in the working directory, head,
default branch, access list, locks, symbolic names, and
suffix.

     <br><dt><code>-l</code><dd>Local; run only in current working directory.  (Default
is to run recursively).

     <br><dt><code>-N</code><dd>Do not print the list of tags for this file.  This
option can be very useful when your site uses a lot of
tags, so rather than "more"'ing over 3 pages of tag
information, the log information is presented without
tags at all.

     <br><dt><code>-R</code><dd>Print only the name of the <span class="sc">rcs</span> file.

     <!-- Note that using a bare revision (in addition to not -->
     <!-- being explicitly documented here) is potentially -->
     <!-- confusing; it shows the log message to get from the -->
     <!-- previous revision to that revision.  "-r1.3 -r1.6" -->
     <!-- (equivalent to "-r1.3,1.6") is even worse; it -->
     <!-- prints the messages to get from 1.2 to 1.3 and 1.5 -->
     <!-- to 1.6.  By analogy with "cvs diff", users might -->
     <!-- expect that it is more like specifying a range. -->
     <!-- It is not 100% clear to me how much of this should -->
     <!-- be documented (for example, multiple -r options -->
     <!-- perhaps could/should be deprecated given the false -->
     <!-- analogy with "cvs diff"). -->
     <!-- In general, this section should be rewritten to talk -->
     <!-- about messages to get from revision rev1 to rev2, -->
     <!-- rather than messages for revision rev2 (that is, the -->
     <!-- messages are associated with a change not a static -->
     <!-- revision and failing to make this distinction causes -->
     <!-- much confusion). -->
     <br><dt><code>-r</code><var>revisions</var><dd>Print information about revisions given in the
comma-separated list <var>revisions</var> of revisions and
ranges.  The following table explains the available
range formats:

          <dl>
<dt><var>rev1</var><code>:</code><var>rev2</var><dd>Revisions <var>rev1</var> to <var>rev2</var> (which must be on
the same branch).

          <br><dt><var>rev1</var><code>::</code><var>rev2</var><dd>The same, but excluding <var>rev1</var>.

          <br><dt><code>:</code><var>rev</var><dt><code>::</code><var>rev</var><dd>Revisions from the beginning of the branch up to
and including <var>rev</var>.

          <br><dt><var>rev</var><code>:</code><dd>Revisions starting with <var>rev</var> to the end of the
branch containing <var>rev</var>.

          <br><dt><var>rev</var><code>::</code><dd>Revisions starting just after <var>rev</var> to the end of the
branch containing <var>rev</var>.

          <br><dt><var>branch</var><dd>An argument that is a branch means all revisions on
that branch.

          <br><dt><var>branch1</var><code>:</code><var>branch2</var><dt><var>branch1</var><code>::</code><var>branch2</var><dd>A range of branches means all revisions
on the branches in that range.

          <br><dt><var>branch</var><code>.</code><dd>The latest revision in <var>branch</var>. 
</dl>

     <p>A bare &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; with no revisions means the latest
revision on the default branch, normally the trunk. 
There can be no space between the &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; option and
its argument.

     <br><dt><code>-S</code><dd>Suppress the header if no revisions are selected.

     <br><dt><code>-s </code><var>states</var><dd>Print information about revisions whose state
attributes match one of the states given in the
comma-separated list <var>states</var>.  Individual states may
be any text string, though <span class="sc">cvs</span> commonly only uses two
states, &lsquo;<samp><span class="samp">Exp</span></samp>&rsquo; and &lsquo;<samp><span class="samp">dead</span></samp>&rsquo;.  See <a href="#admin-options">admin options</a>
for more information.

     <br><dt><code>-t</code><dd>Print the same as &lsquo;<samp><span class="samp">-h</span></samp>&rsquo;, plus the descriptive text.

     <br><dt><code>-w</code><var>logins</var><dd>Print information about revisions checked in by users
with login names appearing in the comma-separated list
<var>logins</var>.  If <var>logins</var> is omitted, the user's
login is assumed.  There can be no space between the
&lsquo;<samp><span class="samp">-w</span></samp>&rsquo; option and its argument. 
</dl>

   <p><code>log</code> prints the intersection of the revisions
selected with the options &lsquo;<samp><span class="samp">-d</span></samp>&rsquo;, &lsquo;<samp><span class="samp">-s</span></samp>&rsquo;, and
&lsquo;<samp><span class="samp">-w</span></samp>&rsquo;, intersected with the union of the revisions
selected by &lsquo;<samp><span class="samp">-b</span></samp>&rsquo; and &lsquo;<samp><span class="samp">-r</span></samp>&rsquo;.

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="log-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#log-options">log options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#log">log</a>

</div>

<h4 class="appendixsubsec">A.15.2 log examples</h4>

<p><a name="index-Timezone_002c-in-output-572"></a><a name="index-Zone_002c-time_002c-in-output-573"></a>Since <code>log</code> shows dates in local time,
you might want to see them in Coordinated Universal Time (UTC) or
some other timezone. 
To do this you can set your <code>$TZ</code> environment
variable before invoking <span class="sc">cvs</span>:

<pre class="example">     $ TZ=UTC cvs log foo.c
     $ TZ=EST cvs log bar.c
</pre>
   <p>(If you are using a <code>csh</code>-style shell, like <code>tcsh</code>,
you would need to prefix the examples above with <code>env</code>.)

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="ls-%26-rls"></a>
<a name="ls-_0026-rls"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#rdiff">rdiff</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#log">log</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.16 ls &amp; rls</h3>

<p><a name="index-ls-_0028subcommand_0029-574"></a><a name="index-rls-_0028subcommand_0029-575"></a>
     <ul>
<li>ls [-e | -l] [-RP] [-r tag[:date]] [-D date] [path<small class="dots">...</small>]
<li>Requires: repository for <code>rls</code>, repository &amp; working directory for
<code>ls</code>. 
<li>Changes: nothing. 
<li>Synonym: <code>dir</code> &amp; <code>list</code> are synonyms for <code>ls</code> and <code>rdir</code>
&amp; <code>rlist</code> are synonyms for <code>rls</code>. 
</ul>

   <p>The <code>ls</code> and <code>rls</code> commands are used to list
files and directories in the repository.

   <p>By default <code>ls</code> lists the files and directories
that belong in your working directory, what would be
there after an <code>update</code>.

   <p>By default <code>rls</code> lists the files and directories
on the tip of the trunk in the topmost directory of the
repository.

   <p>Both commands accept an optional list of file and
directory names, relative to the working directory for
<code>ls</code> and the topmost directory of the repository
for <code>rls</code>.  Neither is recursive by default.

<ul class="menu">
<li><a accesskey="1" href="#ls-_0026-rls-options">ls &amp; rls options</a>:          ls &amp; rls options
<li><a accesskey="2" href="#rls-examples">rls examples</a>: </ul>

<div class="node">
<a name="ls-%26-rls-options"></a>
<a name="ls-_0026-rls-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#rls-examples">rls examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#ls-_0026-rls">ls &amp; rls</a>

</div>

<h4 class="appendixsubsec">A.16.1 ls &amp; rls options</h4>

<p>These standard options are supported by <code>ls</code> &amp; <code>rls</code>:

     <dl>
<dt><code>-d</code><dd>Show dead revisions (with tag when specified).

     <br><dt><code>-e</code><dd>Display in CVS/Entries format.  This format is meant to remain easily parsable
by automation.

     <br><dt><code>-l</code><dd>Display all details.

     <br><dt><code>-P</code><dd>Don't list contents of empty directories when recursing.

     <br><dt><code>-R</code><dd>List recursively.

     <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Show files specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>.

     <br><dt><code>-D </code><var>date</var><dd>Show files from date. 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="rls-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#ls-_0026-rls-options">ls &amp; rls options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#ls-_0026-rls">ls &amp; rls</a>

</div>

<h4 class="appendixsubsec">A.16.2 rls examples</h4>

<pre class="example">     $ cvs rls
     cvs rls: Listing module: `.'
     CVSROOT
     first-dir
</pre>
<pre class="example">     $ cvs rls CVSROOT
     cvs rls: Listing module: `CVSROOT'
     checkoutlist
     commitinfo
     config
     cvswrappers
     loginfo
     modules
     notify
     rcsinfo
     taginfo
     verifymsg
     
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="rdiff"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#release">release</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#ls-_0026-rls">ls &amp; rls</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.17 rdiff&mdash;'patch' format diffs between releases</h3>

<p><a name="index-rdiff-_0028subcommand_0029-576"></a>
     <ul>
<li>rdiff [-flags] [-V vn] (-r tag1[:date1] | -D date1) [-r tag2[:date2] | -D date2] modules<small class="dots">...</small>
<li>Requires: repository. 
<li>Changes: nothing. 
<li>Synonym: patch
</ul>

   <p>Builds a Larry Wall format patch(1) file between two
releases, that can be fed directly into the <code>patch</code>
program to bring an old release up-to-date with the new
release.  (This is one of the few <span class="sc">cvs</span> commands that
operates directly from the repository, and doesn't
require a prior checkout.) The diff output is sent to
the standard output device.

   <p>You can specify (using the standard &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">-D</span></samp>&rsquo; options) any combination of one or two
revisions or dates.  If only one revision or date is
specified, the patch file reflects differences between
that revision or date and the current head revisions in
the <span class="sc">rcs</span> file.

   <p>Note that if the software release affected is contained
in more than one directory, then it may be necessary to
specify the &lsquo;<samp><span class="samp">-p</span></samp>&rsquo; option to the <code>patch</code> command when
patching the old sources, so that <code>patch</code> is able to find
the files that are located in other directories.

<ul class="menu">
<li><a accesskey="1" href="#rdiff-options">rdiff options</a>:                rdiff options
<li><a accesskey="2" href="#rdiff-examples">rdiff examples</a>:               rdiff examples
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="rdiff-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#rdiff-examples">rdiff examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#rdiff">rdiff</a>

</div>

<h4 class="appendixsubsec">A.17.1 rdiff options</h4>

<p>These standard options are supported by <code>rdiff</code>
(see <a href="#Common-options">Common options</a>, for a complete description of
them):

     <dl>
<dt><code>-D </code><var>date</var><dd>Use the most recent revision no later than <var>date</var>.

     <br><dt><code>-f</code><dd>If no matching revision is found, retrieve the most
recent revision (instead of ignoring the file).

     <br><dt><code>-k </code><var>kflag</var><dd>Process keywords according to <var>kflag</var>.  See
<a href="#Keyword-substitution">Keyword substitution</a>.

     <br><dt><code>-l</code><dd>Local; don't descend subdirectories.

     <br><dt><code>-R</code><dd>Examine directories recursively.  This option is on by default.

     <br><dt><code>-r </code><var>tag</var><dd>Use the revision specified by <var>tag</var>, or when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>. 
</dl>

   <p>In addition to the above, these options are available:

     <dl>
<dt><code>-c</code><dd>Use the context diff format.  This is the default format.

     <br><dt><code>-p</code><dd>Show which C function each change is in.

     <br><dt><code>-s</code><dd>Create a summary change report instead of a patch.  The
summary includes information about files that were
changed or added between the releases.  It is sent to
the standard output device.  This is useful for finding
out, for example, which files have changed between two
dates or revisions.

     <br><dt><code>-t</code><dd>A diff of the top two revisions is sent to the standard
output device.  This is most useful for seeing what the
last change to a file was.

     <br><dt><code>-u</code><dd>Use the unidiff format for the context diffs. 
Remember that old versions
of the <code>patch</code> program can't handle the unidiff
format, so if you plan to post this patch to the net
you should probably not use &lsquo;<samp><span class="samp">-u</span></samp>&rsquo;.

     <br><dt><code>-V </code><var>vn</var><dd>Expand keywords according to the rules current in
<span class="sc">rcs</span> version <var>vn</var> (the expansion format changed with
<span class="sc">rcs</span> version 5).  Note that this option is no
longer accepted.  <span class="sc">cvs</span> will always expand keywords the
way that <span class="sc">rcs</span> version 5 does. 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="rdiff-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#rdiff-options">rdiff options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#rdiff">rdiff</a>

</div>

<h4 class="appendixsubsec">A.17.2 rdiff examples</h4>

<p>Suppose you receive mail from <tt>foo@example.net</tt> asking for an
update from release 1.2 to 1.4 of the tc compiler.  You
have no such patches on hand, but with <span class="sc">cvs</span> that can
easily be fixed with a command such as this:

<pre class="example">     $ cvs rdiff -c -r FOO1_2 -r FOO1_4 tc | \
     $$ Mail -s 'The patches you asked for' foo@example.net
</pre>
   <p>Suppose you have made release 1.3, and forked a branch
called &lsquo;<samp><span class="samp">R_1_3fix</span></samp>&rsquo; for bug fixes.  &lsquo;<samp><span class="samp">R_1_3_1</span></samp>&rsquo;
corresponds to release 1.3.1, which was made some time
ago.  Now, you want to see how much development has been
done on the branch.  This command can be used:

<pre class="example">     $ cvs patch -s -r R_1_3_1 -r R_1_3fix module-name
     cvs rdiff: Diffing module-name
     File ChangeLog,v changed from revision 1.52.2.5 to 1.52.2.6
     File foo.c,v changed from revision 1.52.2.3 to 1.52.2.4
     File bar.h,v changed from revision 1.29.2.1 to 1.2
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="release"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#server-_0026-pserver">server &amp; pserver</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#rdiff">rdiff</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.18 release&mdash;Indicate that a Module is no longer in use</h3>

<p><a name="index-release-_0028subcommand_0029-577"></a>
     <ul>
<li>release [-d] directories<small class="dots">...</small>
<li>Requires: Working directory. 
<li>Changes: Working directory, history log. 
</ul>

   <p>This command is meant to safely cancel the effect of
&lsquo;<samp><span class="samp">cvs checkout</span></samp>&rsquo;.  Since <span class="sc">cvs</span> doesn't lock files, it
isn't strictly necessary to use this command.  You can
always simply delete your working directory, if you
like; but you risk losing changes you may have
forgotten, and you leave no trace in the <span class="sc">cvs</span> history
file (see <a href="#history-file">history file</a>) that you've abandoned your
checkout.

   <p>Use &lsquo;<samp><span class="samp">cvs release</span></samp>&rsquo; to avoid these problems.  This
command checks that no uncommitted changes are
present; that you are executing it from immediately
above a <span class="sc">cvs</span> working directory; and that the repository
recorded for your files is the same as the repository
defined in the module database.

   <p>If all these conditions are true, &lsquo;<samp><span class="samp">cvs release</span></samp>&rsquo;
leaves a record of its execution (attesting to your
intentionally abandoning your checkout) in the <span class="sc">cvs</span>
history log.

<ul class="menu">
<li><a accesskey="1" href="#release-options">release options</a>:              release options
<li><a accesskey="2" href="#release-output">release output</a>:               release output
<li><a accesskey="3" href="#release-examples">release examples</a>:             release examples
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="release-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#release-output">release output</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#release">release</a>

</div>

<h4 class="appendixsubsec">A.18.1 release options</h4>

<p>The <code>release</code> command supports one command option:

     <dl>
<dt><code>-d</code><dd>Delete your working copy of the file if the release
succeeds.  If this flag is not given your files will
remain in your working directory.

     <p><em>WARNING:  The </em><code>release</code><em> command deletes
all directories and files recursively.  This
has the very serious side-effect that any directory
that you have created inside your checked-out sources,
and not added to the repository (using the </em><code>add</code><em>
command; see <a href="#Adding-files">Adding files</a>) will be silently deleted&mdash;even
if it is non-empty!</em>
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="release-output"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#release-examples">release examples</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#release-options">release options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#release">release</a>

</div>

<h4 class="appendixsubsec">A.18.2 release output</h4>

<p>Before <code>release</code> releases your sources it will
print a one-line message for any file that is not
up-to-date.

     <dl>
<dt><code>U </code><var>file</var><dt><code>P </code><var>file</var><dd>There exists a newer revision of this file in the
repository, and you have not modified your local copy
of the file (&lsquo;<samp><span class="samp">U</span></samp>&rsquo; and &lsquo;<samp><span class="samp">P</span></samp>&rsquo; mean the same thing).

     <br><dt><code>A </code><var>file</var><dd>The file has been added to your private copy of the
sources, but has not yet been committed to the
repository.  If you delete your copy of the sources
this file will be lost.

     <br><dt><code>R </code><var>file</var><dd>The file has been removed from your private copy of the
sources, but has not yet been removed from the
repository, since you have not yet committed the
removal.  See <a href="#commit">commit</a>.

     <br><dt><code>M </code><var>file</var><dd>The file is modified in your working directory.  There
might also be a newer revision inside the repository.

     <br><dt><code>? </code><var>file</var><dd><var>file</var> is in your working directory, but does not
correspond to anything in the source repository, and is
not in the list of files for <span class="sc">cvs</span> to ignore (see the
description of the &lsquo;<samp><span class="samp">-I</span></samp>&rsquo; option, and
see <a href="#cvsignore">cvsignore</a>).  If you remove your working
sources, this file will be lost. 
</dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="release-examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#release-output">release output</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#release">release</a>

</div>

<h4 class="appendixsubsec">A.18.3 release examples</h4>

<p>Release the <samp><span class="file">tc</span></samp> directory, and delete your local working copy
of the files.

<pre class="example">     $ cd ..         # <span class="roman">You must stand immediately above the</span>
                     # <span class="roman">sources when you issue &lsquo;</span><samp><span class="samp">cvs release</span></samp><span class="roman">&rsquo;.</span>
     $ cvs release -d tc
     You have [0] altered files in this repository.
     Are you sure you want to release (and delete) directory `tc': y
     $
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="server-%26-pserver"></a>
<a name="server-_0026-pserver"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#suck">suck</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#release">release</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.19 server &amp; pserver&mdash;Act as a server for a client on stdin/stdout</h3>

<p><a name="index-pserver-_0028subcommand_0029-578"></a><a name="index-server-_0028subcommand_0029-579"></a>
     <ul>
<li>pserver [-c path]

     <p>server [-c path]
<li>Requires: repository, client conversation on stdin/stdout
<li>Changes: Repository or, indirectly, client working directory. 
</ul>

   <p>The <span class="sc">cvs</span> <code>server</code> and <code>pserver</code> commands are used to provide
repository access to remote clients and expect a client conversation on
stdin &amp; stdout.  Typically these commands are launched from <code>inetd</code> or
via <code>ssh</code> (see <a href="#Remote-repositories">Remote repositories</a>).

   <p><code>server</code> expects that the client has already been authenticated somehow,
typically via <span class="sc">ssh</span>, and <code>pserver</code> attempts to authenticate the client
itself.

   <p>Only one option is available with the <code>server</code> and <code>pserver</code>
commands:

   <p><a name="index-configuration-file-580"></a>
     <dl>
<dt><code>-c path</code><dd>Load configuration from <var>path</var> rather than the default location
<samp><span class="file">$CVSROOT/CVSROOT/config</span></samp> (see <a href="#config">config</a>).  <var>path</var> must be
<samp><span class="file">/etc/cvs.conf</span></samp> or prefixed by <samp><span class="file">/etc/cvs/</span></samp>.  This option is
supported beginning with <span class="sc">cvs</span> release 1.12.13. 
</dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="suck"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#update">update</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#server-_0026-pserver">server &amp; pserver</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.20 suck&mdash;Download RCS ,v file raw</h3>

<p><a name="index-suck-_0028subcommand_0029-581"></a>
     <ul>
<li>suck module/path
<li>Requires: repository
</ul>

   <p>Locates the file module/path,v or module/pa/Attic/th,v and downloads
it raw as RCS comma-v file.

   <p>Output consists of the real pathname of the comma-v file, relative to
the CVS repository, followed by a newline and the binary file content
immediately thereafter.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="update"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#suck">suck</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#CVS-commands">CVS commands</a>

</div>

<h3 class="appendixsec">A.21 update&mdash;Bring work tree in sync with repository</h3>

<p><a name="index-update-_0028subcommand_0029-582"></a>
     <ul>
<li>update [-ACdflPpR] [-I name] [-j rev [-j rev]] [-k kflag] [-r tag[:date] | -D date] [-W spec] files<small class="dots">...</small>
<li>Requires: repository, working directory. 
<li>Changes: working directory. 
</ul>

   <p>After you've run checkout to create your private copy
of source from the common repository, other developers
will continue changing the central source.  From time
to time, when it is convenient in your development
process, you can use the <code>update</code> command from
within your working directory to reconcile your work
with any revisions applied to the source repository
since your last checkout or update.  Without the <code>-C</code>
option, <code>update</code> will also merge any differences
between the local copy of files and their base revisions
into any destination revisions specified with <code>-r</code>,
<code>-D</code>, or <code>-A</code>.

<ul class="menu">
<li><a accesskey="1" href="#update-options">update options</a>:               update options
<li><a accesskey="2" href="#update-output">update output</a>:                update output
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="update-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#update-output">update output</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#update">update</a>

</div>

<h4 class="appendixsubsec">A.21.1 update options</h4>

<p>These standard options are available with <code>update</code>
(see <a href="#Common-options">Common options</a>, for a complete description of
them):

     <dl>
<dt><code>-D date</code><dd>Use the most recent revision no later than <var>date</var>. 
This option is sticky, and implies &lsquo;<samp><span class="samp">-P</span></samp>&rsquo;. 
See <a href="#Sticky-tags">Sticky tags</a>, for more information on sticky tags/dates.

     <br><dt><code>-f</code><dd>Only useful with the &lsquo;<samp><span class="samp">-D</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-r</span></samp>&rsquo; flags.  If no matching revision
is found, retrieve the most recent revision (instead of ignoring the file).

     <br><dt><code>-k </code><var>kflag</var><dd>Process keywords according to <var>kflag</var>.  See
<a href="#Keyword-substitution">Keyword substitution</a>. 
This option is sticky; future updates of
this file in this working directory will use the same
<var>kflag</var>.  The <code>status</code> command can be viewed
to see the sticky options.  See <a href="#Invoking-CVS">Invoking CVS</a>, for
more information on the <code>status</code> command.

     <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

     <br><dt><code>-P</code><dd>Prune empty directories.  See <a href="#Moving-directories">Moving directories</a>.

     <br><dt><code>-p</code><dd>Pipe files to the standard output.

     <br><dt><code>-R</code><dd>Update directories recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

     <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Retrieve the revisions specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  This option is sticky, and implies &lsquo;<samp><span class="samp">-P</span></samp>&rsquo;. 
See <a href="#Sticky-tags">Sticky tags</a>, for more information on sticky tags/dates. Also
see <a href="#Common-options">Common options</a>. 
</dl>

   <p>These special options are also available with
<code>update</code>.

     <dl>
<dt><code>-A</code><dd>Reset any sticky tags, dates, or &lsquo;<samp><span class="samp">-k</span></samp>&rsquo; options. 
See <a href="#Sticky-tags">Sticky tags</a>, for more information on sticky tags/dates.

     <br><dt><code>-C</code><dd>Overwrite locally modified files with clean copies from
the repository (the modified file is saved in
<samp><span class="file">.#</span><var>file</var><span class="file">.</span><var>revision</var></samp>, however).

     <br><dt><code>-d</code><dd>Create any directories that exist in the repository if
they're missing from the working directory.  Normally,
<code>update</code> acts only on directories and files that
were already enrolled in your working directory.

     <p>This is useful for updating directories that were
created in the repository since the initial checkout;
but it has an unfortunate side effect.  If you
deliberately avoided certain directories in the
repository when you created your working directory
(either through use of a module name or by listing
explicitly the files and directories you wanted on the
command line), then updating with &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; will create
those directories, which may not be what you want.

     <br><dt><code>-I </code><var>name</var><dd>Ignore files whose names match <var>name</var> (in your
working directory) during the update.  You can specify
&lsquo;<samp><span class="samp">-I</span></samp>&rsquo; more than once on the command line to specify
several files to ignore.  Use &lsquo;<samp><span class="samp">-I !</span></samp>&rsquo; to avoid
ignoring any files at all.  See <a href="#cvsignore">cvsignore</a>, for other
ways to make <span class="sc">cvs</span> ignore some files.

     <br><dt><code>-W</code><var>spec</var><dd>Specify file names that should be filtered during
update.  You can use this option repeatedly.

     <p><var>spec</var> can be a file name pattern of the same type
that you can specify in the <samp><span class="file">.cvswrappers</span></samp>
file. See <a href="#Wrappers">Wrappers</a>.

     <br><dt><code>-j</code><var>revision</var><dd>With two &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; options, merge changes from the
revision specified with the first &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option to
the revision specified with the second &lsquo;<samp><span class="samp">j</span></samp>&rsquo; option,
into the working directory.

     <p>With one &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option, merge changes from the
ancestor revision to the revision specified with the
&lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option, into the working directory.  The
ancestor revision is the common ancestor of the
revision which the working directory is based on, and
the revision specified in the &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option.

     <p>Note that using a single &lsquo;<samp><span class="samp">-j </span><var>tagname</var></samp>&rsquo; option rather than
&lsquo;<samp><span class="samp">-j </span><var>branchname</var></samp>&rsquo; to merge changes from a branch will
often not remove files which were removed on the branch. 
See <a href="#Merging-adds-and-removals">Merging adds and removals</a>, for more.

     <p>In addition, each &lsquo;<samp><span class="samp">-j</span></samp>&rsquo; option can contain an optional
date specification which, when used with branches, can
limit the chosen revision to one within a specific
date.  An optional date is specified by adding a colon
(:) to the tag:
&lsquo;<samp><span class="samp">-j</span><var>Symbolic_Tag</var><span class="samp">:</span><var>Date_Specifier</var></samp>&rsquo;.

     <p>See <a href="#Branching-and-merging">Branching and merging</a>.

   </dl>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="update-output"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#update-options">update options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#update">update</a>

</div>

<h4 class="appendixsubsec">A.21.2 update output</h4>

<p><code>update</code> and <code>checkout</code> keep you informed of
their progress by printing a line for each file, preceded
by one character indicating the status of the file:

     <dl>
<dt><code>U </code><var>file</var><dd>The file was brought up to date with respect to the
repository.  This is done for any file that exists in
the repository but not in your working directory, and for files
that you haven't changed but are not the most recent
versions available in the repository.

     <br><dt><code>P </code><var>file</var><dd>Like &lsquo;<samp><span class="samp">U</span></samp>&rsquo;, but the <span class="sc">cvs</span> server sends a patch instead of an entire
file.  This accomplishes the same thing as &lsquo;<samp><span class="samp">U</span></samp>&rsquo; using less bandwidth.

     <br><dt><code>A </code><var>file</var><dd>The file has been added to your private copy of the
sources, and will be added to the source repository
when you run <code>commit</code> on the file.  This is a
reminder to you that the file needs to be committed.

     <br><dt><code>R </code><var>file</var><dd>The file has been removed from your private copy of the
sources, and will be removed from the source repository
when you run <code>commit</code> on the file.  This is a
reminder to you that the file needs to be committed.

     <br><dt><code>M </code><var>file</var><dd>The file is modified in  your  working  directory.

     <p>&lsquo;<samp><span class="samp">M</span></samp>&rsquo; can indicate one of two states for a file
you're working on: either there were no modifications
to the same file in the repository, so that your file
remains as you last saw it; or there were modifications
in the repository as well as in your copy, but they
were merged successfully, without conflict, in your
working directory.

     <p><span class="sc">cvs</span> will print some messages if it merges your work,
and a backup copy of your working file (as it looked
before you ran <code>update</code>) will be made.  The exact
name of that file is printed while <code>update</code> runs.

     <br><dt><code>C </code><var>file</var><dd><a name="index-g_t_002e_0023-files-583"></a><a name="index-g_t_005f_005f-files-_0028VMS_0029-584"></a>A conflict was detected while trying to merge your
changes to <var>file</var> with changes from the source
repository.  <var>file</var> (the copy in your working
directory) is now the result of attempting to merge
the two revisions; an unmodified copy of your file
is also in your working directory, with the name
<samp><span class="file">.#</span><var>file</var><span class="file">.</span><var>revision</var></samp> where <var>revision</var>
is the revision that your modified file started
from.  Resolve the conflict as described in
<a href="#Conflicts-example">Conflicts example</a>. 
<!-- "some systems" as in out-of-the-box OSes?  Not as -->
<!-- far as I know.  We need to advise sysadmins as well -->
<!-- as users how to set up this kind of purge, if that is -->
<!-- what they want. -->
<!-- We also might want to think about cleaner solutions, -->
<!-- like having CVS remove the .# file once the conflict -->
<!-- has been resolved or something like that. -->
(Note that some systems automatically purge
files that begin with <samp><span class="file">.#</span></samp> if they have not been
accessed for a few days.  If you intend to keep a copy
of your original file, it is a very good idea to rename
it.)  Under <span class="sc">vms</span>, the file name starts with
<samp><span class="file">__</span></samp> rather than <samp><span class="file">.#</span></samp>.

     <br><dt><code>? </code><var>file</var><dd><var>file</var> is in your working directory, but does not
correspond to anything in the source repository, and is
not in the list of files for <span class="sc">cvs</span> to ignore (see the
description of the &lsquo;<samp><span class="samp">-I</span></samp>&rsquo; option, and
see <a href="#cvsignore">cvsignore</a>). 
</dl>

<!--  END MAN 1 - -->
<!--  -->
<div class="node">
<a name="Invoking-CVS"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Administrative-files">Administrative files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#CVS-commands">CVS commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix B Quick reference to CVS commands</h2>

<p><a name="index-Command-reference-585"></a><a name="index-Reference_002c-commands-586"></a><a name="index-Invoking-CVS-587"></a>
This appendix describes how to invoke <span class="sc">cvs</span>, with
references to where each command or feature is
described in detail.  For other references run the
<code>cvs --help</code> command, or see <a href="#Index">Index</a>.

   <p>A <span class="sc">cvs</span> command looks like:

<pre class="example">     cvs [ <var>global_options</var> ] <var>command</var> [ <var>command_options</var> ] [ <var>command_args</var> ]
</pre>
   <p>Global options:

     <dl>
<dt><code>--allow-root=</code><var>rootdir</var><dd>Specify legal <span class="sc">cvsroot</span> directory (server only) (not
in <span class="sc">cvs</span> 1.9 and older).  See <a href="#Password-authentication-server">Password authentication server</a>.

     <br><dt><code>-a</code><dd>Authenticate all communication (client only) (not in <span class="sc">cvs</span>
1.9 and older).  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-b</code><dd>Specify RCS location (<span class="sc">cvs</span> 1.9 and older).  See
<a href="#Global-options">Global options</a>.

     <br><dt><code>-d </code><var>root</var><dd>Specify the <span class="sc">cvsroot</span>.  See <a href="#Repository">Repository</a>.

     <br><dt><code>-e </code><var>editor</var><dd>Edit messages with <var>editor</var>.  See <a href="#Committing-your-changes">Committing your changes</a>.

     <br><dt><code>-f</code><dd>Do not read the <samp><span class="file">~/.cvsrc</span></samp> file.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-g</code><dd>Set the umask to allow group writable permissions in
the working copy.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-H</code><dt><code>--help</code><dd>Print a help message.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-n</code><dd>Do not change any files.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-Q</code><dd>Be really quiet.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-q</code><dd>Be somewhat quiet.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-r</code><dd>Make new working files read-only.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-s </code><var>variable</var><code>=</code><var>value</var><dd>Set a user variable.  See <a href="#Variables">Variables</a>.

     <br><dt><code>-T </code><var>tempdir</var><dd>Put temporary files in <var>tempdir</var>.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-t</code><dd>Trace <span class="sc">cvs</span> execution.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-v</code><br><dt><code>--version</code><dd>Display version and copyright information for <span class="sc">cvs</span>.

     <br><dt><code>-w</code><dd>Make new working files read-write.  See <a href="#Global-options">Global options</a>.

     <br><dt><code>-x</code><dd>Encrypt all communication (client only). 
See <a href="#Global-options">Global options</a>.

     <br><dt><code>-z </code><var>gzip-level</var><dd><a name="index-Compression-588"></a><a name="index-Gzip-589"></a>Set the compression level (client only). 
See <a href="#Global-options">Global options</a>. 
</dl>

   <p>Keyword expansion modes (see <a href="#Substitution-modes">Substitution modes</a>):

<pre class="example">     -kkv  $Id: file1,v 1.1 1993/12/09 03:21:13 joe Exp $
     -kkvl $Id: file1,v 1.1 1993/12/09 03:21:13 joe Exp harry $
     -kk   $Id$
     -kv   file1,v 1.1 1993/12/09 03:21:13 joe Exp
     -ko   <i>no expansion</i>
     -kb   <i>no expansion, file is binary</i>
</pre>
   <p>Keywords (see <a href="#Keyword-list">Keyword list</a>):

<pre class="example">     $Author: joe $
     $Date: 1993/12/09 03:21:13 $
     $Mdocdate: December 9 1993 $
     $CVSHeader: files/file1,v 1.1 1993/12/09 03:21:13 joe Exp harry $
     $Header: /home/files/file1,v 1.1 1993/12/09 03:21:13 joe Exp harry $
     $Id: file1,v 1.1 1993/12/09 03:21:13 joe Exp harry $
     $Locker: harry $
     $Name: snapshot_1_14 $
     $RCSfile: file1,v $
     $Revision: 1.1 $
     $Source: /home/files/file1,v $
     $State: Exp $
     $Log: file1,v $
     Revision 1.1  1993/12/09 03:30:17  joe
     Initial revision
     
</pre>
   <!-- The idea behind this table is that we want each item -->
<!-- to be a sentence or two at most.  Preferably a -->
<!-- single line. -->
<!-- In some cases refs to "foo options" are just to get -->
<!-- this thing written quickly, not because the "foo -->
<!-- options" node is really the best place to point. -->
   <p>Commands, command options, and command arguments:

     <dl>
<!--  -->
<dt><code>add [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Add a new file/directory.  See <a href="#Adding-files">Adding files</a>.

          <dl>
<dt><code>-k </code><var>kflag</var><dd>Set keyword expansion.

          <br><dt><code>-m </code><var>msg</var><dd>Set file description. 
</dl>

     <!--  -->
     <br><dt><code>admin [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Administration of history files in the repository.  See
<a href="#admin">admin</a>. 
<!-- This list omits those options which are not -->
<!-- documented as being useful with CVS.  That might be -->
<!-- a mistake... -->

          <dl>
<dt><code>-b[</code><var>rev</var><code>]</code><dd>Set default branch.  See <a href="#Reverting-local-changes">Reverting local changes</a>.

          <br><dt><code>-c</code><var>string</var><dd>Set comment leader.

          <br><dt><code>-k</code><var>subst</var><dd>Set keyword substitution.  See <a href="#Keyword-substitution">Keyword substitution</a>.

          <br><dt><code>-l[</code><var>rev</var><code>]</code><dd>Lock revision <var>rev</var>, or latest revision.

          <br><dt><code>-m</code><var>rev</var><code>:</code><var>msg</var><dd>Replace the log message of revision <var>rev</var> with
<var>msg</var>.

          <br><dt><code>-o</code><var>range</var><dd>Delete revisions from the repository.  See
<a href="#admin-options">admin options</a>.

          <br><dt><code>-q</code><dd>Run quietly; do not print diagnostics.

          <br><dt><code>-s</code><var>state</var><code>[:</code><var>rev</var><code>]</code><dd>Set the state.  See <a href="#admin-options">admin options</a> for more information on possible
states.

          <!-- Does not work for client/server CVS -->
          <br><dt><code>-t</code><dd>Set file description from standard input.

          <br><dt><code>-t</code><var>file</var><dd>Set file description from <var>file</var>.

          <br><dt><code>-t-</code><var>string</var><dd>Set file description to <var>string</var>.

          <br><dt><code>-u[</code><var>rev</var><code>]</code><dd>Unlock revision <var>rev</var>, or latest revision. 
</dl>

     <!--  -->
     <br><dt><code>annotate [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Show last revision where each line was modified.  See
<a href="#annotate">annotate</a>.

          <dl>
<dt><code>-D </code><var>date</var><dd>Annotate the most recent revision no later than
<var>date</var>.  See <a href="#Common-options">Common options</a>.

          <br><dt><code>-F</code><dd>Force annotation of binary files.  (Without this option,
binary files are skipped with a message.)

          <br><dt><code>-f</code><dd>Use head revision if tag/date not found.  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Annotate revisions specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>. 
</dl>

     <!--  -->
     <br><dt><code>checkout [</code><var>options</var><code>] </code><var>modules</var><code>...</code><dd>Get a copy of the sources.  See <a href="#checkout">checkout</a>.

          <dl>
<dt><code>-A</code><dd>Reset any sticky tags/date/options.  See <a href="#Sticky-tags">Sticky tags</a> and <a href="#Keyword-substitution">Keyword substitution</a>.

          <br><dt><code>-c</code><dd>Output the module database.  See <a href="#checkout-options">checkout options</a>.

          <br><dt><code>-D </code><var>date</var><dd>Check out revisions as of <var>date</var> (is sticky).  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-d </code><var>dir</var><dd>Check out into <var>dir</var>.  See <a href="#checkout-options">checkout options</a>.

          <br><dt><code>-f</code><dd>Use head revision if tag/date not found.  See
<a href="#Common-options">Common options</a>.

          <!-- Probably want to use rev1/rev2 style like for diff -->
          <!-- r.  Here and in on-line help. -->
          <br><dt><code>-j </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Merge in the change specified by <var>tag</var>, or when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#checkout-options">checkout options</a>.  Also,
see <a href="#Common-options">Common options</a>.

          <br><dt><code>-k </code><var>kflag</var><dd>Use <var>kflag</var> keyword expansion.  See
<a href="#Substitution-modes">Substitution modes</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-N</code><dd>Don't &ldquo;shorten&rdquo; module paths if -d specified.  See
<a href="#checkout-options">checkout options</a>.

          <br><dt><code>-n</code><dd>Do not run module program (if any).  See <a href="#checkout-options">checkout options</a>.

          <br><dt><code>-P</code><dd>Prune empty directories.  See <a href="#Moving-directories">Moving directories</a>.

          <br><dt><code>-p</code><dd>Check out files to standard output (avoids
stickiness).  See <a href="#checkout-options">checkout options</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Checkout the revision already tagged with <var>tag</var> or, when <var>date</var> is
specified and <var>tag</var> is a branch tag, the version from the branch <var>tag</var>
as it existed on <var>date</var>.  See <a href="#Common-options">Common options</a>.

          <br><dt><code>-s</code><dd>Like -c, but include module status.  See <a href="#checkout-options">checkout options</a>. 
</dl>

     <!--  -->
     <br><dt><code>commit [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Check changes into the repository.  See <a href="#commit">commit</a>.

          <dl>
<dt><code>-c</code><dd>Check for valid edits before committing.  Requires a <span class="sc">cvs</span> client and server
both version 1.12.10 or greater.

          <br><dt><code>-F </code><var>file</var><dd>Read log message from <var>file</var>.  See <a href="#commit-options">commit options</a>.

          <br><dt><code>-f</code><dd><!-- What is this "disables recursion"?  It is from the -->
<!-- on-line help; is it documented in this manual? -->
Force the file to be committed; disables recursion. 
See <a href="#commit-options">commit options</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-m </code><var>msg</var><dd>Use <var>msg</var> as log message.  See <a href="#commit-options">commit options</a>.

          <br><dt><code>-n</code><dd>Do not run module program (if any).  See <a href="#commit-options">commit options</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>rev</var><dd>Commit to <var>rev</var>.  See <a href="#commit-options">commit options</a>. 
<!-- FIXME: should be dragging over text from -->
<!-- commit options, especially if it can be cleaned up -->
<!-- and made concise enough. -->
</dl>

     <!--  -->
     <br><dt><code>diff [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Show differences between revisions.  See <a href="#diff">diff</a>. 
In addition to the options shown below, accepts a wide
variety of options to control output style, for example
&lsquo;<samp><span class="samp">-c</span></samp>&rsquo; for context diffs.

          <dl>
<dt><code>-D </code><var>date1</var><dd>Diff revision for date against working file.  See
<a href="#diff-options">diff options</a>.

          <br><dt><code>-D </code><var>date2</var><dd>Diff <var>rev1</var>/<var>date1</var> against <var>date2</var>.  See
<a href="#diff-options">diff options</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-N</code><dd>Include diffs for added and removed files.  See
<a href="#diff-options">diff options</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag1</var><code>[:</code><var>date1</var><code>]</code><dd>Diff the revisions specified by <var>tag1</var> or, when <var>date1</var> is specified
and <var>tag1</var> is a branch tag, the version from the branch <var>tag1</var> as it
existed on <var>date1</var>, against the working file.  See <a href="#diff-options">diff options</a>
and <a href="#Common-options">Common options</a>.

          <br><dt><code>-r </code><var>tag2</var><code>[:</code><var>date2</var><code>]</code><dd>Diff the revisions specified by <var>tag2</var> or, when <var>date2</var> is specified
and <var>tag2</var> is a branch tag, the version from the branch <var>tag2</var> as it
existed on <var>date2</var>, against <var>rev1</var>/<var>date1</var>.  See <a href="#diff-options">diff options</a>
and <a href="#Common-options">Common options</a>. 
</dl>

     <!--  -->
     <br><dt><code>edit [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Get ready to edit a watched file.  See <a href="#Editing-files">Editing files</a>.

          <dl>
<dt><code>-a </code><var>actions</var><dd>Specify actions for temporary watch, where
<var>actions</var> is <code>edit</code>, <code>unedit</code>,
<code>commit</code>, <code>all</code>, or <code>none</code>.  See
<a href="#Editing-files">Editing files</a>.

          <br><dt><code>-c</code><dd>Check edits: Edit fails if someone else is already editing the file. 
Requires a <span class="sc">cvs</span> client and server both of version 1.12.10 or greater.

          <br><dt><code>-f</code><dd>Force edit; ignore other edits.  Added in CVS 1.12.10.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>. 
</dl>

     <!--  -->
     <br><dt><code>editors [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>See who is editing a watched file.  See <a href="#Watch-information">Watch information</a>.

          <dl>
<dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>. 
</dl>

     <!--  -->
     <br><dt><code>export [</code><var>options</var><code>] </code><var>modules</var><code>...</code><dd>Export files from <span class="sc">cvs</span>.  See <a href="#export">export</a>.

          <dl>
<dt><code>-D </code><var>date</var><dd>Check out revisions as of <var>date</var>.  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-d </code><var>dir</var><dd>Check out into <var>dir</var>.  See <a href="#export-options">export options</a>.

          <br><dt><code>-f</code><dd>Use head revision if tag/date not found.  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-k </code><var>kflag</var><dd>Use <var>kflag</var> keyword expansion.  See
<a href="#Substitution-modes">Substitution modes</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-N</code><dd>Don't &ldquo;shorten&rdquo; module paths if -d specified.  See
<a href="#export-options">export options</a>.

          <br><dt><code>-n</code><dd>Do not run module program (if any).  See <a href="#export-options">export options</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Export the revisions specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>. 
</dl>

     <!--  -->
     <br><dt><code>history [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Show repository access history.  See <a href="#history">history</a>.

          <dl>
<dt><code>-a</code><dd>All users (default is self).  See <a href="#history-options">history options</a>.

          <br><dt><code>-b </code><var>str</var><dd>Back to record with <var>str</var> in module/file/repos
field.  See <a href="#history-options">history options</a>.

          <br><dt><code>-c</code><dd>Report on committed (modified) files.  See <a href="#history-options">history options</a>.

          <br><dt><code>-D </code><var>date</var><dd>Since <var>date</var>.  See <a href="#history-options">history options</a>.

          <br><dt><code>-e</code><dd>Report on all record types.  See <a href="#history-options">history options</a>.

          <br><dt><code>-l</code><dd>Last modified (committed or modified report).  See <a href="#history-options">history options</a>.

          <br><dt><code>-m </code><var>module</var><dd>Report on <var>module</var> (repeatable).  See <a href="#history-options">history options</a>.

          <br><dt><code>-n </code><var>module</var><dd>In <var>module</var>.  See <a href="#history-options">history options</a>.

          <br><dt><code>-o</code><dd>Report on checked out modules.  See <a href="#history-options">history options</a>.

          <br><dt><code>-p </code><var>repository</var><dd>In <var>repository</var>.  See <a href="#history-options">history options</a>.

          <br><dt><code>-r </code><var>rev</var><dd>Since revision <var>rev</var>.  See <a href="#history-options">history options</a>.

          <br><dt><code>-T</code><dd><!-- What the @#$@# is a TAG?  Same as a tag?  This -->
<!-- wording is also in the online-line help. -->
Produce report on all TAGs.  See <a href="#history-options">history options</a>.

          <br><dt><code>-t </code><var>tag</var><dd>Since tag record placed in history file (by anyone). 
See <a href="#history-options">history options</a>.

          <br><dt><code>-u </code><var>user</var><dd>For user <var>user</var> (repeatable).  See <a href="#history-options">history options</a>.

          <br><dt><code>-w</code><dd>Working directory must match.  See <a href="#history-options">history options</a>.

          <br><dt><code>-x </code><var>types</var><dd>Report on <var>types</var>, one or more of
<code>TOEFWUPCGMAR</code>.  See <a href="#history-options">history options</a>.

          <br><dt><code>-z </code><var>zone</var><dd>Output for time zone <var>zone</var>.  See <a href="#history-options">history options</a>. 
</dl>

     <!--  -->
     <br><dt><code>import [</code><var>options</var><code>] </code><var>repository</var> <var>vendor-tag</var> <var>release-tags</var><code>...</code><dd>Import files into <span class="sc">cvs</span>, using vendor branches.  See
<a href="#import">import</a>.

          <dl>
<dt><code>-b </code><var>bra</var><dd>Import to vendor branch <var>bra</var>.  See
<a href="#Multiple-vendor-branches">Multiple vendor branches</a>.

          <br><dt><code>-d</code><dd>Use the file's modification time as the time of
import.  See <a href="#import-options">import options</a>.

          <br><dt><code>-k </code><var>kflag</var><dd>Set default keyword substitution mode.  See
<a href="#import-options">import options</a>.

          <br><dt><code>-m </code><var>msg</var><dd>Use <var>msg</var> for log message.  See
<a href="#import-options">import options</a>.

          <br><dt><code>-I </code><var>ign</var><dd>More files to ignore (! to reset).  See
<a href="#import-options">import options</a>.

          <br><dt><code>-W </code><var>spec</var><dd>More wrappers.  See <a href="#import-options">import options</a>. 
</dl>

     <!--  -->
     <br><dt><code>init</code><dd>Create a <span class="sc">cvs</span> repository if it doesn't exist.  See
<a href="#Creating-a-repository">Creating a repository</a>.

     <!--  -->
     <br><dt><code>kserver</code><dd>Kerberos authenticated server. 
See <a href="#Kerberos-authenticated">Kerberos authenticated</a>.

     <!--  -->
     <br><dt><code>log [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Print out history information for files.  See <a href="#log">log</a>.

          <dl>
<dt><code>-b</code><dd>Only list revisions on the default branch.  See <a href="#log-options">log options</a>.

          <br><dt><code>-d </code><var>dates</var><dd>Specify dates (<var>d1</var>&lt;<var>d2</var> for range, <var>d</var> for
latest before).  See <a href="#log-options">log options</a>.

          <br><dt><code>-h</code><dd>Only print header.  See <a href="#log-options">log options</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-N</code><dd>Do not list tags.  See <a href="#log-options">log options</a>.

          <br><dt><code>-R</code><dd>Only print name of RCS file.  See <a href="#log-options">log options</a>.

          <br><dt><code>-r</code><var>revs</var><dd>Only list revisions <var>revs</var>.  See <a href="#log-options">log options</a>.

          <br><dt><code>-s </code><var>states</var><dd>Only list revisions with specified states.  See <a href="#log-options">log options</a>.

          <br><dt><code>-t</code><dd>Only print header and descriptive text.  See <a href="#log-options">log options</a>.

          <br><dt><code>-w</code><var>logins</var><dd>Only list revisions checked in by specified logins.  See <a href="#log-options">log options</a>. 
</dl>

     <!--  -->
     <br><dt><code>login</code><dd>Prompt for password for authenticating server.  See
<a href="#Password-authentication-client">Password authentication client</a>.

     <!--  -->
     <br><dt><code>logout</code><dd>Remove stored password for authenticating server.  See
<a href="#Password-authentication-client">Password authentication client</a>.

     <!--  -->
     <br><dt><code>pserver</code><dd>Password authenticated server. 
See <a href="#Password-authentication-server">Password authentication server</a>.

     <!--  -->
     <br><dt><code>rannotate [</code><var>options</var><code>] [</code><var>modules</var><code>...]</code><dd>Show last revision where each line was modified.  See
<a href="#annotate">annotate</a>.

          <dl>
<dt><code>-D </code><var>date</var><dd>Annotate the most recent revision no later than
<var>date</var>.  See <a href="#Common-options">Common options</a>.

          <br><dt><code>-F</code><dd>Force annotation of binary files.  (Without this option,
binary files are skipped with a message.)

          <br><dt><code>-f</code><dd>Use head revision if tag/date not found.  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Annotate the revision specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var>
as it existed on <var>date</var>.  See <a href="#Common-options">Common options</a>. 
</dl>

     <!--  -->
     <br><dt><code>rdiff [</code><var>options</var><code>] </code><var>modules</var><code>...</code><dd>Show differences between releases.  See <a href="#rdiff">rdiff</a>.

          <dl>
<dt><code>-c</code><dd>Context diff output format (default).  See <a href="#rdiff-options">rdiff options</a>.

          <br><dt><code>-D </code><var>date</var><dd>Select revisions based on <var>date</var>.  See <a href="#Common-options">Common options</a>.

          <br><dt><code>-f</code><dd>Use head revision if tag/date not found.  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Select the revisions specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#diff-options">diff options</a> and <a href="#Common-options">Common options</a>.

          <br><dt><code>-s</code><dd>Short patch - one liner per file.  See <a href="#rdiff-options">rdiff options</a>.

          <br><dt><code>-t</code><dd>Top two diffs - last change made to the file.  See
<a href="#diff-options">diff options</a>.

          <br><dt><code>-u</code><dd>Unidiff output format.  See <a href="#rdiff-options">rdiff options</a>.

          <br><dt><code>-V </code><var>vers</var><dd>Use RCS Version <var>vers</var> for keyword expansion (obsolete).  See
<a href="#rdiff-options">rdiff options</a>. 
</dl>

     <!--  -->
     <br><dt><code>release [</code><var>options</var><code>] </code><var>directory</var><dd>Indicate that a directory is no longer in use.  See
<a href="#release">release</a>.

          <dl>
<dt><code>-d</code><dd>Delete the given directory.  See <a href="#release-options">release options</a>. 
</dl>

     <!--  -->
     <br><dt><code>remove [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Remove an entry from the repository.  See <a href="#Removing-files">Removing files</a>.

          <dl>
<dt><code>-f</code><dd>Delete the file before removing it.  See <a href="#Removing-files">Removing files</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>. 
</dl>

     <!--  -->
     <br><dt><code>rlog [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Print out history information for modules.  See <a href="#log">log</a>.

          <dl>
<dt><code>-b</code><dd>Only list revisions on the default branch.  See <a href="#log-options">log options</a>.

          <br><dt><code>-d </code><var>dates</var><dd>Specify dates (<var>d1</var>&lt;<var>d2</var> for range, <var>d</var> for
latest before).  See <a href="#log-options">log options</a>.

          <br><dt><code>-h</code><dd>Only print header.  See <a href="#log-options">log options</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-N</code><dd>Do not list tags.  See <a href="#log-options">log options</a>.

          <br><dt><code>-R</code><dd>Only print name of RCS file.  See <a href="#log-options">log options</a>.

          <br><dt><code>-r</code><var>revs</var><dd>Only list revisions <var>revs</var>.  See <a href="#log-options">log options</a>.

          <br><dt><code>-s </code><var>states</var><dd>Only list revisions with specified states.  See <a href="#log-options">log options</a>.

          <br><dt><code>-t</code><dd>Only print header and descriptive text.  See <a href="#log-options">log options</a>.

          <br><dt><code>-w</code><var>logins</var><dd>Only list revisions checked in by specified logins.  See <a href="#log-options">log options</a>. 
</dl>

     <!--  -->
     <br><dt><code>rtag [</code><var>options</var><code>] </code><var>tag</var> <var>modules</var><code>...</code><dd>Add a symbolic tag to a module. 
See <a href="#Revisions">Revisions</a> and <a href="#Branching-and-merging">Branching and merging</a>.

          <dl>
<dt><code>-a</code><dd>Clear tag from removed files that would not otherwise
be tagged.  See <a href="#Tagging-add_002fremove">Tagging add/remove</a>.

          <br><dt><code>-b</code><dd>Create a branch named <var>tag</var>.  See <a href="#Branching-and-merging">Branching and merging</a>.

          <br><dt><code>-B</code><dd>Used in conjunction with -F or -d, enables movement and deletion of
branch tags.  Use with extreme caution.

          <br><dt><code>-D </code><var>date</var><dd>Tag revisions as of <var>date</var>.  See <a href="#Tagging-by-date_002ftag">Tagging by date/tag</a>.

          <br><dt><code>-d</code><dd>Delete <var>tag</var>.  See <a href="#Modifying-tags">Modifying tags</a>.

          <br><dt><code>-F</code><dd>Move <var>tag</var> if it already exists.  See <a href="#Modifying-tags">Modifying tags</a>.

          <br><dt><code>-f</code><dd>Force a head revision match if tag/date not found. 
See <a href="#Tagging-by-date_002ftag">Tagging by date/tag</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-n</code><dd>No execution of tag program.  See <a href="#Common-options">Common options</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Tag the revision already tagged with <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Tagging-by-date_002ftag">Tagging by date/tag</a> and <a href="#Common-options">Common options</a>. 
</dl>

     <!--  -->
     <br><dt><code>server</code><dd>Rsh server.  See <a href="#Connecting-via-rsh">Connecting via rsh</a>.

     <!--  -->
     <br><dt><code>status [</code><var>options</var><code>] </code><var>files</var><code>...</code><dd>Display status information in a working directory.  See
<a href="#File-status">File status</a>.

          <dl>
<dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-v</code><dd>Include tag information for file.  See <a href="#Tags">Tags</a>. 
</dl>

     <!--  -->
     <br><dt><code>tag [</code><var>options</var><code>] </code><var>tag</var><code> [</code><var>files</var><code>...]</code><dd>Add a symbolic tag to checked out version of files. 
See <a href="#Revisions">Revisions</a> and <a href="#Branching-and-merging">Branching and merging</a>.

          <dl>
<dt><code>-b</code><dd>Create a branch named <var>tag</var>.  See <a href="#Branching-and-merging">Branching and merging</a>.

          <br><dt><code>-c</code><dd>Check that working files are unmodified.  See
<a href="#Tagging-the-working-directory">Tagging the working directory</a>.

          <br><dt><code>-D </code><var>date</var><dd>Tag revisions as of <var>date</var>.  See <a href="#Tagging-by-date_002ftag">Tagging by date/tag</a>.

          <br><dt><code>-d</code><dd>Delete <var>tag</var>.  See <a href="#Modifying-tags">Modifying tags</a>.

          <br><dt><code>-F</code><dd>Move <var>tag</var> if it already exists.  See <a href="#Modifying-tags">Modifying tags</a>.

          <br><dt><code>-f</code><dd>Force a head revision match if tag/date not found. 
See <a href="#Tagging-by-date_002ftag">Tagging by date/tag</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Tag the revision already tagged with <var>tag</var>, or when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Tagging-by-date_002ftag">Tagging by date/tag</a> and <a href="#Common-options">Common options</a>. 
</dl>

     <!--  -->
     <br><dt><code>unedit [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Undo an edit command.  See <a href="#Editing-files">Editing files</a>.

          <dl>
<dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>. 
</dl>

     <!--  -->
     <br><dt><code>update [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>Bring work tree in sync with repository.  See
<a href="#update">update</a>.

          <dl>
<dt><code>-A</code><dd>Reset any sticky tags/date/options.  See <a href="#Sticky-tags">Sticky tags</a> and <a href="#Keyword-substitution">Keyword substitution</a>.

          <br><dt><code>-C</code><dd>Overwrite locally modified files with clean copies from
the repository (the modified file is saved in
<samp><span class="file">.#</span><var>file</var><span class="file">.</span><var>revision</var></samp>, however).

          <br><dt><code>-D </code><var>date</var><dd>Check out revisions as of <var>date</var> (is sticky).  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-d</code><dd>Create directories.  See <a href="#update-options">update options</a>.

          <br><dt><code>-f</code><dd>Use head revision if tag/date not found.  See
<a href="#Common-options">Common options</a>.

          <br><dt><code>-I </code><var>ign</var><dd>More files to ignore (! to reset).  See
<a href="#import-options">import options</a>.

          <!-- Probably want to use rev1/rev2 style like for diff -->
          <!-- r.  Here and in on-line help. -->
          <br><dt><code>-j </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Merge in changes from revisions specified by <var>tag</var> or, when <var>date</var> is
specified and <var>tag</var> is a branch tag, the version from the branch <var>tag</var>
as it existed on <var>date</var>.  See <a href="#update-options">update options</a>.

          <br><dt><code>-k </code><var>kflag</var><dd>Use <var>kflag</var> keyword expansion.  See
<a href="#Substitution-modes">Substitution modes</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-P</code><dd>Prune empty directories.  See <a href="#Moving-directories">Moving directories</a>.

          <br><dt><code>-p</code><dd>Check out files to standard output (avoids
stickiness).  See <a href="#update-options">update options</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-r </code><var>tag</var><code>[:</code><var>date</var><code>]</code><dd>Checkout the revisions specified by <var>tag</var> or, when <var>date</var> is specified
and <var>tag</var> is a branch tag, the version from the branch <var>tag</var> as it
existed on <var>date</var>.  See <a href="#Common-options">Common options</a>.

          <br><dt><code>-W </code><var>spec</var><dd>More wrappers.  See <a href="#import-options">import options</a>. 
</dl>

     <!--  -->
     <br><dt><code>version</code><dd><a name="index-version-_0028subcommand_0029-590"></a>
Display the version of <span class="sc">cvs</span> being used.  If the repository
is remote, display both the client and server versions.

     <!--  -->
     <br><dt><code>watch [on|off|add|remove] [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>
on/off: turn on/off read-only checkouts of files.  See
<a href="#Setting-a-watch">Setting a watch</a>.

     <p>add/remove: add or remove notification on actions.  See
<a href="#Getting-Notified">Getting Notified</a>.

          <dl>
<dt><code>-a </code><var>actions</var><dd>Specify actions for temporary watch, where
<var>actions</var> is <code>edit</code>, <code>unedit</code>,
<code>commit</code>, <code>all</code>, or <code>none</code>.  See
<a href="#Editing-files">Editing files</a>.

          <br><dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>. 
</dl>

     <!--  -->
     <br><dt><code>watchers [</code><var>options</var><code>] [</code><var>files</var><code>...]</code><dd>See who is watching a file.  See <a href="#Watch-information">Watch information</a>.

          <dl>
<dt><code>-l</code><dd>Local; run only in current working directory.  See <a href="#Recursive-behavior">Recursive behavior</a>.

          <br><dt><code>-R</code><dd>Operate recursively (default).  See <a href="#Recursive-behavior">Recursive behavior</a>. 
</dl>

   </dl>

<!--  -->
<div class="node">
<a name="Administrative-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Environment-variables">Environment variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-CVS">Invoking CVS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix C Reference manual for Administrative files</h2>

<p><a name="index-Administrative-files-_0028reference_0029-591"></a><a name="index-Files_002c-reference-manual-592"></a><a name="index-Reference-manual-_0028files_0029-593"></a><a name="index-CVSROOT-_0028file_0029-594"></a>
Inside the repository, in the directory
<samp><span class="file">$CVSROOT/CVSROOT</span></samp>, there are a number of
supportive files for <span class="sc">cvs</span>.  You can use <span class="sc">cvs</span> in a limited
fashion without any of them, but if they are set up
properly they can help make life easier.  For a
discussion of how to edit them, see <a href="#Intro-administrative-files">Intro administrative files</a>.

   <p>The most important of these files is the <samp><span class="file">modules</span></samp>
file, which defines the modules inside the repository.

<ul class="menu">
<li><a accesskey="1" href="#modules">modules</a>:                      Defining modules
<li><a accesskey="2" href="#Wrappers">Wrappers</a>:                     Specify binary-ness based on file name
<li><a accesskey="3" href="#Trigger-Scripts">Trigger Scripts</a>: 		Launch scripts in response to server events
<li><a accesskey="4" href="#rcsinfo">rcsinfo</a>:                      Templates for the log messages
<li><a accesskey="5" href="#cvsignore">cvsignore</a>:                    Ignoring files via cvsignore
<li><a accesskey="6" href="#checkoutlist">checkoutlist</a>:                 Adding your own administrative files
<li><a accesskey="7" href="#history-file">history file</a>:                 History information
<li><a accesskey="8" href="#Variables">Variables</a>:                    Various variables are expanded
<li><a accesskey="9" href="#config">config</a>:                       Miscellaneous CVS configuration
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="modules"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Wrappers">Wrappers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.1 The modules file</h3>

<p><a name="index-Modules-_0028admin-file_0029-595"></a><a name="index-Defining-modules-_0028reference-manual_0029-596"></a>
The <samp><span class="file">modules</span></samp> file records your definitions of
names for collections of source code.  <span class="sc">cvs</span> will
use these definitions if you use <span class="sc">cvs</span> to update the
modules file (use normal commands like <code>add</code>,
<code>commit</code>, etc).

   <p>The <samp><span class="file">modules</span></samp> file may contain blank lines and
comments (lines beginning with &lsquo;<samp><span class="samp">#</span></samp>&rsquo;) as well as
module definitions.  Long lines can be continued on the
next line by specifying a backslash (&lsquo;<samp><span class="samp">\</span></samp>&rsquo;) as the
last character on the line.

   <p>There are three basic types of modules: alias modules,
regular modules, and ampersand modules.  The difference
between them is the way that they map files in the
repository to files in the working directory.  In all
of the following examples, the top-level repository
contains a directory called <samp><span class="file">first-dir</span></samp>, which
contains two files, <samp><span class="file">file1</span></samp> and <samp><span class="file">file2</span></samp>, and a
directory <samp><span class="file">sdir</span></samp>.  <samp><span class="file">first-dir/sdir</span></samp> contains
a file <samp><span class="file">sfile</span></samp>.

<!-- FIXME: should test all the examples in this section. -->
<ul class="menu">
<li><a accesskey="1" href="#Alias-modules">Alias modules</a>:              The simplest kind of module
<li><a accesskey="2" href="#Regular-modules">Regular modules</a>
<li><a accesskey="3" href="#Ampersand-modules">Ampersand modules</a>
<li><a accesskey="4" href="#Excluding-directories">Excluding directories</a>:      Excluding directories from a module
<li><a accesskey="5" href="#Module-options">Module options</a>:             Regular and ampersand modules can take options
<li><a accesskey="6" href="#Module-program-options">Module program options</a>:     How the modules ``program options'' programs
                              are run. 
</ul>

<div class="node">
<a name="Alias-modules"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Regular-modules">Regular modules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#modules">modules</a>

</div>

<h4 class="appendixsubsec">C.1.1 Alias modules</h4>

<p><a name="index-Alias-modules-597"></a><a name="index-g_t_002da_002c-in-modules-file-598"></a>
Alias modules are the simplest kind of module:

     <dl>
<dt><var>mname</var><code> -a </code><var>aliases</var><code>...</code><dd>This represents the simplest way of defining a module
<var>mname</var>.  The &lsquo;<samp><span class="samp">-a</span></samp>&rsquo; flags the definition as a
simple alias: <span class="sc">cvs</span> will treat any use of <var>mname</var> (as
a command argument) as if the list of names
<var>aliases</var> had been specified instead. 
<var>aliases</var> may contain either other module names or
paths.  When you use paths in aliases, <code>checkout</code>
creates all intermediate directories in the working
directory, just as if the path had been specified
explicitly in the <span class="sc">cvs</span> arguments. 
</dl>

   <p>For example, if the modules file contains:

<pre class="example">     amodule -a first-dir
</pre>
   <p class="noindent">then the following two commands are equivalent:

<pre class="example">     $ cvs co amodule
     $ cvs co first-dir
</pre>
   <p class="noindent">and they each would provide output such as:

<pre class="example">     cvs checkout: Updating first-dir
     U first-dir/file1
     U first-dir/file2
     cvs checkout: Updating first-dir/sdir
     U first-dir/sdir/sfile
</pre>
   <div class="node">
<a name="Regular-modules"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Ampersand-modules">Ampersand modules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Alias-modules">Alias modules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#modules">modules</a>

</div>

<h4 class="appendixsubsec">C.1.2 Regular modules</h4>

<p><a name="index-Regular-modules-599"></a>
     <dl>
<dt><var>mname</var><code> [ options ] </code><var>dir</var><code> [ </code><var>files</var><code>... ]</code><dd>In the simplest case, this form of module definition
reduces to &lsquo;<samp><var>mname</var> <var>dir</var></samp>&rsquo;.  This defines
all the files in directory <var>dir</var> as module <var>mname</var>. 
<var>dir</var> is a relative path (from <code>$CVSROOT</code>) to a
directory of source in the source repository.  In this
case, on checkout, a single directory called
<var>mname</var> is created as a working directory; no
intermediate directory levels are used by default, even
if <var>dir</var> was a path involving several directory
levels. 
</dl>

   <p>For example, if a module is defined by:

<pre class="example">     regmodule first-dir
</pre>
   <p class="noindent">then regmodule will contain the files from first-dir:

<pre class="example">     $ cvs co regmodule
     cvs checkout: Updating regmodule
     U regmodule/file1
     U regmodule/file2
     cvs checkout: Updating regmodule/sdir
     U regmodule/sdir/sfile
     $
</pre>
   <p>By explicitly specifying files in the module definition
after <var>dir</var>, you can select particular files from
directory <var>dir</var>.  Here is
an example:

<pre class="example">     regfiles first-dir/sdir sfile
</pre>
   <p class="noindent">With this definition, getting the regfiles module
will create a single working directory
<samp><span class="file">regfiles</span></samp> containing the file listed, which
comes from a directory deeper
in the <span class="sc">cvs</span> source repository:

<pre class="example">     $ cvs co regfiles
     U regfiles/sfile
     $
</pre>
   <div class="node">
<a name="Ampersand-modules"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Excluding-directories">Excluding directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Regular-modules">Regular modules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#modules">modules</a>

</div>

<h4 class="appendixsubsec">C.1.3 Ampersand modules</h4>

<p><a name="index-Ampersand-modules-600"></a><a name="index-g_t_0026_002c-in-modules-file-601"></a>
A module definition can refer to other modules by
including &lsquo;<samp><span class="samp">&amp;</span><var>module</var></samp>&rsquo; in its definition.
<pre class="example">     <var>mname</var> [ options ] <var>&amp;module</var>...
</pre>
   <p>Then getting the module creates a subdirectory for each such
module, in the directory containing the module.  For
example, if modules contains

<pre class="example">     ampermod &amp;first-dir
</pre>
   <p class="noindent">then a checkout will create an <code>ampermod</code> directory
which contains a directory called <code>first-dir</code>,
which in turns contains all the directories and files
which live there.  For example, the command

<pre class="example">     $ cvs co ampermod
</pre>
   <p class="noindent">will create the following files:

<pre class="example">     ampermod/first-dir/file1
     ampermod/first-dir/file2
     ampermod/first-dir/sdir/sfile
</pre>
   <p>There is one quirk/bug: the messages that <span class="sc">cvs</span>
prints omit the <samp><span class="file">ampermod</span></samp>, and thus do not
correctly display the location to which it is checking
out the files:

<pre class="example">     $ cvs co ampermod
     cvs checkout: Updating first-dir
     U first-dir/file1
     U first-dir/file2
     cvs checkout: Updating first-dir/sdir
     U first-dir/sdir/sfile
     $
</pre>
   <p>Do not rely on this buggy behavior; it may get fixed in
a future release of <span class="sc">cvs</span>.

<!-- FIXCVS: What happens if regular and & modules are -->
<!-- combined, as in "ampermodule first-dir &second-dir"? -->
<!-- When I tried it, it seemed to just ignore the -->
<!-- "first-dir".  I think perhaps it should be an error -->
<!-- (but this needs further investigation). -->
<!-- In addition to discussing what each one does, we -->
<!-- should put in a few words about why you would use one or -->
<!-- the other in various situations. -->
<div class="node">
<a name="Excluding-directories"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Module-options">Module options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Ampersand-modules">Ampersand modules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#modules">modules</a>

</div>

<h4 class="appendixsubsec">C.1.4 Excluding directories</h4>

<p><a name="index-Excluding-directories_002c-in-modules-file-602"></a><a name="index-g_t_0021_002c-in-modules-file-603"></a>
An alias module may exclude particular directories from
other modules by using an exclamation mark (&lsquo;<samp><span class="samp">!</span></samp>&rsquo;)
before the name of each directory to be excluded.

   <p>For example, if the modules file contains:

<pre class="example">     exmodule -a !first-dir/sdir first-dir
</pre>
   <p class="noindent">then checking out the module &lsquo;<samp><span class="samp">exmodule</span></samp>&rsquo; will check
out everything in &lsquo;<samp><span class="samp">first-dir</span></samp>&rsquo; except any files in
the subdirectory &lsquo;<samp><span class="samp">first-dir/sdir</span></samp>&rsquo;. 
<!-- Note that the "!first-dir/sdir" sometimes must be listed -->
<!-- before "first-dir".  That seems like a probable bug, in which -->
<!-- case perhaps it should be fixed (to allow either -->
<!-- order) rather than documented.  See modules4 in testsuite. -->

<div class="node">
<a name="Module-options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Module-program-options">Module program options</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Excluding-directories">Excluding directories</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#modules">modules</a>

</div>

<h4 class="appendixsubsec">C.1.5 Module options</h4>

<p><a name="index-Options_002c-in-modules-file-604"></a>
Either regular modules or ampersand modules can contain
options, which supply additional information concerning
the module.

     
<a name="index-g_t_002dd_002c-in-modules-file-605"></a>
<dl><dt><code>-d </code><var>name</var><dd>Name the working directory something other than the
module name. 
<!-- FIXME: Needs a bunch of examples, analogous to the -->
<!-- examples for alias, regular, and ampersand modules -->
<!-- which show where the files go without -d. -->

     <p><a name="index-Export-program-606"></a><a name="index-g_t_002de_002c-in-modules-file-607"></a><br><dt><code>-e </code><var>prog</var><dd>Specify a program <var>prog</var> to run whenever files in a
module are exported.  <var>prog</var> runs with a single
argument, the module name. 
<!-- FIXME: Is it run on server? client? -->

     <p><a name="index-Checkout-program-608"></a><a name="index-g_t_002do_002c-in-modules-file-609"></a><br><dt><code>-o </code><var>prog</var><dd>Specify a program <var>prog</var> to run whenever files in a
module are checked out.  <var>prog</var> runs with a single
argument, the module name.  See <a href="#Module-program-options">Module program options</a> for
information on how <var>prog</var> is called. 
<!-- FIXME: Is it run on server? client? -->

     <p><a name="index-Status-of-a-module-610"></a><a name="index-Module-status-611"></a><a name="index-g_t_002ds_002c-in-modules-file-612"></a><br><dt><code>-s </code><var>status</var><dd>Assign a status to the module.  When the module file is
printed with &lsquo;<samp><span class="samp">cvs checkout -s</span></samp>&rsquo; the modules are
sorted according to primarily module status, and
secondarily according to the module name.  This option
has no other meaning.  You can use this option for
several things besides status: for instance, list the
person that is responsible for this module.

     <p><a name="index-Tag-program-613"></a><a name="index-g_t_002dt_002c-in-modules-file-614"></a><br><dt><code>-t </code><var>prog</var><dd>Specify a program <var>prog</var> to run whenever files in a
module are tagged with <code>rtag</code>.  <var>prog</var> runs
with two arguments: the module name and the symbolic
tag specified to <code>rtag</code>.  It is not run
when <code>tag</code> is executed.  Generally you will find
that the <samp><span class="file">taginfo</span></samp> file is a better solution (see <a href="#taginfo">taginfo</a>). 
<!-- FIXME: Is it run on server? client? -->
<!-- Problems with -t include: -->
<!-- * It is run after the tag not before -->
<!-- * It doesn't get passed all the information that -->
<!-- taginfo does ("mov", &c). -->
<!-- * It only is run for rtag, not tag. -->
</dl>

   <p>You should also see see <a href="#Module-program-options">Module program options</a> about how the
&ldquo;program options&rdquo; programs are run.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Module-program-options"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Module-options">Module options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#modules">modules</a>

</div>

<h4 class="appendixsubsec">C.1.6 How the modules file &ldquo;program options&rdquo; programs are run</h4>

<p><a name="index-Modules-file-program-options-615"></a><a name="index-g_t_002dt_002c-in-modules-file-616"></a><a name="index-g_t_002do_002c-in-modules-file-617"></a><a name="index-g_t_002de_002c-in-modules-file-618"></a>
For checkout, rtag, and export, the program is server-based, and as such the
following applies:-

   <p>If using remote access methods (pserver, ext, etc.),
<span class="sc">cvs</span> will execute this program on the server from a temporary
directory. The path is searched for this program.

   <p>If using &ldquo;local access&rdquo; (on a local or remote NFS file system, i.e. 
repository set just to a path),
the program will be executed from the newly checked-out tree, if
found there, or alternatively searched for in the path if not.

   <p>The programs are all run after the operation has effectively
completed.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Wrappers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Trigger-Scripts">Trigger Scripts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#modules">modules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.2 The cvswrappers file</h3>

<p><a name="index-cvswrappers-_0028admin-file_0029-619"></a><a name="index-CVSWRAPPERS_002c-environment-variable-620"></a><a name="index-Wrappers-621"></a>
<!-- FIXME: need some better way of separating this out -->
<!-- by functionality.  -m is -->
<!-- one feature, and -k is a another.  And this discussion -->
<!-- should be better motivated (e.g. start with the -->
<!-- problems, then explain how the feature solves it). -->

   <p>Wrappers refers to a <span class="sc">cvs</span> feature which lets you
control certain settings based on the name of the file
which is being operated on.  The settings are &lsquo;<samp><span class="samp">-k</span></samp>&rsquo;
for binary files, and &lsquo;<samp><span class="samp">-m</span></samp>&rsquo; for nonmergeable text
files.

   <p>The &lsquo;<samp><span class="samp">-m</span></samp>&rsquo; option
specifies the merge methodology that should be used when
a non-binary file is updated.  <code>MERGE</code> means the usual
<span class="sc">cvs</span> behavior: try to merge the files.  <code>COPY</code>
means that <code>cvs update</code> will refuse to merge
files, as it also does for files specified as binary
with &lsquo;<samp><span class="samp">-kb</span></samp>&rsquo; (but if the file is specified as
binary, there is no need to specify &lsquo;<samp><span class="samp">-m 'COPY'</span></samp>&rsquo;). 
<span class="sc">cvs</span> will provide the user with the
two versions of the files, and require the user using
mechanisms outside <span class="sc">cvs</span>, to insert any necessary
changes.

   <p><em>WARNING: do not use </em><code>COPY</code><em> with
</em><span class="sc">cvs</span><em> 1.9 or earlier - such versions of </em><span class="sc">cvs</span><em> will
copy one version of your file over the other, wiping
out the previous contents.</em>
<!-- Ordinarily we don't document the behavior of old -->
<!-- versions.  But this one is so dangerous, I think we -->
<!-- must.  I almost renamed it to -m 'NOMERGE' so we -->
<!-- could say "never use -m 'COPY'". -->
The &lsquo;<samp><span class="samp">-m</span></samp>&rsquo; wrapper option only affects behavior when
merging is done on update; it does not affect how files
are stored.  See <a href="#Binary-files">Binary files</a>, for more on
binary files.

   <p>The basic format of the file <samp><span class="file">cvswrappers</span></samp> is:

<!-- FIXME: @example is all wrong for this.  Use @deffn or -->
<!-- something more sensible. -->
<pre class="example">     wildcard     [option value][option value]...
     
     where option is one of
     -m           update methodology      value: MERGE or COPY
     -k           keyword expansion       value: expansion mode
     
     and value is a single-quote delimited value.
</pre>
   <!-- FIXME: We don't document -W or point to where it is -->
<!-- documented.  Or .cvswrappers. -->
   <p>For example, the following command imports a
directory, treating files whose name ends in
&lsquo;<samp><span class="samp">.exe</span></samp>&rsquo; as binary:

<pre class="example">     cvs import -I ! -W "*.exe -k 'b'" first-dir vendortag reltag
</pre>
   <!-- Another good example, would be storing files -->
<!-- (e.g. binary files) compressed in the repository. -->
<!-- :::::::::::::::::: -->
<!-- cvswrappers -->
<!-- :::::::::::::::::: -->
<!-- *.t12 -m 'COPY' -->
<!-- *.t[0-9][0-9] -f 'gunzipcp %s' -t 'gzipcp %s %s' -m 'COPY' -->
<!-- :::::::::::::::::: -->
<!-- gunzipcp -->
<!-- :::::::::::::::::: -->
<!-- : -->
<!-- [ -f $1 ] || exit 1 -->
<!-- zcat $1 > /tmp/.#$1.$$ -->
<!-- mv /tmp/.#$1.$$ $1 -->
<!-- :::::::::::::::::: -->
<!-- gzipcp -->
<!-- :::::::::::::::::: -->
<!-- : -->
<!-- DIRNAME=`echo $1 | sed -e "s|/.*/||g"` -->
<!-- if [ ! -d $DIRNAME ] ; then -->
<!-- DIRNAME=`echo $1 | sed -e "s|.*/||g"` -->
<!-- fi -->
<!-- gzip -c  $DIRNAME  > $2 -->
<!-- One catch-"cvs diff" will not invoke the wrappers -->
<!-- (probably a CVS bug, although I haven't thought it out). -->
<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Trigger-Scripts"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#rcsinfo">rcsinfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Wrappers">Wrappers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.3 The Trigger Scripts</h3>

<p><a name="index-info-files-622"></a><a name="index-trigger-scripts-623"></a><a name="index-script-hooks-624"></a>
<!-- FIXME -->
<!-- Somewhere there needs to be a more "how-to" guide to writing these. -->
<!-- One particular issue that people sometimes are worried about is performance, -->
<!-- and the impact of writing in perl or sh or ____.  Performance comparisons -->
<!-- should probably remain outside the scope of this document, but at least -->
<!-- _that_ much could be referenced, perhaps with links to other sources. -->

   <p>Several of the administrative files support triggers, or the launching external
scripts or programs at specific times before or after particular events, during
the execution of <span class="sc">cvs</span> commands.  These hooks can be used to prevent certain
actions, log them, and/or maintain anything else you deem practical.

   <p>All the trigger scripts are launched in a copy of the user sandbox being
committed, on the server, in client-server mode.  In local mode, the scripts
are actually launched directly from the user sandbox directory being committed. 
For most intents and purposes, the same scripts can be run in both locations
without alteration.

<ul class="menu">
<li><a accesskey="1" href="#syntax">syntax</a>:                       The common syntax
<li><a accesskey="2" href="#Trigger-Script-Security">Trigger Script Security</a>: 	Trigger script security

<li><a accesskey="3" href="#commit-files">commit files</a>:                 The commit support files (commitinfo,
                                verifymsg, loginfo)
<li><a accesskey="4" href="#commitinfo">  commitinfo</a>:                 Pre-commit checking
<li><a accesskey="5" href="#verifymsg">  verifymsg</a>:                  How are log messages evaluated? 
<li><a accesskey="6" href="#loginfo">  loginfo</a>:                    Where should log messages be sent?

<li><a accesskey="7" href="#postadmin">postadmin</a>: 			Logging admin commands
<li><a accesskey="8" href="#taginfo">taginfo</a>:                      Verifying/Logging tags
<li><a accesskey="9" href="#posttag">posttag</a>:                      Logging tags
<li><a href="#postwatch">postwatch</a>: 			Logging watch commands

<li><a href="#preproxy">preproxy</a>: 			Launch a script on a secondary server prior
				to becoming a write proxy
<li><a href="#postproxy">postproxy</a>: 			Launch a script on a secondary server after
				completing proxy operations
</ul>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="syntax"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Trigger-Script-Security">Trigger Script Security</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.1 The common syntax</h4>

<p><a name="index-info-files_002c-common-syntax-625"></a><a name="index-script-hooks_002c-common-syntax-626"></a><a name="index-trigger-script-hooks_002c-common-syntax-627"></a><a name="index-syntax-of-trigger-script-hooks-628"></a>
<!-- FIXME: having this so totally separate from the -->
<!-- Variables node is rather bogus. -->

   <p>The administrative files such as <samp><span class="file">commitinfo</span></samp>,
<samp><span class="file">loginfo</span></samp>, <samp><span class="file">rcsinfo</span></samp>, <samp><span class="file">verifymsg</span></samp>, etc.,
all have a common format.  The purpose of the files are
described later on.  The common syntax is described
here.

   <p><a name="index-Regular-expression-syntax-629"></a>Each line contains the following:

     
<a name="index-g_t_0040samp_007bALL_007d-keyword_002c-in-lieu-of-regular-expressions-in-script-hooks-630"></a>
<a name="index-g_t_0040samp_007bDEFAULT_007d-keyword_002c-in-lieu-of-regular-expressions-in-script-hooks-631"></a>
<ul><li>A regular expression or the literal string &lsquo;<samp><span class="samp">DEFAULT</span></samp>&rsquo;.  Some script hooks
also support the literal string &lsquo;<samp><span class="samp">ALL</span></samp>&rsquo;.  Other than the &lsquo;<samp><span class="samp">ALL</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">DEFAULT</span></samp>&rsquo; keywords, this is a basic regular expression in the syntax used
by GNU emacs.  See the descriptions of the individual script hooks for
information on whether the &lsquo;<samp><span class="samp">ALL</span></samp>&rsquo; keyword is supported
(see <a href="#Trigger-Scripts">Trigger Scripts</a>). 
<!-- FIXME: What we probably should be saying is "POSIX Basic -->
<!-- Regular Expression with the following extensions (`\(' -->
<!-- `\|' '+' etc)" -->
<!-- rather than define it with reference to emacs. -->
<!-- The reference to emacs is not strictly speaking -->
<!-- true, as we don't support \=, \s, or \S.  Also it isn't -->
<!-- clear we should document and/or promise to continue to -->
<!-- support all the obscure emacs extensions like \<. -->
<!-- Also need to better cite (or include) full -->
<!-- documentation for the syntax. -->
<!-- Also see comment in configure.in about what happens to the -->
<!-- syntax if we pick up a system-supplied regexp matcher. -->

     <li>A whitespace separator&mdash;one or more spaces and/or tabs.

     <li>A file name or command-line template. 
</ul>

<p class="noindent">Blank lines are ignored.  Lines that start with the
character &lsquo;<samp><span class="samp">#</span></samp>&rsquo; are treated as comments.  Long lines
unfortunately can <em>not</em> be broken in two parts in
any way.

   <p>The first regular expression that matches the current
directory name in the repository or the first line containing &lsquo;<samp><span class="samp">DEFAULT</span></samp>&rsquo;
in lieu of a regular expression is used and all lines containing &lsquo;<samp><span class="samp">ALL</span></samp>&rsquo; is
used for the hooks which support the &lsquo;<samp><span class="samp">ALL</span></samp>&rsquo; keyword.  The rest of the line
is used as a file name or command-line template as appropriate.  See the
descriptions of the individual script hooks for information on whether the
&lsquo;<samp><span class="samp">ALL</span></samp>&rsquo; keyword is supported (see <a href="#Trigger-Scripts">Trigger Scripts</a>).

   <p><a name="index-format-strings-632"></a><a name="index-format-strings_002c-common-syntax-633"></a><a name="index-info-files_002c-common-syntax_002c-format-strings-634"></a><a name="index-Common-syntax-of-info-files_002c-format-strings-635"></a><em>Note:  The following information on format strings is valid
as long as the line </em><code>UseNewInfoFmtStrings=yes</code><em> appears in
your repository's config file (see <a href="#config">config</a>).  Otherwise,
default format strings may be appended to the command line and
the &lsquo;</em><samp><span class="samp">loginfo</span></samp><em>&rsquo; file, especially, can exhibit slightly
different behavior.  For more information,
See <a href="#Updating-Commit-Files">Updating Commit Files</a>.</em>

   <p>In the cases where the second segment of the matched line is a
command line template (e.g. <samp><span class="file">commitinfo</span></samp>, <samp><span class="file">loginfo</span></samp>,
&amp; <samp><span class="file">verifymsg</span></samp>), the command line template may contain format
strings which will be replaced with specific values before the
script is run. 
<!-- FIXCVS then FIXME - it really would make sense to allow %r & maybe even %p -->
<!-- to be used in rcsinfo to construct a path, but I haven't -->
<!-- coded this yet. -->

   <p>Format strings can represent a single variable or one or more
attributes of a list variable.  An example of a list variable
would be the list available to scripts hung on the loginfo hooks
- the list of files which were just committed.  In the case of
loginfo, three attributes are available for each list item: file
name, precommit version, and postcommit version.

   <p>Format strings consist of a &lsquo;<samp><span class="samp">%</span></samp>&rsquo; character followed by an optional
&lsquo;<samp><span class="samp">{</span></samp>&rsquo; (required in the multiple list attribute case), a
single format character representing a variable or a single attribute of
list elements or multiple format characters representing attributes of
list elements, and a closing &lsquo;<samp><span class="samp">}</span></samp>&rsquo; when the open bracket was present.

   <p><em>Flat format strings</em>, or single format characters which get replaced
with a single value, will generate a single argument
to the called script, regardless of whether the replacement variable contains
white space or other special characters.

   <p><em>List attributes</em> will generate an argument for each attribute
requested for each list item.  For example, &lsquo;<samp><span class="samp">%{sVv}</span></samp>&rsquo;
in a <samp><span class="file">loginfo</span></samp> command template will generate three
arguments (file name, precommit version, postcommit version,
...) for each file committed.  As in the flat format string
case, each attribute will be passed in as a single argument
regardless of whether it contains white space or other
special characters.

   <p>&lsquo;<samp><span class="samp">%%</span></samp>&rsquo; will be replaced with a literal &lsquo;<samp><span class="samp">%</span></samp>&rsquo;.

   <p>The format strings available to all script hooks are:

     <dl>
<dt><tt>c</tt><dd>The canonical name of the command being executed.  For instance, in the case of
a hook run from <code>cvs up</code>, <span class="sc">cvs</span> would replace &lsquo;<samp><span class="samp">%c</span></samp>&rsquo; with the string
&lsquo;<samp><span class="samp">update</span></samp>&rsquo; and, in the case of a hook run from <code>cvs ci</code>, <span class="sc">cvs</span> would
replace &lsquo;<samp><span class="samp">%c</span></samp>&rsquo; with the string &lsquo;<samp><span class="samp">commit</span></samp>&rsquo;. 
<br><dt><tt>n</tt><dd>The null, or empty, string. 
<br><dt><tt>p</tt><dd>The name of the directory being operated on within the repository. 
<br><dt><tt>r</tt><dd>The name of the repository (the path portion of <code>$CVSROOT</code>). 
<br><dt><tt>R</tt><dd>On a server, the name of the referrer, if any.  The referrer is the CVSROOT the
client reports it used to contact a server which then referred it to this
server.  Should usually be set on a primary server with a write proxy setup. 
</dl>

   <p>Other format strings are file specific.  See the docs on the
particular script hooks for more information
(see <a href="#Trigger-Scripts">Trigger Scripts</a>).

   <p>As an example, the following line in a <samp><span class="file">loginfo</span></samp> file would
match only the directory <samp><span class="file">module</span></samp> and any subdirectories of
<samp><span class="file">module</span></samp>:

<pre class="example">     ^module\(/\|$\) (echo; echo %p; echo %{sVv}; cat) &gt;&gt;$CVSROOT/CVSROOT/commitlog
</pre>
   <p>Using this same line and assuming a commit of new revisions
1.5.4.4 and 1.27.4.1 based on old revisions 1.5.4.3 and 1.27,
respectively, of file1 and file2 in module, something like the
following log message should be appended to commitlog:

<pre class="example">     
     module
     file1 1.5.4.3 1.5.4.4 file2 1.27 1.27.4.1
     Update of /cvsroot/module
     In directory localhost.localdomain:/home/jrandom/work/module
     
     Modified Files:
     	file1 file2
     Log Message:
     A log message.
</pre>
   <!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="Trigger-Script-Security"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#commit-files">commit files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#syntax">syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.2 Security and the Trigger Scripts</h4>

<p><a name="index-info-files_002c-security-636"></a><a name="index-script-hooks_002c-security-637"></a><a name="index-trigger-scripts_002c-security-638"></a>
Security is a huge subject, and implementing a secure system is a non-trivial
task.  This section will barely touch on all the issues involved, but it is
well to note that, as with any script you will be allowing an untrusted
user to run on your server, there are measures you can take to help prevent
your trigger scripts from being abused.

   <p>For instance, since the CVS trigger scripts all run in a copy of the user's
sandbox on the server, a naively coded Perl trigger script which attempts to
use a Perl module that is not installed on the system can be hijacked by any
user with commit access who is checking in a file with the correct name.  Other
scripting languages may be vulnerable to similar hacks.

   <p>One way to make a script more secure, at least with Perl, is to use scripts
which invoke the <code>-T</code>, or "taint-check" switch on their <code>#!</code> line. 
In the most basic terms, this causes Perl to avoid running code that may have
come from an external source.  Please run the <code>perldoc perlsec</code> command
for more on Perl security.  Again, other languages may implement other security
verification hooks which look more or less like Perl's "taint-check" mechanism.

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="commit-files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#commitinfo">commitinfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Trigger-Script-Security">Trigger Script Security</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.3 The commit support files</h4>

<p><a name="index-Commits_002c-administrative-support-files-639"></a><a name="index-commit-files_002c-see-Info-files-640"></a>
The &lsquo;<samp><span class="samp">-i</span></samp>&rsquo; flag in the <samp><span class="file">modules</span></samp> file can be
used to run a certain program whenever files are
committed (see <a href="#modules">modules</a>).  The files described in
this section provide other, more flexible, ways to run
programs whenever something is committed.

   <p>There are three kinds of programs that can be run on
commit.  They are specified in files in the repository,
as described below.  The following table summarizes the
file names and the purpose of the corresponding
programs.

     <dl>
<dt><samp><span class="file">commitinfo</span></samp><dd>The program is responsible for checking that the commit
is allowed.  If it exits with a non-zero exit status
the commit will be aborted.  See <a href="#commitinfo">commitinfo</a>.

     <br><dt><samp><span class="file">verifymsg</span></samp><dd>The specified program is used to evaluate the log message,
and possibly verify that it contains all required
fields.  This is most useful in combination with the
<samp><span class="file">rcsinfo</span></samp> file, which can hold a log message
template (see <a href="#rcsinfo">rcsinfo</a>).  See <a href="#verifymsg">verifymsg</a>.

     <br><dt><samp><span class="file">loginfo</span></samp><dd>The specified program is called when the commit is
complete.  It receives the log message and some
additional information and can store the log message in
a file, or mail it to appropriate persons, or maybe
post it to a local newsgroup, or<small class="dots">...</small>  Your
imagination is the limit!  See <a href="#loginfo">loginfo</a>. 
</dl>

<ul class="menu">
<li><a accesskey="1" href="#Updating-Commit-Files">Updating Commit Files</a>:        Updating legacy repositories to stop using
                                deprecated command line template formats
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="Updating-Commit-Files"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#commit-files">commit files</a>

</div>

<h5 class="appendixsubsubsec">C.3.3.1 Updating legacy repositories to stop using deprecated command line template formats</h5>

<p><a name="index-info-files_002c-common-syntax_002c-updating-legacy-repositories-641"></a><a name="index-Syntax-of-info-files_002c-updating-legacy-repositories-642"></a><a name="index-Common-syntax-of-info-files_002c-updating-legacy-repositories-643"></a>New repositories are created set to use the new format strings by default, so
if you are creating a new repository, you shouldn't have to worry about this
section.

   <p>If you are attempting to maintain a legacy repository which was
making use of the <samp><span class="file">commitinfo</span></samp>, <samp><span class="file">editinfo</span></samp>, <samp><span class="file">verifymsg</span></samp>,
<samp><span class="file">loginfo</span></samp>, and/or <samp><span class="file">taginfo</span></samp> script hooks, you should have no
immediate problems with using the current <span class="sc">cvs</span> executable, but your users
will probably start to see deprecation warnings.

   <p>The reason for this is that all of the script hooks have been updated to
use a new command line parser that extensibly supports multiple
<samp><span class="file">loginfo</span></samp> &amp; <samp><span class="file">notify</span></samp> style format strings (see <a href="#syntax">syntax</a>)
and this support is not completely compatible with the old style format
strings.

   <p>The quick upgrade method is to stick a &lsquo;<samp><span class="samp">1</span></samp>&rsquo; after each format string
in your old <samp><span class="file">loginfo</span></samp> file.  For example:

<pre class="example">     DEFAULT (echo ""; id; echo %{sVv}; date; cat) &gt;&gt; $CVSROOT/CVSROOT/commitlog
</pre>
   <p>would become:

<pre class="example">     DEFAULT (echo ""; id; echo %1{sVv}; date; cat) &gt;&gt; $CVSROOT/CVSROOT/commitlog
</pre>
   <p>If you were counting on the fact that only the first &lsquo;<samp><span class="samp">%</span></samp>&rsquo; in the line was
replaced as a format string, you may also have to double up any further
percent signs on the line.

   <p>If you did this all at once and checked it in, everything should still be
running properly.

   <p>Now add the following line to your config file (see <a href="#config">config</a>):
<pre class="example">     UseNewInfoFmtStrings=yes
</pre>
   <p>Everything should still be running properly, but your users will probably
start seeing new deprecation warnings.

   <p>Dealing with the deprecation warnings now generated by <samp><span class="file">commitinfo</span></samp>,
<samp><span class="file">editinfo</span></samp>, <samp><span class="file">verifymsg</span></samp>, and <samp><span class="file">taginfo</span></samp> should be easy.  Simply
specify what are currently implicit arguments explicitly.  This means appending
the following strings to each active command line template in each file:
     <dl>
<dt><code>commitinfo</code><dd>&lsquo;<samp><span class="samp"> %r/%p %s</span></samp>&rsquo;
<br><dt><code>editinfo</code><dd>&lsquo;<samp><span class="samp"> %l</span></samp>&rsquo;
<br><dt><code>taginfo</code><dd>&lsquo;<samp><span class="samp"> %t %o %p %{sv}</span></samp>&rsquo;
<br><dt><code>verifymsg</code><dd>&lsquo;<samp><span class="samp"> %l</span></samp>&rsquo;
</dl>

   <p>If you don't desire that any of the newly available information be passed to
the scripts hanging off of these hooks, no further modifications to these
files should be necessary to insure current and future compatibility with
<span class="sc">cvs</span>'s format strings.

   <p>Fixing <samp><span class="file">loginfo</span></samp> could be a little tougher.  The old style
<samp><span class="file">loginfo</span></samp> format strings caused a single space and comma separated
argument to be passed in in place of the format string.  This is what will
continue to be generated due to the deprecated &lsquo;<samp><span class="samp">1</span></samp>&rsquo; you inserted into
the format strings.

   <p>Since the new format separates each individual item and passes it into the
script as a separate argument (for a good reason - arguments containing commas
and/or white space are now parsable), to remove the deprecated &lsquo;<samp><span class="samp">1</span></samp>&rsquo; from
your <samp><span class="file">loginfo</span></samp> command line templates, you will most likely have to
rewrite any scripts called by the hook to handle the new argument format.

   <p>Also note that the way &lsquo;<samp><span class="samp">%</span></samp>&rsquo; followed by unrecognized characters and by
&lsquo;<samp><span class="samp">{}</span></samp>&rsquo; was treated in past versions of CVS is not strictly adhered to as
there were bugs in the old versions.  Specifically, &lsquo;<samp><span class="samp">%{}</span></samp>&rsquo; would eat the
next character and unrecognized strings resolved only to the empty string,
which was counter to what was stated in the documentation.  This version will
do what the documentation said it should have (if you were using only some
combination of &lsquo;<samp><span class="samp">%{sVv}</span></samp>&rsquo;, e.g. &lsquo;<samp><span class="samp">%{sVv}</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%{sV}</span></samp>&rsquo;, or
&lsquo;<samp><span class="samp">%v</span></samp>&rsquo;, you should have no troubles).

   <p>On the bright side, you should have plenty of time to do this before all
support for the old format strings is removed from <span class="sc">cvs</span>, so you can just
put up with the deprecation warnings for awhile if you like.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="commitinfo"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#verifymsg">verifymsg</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#commit-files">commit files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.4 Commitinfo</h4>

<p><a name="index-g_t_0040file_007bcommitinfo_007d-644"></a><a name="index-Commits_002c-precommit-verification-of-645"></a><a name="index-commitinfo-_0028admin-file_0029-646"></a><a name="index-info-files_002c-commitinfo-647"></a><a name="index-script-hooks_002c-commitinfo-648"></a><a name="index-trigger-scripts_002c-commitinfo-649"></a><a name="index-info-files_002c-precommit-verification-of-commits-650"></a><a name="index-script-hooks_002c-precommit-verification-of-commits-651"></a><a name="index-trigger-scripts_002c-precommit-verification-of-commits-652"></a>
The <samp><span class="file">commitinfo</span></samp> file defines programs to execute
whenever &lsquo;<samp><span class="samp">cvs commit</span></samp>&rsquo; is about to execute.  These
programs are used for pre-commit checking to verify
that the modified, added and removed files are really
ready to be committed.  This could be used, for
instance, to verify that the changed files conform to
to your site's standards for coding practice.

   <p>The <samp><span class="file">commitinfo</span></samp> file has the standard form for script hooks
(see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular expression followed by
a command to execute.  It supports only the DEFAULT keywords.

   <p><a name="index-format-strings_002c-commitinfo-admin-file-653"></a>In addition to the common format strings (see <a href="#syntax">syntax</a>),
<samp><span class="file">commitinfo</span></samp> supports:

     <dl>
<dt><tt>{s}</tt><dd>a list of the names of files to be committed
</dl>

   <p><a name="index-commitinfo-_0028admin-file_0029_002c-updating-legacy-repositories-654"></a><a name="index-compatibility-notes_002c-commitinfo-admin-file-655"></a>Currently, if no format strings are specified, a default
string of &lsquo;<samp><span class="samp"> %r/%p %{s}</span></samp>&rsquo; will be appended to the command
line template before replacement is performed, but this
feature is deprecated.  It is simply in place so that legacy
repositories will remain compatible with the new <span class="sc">cvs</span> application. 
For information on updating, see <a href="#Updating-Commit-Files">Updating Commit Files</a>.

   <p><a name="index-Exit-status_002c-of-commitinfo-656"></a><a name="index-commitinfo-_0028admin-file_0029_002c-exit-status-657"></a>The first line with a regular expression matching the
directory within the repository will be used.  If the
command returns a non-zero exit status the commit will
be aborted. 
<!-- FIXME: need example(s) of what "directory within the -->
<!-- repository" means. -->

   <p><a name="index-g_t_0040file_007bcommitinfo_007d_002c-working-directory-658"></a><a name="index-g_t_0040file_007bcommitinfo_007d_002c-command-environment-659"></a>The command will be run in the root of the workspace
containing the new versions of any files the user would like
to modify (commit), <em>or in a copy of the workspace on
the server (see <a href="#Remote-repositories">Remote repositories</a>)</em>.  If a file is
being removed, there will be no copy of the file under the
current directory.  If a file is being added, there will be
no corresponding archive file in the repository unless the
file is being resurrected.

   <p>Note that both the repository directory and the corresponding
Attic (see <a href="#Attic">Attic</a>) directory may need to be checked to
locate the archive file corresponding to any given file being
committed.  Much of the information about the specific commit
request being made, including the destination branch, commit
message, and command line options specified, is not available
to the command.

<!-- FIXME: should discuss using commitinfo to control -->
<!-- who has checkin access to what (e.g. Joe can check into -->
<!-- directories a, b, and c, and Mary can check into -->
<!-- directories b, c, and d-note this case cannot be -->
<!-- conveniently handled with unix groups).  Of course, -->
<!-- adding a new set of features to CVS might be a more -->
<!-- natural way to fix this problem than telling people to -->
<!-- use commitinfo. -->
<!-- FIXME: Should make some reference, especially in -->
<!-- the context of controlling who has access, to the fact -->
<!-- that commitinfo can be circumvented.  Perhaps -->
<!-- mention SETXID (but has it been carefully examined -->
<!-- for holes?).  This fits in with the discussion of -->
<!-- general CVS security in "Password authentication -->
<!-- security" (the bit which is not pserver-specific). -->
<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="verifymsg"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#loginfo">loginfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#commitinfo">commitinfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.5 Verifying log messages</h4>

<p><a name="index-g_t_0040file_007bverifymsg_007d-_0028admin-file_0029-660"></a><a name="index-Log-message_002c-verifying-661"></a><a name="index-logging_002c-commits-662"></a>
Once you have entered a log message, you can evaluate
that message to check for specific content, such as
a bug ID.  Use the <samp><span class="file">verifymsg</span></samp> file to
specify a program that is used to verify the log message. 
This program could be a simple script that checks
that the entered message contains the required fields.

   <p>The <samp><span class="file">verifymsg</span></samp> file is often most useful together
with the <samp><span class="file">rcsinfo</span></samp> file, which can be used to
specify a log message template (see <a href="#rcsinfo">rcsinfo</a>).

   <p>The <samp><span class="file">verifymsg</span></samp> file has the standard form for script hooks
(see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular expression followed by
a command to execute.  It supports only the DEFAULT keywords.

   <p><a name="index-format-strings_002c-verifymsg-admin-file-663"></a>In addition to the common format strings (see <a href="#syntax">syntax</a>),
<samp><span class="file">verifymsg</span></samp> supports:

     <dl>
<dt><tt>l</tt><dd>the full path to the file containing the log message to be verified
<br><dt><tt>{sV}</tt><dd>File attributes, where:
          <dl>
<dt><tt>s</tt><dd>file name
<br><dt><tt>V</tt><dd>old version number (pre-checkin)
</dl>
     </dl>

   <p><a name="index-verifymsg-_0028admin_002fcommit-file_0029_002c-updating-legacy-repositories-664"></a><a name="index-compatibility-notes_002c-verifymsg-admin-file-665"></a>Currently, if no format strings are specified, a default
string of &lsquo;<samp><span class="samp"> %l</span></samp>&rsquo; will be appended to the command
line template before replacement is performed, but this
feature is deprecated.  It is simply in place so that legacy
repositories will remain compatible with the new <span class="sc">cvs</span> application. 
For information on updating, see <a href="#Updating-Commit-Files">Updating Commit Files</a>.

   <p>One thing that should be noted is that the &lsquo;<samp><span class="samp">ALL</span></samp>&rsquo;
keyword is not supported.  If more than one matching
line is found, the first one is used.  This can be
useful for specifying a default verification script in a
directory, and then overriding it in a subdirectory.

   <p><a name="index-Exit-status_002c-of-_0040file_007bverifymsg_007d-666"></a>If the verification script exits with a non-zero exit status,
the commit is aborted.

   <p><a name="index-g_t_0040file_007bverifymsg_007d_002c-changing-the-log-message-667"></a>In the default configuration, CVS allows the
verification script to change the log message. This is
controlled via the RereadLogAfterVerify CVSROOT/config
option.

   <p>When &lsquo;<samp><span class="samp">RereadLogAfterVerify=always</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">RereadLogAfterVerify=stat</span></samp>&rsquo;, the log message will
either always be reread after the verification script
is run or reread only if the log message file status
has changed.

   <p>See <a href="#config">config</a>, for more on CVSROOT/config options.

   <p>It is NOT a good idea for a <samp><span class="file">verifymsg</span></samp> script to
interact directly with the user in the various
client/server methods. For the <code>pserver</code> method,
there is no protocol support for communicating between
<samp><span class="file">verifymsg</span></samp> and the client on the remote end. For the
<code>ext</code> and <code>server</code> methods, it is possible
for CVS to become confused by the characters going
along the same channel as the CVS protocol
messages. See <a href="#Remote-repositories">Remote repositories</a>, for more
information on client/server setups.  In addition, at the time
the <samp><span class="file">verifymsg</span></samp> script runs, the CVS
server has locks in place in the repository.  If control is
returned to the user here then other users may be stuck waiting
for access to the repository.

   <p>This option can be useful if you find yourself using an
rcstemplate that needs to be modified to remove empty
elements or to fill in default values.  It can also be
useful if the rcstemplate has changed in the repository
and the CVS/Template was not updated, but is able to be
adapted to the new format by the verification script
that is run by <samp><span class="file">verifymsg</span></samp>.

   <p>An example of an update might be to change all
occurrences of 'BugId:' to be 'DefectId:' (which can be
useful if the rcstemplate has recently been changed and
there are still checked-out user trees with cached
copies in the CVS/Template file of the older version).

   <p>Another example of an update might be to delete a line
that contains 'BugID: none' from the log message after
validation of that value as being allowed is made.

<ul class="menu">
<li><a accesskey="1" href="#verifymsg-example">verifymsg example</a>:             Verifymsg example
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="verifymsg-example"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#verifymsg">verifymsg</a>

</div>

<h5 class="appendixsubsubsec">C.3.5.1 Verifying log messages</h5>

<p><a name="index-verifymsg_002c-example-668"></a>The following is a little silly example of a
<samp><span class="file">verifymsg</span></samp> file, together with the corresponding
<samp><span class="file">rcsinfo</span></samp> file, the log message template and a
verification script.  We begin with the log message template. 
We want to always record a bug-id number on the first
line of the log message.  The rest of log message is
free text.  The following template is found in the file
<samp><span class="file">/usr/cvssupport/tc.template</span></samp>.

<pre class="example">     BugId:
</pre>
   <p>The script <samp><span class="file">/usr/cvssupport/bugid.verify</span></samp> is used to
evaluate the log message.

<pre class="example">     #!/bin/sh
     #
     #       bugid.verify filename
     #
     #  Verify that the log message contains a valid bugid
     #  on the first line.
     #
     if sed 1q &lt; $1 | grep '^BugId:[ ]*[0-9][0-9]*$' &gt; /dev/null; then
         exit 0
     elif sed 1q &lt; $1 | grep '^BugId:[ ]*none$' &gt; /dev/null; then
         # It is okay to allow commits with 'BugId: none',
         # but do not put that text into the real log message.
         grep -v '^BugId:[ ]*none$' &gt; $1.rewrite
         mv $1.rewrite $1
         exit 0
     else
         echo "No BugId found."
         exit 1
     fi
</pre>
   <p>The <samp><span class="file">verifymsg</span></samp> file contains this line:

<pre class="example">     ^tc     /usr/cvssupport/bugid.verify %l
</pre>
   <p>The <samp><span class="file">rcsinfo</span></samp> file contains this line:

<pre class="example">     ^tc     /usr/cvssupport/tc.template
</pre>
   <p>The <samp><span class="file">config</span></samp> file contains this line:

<pre class="example">     RereadLogAfterVerify=always
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="loginfo"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#postadmin">postadmin</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#verifymsg">verifymsg</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.6 Loginfo</h4>

<p><a name="index-loginfo-_0028admin-file_0029-669"></a><a name="index-logging_002c-commits-670"></a><a name="index-Storing-log-messages-671"></a><a name="index-Mailing-log-messages-672"></a><a name="index-Distributing-log-messages-673"></a><a name="index-Log-messages-674"></a>
The <samp><span class="file">loginfo</span></samp> file is used to control where log information is sent after
versioned changes are made to repository archive files and after directories
are added ot the repository.  <a href="#posttag">posttag</a> for how to log tagging
information and <a href="#postadmin">postadmin</a> for how to log changes due to the <code>admin</code>
command.

   <p>The <samp><span class="file">loginfo</span></samp> file has the standard form for script hooks
(see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular expression followed by
a command to execute.  It supports the ALL and DEFAULT keywords.

   <p>Any specified scripts are called:

     <dl>
<dt><code>commit</code><dd>Once per directory, immediately after a successfully completing the commit of
all files within that directory. 
<br><dt><code>import</code><dd>Once per import, immediately after completion of all write operations. 
<br><dt><code>add</code><dd>Immediately after the successful <code>add</code> of a directory. 
</dl>

   <p>Any script called via <samp><span class="file">loginfo</span></samp> will be fed the log information on its
standard input.  Note that the filter program <strong>must</strong> read <strong>all</strong>
of the log information from its standard input or <span class="sc">cvs</span> may fail with a
broken pipe signal.

   <p><a name="index-format-strings_002c-loginfo-admin-file-675"></a>In addition to the common format strings (see <a href="#syntax">syntax</a>),
<samp><span class="file">loginfo</span></samp> supports:

     <dl>
<dt><tt>{sVv}</tt><dd>File attributes, where:
          <dl>
<dt><tt>s</tt><dd>file name
<br><dt><tt>V</tt><dd>old version number (pre-checkin)
<br><dt><tt>v</tt><dd>new version number (post-checkin)
</dl>
     </dl>

   <p>For example, some valid format strings are &lsquo;<samp><span class="samp">%%</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">%s</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%{s}</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">%{sVv}</span></samp>&rsquo;.

   <p><a name="index-loginfo-_0028admin-file_0029_002c-updating-legacy-repositories-676"></a><a name="index-compatibility-notes_002c-loginfo-admin-file-677"></a>Currently, if &lsquo;<samp><span class="samp">UseNewInfoFmtStrings</span></samp>&rsquo; is not set in the <samp><span class="file">config</span></samp>
administration file (see <a href="#config">config</a>), the format strings will be substituted
as they were in past versions of <span class="sc">cvs</span>, but this feature is deprecated. 
It is simply in place so that legacy repositories will remain compatible with
the new <span class="sc">cvs</span> application.  For information on updating,
please see <a href="#Updating-Commit-Files">Updating Commit Files</a>.

   <p>As an example, if &lsquo;<samp><span class="samp">/u/src/master/yoyodyne/tc</span></samp>&rsquo; is the repository, &lsquo;<samp><span class="samp">%p</span></samp>&rsquo;
and &lsquo;<samp><span class="samp">%{sVv}</span></samp>&rsquo; are the format strings, and three files (<tt>ChangeLog</tt>,
<tt>Makefile</tt>, <tt>foo.c</tt>) were modified, the output might be:

<pre class="example">     yoyodyne/tc ChangeLog 1.1 1.2 Makefile 1.3 1.4 foo.c 1.12 1.13
</pre>
   <p>Note: when <span class="sc">cvs</span> is accessing a remote repository,
<samp><span class="file">loginfo</span></samp> will be run on the <em>remote</em>
(i.e., server) side, not the client side (see <a href="#Remote-repositories">Remote repositories</a>).

<ul class="menu">
<li><a accesskey="1" href="#loginfo-example">loginfo example</a>:                           Loginfo example
<li><a accesskey="2" href="#Keeping-a-checked-out-copy">Keeping a checked out copy</a>:                Updating a tree on every checkin
</ul>

<!-- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . -->
<div class="node">
<a name="loginfo-example"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Keeping-a-checked-out-copy">Keeping a checked out copy</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#loginfo">loginfo</a>

</div>

<h5 class="appendixsubsubsec">C.3.6.1 Loginfo example</h5>

<p>The following <samp><span class="file">loginfo</span></samp> file, together with the
tiny shell-script below, appends all log messages
to the file <samp><span class="file">$CVSROOT/CVSROOT/commitlog</span></samp>,
and any commits to the administrative files (inside
the <samp><span class="file">CVSROOT</span></samp> directory) are also logged in
<samp><span class="file">/usr/adm/cvsroot-log</span></samp>. 
Commits to the <samp><span class="file">prog1</span></samp> directory are mailed to <tt>ceder</tt>.

<!-- FIXME: is it a CVS feature or bug that only the -->
<!-- first matching line is used?  It is documented -->
<!-- above, but is it useful?  For example, if we wanted -->
<!-- to run both "cvs-log" and "Mail" for the CVSROOT -->
<!-- directory, it is kind of awkward if -->
<!-- only the first matching line is used. -->
<pre class="example">     ALL                     /usr/local/bin/cvs-log $CVSROOT/CVSROOT/commitlog $USER
     ^CVSROOT\(/\|$\)        /usr/local/bin/cvs-log /usr/adm/cvsroot-log $USER
     ^prog1\(/\|$\)          Mail -s "%p %s" ceder
</pre>
   <p>The shell-script <samp><span class="file">/usr/local/bin/cvs-log</span></samp> looks
like this:

<pre class="example">     #!/bin/sh
     (echo "------------------------------------------------------";
      echo -n "$2  ";
      date;
      echo;
      cat) &gt;&gt; $1
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="Keeping-a-checked-out-copy"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#loginfo-example">loginfo example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#loginfo">loginfo</a>

</div>

<h5 class="appendixsubsubsec">C.3.6.2 Keeping a checked out copy</h5>

<!-- What other index entries?  It seems like -->
<!-- people might want to use a lot of different -->
<!-- words for this functionality. -->
<p><a name="index-Keeping-a-checked-out-copy-678"></a><a name="index-Checked-out-copy_002c-keeping-679"></a><a name="index-Web-pages_002c-maintaining-with-CVS-680"></a>
It is often useful to maintain a directory tree which
contains files which correspond to the latest version
in the repository.  For example, other developers might
want to refer to the latest sources without having to
check them out, or you might be maintaining a web site
with <span class="sc">cvs</span> and want every checkin to cause the files
used by the web server to be updated. 
<!-- Can we offer more details on the web example?  Or -->
<!-- point the user at how to figure it out?  This text -->
<!-- strikes me as sufficient for someone who already has -->
<!-- some idea of what we mean but not enough for the naive -->
<!-- user/sysadmin to understand it and set it up. -->

   <p>The way to do this is by having loginfo invoke
<code>cvs update</code>.  Doing so in the naive way will
cause a problem with locks, so the <code>cvs update</code>
must be run in the background. 
<!-- Should we try to describe the problem with locks? -->
<!-- It seems like a digression for someone who just -->
<!-- wants to know how to make it work. -->
<!-- Another choice which might work for a single file -->
<!-- is to use "cvs -n update -p" which doesn't take -->
<!-- out locks (I think) but I don't see many advantages -->
<!-- of that and we might as well document something which -->
<!-- works for multiple files. -->
Here is an example for unix (this should all be on one line):

<pre class="example">     ^cyclic-pages\(/\|$\)	(date; cat; (sleep 2; cd /u/www/local-docs;
      cvs -q update -d) &amp;) &gt;&gt; $CVSROOT/CVSROOT/updatelog 2&gt;&amp;1
</pre>
   <p>This will cause checkins to repository directory <code>cyclic-pages</code>
and its subdirectories to update the checked
out tree in <samp><span class="file">/u/www/local-docs</span></samp>. 
<!-- More info on some of the details?  The "sleep 2" is -->
<!-- so if we are lucky the lock will be gone by the time -->
<!-- we start and we can wait 2 seconds instead of 30. -->

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="postadmin"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#taginfo">taginfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#loginfo">loginfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.7 Logging admin commands</h4>

<p><a name="index-postadmin-_0028admin-file_0029-681"></a><a name="index-script-hook_002c-postadmin-682"></a><a name="index-Admin-commands_002c-logging-683"></a>
The <samp><span class="file">postadmin</span></samp> file defines programs to execute after an <code>admin</code>
command modifies files.  The <samp><span class="file">postadmin</span></samp> file has the standard form
for script hooks (see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular
expression followed by a command to execute.  It supports the ALL and DEFAULT
keywords.

   <p><a name="index-format-strings_002c-postadmin-admin-file-684"></a>The <samp><span class="file">postadmin</span></samp> file supports no format strings other than the common
ones (see <a href="#syntax">syntax</a>),

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="taginfo"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#posttag">posttag</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#postadmin">postadmin</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.8 Taginfo</h4>

<p><a name="index-taginfo-_0028admin-file_0029-685"></a><a name="index-script-hook_002c-taginfo-686"></a><a name="index-Tags_002c-logging-687"></a><a name="index-Tags_002c-verifying-688"></a>The <samp><span class="file">taginfo</span></samp> file defines programs to execute
when someone executes a <code>tag</code> or <code>rtag</code>
command.  The <samp><span class="file">taginfo</span></samp> file has the standard form
for script hooks (see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line
is a regular expression followed by a command to execute. 
It supports the ALL and DEFAULT keywords.

   <p><a name="index-format-strings_002c-taginfo-admin-file-689"></a>In addition to the common format strings (see <a href="#syntax">syntax</a>),
<samp><span class="file">taginfo</span></samp> supports:

     <dl>
<dt><tt>b</tt><dd>tag type (<code>T</code> for branch, <code>N</code> for not-branch, or <code>?</code> for
unknown, as during delete operations)
<br><dt><tt>o</tt><dd>operation (<code>add</code> for <code>tag</code>, <code>mov</code> for <code>tag -F</code>, or
<code>del</code> for <code>tag -d</code>)
<br><dt><tt>t</tt><dd>new tag name
<br><dt><tt>{sTVv}</tt><dd>file attributes, where:
          <dl>
<dt><tt>s</tt><dd>file name
<br><dt><tt>T</tt><dd>tag name of destination, or the empty string when there is no associated
tag name (this usually means the trunk)
<br><dt><tt>V</tt><dd>old version number (for a move or delete operation)
<br><dt><tt>v</tt><dd>new version number (for an add or move operation)
</dl>
     </dl>

   <p>For example, some valid format strings are &lsquo;<samp><span class="samp">%%</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%p</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%t</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">%s</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%{s}</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">%{sVv}</span></samp>&rsquo;.

   <p><a name="index-taginfo-_0028admin-file_0029_002c-updating-legacy-repositories-690"></a><a name="index-compatibility-notes_002c-taginfo-admin-file-691"></a>Currently, if no format strings are specified, a default
string of &lsquo;<samp><span class="samp"> %t %o %p %{sv}</span></samp>&rsquo; will be appended to the command
line template before replacement is performed, but this
feature is deprecated.  It is simply in place so that legacy
repositories will remain compatible with the new <span class="sc">cvs</span> application. 
For information on updating, see <a href="#Updating-Commit-Files">Updating Commit Files</a>.

   <p><a name="index-Exit-status_002c-of-taginfo-admin-file-692"></a><a name="index-taginfo-_0028admin-file_0029_002c-exit-status-693"></a>A non-zero exit of the filter program will cause the tag to be
aborted.

   <p>Here is an example of using <samp><span class="file">taginfo</span></samp> to log <code>tag</code> and <code>rtag</code>
commands.  In the <samp><span class="file">taginfo</span></samp> file put:

<pre class="example">     ALL /usr/local/cvsroot/CVSROOT/loggit %t %b %o %p %{sVv}
</pre>
   <p class="noindent">Where <samp><span class="file">/usr/local/cvsroot/CVSROOT/loggit</span></samp> contains the
following script:

<pre class="example">     #!/bin/sh
     echo "$@" &gt;&gt;/home/kingdon/cvsroot/CVSROOT/taglog
</pre>
   <!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="posttag"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#postwatch">postwatch</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#taginfo">taginfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.9 Logging tags</h4>

<p><a name="index-posttag-_0028admin-file_0029-694"></a><a name="index-script-hook_002c-posttag-695"></a><a name="index-Tags_002c-logging-696"></a>
The <samp><span class="file">posttag</span></samp> file defines programs to execute after a <code>tag</code> or
<code>rtag</code> command modifies files.  The <samp><span class="file">posttag</span></samp> file has the standard
form for script hooks (see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular
expression followed by a command to execute.  It supports the ALL and DEFAULT
keywords.

   <p><a name="index-format-strings_002c-posttag-admin-file-697"></a>The <samp><span class="file">posttag</span></samp> admin file supports the same format strings as the
<samp><span class="file">taginfo</span></samp> file (see <a href="#taginfo">taginfo</a>),

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="postwatch"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#preproxy">preproxy</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#posttag">posttag</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.10 Logging watch commands</h4>

<p><a name="index-postwatch-_0028admin-file_0029-698"></a><a name="index-script-hook_002c-postwatch-699"></a><a name="index-Watch-family-of-commands_002c-logging-700"></a>
The <samp><span class="file">postwatch</span></samp> file defines programs to execute after any command (for
instance, <code>watch</code>, <code>edit</code>, <code>unedit</code>, or <code>commit</code>) modifies
any <samp><span class="file">CVS/fileattr</span></samp> file in the repository (see <a href="#Watches">Watches</a>).  The
<samp><span class="file">postwatch</span></samp> file has the standard form for script hooks
(see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular expression followed by
a command to execute.  It supports the ALL and DEFAULT keywords.

   <p><a name="index-format-strings_002c-postwatch-admin-file-701"></a>The <samp><span class="file">postwatch</span></samp> file supports no format strings other than the common
ones (see <a href="#syntax">syntax</a>), but it is worth noting that the <code>%c</code> format string
may not be replaced as you might expect.  Client runs of <code>edit</code> and
<code>unedit</code> can sometimes skip contacting the <span class="sc">cvs</span> server and cache the
notification of the file attribute change to be sent the next time the client
contacts the server for whatever other reason,

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="preproxy"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#postproxy">postproxy</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#postwatch">postwatch</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.11 Launch a Script before Proxying</h4>

<p><a name="index-preproxy-_0028admin-file_0029-702"></a><a name="index-script-hook_002c-preproxy-703"></a><a name="index-Write-proxy_002c-verifying-704"></a><a name="index-Write-proxy_002c-logging-705"></a>
The <samp><span class="file">preproxy</span></samp> file defines programs to execute after a secondary
server receives a write request from a client, just before it starts up the
primary server and becomes a write proxy.  This hook could be used to
dial a modem, launch an SSH tunnel, establish a VPN, or anything else that
might be necessary to do before contacting the primary server.

   <p><samp><span class="file">preproxy</span></samp> scripts are called once, at the time of the write request, with
the repository argument (if requested) set from the topmost directory sent by
the client.

   <p>The <samp><span class="file">preproxy</span></samp> file has the standard form
for script hooks (see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular
expression followed by a command to execute.  It supports the ALL and DEFAULT
keywords.

   <p><a name="index-format-strings_002c-preproxy-admin-file-706"></a>In addition to the common format strings, the <samp><span class="file">preproxy</span></samp> file supports the
following format string:

     <dl>
<dt><tt>P</tt><dd>the CVSROOT string which specifies the primary server
</dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="postproxy"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#preproxy">preproxy</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Trigger-Scripts">Trigger Scripts</a>

</div>

<h4 class="appendixsubsec">C.3.12 Launch a Script after Proxying</h4>

<p><a name="index-postproxy-_0028admin-file_0029-707"></a><a name="index-script-hook_002c-postproxy-708"></a><a name="index-Write-proxy_002c-logging-709"></a><a name="index-Write-proxy_002c-pull-updates-710"></a><a name="index-secondary-server_002c-pull-updates-711"></a>
The <samp><span class="file">postproxy</span></samp> file defines programs to execute after a secondary
server notes that the connection to the primary server has shut down and before
it releases the client by shutting down the connection to the client. 
This could hook could be used to
disconnect a modem, an SSH tunnel, a VPN, or anything else that
might be necessary to do after contacting the primary server.  This hook should
also be used to pull updates from the primary server before allowing the client
which did the write to disconnect since otherwise the client's next read
request may generate error messages and fail upon encountering an out of date
repository on the secondary server.

   <p><samp><span class="file">postproxy</span></samp> scripts are called once per directory.

   <p>The <samp><span class="file">postproxy</span></samp> file has the standard form
for script hooks (see <a href="#Trigger-Scripts">Trigger Scripts</a>), where each line is a regular
expression followed by a command to execute.  It supports the ALL and DEFAULT
keywords.

   <p><a name="index-format-strings_002c-postproxy-admin-file-712"></a>In addition to the common format strings, the <samp><span class="file">postproxy</span></samp> file supports
the following format string:

     <dl>
<dt><tt>P</tt><dd>the CVSROOT string which specifies the primary server
</dl>

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="rcsinfo"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#cvsignore">cvsignore</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Trigger-Scripts">Trigger Scripts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.4 Rcsinfo</h3>

<p><a name="index-rcsinfo-_0028admin-file_0029-713"></a><a name="index-Form-for-log-message-714"></a><a name="index-Log-message-template-715"></a><a name="index-Template-for-log-message-716"></a><a name="index-logging_002c-commits-717"></a>
The <samp><span class="file">rcsinfo</span></samp> file can be used to specify a form to
edit when filling out the commit log.  The
<samp><span class="file">rcsinfo</span></samp> file has a syntax similar to the
<samp><span class="file">verifymsg</span></samp>, <samp><span class="file">commitinfo</span></samp> and <samp><span class="file">loginfo</span></samp>
files.  See <a href="#syntax">syntax</a>.  Unlike the other files the second
part is <em>not</em> a command-line template.  Instead,
the part after the regular expression should be a full pathname to
a file containing the log message template.

   <p>If the repository name does not match any of the
regular expressions in this file, the &lsquo;<samp><span class="samp">DEFAULT</span></samp>&rsquo;
line is used, if it is specified.

   <p>All occurrences of the name &lsquo;<samp><span class="samp">ALL</span></samp>&rsquo; appearing as a
regular expression are used in addition to the first
matching regular expression or &lsquo;<samp><span class="samp">DEFAULT</span></samp>&rsquo;.

<!-- FIXME: should be offering advice, somewhere around -->
<!-- here, about where to put the template file.  The -->
<!-- verifymsg example uses /usr/cvssupport but doesn't -->
<!-- say anything about what that directory is for or -->
<!-- whether it is hardwired into CVS or who creates -->
<!-- it or anything.  In particular we should say -->
<!-- how to version control the template file.  A -->
<!-- probably better answer than the /usr/cvssupport -->
<!-- stuff is to use checkoutlist (with xref to the -->
<!-- checkoutlist doc). -->
<!-- Also I am starting to see a connection between -->
<!-- this and the Keeping a checked out copy node. -->
<!-- Probably want to say something about that. -->
   <p>The log message template will be used as a default log
message.  If you specify a log message with &lsquo;<samp><span class="samp">cvs
commit -m </span><var>message</var></samp>&rsquo; or &lsquo;<samp><span class="samp">cvs commit -f
</span><var>file</var></samp>&rsquo; that log message will override the
template.

   <p>See <a href="#verifymsg">verifymsg</a>, for an example <samp><span class="file">rcsinfo</span></samp>
file.

   <p>When <span class="sc">cvs</span> is accessing a remote repository,
the contents of <samp><span class="file">rcsinfo</span></samp> at the time a directory
is first checked out will specify a template. This
template will be updated on all &lsquo;<samp><span class="samp">cvs update</span></samp>&rsquo;
commands. It will also be added to new directories
added with a &lsquo;<samp><span class="samp">cvs add new-directory</span></samp>&rsquo; command. 
In versions of <span class="sc">cvs</span> prior to version 1.12, the
<samp><span class="file">CVS/Template</span></samp> file was not updated. If the
<span class="sc">cvs</span> server is at version 1.12 or higher an older
client may be used and the <samp><span class="file">CVS/Template</span></samp> will
be updated from the server.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="cvsignore"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#checkoutlist">checkoutlist</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#rcsinfo">rcsinfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.5 Ignoring files via cvsignore</h3>

<p><a name="index-cvsignore-_0028admin-file_0029_002c-global-718"></a><a name="index-Global-cvsignore-719"></a><a name="index-Ignoring-files-720"></a><!--  This chapter should maybe be moved to the -->
<!-- tutorial part of the manual? -->

   <p>There are certain file names that frequently occur
inside your working copy, but that you don't want to
put under <span class="sc">cvs</span> control.  Examples are all the object
files that you get while you compile your sources. 
Normally, when you run &lsquo;<samp><span class="samp">cvs update</span></samp>&rsquo;, it prints a
line for each file it encounters that it doesn't know
about (see <a href="#update-output">update output</a>).

   <p><span class="sc">cvs</span> has a list of files (or sh(1) file name patterns)
that it should ignore while running <code>update</code>,
<code>import</code> and <code>release</code>. 
<!--  Are those the only three commands affected? -->
This list is constructed in the following way.

     <ul>
<li>The list is initialized to include certain file name
patterns: names associated with <span class="sc">cvs</span>
administration, or with other common source control
systems; common names for patch files, object files,
archive files, and editor backup files; and other names
that are usually artifacts of assorted utilities. 
Currently, the default list of ignored file name
patterns is:

     <p><a name="index-Ignored-files-721"></a><a name="index-Automatically-ignored-files-722"></a>
     <pre class="example">              RCS     SCCS    CVS     CVS.adm
              RCSLOG  cvslog.*
              tags    TAGS
              .make.state     .nse_depinfo
              *~      #*      .#*     ,*      _$*     *$
              *.old   *.bak   *.BAK   *.orig  *.rej   .del-*
              *.a     *.olb   *.o     *.obj   *.so    *.exe
              *.Z     *.elc   *.ln
              core
</pre>
     <li>The per-repository list in
<samp><span class="file">$CVSROOT/CVSROOT/cvsignore</span></samp> is appended to
the list, if that file exists.

     <li>The per-user list in <samp><span class="file">.cvsignore</span></samp> in your home
directory is appended to the list, if it exists.

     <li>Any entries in the environment variable
<code>$CVSIGNORE</code> is appended to the list.

     <li>Any &lsquo;<samp><span class="samp">-I</span></samp>&rsquo; options given to <span class="sc">cvs</span> is appended.

     <li>As <span class="sc">cvs</span> traverses through your directories, the contents
of any <samp><span class="file">.cvsignore</span></samp> will be appended to the list. 
The patterns found in <samp><span class="file">.cvsignore</span></samp> are only valid
for the directory that contains them, not for
any sub-directories. 
</ul>

   <p>In any of the 5 places listed above, a single
exclamation mark (&lsquo;<samp><span class="samp">!</span></samp>&rsquo;) clears the ignore list. 
This can be used if you want to store any file which
normally is ignored by <span class="sc">cvs</span>.

   <p>Specifying &lsquo;<samp><span class="samp">-I !</span></samp>&rsquo; to <code>cvs import</code> will import
everything, which is generally what you want to do if
you are importing files from a pristine distribution or
any other source which is known to not contain any
extraneous files.  However, looking at the rules above
you will see there is a fly in the ointment; if the
distribution contains any <samp><span class="file">.cvsignore</span></samp> files, then
the patterns from those files will be processed even if
&lsquo;<samp><span class="samp">-I !</span></samp>&rsquo; is specified.  The only workaround is to
remove the <samp><span class="file">.cvsignore</span></samp> files in order to do the
import.  Because this is awkward, in the future
&lsquo;<samp><span class="samp">-I !</span></samp>&rsquo; might be modified to override
<samp><span class="file">.cvsignore</span></samp> files in each directory.

   <p>Note that the syntax of the ignore files consists of a
series of lines, each of which contains a space
separated list of filenames.  This offers no clean way
to specify filenames which contain spaces, but you can
use a workaround like <samp><span class="file">foo?bar</span></samp> to match a file
named <samp><span class="file">foo bar</span></samp> (it also matches <samp><span class="file">fooxbar</span></samp>
and the like).  Also note that there is currently no
way to specify comments. 
<!-- FIXCVS?  I don't _like_ this syntax at all, but -->
<!-- changing it raises all the usual compatibility -->
<!-- issues and I'm also not sure what to change it to. -->

<div class="node">
<a name="checkoutlist"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#history-file">history file</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#cvsignore">cvsignore</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.6 The checkoutlist file</h3>

<p><a name="index-checkoutlist-723"></a>
It may be helpful to use <span class="sc">cvs</span> to maintain your own
files in the <samp><span class="file">CVSROOT</span></samp> directory.  For example,
suppose that you have a script <samp><span class="file">logcommit.pl</span></samp>
which you run by including the following line in the
<samp><span class="file">commitinfo</span></samp> administrative file:

<pre class="example">     ALL   $CVSROOT/CVSROOT/logcommit.pl %r/%p %s
</pre>
   <p>To maintain <samp><span class="file">logcommit.pl</span></samp> with <span class="sc">cvs</span> you would
add the following line to the <samp><span class="file">checkoutlist</span></samp>
administrative file:

<pre class="example">     logcommit.pl
</pre>
   <p>The format of <samp><span class="file">checkoutlist</span></samp> is one line for each
file that you want to maintain using <span class="sc">cvs</span>, giving
the name of the file, followed optionally by more whitespace
and any error message that should print if the file cannot be
checked out into CVSROOT after a commit:

<pre class="example">     logcommit.pl	Could not update CVSROOT/logcommit.pl.
</pre>
   <p>After setting up <samp><span class="file">checkoutlist</span></samp> in this fashion,
the files listed there will function just like
<span class="sc">cvs</span>'s built-in administrative files.  For example,
when checking in one of the files you should get a
message such as:

<pre class="example">     cvs commit: Rebuilding administrative file database
</pre>
   <p class="noindent">and the checked out copy in the <samp><span class="file">CVSROOT</span></samp>
directory should be updated.

   <p>Note that listing <samp><span class="file">passwd</span></samp> (see <a href="#Password-authentication-server">Password authentication server</a>) in <samp><span class="file">checkoutlist</span></samp> is not
recommended for security reasons.

   <p>For information about keeping a checkout out copy in a
more general context than the one provided by
<samp><span class="file">checkoutlist</span></samp>, see <a href="#Keeping-a-checked-out-copy">Keeping a checked out copy</a>.

<!--  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<div class="node">
<a name="history-file"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variables">Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#checkoutlist">checkoutlist</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.7 The history file</h3>

<p><a name="index-History-file-724"></a><a name="index-Log-information_002c-saving-725"></a>
By default, the file <samp><span class="file">$CVSROOT/CVSROOT/history</span></samp> is used
to log information for the <code>history</code> command (see <a href="#history">history</a>). 
This file name may be changed with the &lsquo;<samp><span class="samp">HistoryLogPath</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">HistorySearchPath</span></samp>&rsquo; config options (see <a href="#config">config</a>).

   <p>The file format of the <samp><span class="file">history</span></samp> file is
documented only in comments in the <span class="sc">cvs</span> source
code, but generally programs should use the <code>cvs
history</code> command to access it anyway, in case the
format changes with future releases of <span class="sc">cvs</span>.

<div class="node">
<a name="Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#config">config</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#history-file">history file</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.8 Expansions in administrative files</h3>

<p><a name="index-Internal-variables-726"></a><a name="index-Variables-727"></a>
Sometimes in writing an administrative file, you might
want the file to be able to know various things based
on environment <span class="sc">cvs</span> is running in.  There are
several mechanisms to do that.

   <p>To find the home directory of the user running <span class="sc">cvs</span>
(from the <code>HOME</code> environment variable), use
&lsquo;<samp><span class="samp">~</span></samp>&rsquo; followed by &lsquo;<samp><span class="samp">/</span></samp>&rsquo; or the end of the line. 
Likewise for the home directory of <var>user</var>, use
&lsquo;<samp><span class="samp">~</span><var>user</var></samp>&rsquo;.  These variables are expanded on
the server machine, and don't get any reasonable
expansion if pserver (see <a href="#Password-authenticated">Password authenticated</a>)
is in use; therefore user variables (see below) may be
a better choice to customize behavior based on the user
running <span class="sc">cvs</span>. 
<!-- Based on these limitations, should we deprecate ~? -->
<!-- What is it good for?  Are people using it? -->

   <p>One may want to know about various pieces of
information internal to <span class="sc">cvs</span>.  A <span class="sc">cvs</span> internal
variable has the syntax <code>${</code><var>variable</var><code>}</code>,
where <var>variable</var> starts with a letter and consists
of alphanumeric characters and &lsquo;<samp><span class="samp">_</span></samp>&rsquo;.  If the
character following <var>variable</var> is a
non-alphanumeric character other than &lsquo;<samp><span class="samp">_</span></samp>&rsquo;, the
&lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo; can be omitted.  The <span class="sc">cvs</span>
internal variables are:

     <dl>
<dt><code>CVSROOT</code><dd><a name="index-CVSROOT_002c-internal-variable-728"></a>This is the absolute path to the current <span class="sc">cvs</span> root directory. 
See <a href="#Repository">Repository</a>, for a description of the various
ways to specify this, but note that the internal
variable contains just the directory and not any
of the access method information.

     <br><dt><code>RCSBIN</code><dd><a name="index-RCSBIN_002c-internal-variable-729"></a>In <span class="sc">cvs</span> 1.9.18 and older, this specified the
directory where <span class="sc">cvs</span> was looking for <span class="sc">rcs</span>
programs.  Because <span class="sc">cvs</span> no longer runs <span class="sc">rcs</span>
programs, specifying this internal variable is now an
error.

     <br><dt><code>CVSEDITOR</code><dd><a name="index-CVSEDITOR_002c-internal-variable-730"></a><dt><code>EDITOR</code><dd><a name="index-EDITOR_002c-internal-variable-731"></a><dt><code>VISUAL</code><dd><a name="index-VISUAL_002c-internal-variable-732"></a>These all expand to the same value, which is the editor
that <span class="sc">cvs</span> is using.  See <a href="#Global-options">Global options</a>, for how
to specify this.

     <br><dt><code>USER</code><dd><a name="index-USER_002c-internal-variable-733"></a>Username of the user running <span class="sc">cvs</span> (on the <span class="sc">cvs</span>
server machine). 
When using pserver, this is the user specified in the repository
specification which need not be the same as the username the
server is running as (see <a href="#Password-authentication-server">Password authentication server</a>). 
Do not confuse this with the environment variable of the same name.

     <br><dt><code>SESSIONID</code><dd><a name="index-COMMITID_002c-internal-variable-734"></a>Unique Session ID of the <span class="sc">cvs</span> process. This is a
random string of printable characters of at least 16
characters length. Users should assume that it may
someday grow to at most 256 characters in length.

     <br><dt><code>COMMITID</code><dd><a name="index-COMMITID_002c-internal-variable-735"></a>Unique Session ID of the <span class="sc">cvs</span> process. This is a
random string of printable characters of at least 16
characters length. Users should assume that it may
someday grow to at most 256 characters in length. 
Currently, MirBSD/MirDebian/MirPorts GNU <span class="sc">cvs</span> uses 19 characters. 
</dl>

   <p>If you want to pass a value to the administrative files
which the user who is running <span class="sc">cvs</span> can specify,
use a user variable. 
<a name="index-User-variables-736"></a>To expand a user variable, the
administrative file contains
<code>${=</code><var>variable</var><code>}</code>.  To set a user variable,
specify the global option &lsquo;<samp><span class="samp">-s</span></samp>&rsquo; to <span class="sc">cvs</span>, with
argument <var>variable</var><code>=</code><var>value</var>.  It may be
particularly useful to specify this option via
<samp><span class="file">.cvsrc</span></samp> (see <a href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a>).

   <p>For example, if you want the administrative file to
refer to a test directory you might create a user
variable <code>TESTDIR</code>.  Then if <span class="sc">cvs</span> is invoked
as

<pre class="example">     cvs -s TESTDIR=/work/local/tests
</pre>
   <p class="noindent">and the
administrative file contains <code>sh
${=TESTDIR}/runtests</code>, then that string is expanded
to <code>sh /work/local/tests/runtests</code>.

   <p>All other strings containing &lsquo;<samp><span class="samp">$</span></samp>&rsquo; are reserved;
there is no way to quote a &lsquo;<samp><span class="samp">$</span></samp>&rsquo; character so that
&lsquo;<samp><span class="samp">$</span></samp>&rsquo; represents itself.

   <p>Environment variables passed to administrative files are:

     
<a name="index-environment-variables_002c-passed-to-administrative-files-737"></a>
<dl>
<dt><code>CVS_USER</code><dd><a name="index-CVS_005fUSER_002c-environment-variable-738"></a>The <span class="sc">cvs</span>-specific username provided by the user, if it
can be provided (currently just for the pserver access
method), and to the empty string otherwise.  (<code>CVS_USER</code>
and <code>USER</code> may differ when <samp><span class="file">$CVSROOT/CVSROOT/passwd</span></samp>
is used to map <span class="sc">cvs</span> usernames to system usernames.)

     <br><dt><code>LOGNAME</code><dd><a name="index-LOGNAME_002c-environment-variable-739"></a>The username of the system user.

     <br><dt><code>USER</code><dd><a name="index-USER_002c-environment-variable-740"></a>Same as <code>LOGNAME</code>. 
Do not confuse this with the internal variable of the same name. 
</dl>

<div class="node">
<a name="config"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variables">Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Administrative-files">Administrative files</a>

</div>

<h3 class="appendixsec">C.9 The CVSROOT/config configuration file</h3>

<p><a name="index-configuration-file-741"></a><a name="index-config_002c-in-CVSROOT-742"></a><a name="index-CVSROOT_002fconfig-743"></a>
Usually, the <samp><span class="file">config</span></samp> file is found at <samp><span class="file">$CVSROOT/CVSROOT/config</span></samp>,
but this may be overridden on the <code>pserver</code> and <code>server</code> command
lines (see <a href="#server-_0026-pserver">server &amp; pserver</a>).

   <p>The administrative file <samp><span class="file">config</span></samp> contains various
miscellaneous settings which affect the behavior of
<span class="sc">cvs</span>.  The syntax is slightly different from the
other administrative files.

   <p>Leading white space on any line is ignored, though the syntax is very strict
and will reject spaces and tabs almost anywhere else.

   <p>Empty lines, lines containing nothing but white space, and lines which start
with &lsquo;<samp><span class="samp">#</span></samp>&rsquo; (discounting any leading white space) are ignored.

<!-- FIXME: where do we define comments for the other -->
<!-- administrative files. -->
   <p>Other lines consist of the optional leading white space, a keyword, &lsquo;<samp><span class="samp">=</span></samp>&rsquo;,
and a value.  Please note again that this syntax is very strict. 
Extraneous spaces or tabs, other than the leading white space, are not
permitted on these lines. 
<!-- See comments in parseinfo.c:parse_config for more -->
<!-- discussion of this strictness. -->

   <p>As of CVS 1.12.13, lines of the form &lsquo;<samp><span class="samp">[</span><var>CVSROOT</var><span class="samp">]</span></samp>&rsquo; mark the subsequent
section of the config file as applying only to certain repositories.  Multiple
&lsquo;<samp><span class="samp">[</span><var>CVSROOT</var><span class="samp">]</span></samp>&rsquo; lines without intervening
&lsquo;<samp><var>KEYWORD</var><span class="samp">=</span><var>VALUE</var></samp>&rsquo; pairs cause processing to fall through,
processing subsequent keywords for any root in the list.  Finally, keywords
and values which appear before any &lsquo;<samp><span class="samp">[</span><var>CVSROOT</var><span class="samp">]</span></samp>&rsquo; lines are defaults,
and may to apply to any repository.  For example, consider the following file:

<pre class="example">     # Defaults
     LogHistory=TMAR
     
     [/cvsroots/team1]
       LockDir=/locks/team1
     
     [/cvsroots/team2]
       LockDir=/locks/team2
     
     [/cvsroots/team3]
       LockDir=/locks/team3
     
     [/cvsroots/team4]
       LockDir=/locks/team4
     
     [/cvsroots/team3]
     [/cvsroots/team4]
       # Override logged commands for teams 3 &amp; 4.
       LogHistory=all
</pre>
   <p>This example file sets up separate lock directories for each project, as well
as a default set of logged commands overridden for the example's team 3 &amp;
team 4. This syntax could be useful, for instance, if you wished to share a
single config file, for instance <samp><span class="file">/etc/cvs.conf</span></samp>, among several
repositories.

   <p>Currently defined keywords are:

     
<a name="index-HistoryLogPath_002c-in-CVSROOT_002fconfig-744"></a>
<dl><dt><code>HistorySearchPath=</code><var>pattern</var><dd>Request that <span class="sc">cvs</span> look for its history information in files matching
<var>pattern</var>, which is a standard UNIX file glob.  If <var>pattern</var> matches
multiple files, all will be searched in lexicographically sorted order. 
See <a href="#history">history</a>, and <a href="#history-file">history file</a>, for more.

     <p>If no value is supplied for this option, it defaults to
<samp><span class="file">$CVSROOT/CVSROOT/history</span></samp>.

     <p><a name="index-HistorySearchPath_002c-in-CVSROOT_002fconfig-745"></a><br><dt><code>HistoryLogPath=</code><var>path</var><dd>Control where <span class="sc">cvs</span> logs its history.  If the file does not exist, <span class="sc">cvs</span>
will attempt to create it.  Format strings, as available to the GNU C
<code>strftime</code> function and often the UNIX date command, and the string
<var>$CVSROOT</var> will be substituted in this path.  For example, consider the
line:

     <pre class="example">          HistoryLogPath=$CVSROOT/CVSROOT/history/%Y-%m-%d
</pre>
     <p>This line would cause <span class="sc">cvs</span> to attempt to create its history file in a
subdirectory (<samp><span class="file">history</span></samp>) of the configuration directory (<samp><span class="file">CVSROOT</span></samp>)
with a name equal to the current date representation in the ISO8601 format (for
example, on May 11, 2005, <span class="sc">cvs</span> would attempt to log its history under the
repository root directory in a file named <samp><span class="file">CVSROOT/history/2005-05-11</span></samp>). 
See <a href="#history">history</a>, and <a href="#history-file">history file</a>, for more.

     <p>If no value is supplied for this option, it defaults to
<samp><span class="file">$CVSROOT/CVSROOT/history</span></samp>.

     <p><a name="index-ImportNewFilesToVendorBranchOnly_002c-in-CVSROOT_002fconfig-746"></a><a name="index-import_002c-config-admin-file-747"></a><a name="index-config-_0028admin-file_0029_002c-import-748"></a><br><dt><code>ImportNewFilesToVendorBranchOnly=</code><var>value</var><dd>Specify whether <code>cvs import</code> should always behave as if the
&lsquo;<samp><span class="samp">-X</span></samp>&rsquo; flag was specified on the command line. 
<var>value</var> may be either &lsquo;<samp><span class="samp">yes</span></samp>&rsquo; or &lsquo;<samp><span class="samp">no</span></samp>&rsquo;.  If set to &lsquo;<samp><span class="samp">yes</span></samp>&rsquo;,
all uses of <code>cvs import</code> on the repository will behave as if the
&lsquo;<samp><span class="samp">-X</span></samp>&rsquo; flag was set.  The default value is &lsquo;<samp><span class="samp">no</span></samp>&rsquo;.

     <p><a name="index-KeywordExpand_002c-in-CVSROOT_002fconfig-749"></a><br><dt><code>KeywordExpand=</code><var>value</var><dd>Specify &lsquo;<samp><span class="samp">i</span></samp>&rsquo; followed by a list of keywords to be expanded
(for example, &lsquo;<samp><span class="samp">KeywordExpand=iMYCVS,Name,Date,Mdocdate</span></samp>&rsquo;),
or &lsquo;<samp><span class="samp">e</span></samp>&rsquo; followed by a list of keywords not to be expanded
(for example, &lsquo;<samp><span class="samp">KeywordExpand=eCVSHeader</span></samp>&rsquo;). 
For more on keyword expansion, see <a href="#Configuring-keyword-expansion">Configuring keyword expansion</a>.

     <p><a name="index-LocalKeyword_002c-in-CVSROOT_002fconfig-750"></a><br><dt><code>LocalKeyword=</code><var>value</var><dd>Specify a local alias for a standard keyword. 
For example, &lsquo;<samp><span class="samp">LocalKeyword=MYCVS=CVSHeader</span></samp>&rsquo;. 
For more on local keywords, see <a href="#Keyword-substitution">Keyword substitution</a>.

     <p><a name="index-LockDir_002c-in-CVSROOT_002fconfig-751"></a><br><dt><code>LockDir=</code><var>directory</var><dd>Put <span class="sc">cvs</span> lock files in <var>directory</var> rather than
directly in the repository.  This is useful if you want
to let users read from the repository while giving them
write access only to <var>directory</var>, not to the
repository. 
It can also be used to put the locks on a very fast
in-memory file system to speed up locking and unlocking
the repository. 
You need to create <var>directory</var>, but
<span class="sc">cvs</span> will create subdirectories of <var>directory</var> as it
needs them.  For information on <span class="sc">cvs</span> locks, see
<a href="#Concurrency">Concurrency</a>.

     <!-- Mention this in Compatibility section? -->
     <p>Before enabling the LockDir option, make sure that you
have tracked down and removed any copies of <span class="sc">cvs</span> 1.9 or
older.  Such versions neither support LockDir, nor will
give an error indicating that they don't support it. 
The result, if this is allowed to happen, is that some
<span class="sc">cvs</span> users will put the locks one place, and others will
put them another place, and therefore the repository
could become corrupted.  <span class="sc">cvs</span> 1.10 does not support
LockDir but it will print a warning if run on a
repository with LockDir enabled.

     <p><a name="index-LogHistory_002c-in-CVSROOT_002fconfig-752"></a><br><dt><code>LogHistory=</code><var>value</var><dd>Control what is logged to the <samp><span class="file">CVSROOT/history</span></samp> file (see <a href="#history">history</a>). 
Default of &lsquo;<samp><span class="samp">TOEFWUPCGMAR</span></samp>&rsquo; (or simply &lsquo;<samp><span class="samp">all</span></samp>&rsquo;) will log
all transactions.  Any subset of the default is
legal.  (For example, to only log transactions that modify the
<samp><span class="file">*,v</span></samp> files, use &lsquo;<samp><span class="samp">LogHistory=TMAR</span></samp>&rsquo;.)  To disable history logging
completely, use &lsquo;<samp><span class="samp">LogHistory=</span></samp>&rsquo;.

     <p><a name="index-MaxCommentLeaderLength_002c-in-CVSROOT_002fconfig-753"></a><a name="index-Log-keyword_002c-configuring-substitution-behavior-754"></a><br><dt><code>MaxCommentLeaderLength=</code><var>length</var><dd>Set to some length, in bytes, where a trailing &lsquo;<samp><span class="samp">k</span></samp>&rsquo;, &lsquo;<samp><span class="samp">M</span></samp>&rsquo;, &lsquo;<samp><span class="samp">G</span></samp>&rsquo;,
or &lsquo;<samp><span class="samp">T</span></samp>&rsquo; causes the preceding nubmer to be interpreted as kilobytes,
megabytes, gigabytes, or terrabytes, respectively, will cause
<code>$</code><code>Log$</code> keywords (see <a href="#Keyword-substitution">Keyword substitution</a>), with
more than <var>length</var> bytes preceding it on a line to be ignored (or to fall
back on the comment leader set in the RCS archive file - see
<code>UseArchiveCommentLeader</code> below).  Defaults to 20 bytes to allow checkouts
to proceed normally when they include binary files containing
<code>$</code><code>Log$</code> keywords and which users have neglected to mark
as binary.

     <p><a name="index-MinCompressionLevel_002c-in-CVSROOT_002fconfig-755"></a><a name="index-MaxCompressionLevel_002c-in-CVSROOT_002fconfig-756"></a><a name="index-Compression-levels_002c-restricting-on-server-757"></a><br><dt><code>MinCompressionLevel=</code><var>value</var><dt><code>MaxCompressionLevel=</code><var>value</var><dd>Restricts the level of compression used by the <span class="sc">cvs</span> server to a <var>value</var>
between 0 and 9.  <var>value</var>s 1 through 9 are the same <span class="sc">zlib</span> compression
levels accepted by the &lsquo;<samp><span class="samp">-z</span></samp>&rsquo; option (see <a href="#Global-options">Global options</a>), and 0 means
no compression.  When one or both of these keys are set and a client requests a
level outside the specified range, the server will simply use the closest
permissable level.  Clients will continue compressing at the level requested by
the user.

     <p>The exception is when level 0 (no compression) is not available and the client
fails to request any compression.  The <span class="sc">cvs</span> server will then exit with an
error message when it becomes apparent that the client is not going to request
compression.  This will not happen with clients version 1.12.13 and later since
these client versions allow the server to notify them that they must request
some level of compression.

     <p><a name="index-PrimaryServer_002c-in-CVSROOT_002fconfig-758"></a><a name="index-Primary-server-759"></a><a name="index-Secondary-server-760"></a><a name="index-proxy_002c-write-761"></a><a name="index-write-proxy-762"></a><br><dt><code>PrimaryServer=</code><var>CVSROOT</var><dd>When specified, and the repository specified by <var>CVSROOT</var> is not the one
currently being accessed, then the server will turn itself into a transparent
proxy to <var>CVSROOT</var> for write requests.  The <var>hostname</var> configured as
part of <var>CVSROOT</var> must resolve to the same string returned by the
<samp><span class="command">uname</span></samp> command on the primary server for this to work.  Host name
resolution is performed via some combination of <samp><span class="command">named</span></samp>, a broken out
line from <samp><span class="file">/etc/hosts</span></samp>, and the Network Information Service (NIS or YP),
depending on the configuration of the particular system.

     <p>Only the &lsquo;<samp><span class="samp">:ext:</span></samp>&rsquo; method is
currently supported for primaries (actually, &lsquo;<samp><span class="samp">:fork:</span></samp>&rsquo; is supported as
well, but only for testing - if you find another use for accessing a primary
via the &lsquo;<samp><span class="samp">:fork:</span></samp>&rsquo; method, please send a note to <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a>
about it).  See <a href="#Write-proxies">Write proxies</a> for more on configuring and using write
proxies.

     <p><a name="index-RCSBIN_002c-in-CVSROOT_002fconfig-763"></a><br><dt><code>RCSBIN=</code><var>bindir</var><dd>For <span class="sc">cvs</span> 1.9.12 through 1.9.18, this setting told
<span class="sc">cvs</span> to look for <span class="sc">rcs</span> programs in the
<var>bindir</var> directory.  Current versions of <span class="sc">cvs</span>
do not run <span class="sc">rcs</span> programs; for compatibility this
setting is accepted, but it does nothing.

     <p><a name="index-RereadLogAfterVerify_002c-in-CVSROOT_002fconfig-764"></a><a name="index-g_t_0040file_007bverifymsg_007d_002c-changing-the-log-message-765"></a><br><dt><code>RereadLogAfterVerify=</code><var>value</var><dd>Modify the &lsquo;<samp><span class="samp">commit</span></samp>&rsquo; command such that CVS will reread the
log message after running the program specified by <samp><span class="file">verifymsg</span></samp>. 
<var>value</var> may be one of &lsquo;<samp><span class="samp">yes</span></samp>&rsquo; or &lsquo;<samp><span class="samp">always</span></samp>&rsquo;, indicating that
the log message should always be reread; &lsquo;<samp><span class="samp">no</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">never</span></samp>&rsquo;, indicating that it should never be
reread; or <var>value</var> may be &lsquo;<samp><span class="samp">stat</span></samp>&rsquo;, indicating
that the file should be checked with the file system
&lsquo;<samp><span class="samp">stat()</span></samp>&rsquo; function to see if it has changed (see warning below)
before rereading.  The default value is &lsquo;<samp><span class="samp">always</span></samp>&rsquo;.

     <p><em>Note: the `stat' mode can cause CVS to pause for up to
one extra second per directory committed.  This can be less IO and
CPU intensive but is not recommended for use with large repositories</em>

     <p>See <a href="#verifymsg">verifymsg</a>, for more information on how verifymsg
may be used.

     <p><a name="index-SystemAuth_002c-in-CVSROOT_002fconfig-766"></a><br><dt><code>SystemAuth=</code><var>value</var><dd>If <var>value</var> is &lsquo;<samp><span class="samp">yes</span></samp>&rsquo;, then pserver should check
for users in the system's user database if not found in
<samp><span class="file">CVSROOT/passwd</span></samp>.  If it is &lsquo;<samp><span class="samp">no</span></samp>&rsquo;, then all
pserver users must exist in <samp><span class="file">CVSROOT/passwd</span></samp>. 
The default is &lsquo;<samp><span class="samp">yes</span></samp>&rsquo;.  For more on pserver, see
<a href="#Password-authenticated">Password authenticated</a>.

     <p><a name="index-TmpDir_002c-in-config-767"></a><a name="index-temporary-files_002c-location-of-768"></a><a name="index-temporary-directory_002c-set-in-config-769"></a><br><dt><code>TmpDir=</code><var>path</var><dd>Specify <var>path</var> as the directory to create temporary files in. 
See <a href="#Global-options">Global options</a>, for more on setting the path to the temporary
directory.  This option first appeared with <span class="sc">cvs</span> release 1.12.13.

     <p><a name="index-TopLevelAdmin_002c-in-CVSROOT_002fconfig-770"></a><br><dt><code>TopLevelAdmin=</code><var>value</var><dd>Modify the &lsquo;<samp><span class="samp">checkout</span></samp>&rsquo; command to create a
&lsquo;<samp><span class="samp">CVS</span></samp>&rsquo; directory at the top level of the new
working directory, in addition to &lsquo;<samp><span class="samp">CVS</span></samp>&rsquo;
directories created within checked-out directories. 
The default value is &lsquo;<samp><span class="samp">no</span></samp>&rsquo;.

     <p>This option is useful if you find yourself performing
many commands at the top level of your working
directory, rather than in one of the checked out
subdirectories.  The <samp><span class="file">CVS</span></samp> directory created there
will mean you don't have to specify <code>CVSROOT</code> for
each command.  It also provides a place for the
<samp><span class="file">CVS/Template</span></samp> file (see <a href="#Working-directory-storage">Working directory storage</a>).

     <p><a name="index-UseArchiveCommentLeader_002c-in-CVSROOT_002fconfig-771"></a><a name="index-Log-keyword_002c-configuring-substitution-behavior-772"></a><br><dt><code>UseArchiveCommentLeader=</code><var>value</var><dd>Set to <code>true</code>, if the text preceding a <code>$</code><code>Log$</code>
keyword is found to exceed <code>MaxCommentLeaderLength</code> (above) bytes, then
the comment leader set in the RCS archive file (see <a href="#admin">admin</a>), if any, will
be used instead.  If there is no comment leader set in the archive file or
<var>value</var> is set to &lsquo;<samp><span class="samp">false</span></samp>&rsquo;, then the keyword will not be expanded
(see <a href="#Keyword-list">Keyword list</a>).  To force the comment leader in the RCS archive file to
be used exclusively (and <code>$</code><code>Log$</code> expansion skipped in
files where the comment leader has not been set in the archive file), set
<var>value</var> and set <code>MaxCommentLeaderLength</code> to <code>0</code>.

     <p><a name="index-UseNewInfoFmtStrings_002c-in-CVSROOT_002fconfig-773"></a><a name="index-format-strings_002c-config-admin-file-774"></a><a name="index-config-_0028admin-file_0029_002c-updating-legacy-repositories-775"></a><a name="index-compatibility-notes_002c-config-admin-file-776"></a><br><dt><code>UseNewInfoFmtStrings=</code><var>value</var><dd>Specify whether <span class="sc">cvs</span> should support the new or old command line
template model for the commit support files (see <a href="#commit-files">commit files</a>). 
This configuration variable began life in deprecation and is only here
in order to give people time to update legacy repositories to use the new
format string syntax before support for the old syntax is removed.  For
information on updating your repository to support the new model,
please see <a href="#Updating-Commit-Files">Updating Commit Files</a>.

     <p><em>Note that new repositories (created with the </em><code>cvs init</code><em> command)
will have this value set to &lsquo;</em><samp><span class="samp">yes</span></samp><em>&rsquo;, but the default value is &lsquo;</em><samp><span class="samp">no</span></samp><em>&rsquo;.</em>

     <p><a name="index-UserAdminOptions_002c-in-CVSROOT_002fconfig-777"></a><br><dt><code>UserAdminOptions=</code><var>value</var><dd>Control what options will be allowed with the <code>cvs admin</code>
command (see <a href="#admin">admin</a>) for users not in the <code>cvsadmin</code> group. 
The <var>value</var> string is a list of single character options
which should be allowed.  If a user who is not a member of the
<code>cvsadmin</code> group tries to execute any <code>cvs admin</code>
option which is not listed they will will receive an error message
reporting that the option is restricted.

     <p>If no <code>cvsadmin</code> group exists on the server, <span class="sc">cvs</span> will
ignore the <code>UserAdminOptions</code> keyword (see <a href="#admin">admin</a>).

     <p>When not specified, <code>UserAdminOptions</code> defaults to
&lsquo;<samp><span class="samp">k</span></samp>&rsquo;.  In other words, it defaults to allowing
users outside of the <code>cvsadmin</code> group to use the
<code>cvs admin</code> command only to change the default keyword
expansion mode for files.

     <p>As an example, to restrict users not in the <code>cvsadmin</code>
group to using <code>cvs admin</code> to change the default keyword
substitution mode, lock revisions, unlock revisions, and
replace the log message, use &lsquo;<samp><span class="samp">UserAdminOptions=klum</span></samp>&rsquo;. 
</dl>

<!--  -->
<div class="node">
<a name="Environment-variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Compatibility">Compatibility</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Administrative-files">Administrative files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix D All environment variables which affect CVS</h2>

<p><a name="index-Environment-variables-778"></a><a name="index-Reference-manual-for-variables-779"></a>
This is a complete list of all environment variables
that affect <span class="sc">cvs</span> (Windows users, please bear with this list;
$VAR is equivalent to %VAR% at the Windows command prompt).

     
<a name="index-CVSIGNORE_002c-environment-variable-780"></a>
<dl><dt><code>$CVSIGNORE</code><dd>A whitespace-separated list of file name patterns that
<span class="sc">cvs</span> should ignore. See <a href="#cvsignore">cvsignore</a>.

     <p><a name="index-CVSWRAPPERS_002c-environment-variable-781"></a><br><dt><code>$CVSWRAPPERS</code><dd>A whitespace-separated list of file name patterns that
<span class="sc">cvs</span> should treat as wrappers. See <a href="#Wrappers">Wrappers</a>.

     <p><a name="index-CVSREAD_002c-environment-variable-782"></a><a name="index-Read_002donly-files_002c-and-CVSREAD-783"></a><br><dt><code>$CVSREAD</code><dd>If this is set, <code>checkout</code> and <code>update</code> will
try hard to make the files in your working directory
read-only.  When this is not set, the default behavior
is to permit modification of your working files.

     <p><a name="index-CVSREADONLYFS_002c-environment-variable-784"></a><br><dt><code>$CVSREADONLYFS</code><dd>Turns on read-only repository mode. This allows one to
check out from a read-only repository, such as within
an anoncvs server, or from a <span class="sc">cd-rom</span> repository.

     <p>It has the same effect as if the &lsquo;<samp><span class="samp">-R</span></samp>&rsquo; command-line
option is used. This can also allow the use of
read-only NFS repositories.

     <br><dt><code>$CVSUMASK</code><dd>Controls permissions of files in the repository.  See
<a href="#File-permissions">File permissions</a>.

     <br><dt><code>$CVSROOT</code><dd>Should contain the full pathname to the root of the <span class="sc">cvs</span>
source repository (where the <span class="sc">rcs</span> files are
kept).  This information must be available to <span class="sc">cvs</span> for
most commands to execute; if <code>$CVSROOT</code> is not set,
or if you wish to override it for one invocation, you
can supply it on the command line: &lsquo;<samp><span class="samp">cvs -d cvsroot
cvs_command...</span></samp>&rsquo; Once you have checked out a working
directory, <span class="sc">cvs</span> stores the appropriate root (in
the file <samp><span class="file">CVS/Root</span></samp>), so normally you only need to
worry about this when initially checking out a working
directory.

     <br><dt><code>$CVSEDITOR</code><dd><a name="index-CVSEDITOR_002c-environment-variable-785"></a><dt><code>$EDITOR</code><dd><a name="index-EDITOR_002c-environment-variable-786"></a><dt><code>$VISUAL</code><dd><a name="index-VISUAL_002c-environment-variable-787"></a>Specifies the program to use for recording log messages
during commit.  <code>$CVSEDITOR</code> overrides
<code>$EDITOR</code>, which overrides <code>$VISUAL</code>. 
See <a href="#Committing-your-changes">Committing your changes</a> for more or
<a href="#Global-options">Global options</a> for alternative ways of specifying a
log editor.

     <p><a name="index-PATH_002c-environment-variable-788"></a><br><dt><code>$PATH</code><dd>If <code>$RCSBIN</code> is not set, and no path is compiled
into <span class="sc">cvs</span>, it will use <code>$PATH</code> to try to find all
programs it uses.

     <p><a name="index-HOME_002c-environment-variable-789"></a><br><dt><code>$HOME</code><dd><a name="index-HOMEPATH_002c-environment-variable-790"></a><br><dt><code>$HOMEPATH</code><dd><a name="index-HOMEDRIVE_002c-environment-variable-791"></a><br><dt><code>$HOMEDRIVE</code><dd>Used to locate the directory where the <samp><span class="file">.cvsrc</span></samp>
file, and other such files, are searched.  On Unix, <span class="sc">cvs</span>
just checks for <code>HOME</code>.  On Windows NT, the system will
set <code>HOMEDRIVE</code>, for example to &lsquo;<samp><span class="samp">d:</span></samp>&rsquo; and <code>HOMEPATH</code>,
for example to <samp><span class="file">\joe</span></samp>.  On Windows 95, you'll
probably need to set <code>HOMEDRIVE</code> and <code>HOMEPATH</code> yourself. 
<!-- We are being vague about whether HOME works on -->
<!-- Windows; see long comment in windows-NT/filesubr.c. -->

     <p><a name="index-CVS_005fRSH_002c-environment-variable-792"></a><br><dt><code>$CVS_RSH</code><dd>Specifies the external program which <span class="sc">cvs</span> connects with,
when <code>:ext:</code> access method is specified. 
see <a href="#Connecting-via-rsh">Connecting via rsh</a>.

     <br><dt><code>$CVS_SERVER</code><dd>Used in client-server mode when accessing a remote
repository using <span class="sc">rsh</span>.  It specifies the name of
the program to start on the server side (and any
necessary arguments) when accessing a remote repository
using the <code>:ext:</code>, <code>:fork:</code>, or <code>:server:</code> access methods. 
The default value for <code>:ext:</code> and <code>:server:</code> is <code>cvs</code>;
the default value for <code>:fork:</code> is the name used to run the client. 
see <a href="#Connecting-via-rsh">Connecting via rsh</a>

     <br><dt><code>$CVS_PASSFILE</code><dd>Used in client-server mode when accessing the <code>cvs
login server</code>.  Default value is <samp><span class="file">$HOME/.cvspass</span></samp>. 
see <a href="#Password-authentication-client">Password authentication client</a>

     <p><a name="index-CVS_005fCLIENT_005fPORT-793"></a><br><dt><code>$CVS_CLIENT_PORT</code><dd>Used in client-server mode to set the port to use when accessing the server
via Kerberos, GSSAPI, or <span class="sc">cvs</span>'s password authentication protocol
if the port is not specified in the CVSROOT. 
see <a href="#Remote-repositories">Remote repositories</a>

     <p><a name="index-CVS_005fPROXY_005fPORT-794"></a><br><dt><code>$CVS_PROXY_PORT</code><dd>Used in client-server mode to set the port to use when accessing a server
via a web proxy, if the port is not specified in the CVSROOT.  Works with
GSSAPI, and the password authentication protocol. 
see <a href="#Remote-repositories">Remote repositories</a>

     <p><a name="index-CVS_005fRCMD_005fPORT_002c-environment-variable-795"></a><br><dt><code>$CVS_RCMD_PORT</code><dd>Used in client-server mode.  If set, specifies the port
number to be used when accessing the <span class="sc">rcmd</span> demon on
the server side. (Currently not used for Unix clients).

     <p><a name="index-CVS_005fCLIENT_005fLOG_002c-environment-variable-796"></a><br><dt><code>$CVS_CLIENT_LOG</code><dd>Used for debugging only in client-server
mode.  If set, everything sent to the server is logged
into <samp><code>$CVS_CLIENT_LOG</code><span class="file">.in</span></samp> and everything
sent from the server is logged into
<samp><code>$CVS_CLIENT_LOG</code><span class="file">.out</span></samp>.

     <p><a name="index-CVS_005fSERVER_005fSLEEP_002c-environment-variable-797"></a><br><dt><code>$CVS_SERVER_SLEEP</code><dd>Used only for debugging the server side in
client-server mode.  If set, delays the start of the
server child process the specified amount of
seconds so that you can attach to it with a debugger.

     <p><a name="index-CVS_005fIGNORE_005fREMOTE_005fROOT_002c-environment-variable-798"></a><br><dt><code>$CVS_IGNORE_REMOTE_ROOT</code><dd>For <span class="sc">cvs</span> 1.10 and older, setting this variable
prevents <span class="sc">cvs</span> from overwriting the <samp><span class="file">CVS/Root</span></samp>
file when the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo; global option is specified. 
Later versions of <span class="sc">cvs</span> do not rewrite
<samp><span class="file">CVS/Root</span></samp>, so <code>CVS_IGNORE_REMOTE_ROOT</code> has no
effect.

     <p><a name="index-CVS_005fLOCAL_005fBRANCH_005fNUM_002c-environment-variable-799"></a><br><dt><code>$CVS_LOCAL_BRANCH_NUM</code><dd>Setting this variable allows some control over the
branch number that is assigned. This is specifically to
support the local commit feature of CVSup. If one sets
<code>CVS_LOCAL_BRANCH_NUM</code> to (say) 1000 then branches
the local repository, the revision numbers will look
like 1.66.1000.xx. There is almost a dead-set certainty
that there will be no conflicts with version numbers.

     <p><a name="index-COMSPEC_002c-environment-variable-800"></a><br><dt><code>$COMSPEC</code><dd>Used under OS/2 only.  It specifies the name of the
command interpreter and defaults to <span class="sc">cmd.exe</span>.

     <p><a name="index-TMPDIR_002c-environment-variable-801"></a><a name="index-temporary-file-directory_002c-set-via-environment-variable-802"></a><a name="index-temporary-files_002c-location-of-803"></a><br><dt><code>$TMPDIR</code><dd>Directory in which temporary files are located. 
See <a href="#Global-options">Global options</a>, for more on setting the temporary directory.

     <p><a name="index-CVS_005fPID_002c-environment-variable-804"></a><br><dt><code>$CVS_PID</code><dd>This is the process identification (aka pid) number of
the <span class="sc">cvs</span> process. It is often useful in the
programs and/or scripts specified by the
<samp><span class="file">commitinfo</span></samp>, <samp><span class="file">verifymsg</span></samp>, <samp><span class="file">loginfo</span></samp>
files. 
</dl>

<div class="node">
<a name="Compatibility"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Troubleshooting">Troubleshooting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Environment-variables">Environment variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix E Compatibility between CVS Versions</h2>

<p><a name="index-CVS_002c-versions-of-805"></a><a name="index-Versions_002c-of-CVS-806"></a><a name="index-Compatibility_002c-between-CVS-versions-807"></a><!-- We don't mention versions older than CVS 1.3 -->
<!-- on the theory that it would clutter it up for the vast -->
<!-- majority of people, who don't have anything that old. -->
The repository format is compatible going back to
<span class="sc">cvs</span> 1.3.  But see <a href="#Watches-Compatibility">Watches Compatibility</a>, if
you have copies of <span class="sc">cvs</span> 1.6 or older and you want
to use the optional developer communication features. 
<!-- If you "cvs rm" and commit using 1.3, then you'll -->
<!-- want to run "rcs -sdead <file,v>" on each of the -->
<!-- files in the Attic if you then want 1.5 and -->
<!-- later to recognize those files as dead (I think the -->
<!-- symptom if this is not done is that files reappear -->
<!-- in joins).  (Wait: the above will work but really to -->
<!-- be strictly correct we should suggest checking -->
<!-- in a new revision rather than just changing the -->
<!-- state of the head revision, shouldn't we?). -->
<!-- The old convert.sh script was for this, but it never -->
<!-- did get updated to reflect use of the RCS "dead" -->
<!-- state. -->
<!-- Note: this is tricky to document without confusing -->
<!-- people-need to carefully say what CVS version we -->
<!-- are talking about and keep in mind the distinction -->
<!-- between a -->
<!-- repository created with 1.3 and on which one now -->
<!-- uses 1.5+, and a repository on which one wants to -->
<!-- use both versions side by side (e.g. during a -->
<!-- transition period). -->
<!-- Wait, can't CVS just detect the case in which a file -->
<!-- is in the Attic but the head revision is not dead? -->
<!-- Not sure whether this should produce a warning or -->
<!-- something, and probably needs further thought, but -->
<!-- it would appear that the situation can be detected. -->
<!-- We might want to separate out the 1.3 compatibility -->
<!-- section (for repository & working directory) from the -->
<!-- rest-that might help avoid confusing people who -->
<!-- are upgrading (for example) from 1.6 to 1.8. -->
<!-- A minor incompatibility is if a current version of CVS -->
<!-- puts "Nfoo" into CVS/Tag, then CVS 1.9 or older will -->
<!-- see this as if there is no tag.  Seems to me this is -->
<!-- too obscure to mention. -->

   <p>The working directory format is compatible going back
to <span class="sc">cvs</span> 1.5.  It did change between <span class="sc">cvs</span> 1.3
and <span class="sc">cvs</span> 1.5.  If you run <span class="sc">cvs</span> 1.5 or newer on
a working directory checked out with <span class="sc">cvs</span> 1.3,
<span class="sc">cvs</span> will convert it, but to go back to <span class="sc">cvs</span>
1.3 you need to check out a new working directory with
<span class="sc">cvs</span> 1.3.

   <p>The remote protocol is interoperable going back to <span class="sc">cvs</span> 1.5, but no
further (1.5 was the first official release with the remote protocol,
but some older versions might still be floating around).  In many
cases you need to upgrade both the client and the server to take
advantage of new features and bug fixes, however.

<!-- Perhaps should be saying something here about the -->
<!-- "D" lines in Entries (written by CVS 1.9; 1.8 and -->
<!-- older don't use them).  These are supposed to be -->
<!-- compatible in both directions, but I'm not sure -->
<!-- they quite are 100%.  One common gripe is if you -->
<!-- "rm -r" a directory and 1.9 gets confused, as it -->
<!-- still sees it in Entries.  That one is fixed in -->
<!-- (say) 1.9.6.  Someone else reported problems with -->
<!-- starting with a directory which was checked out with -->
<!-- an old version, and then using a new version, and -->
<!-- some "D" lines appeared, but not for every -->
<!-- directory, causing some directories to be skipped. -->
<!-- They weren't sure how to reproduce this, though. -->
<!--  -->
<div class="node">
<a name="Troubleshooting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Credits">Credits</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compatibility">Compatibility</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix F Troubleshooting</h2>

<p>If you are having trouble with <span class="sc">cvs</span>, this appendix
may help.  If there is a particular error message which
you are seeing, then you can look up the message
alphabetically.  If not, you can look through the
section on other problems to see if your problem is
mentioned there.

<ul class="menu">
<li><a accesskey="1" href="#Error-messages">Error messages</a>:               Partial list of CVS errors
<li><a accesskey="2" href="#Connection">Connection</a>:                   Trouble making a connection to a CVS server
<li><a accesskey="3" href="#Other-problems">Other problems</a>:               Problems not readily listed by error message
</ul>

<div class="node">
<a name="Error-messages"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Connection">Connection</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Troubleshooting">Troubleshooting</a>

</div>

<h3 class="appendixsec">F.1 Partial list of error messages</h3>

<p>Here is a partial list of error messages that you may
see from <span class="sc">cvs</span>.  It is not a complete list&mdash;<span class="sc">cvs</span>
is capable of printing many, many error messages, often
with parts of them supplied by the operating system,
but the intention is to list the common and/or
potentially confusing error messages.

   <p>The messages are alphabetical, but introductory text
such as &lsquo;<samp><span class="samp">cvs update: </span></samp>&rsquo; is not considered in
ordering them.

   <p>In some cases the list includes messages printed by old
versions of <span class="sc">cvs</span> (partly because users may not be
sure which version of <span class="sc">cvs</span> they are using at any
particular moment). 
<!-- If we want to start retiring messages, perhaps we -->
<!-- should pick a cutoff version (for example, no more -->
<!-- messages which are specific to versions before 1.9) -->
<!-- and then move the old messages to an "old messages" -->
<!-- node rather than deleting them completely. -->

     <dl>
<!-- FIXME: What is the correct way to format a multiline -->
<!-- error message here?  Maybe @table is the wrong -->
<!-- choice?  Texinfo gurus? -->
<dt><var>file</var><code>:</code><var>line</var><code>: Assertion '</code><var>text</var><code>' failed</code><dd>The exact format of this message may vary depending on
your system.  It indicates a bug in <span class="sc">cvs</span>, which can
be handled as described in <a href="#BUGS">BUGS</a>.

     <br><dt><code>cvs </code><var>command</var><code>: authorization failed: server </code><var>host</var><code> rejected access</code><dd>This is a generic response when trying to connect to a
pserver server which chooses not to provide a
specific reason for denying authorization.  Check that
the username and password specified are correct and
that the <code>CVSROOT</code> specified is allowed by &lsquo;<samp><span class="samp">--allow-root</span></samp>&rsquo;
in <samp><span class="file">inetd.conf</span></samp>.  See <a href="#Password-authenticated">Password authenticated</a>.

     <br><dt><code>cvs </code><var>command</var><code>: conflict: removed </code><var>file</var><code> was modified by second party</code><dd>This message indicates that you removed a file, and
someone else modified it.  To resolve the conflict,
first run &lsquo;<samp><span class="samp">cvs add </span><var>file</var></samp>&rsquo;.  If desired, look
at the other party's modification to decide whether you
still want to remove it.  If you don't want to remove
it, stop here.  If you do want to remove it, proceed
with &lsquo;<samp><span class="samp">cvs remove </span><var>file</var></samp>&rsquo; and commit your
removal. 
<!-- Tests conflicts2-142b* in sanity.sh test for this. -->

     <br><dt><code>cannot change permissions on temporary directory</code><dd>
     <pre class="example">          Operation not permitted
</pre>
     <p>This message has been happening in a non-reproducible,
occasional way when we run the client/server testsuite,
both on Red Hat Linux 3.0.3 and 4.1.  We haven't been
able to figure out what causes it, nor is it known
whether it is specific to Linux (or even to this
particular machine!).  If the problem does occur on
other unices, &lsquo;<samp><span class="samp">Operation not permitted</span></samp>&rsquo; would be
likely to read &lsquo;<samp><span class="samp">Not owner</span></samp>&rsquo; or whatever the system
in question uses for the unix <code>EPERM</code> error.  If
you have any information to add, please let us know as
described in <a href="#BUGS">BUGS</a>.  If you experience this error
while using <span class="sc">cvs</span>, retrying the operation which
produced it should work fine. 
<!-- This has been seen in a variety of tests, including -->
<!-- multibranch-2, multibranch-5, and basic1-24-rm-rm, -->
<!-- so it doesn't seem particularly specific to any one -->
<!-- test. -->

     <br><dt><code>cvs [server aborted]: Cannot check out files into the repository itself</code><dd>The obvious cause for this message (especially for
non-client/server <span class="sc">cvs</span>) is that the <span class="sc">cvs</span> root
is, for example, <samp><span class="file">/usr/local/cvsroot</span></samp> and you try
to check out files when you are in a subdirectory, such
as <samp><span class="file">/usr/local/cvsroot/test</span></samp>.  However, there is a
more subtle cause, which is that the temporary
directory on the server is set to a subdirectory of the
root (which is also not allowed).  If this is the
problem, set the temporary directory to somewhere else,
for example <samp><span class="file">/var/tmp</span></samp>; see <code>TMPDIR</code> in
<a href="#Environment-variables">Environment variables</a>, for how to set the
temporary directory.

     <br><dt><code>cannot commit files as 'root'</code><dd>See &lsquo;<samp><span class="samp">'root' is not allowed to commit files</span></samp>&rsquo;.

     <!-- For one example see basica-1a10 in the testsuite -->
     <!-- For another example, "cvs co ." on NT; see comment -->
     <!-- at windows-NT/filesubr.c (expand_wild). -->
     <!-- For another example, "cvs co foo/bar" where foo exists. -->
     <br><dt><code>cannot open CVS/Entries for reading: No such file or directory</code><dd>This generally indicates a <span class="sc">cvs</span> internal error, and
can be handled as with other <span class="sc">cvs</span> bugs
(see <a href="#BUGS">BUGS</a>).  Usually there is a workaround&mdash;the
exact nature of which would depend on the situation but
which hopefully could be figured out.

     <!-- This is more obscure than it might sound; it only -->
     <!-- happens if you run "cvs init" from a directory which -->
     <!-- contains a CVS/Root file at the start. -->
     <br><dt><code>cvs [init aborted]: cannot open CVS/Root: No such file or directory</code><dd>This message is harmless.  Provided it is not
accompanied by other errors, the operation has
completed successfully.  This message should not occur
with current versions of <span class="sc">cvs</span>, but it is documented
here for the benefit of <span class="sc">cvs</span> 1.9 and older.

     <br><dt><code>cvs server: cannot open /root/.cvsignore: Permission denied</code><dt><code>cvs [server aborted]: can't chdir(/root): Permission denied</code><dd>See <a href="#Connection">Connection</a>.

     <br><dt><code>cvs [checkout aborted]: cannot rename file </code><var>file</var><code> to CVS/,,</code><var>file</var><code>: Invalid argument</code><dd>This message has been reported as intermittently
happening with <span class="sc">cvs</span> 1.9 on Solaris 2.5.  The cause is
unknown; if you know more about what causes it, let us
know as described in <a href="#BUGS">BUGS</a>.

     <br><dt><code>cvs [</code><var>command</var><code> aborted]: cannot start server via rcmd</code><dd>This, unfortunately, is a rather nonspecific error
message which <span class="sc">cvs</span> 1.9 will print if you are
running the <span class="sc">cvs</span> client and it is having trouble
connecting to the server.  Current versions of <span class="sc">cvs</span>
should print a much more specific error message.  If
you get this message when you didn't mean to run the
client at all, you probably forgot to specify
<code>:local:</code>, as described in <a href="#Repository">Repository</a>.

     <br><dt><code>ci: </code><var>file</var><code>,v: bad diff output line: Binary files - and /tmp/T2a22651 differ</code><dd><span class="sc">cvs</span> 1.9 and older will print this message
when trying to check in a binary file if
<span class="sc">rcs</span> is not correctly installed.  Re-read the
instructions that came with your <span class="sc">rcs</span> distribution
and the <span class="sc">install</span> file in the <span class="sc">cvs</span>
distribution.  Alternately, upgrade to a current
version of <span class="sc">cvs</span>, which checks in files itself
rather than via <span class="sc">rcs</span>.

     <br><dt><code>cvs checkout: could not check out </code><var>file</var><dd>With <span class="sc">cvs</span> 1.9, this can mean that the <code>co</code> program
(part of <span class="sc">rcs</span>) returned a failure.  It should be
preceded by another error message, however it has been
observed without another error message and the cause is
not well-understood.  With the current version of <span class="sc">cvs</span>,
which does not run <code>co</code>, if this message occurs
without another error message, it is definitely a <span class="sc">cvs</span>
bug (see <a href="#BUGS">BUGS</a>). 
<!-- My current suspicion is that the RCS in the rcs (not -->
<!-- cvs/winnt/rcs57nt.zip) directory on the _Practical_ -->
<!-- CD is bad (remains to be confirmed). -->
<!-- There is also a report of something which looks -->
<!-- very similar on SGI, Irix 5.2, so I dunno. -->

     <br><dt><code>cvs [login aborted]: could not find out home directory</code><dd>This means that you need to set the environment
variables that <span class="sc">cvs</span> uses to locate your home directory. 
See the discussion of <code>HOME</code>, <code>HOMEDRIVE</code>, and <code>HOMEPATH</code> in
<a href="#Environment-variables">Environment variables</a>.

     <br><dt><code>cvs update: could not merge revision </code><var>rev</var><code> of </code><var>file</var><code>: No such file or directory</code><dd><span class="sc">cvs</span> 1.9 and older will print this message if there was
a problem finding the <code>rcsmerge</code> program.  Make
sure that it is in your <code>PATH</code>, or upgrade to a
current version of <span class="sc">cvs</span>, which does not require
an external <code>rcsmerge</code> program.

     <br><dt><code>cvs [update aborted]: could not patch </code><var>file</var><code>: No such file or directory</code><dd>This means that there was a problem finding the
<code>patch</code> program.  Make sure that it is in your
<code>PATH</code>.  Note that despite appearances the message
is <em>not</em> referring to whether it can find <var>file</var>. 
If both the client and the server are running a current
version of <span class="sc">cvs</span>, then there is no need for an
external patch program and you should not see this
message.  But if either client or server is running
<span class="sc">cvs</span> 1.9, then you need <code>patch</code>.

     <br><dt><code>cvs update: could not patch </code><var>file</var><code>; will refetch</code><dd>This means that for whatever reason the client was
unable to apply a patch that the server sent.  The
message is nothing to be concerned about, because
inability to apply the patch only slows things down and
has no effect on what <span class="sc">cvs</span> does. 
<!-- xref to update output.  Or File status? -->
<!-- Or some place else that -->
<!-- explains this whole "patch"/P/Needs Patch thing? -->

     <br><dt><code>dying gasps from </code><var>server</var><code> unexpected</code><dd>There is a known bug in the server for <span class="sc">cvs</span> 1.9.18
and older which can cause this.  For me, this was
reproducible if I used the &lsquo;<samp><span class="samp">-t</span></samp>&rsquo; global option.  It
was fixed by Andy Piper's 14 Nov 1997 change to
src/filesubr.c, if anyone is curious. 
If you see the message,
you probably can just retry the operation which failed,
or if you have discovered information concerning its
cause, please let us know as described in <a href="#BUGS">BUGS</a>.

     <br><dt><code>end of file from server (consult above messages if any)</code><dd>The most common cause for this message is if you are
using an external <code>rsh</code> program and it exited with
an error.  In this case the <code>rsh</code> program should
have printed a message, which will appear before the
above message.  For more information on setting up a
<span class="sc">cvs</span> client and server, see <a href="#Remote-repositories">Remote repositories</a>.

     <br><dt><code>cvs [update aborted]: EOF in key in RCS file </code><var>file</var><code>,v</code><dt><code>cvs [checkout aborted]: EOF while looking for end of string in RCS file </code><var>file</var><code>,v</code><dd>This means that there is a syntax error in the given
<span class="sc">rcs</span> file.  Note that this might be true even if <span class="sc">rcs</span> can
read the file OK; <span class="sc">cvs</span> does more error checking of
errors in the RCS file.  That is why you may see this
message when upgrading from <span class="sc">cvs</span> 1.9 to <span class="sc">cvs</span>
1.10.  The likely cause for the original corruption is
hardware, the operating system, or the like.  Of
course, if you find a case in which <span class="sc">cvs</span> seems to
corrupting the file, by all means report it,
(see <a href="#BUGS">BUGS</a>). 
There are quite a few variations of this error message,
depending on exactly where in the <span class="sc">rcs</span> file <span class="sc">cvs</span>
finds the syntax error.

     <p><a name="index-mkmodules-808"></a><br><dt><code>cvs commit: Executing 'mkmodules'</code><dd>This means that your repository is set up for a version
of <span class="sc">cvs</span> prior to <span class="sc">cvs</span> 1.8.  When using <span class="sc">cvs</span>
1.8 or later, the above message will be preceded by

     <pre class="example">          cvs commit: Rebuilding administrative file database
</pre>
     <p>If you see both messages, the database is being rebuilt
twice, which is unnecessary but harmless.  If you wish
to avoid the duplication, and you have no versions of
<span class="sc">cvs</span> 1.7 or earlier in use, remove <code>-i mkmodules</code>
every place it appears in your <code>modules</code>
file.  For more information on the <code>modules</code> file,
see <a href="#modules">modules</a>.

     <!-- This message comes from "co", and I believe is -->
     <!-- possible only with older versions of CVS which call -->
     <!-- co.  The problem with being able to create the bogus -->
     <!-- RCS file still exists, though (and I think maybe -->
     <!-- there is a different symptom(s) now). -->
     <!-- FIXME: Would be nice to have a more exact wording -->
     <!-- for this message. -->
     <br><dt><code>missing author</code><dd>Typically this can happen if you created an RCS file
with your username set to empty.  <span class="sc">cvs</span> will, bogusly,
create an illegal RCS file with no value for the author
field.  The solution is to make sure your username is
set to a non-empty value and re-create the RCS file. 
<!-- "make sure your username is set" is complicated in -->
<!-- and of itself, as there are the environment -->
<!-- variables the system login name, &c, and it depends -->
<!-- on the version of CVS. -->

     <br><dt><code>cvs [checkout aborted]: no such tag </code><var>tag</var><dd>This message means that <span class="sc">cvs</span> isn't familiar with
the tag <var>tag</var>.  Usually the root cause is that you have
mistyped a tag name.  Ocassionally this can also occur because the
users creating tags do not have permissions to write to the
<samp><span class="file">CVSROOT/val-tags</span></samp> file (see <a href="#File-permissions">File permissions</a>, for more).

     <p>Prior to <span class="sc">cvs</span> version 1.12.10, there were a few relatively
obscure cases where a given tag could be created in an archive
file in the repository but <span class="sc">cvs</span> would require the user to
<!-- Search sanity.sh for "no such tag" to see some of -->
<!-- the relatively obscure cases. -->
try a few other <span class="sc">cvs</span> commands involving that tag
until one was found whch caused <span class="sc">cvs</span> to update
<a name="index-CVSROOT_002fval_002dtags-file_002c-forcing-tags-into-809"></a><a name="index-val_002dtags-file_002c-forcing-tags-into-810"></a>the <samp><span class="file">val-tags</span></samp> file, at which point the originally failing command
would begin to work.  This same method can be used to repair a <samp><span class="file">val-tags</span></samp>
file that becomes out of date due to the permissions problem mentioned above. 
This updating is only required once per tag - once a tag is listed in
<samp><span class="file">val-tags</span></samp>, it stays there.

     <p>Note that using &lsquo;<samp><span class="samp">tag -f</span></samp>&rsquo; to not require tag matches did not and
does not override this check (see <a href="#Common-options">Common options</a>).

     <br><dt><code>*PANIC* administration files missing</code><dd>This typically means that there is a directory named
<span class="sc">cvs</span> but it does not contain the administrative files
which <span class="sc">cvs</span> puts in a CVS directory.  If the problem is
that you created a CVS directory via some mechanism
other than <span class="sc">cvs</span>, then the answer is simple, use a name
other than <span class="sc">cvs</span>.  If not, it indicates a <span class="sc">cvs</span> bug
(see <a href="#BUGS">BUGS</a>).

     <br><dt><code>rcs error: Unknown option: -x,v/</code><dd>This message will be followed by a usage message for
<span class="sc">rcs</span>.  It means that you have an old version of
<span class="sc">rcs</span> (probably supplied with your operating
system), as well as an old version of <span class="sc">cvs</span>. 
<span class="sc">cvs</span> 1.9.18 and earlier only work with <span class="sc">rcs</span> version 5 and
later; current versions of <span class="sc">cvs</span> do not run <span class="sc">rcs</span> programs. 
<!-- For more information on installing @sc{cvs}, see -->
<!-- (FIXME: where?  it depends on whether you are -->
<!-- getting binaries or sources or what). -->
<!-- The message can also say "ci error" or something -->
<!-- instead of "rcs error", I suspect. -->

     <br><dt><code>cvs [server aborted]: received broken pipe signal</code><dd>This message can be caused by a loginfo program that fails to
read all of the log information from its standard input. 
If you find it happening in any other circumstances,
please let us know as described in <a href="#BUGS">BUGS</a>.

     <br><dt><code>'root' is not allowed to commit files</code><dd>When committing a permanent change, <span class="sc">cvs</span> makes a log entry of
who committed the change.  If you are committing the change logged
in as "root" (not under "su" or other root-priv giving program),
<span class="sc">cvs</span> cannot determine who is actually making the change. 
As such, by default, <span class="sc">cvs</span> disallows changes to be committed by users
logged in as "root".  (You can disable this option by passing the
<code>--enable-rootcommit</code> option to <samp><span class="file">configure</span></samp> and recompiling <span class="sc">cvs</span>. 
On some systems this means editing the appropriate <samp><span class="file">config.h</span></samp> file
before building <span class="sc">cvs</span>.)

     <br><dt><code>cvs [server aborted]: Secondary out of sync with primary!</code><dd>
This usually means that the version of <span class="sc">cvs</span> running on a secondary
server is incompatible with the version running on the primary server
(see <a href="#Write-proxies">Write proxies</a>). 
This will not occur if the client supports redirection.

     <p>It is not the version number that is significant here, but the list of
supported requests that the servers provide to the client. 
For example, even if both servers were the same version,
if the secondary was compiled with GSSAPI support and the primary was not,
the list of supported requests provided by the two servers
would be different and the secondary would not work as a transparent
proxy to the primary. 
Conversely, even if the two servers were radically different versions
but both provided the same list of valid requests to the client,
the transparent proxy would succeed.

     <br><dt><code>Terminated with fatal signal 11</code><dd>This message usually indicates that <span class="sc">cvs</span> (the server, if you're
using client/server mode) has run out of (virtual) memory. 
Although <span class="sc">cvs</span> tries to catch the error and issue a more meaningful
message, there are many circumstances where that is not possible. 
If you appear to have lots of memory available to the system,
the problem is most likely that you're running into a system-wide
limit on the amount of memory a single process can use or a
similar process-specific limit. 
The mechanisms for displaying and setting such limits vary from
system to system, so you'll have to consult an expert for your
particular system if you don't know how to do that.

     <br><dt><code>Too many arguments!</code><dd>This message is typically printed by the <samp><span class="file">log.pl</span></samp>
script which is in the <samp><span class="file">contrib</span></samp> directory in the
<span class="sc">cvs</span> source distribution.  In some versions of
<span class="sc">cvs</span>, <samp><span class="file">log.pl</span></samp> has been part of the default
<span class="sc">cvs</span> installation.  The <samp><span class="file">log.pl</span></samp> script gets
called from the <samp><span class="file">loginfo</span></samp> administrative file. 
Check that the arguments passed in <samp><span class="file">loginfo</span></samp> match
what your version of <samp><span class="file">log.pl</span></samp> expects.  In
particular, the <samp><span class="file">log.pl</span></samp> from <span class="sc">cvs</span> 1.3 and
older expects the log file as an argument whereas the
<samp><span class="file">log.pl</span></samp> from <span class="sc">cvs</span> 1.5 and newer expects the
log file to be specified with a &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; option.  Of
course, if you don't need <samp><span class="file">log.pl</span></samp> you can just
comment it out of <samp><span class="file">loginfo</span></samp>.

     <br><dt><code>cvs [update aborted]: unexpected EOF reading </code><var>file</var><code>,v</code><dd>See &lsquo;<samp><span class="samp">EOF in key in RCS file</span></samp>&rsquo;.

     <br><dt><code>cvs [login aborted]: unrecognized auth response from </code><var>server</var><dd>This message typically means that the server is not set
up properly.  For example, if <samp><span class="file">inetd.conf</span></samp> points
to a nonexistent cvs executable.  To debug it further,
find the log file which inetd writes
(<samp><span class="file">/var/log/messages</span></samp> or whatever inetd uses on
your system).  For details, see <a href="#Connection">Connection</a>, and
<a href="#Password-authentication-server">Password authentication server</a>.

     <br><dt><code>cvs commit: Up-to-date check failed for `</code><var>file</var><code>'</code><dd>This means that someone else has committed a change to
that file since the last time that you did a <code>cvs
update</code>.  So before proceeding with your <code>cvs
commit</code> you need to <code>cvs update</code>.  <span class="sc">cvs</span> will merge
the changes that you made and the changes that the
other person made.  If it does not detect any conflicts
it will report &lsquo;<samp><span class="samp">M </span><var>file</var></samp>&rsquo; and you are ready
to <code>cvs commit</code>.  If it detects conflicts it will
print a message saying so, will report &lsquo;<samp><span class="samp">C </span><var>file</var></samp>&rsquo;,
and you need to manually resolve the
conflict.  For more details on this process see
<a href="#Conflicts-example">Conflicts example</a>.

     <br><dt><code>Usage:	diff3 [-exEX3 [-i | -m] [-L label1 -L label3]] file1 file2 file3</code><dd>
     <pre class="example">          Only one of [exEX3] allowed
</pre>
     <p>This indicates a problem with the installation of
<code>diff3</code> and <code>rcsmerge</code>.  Specifically
<code>rcsmerge</code> was compiled to look for GNU diff3, but
it is finding unix diff3 instead.  The exact text of
the message will vary depending on the system.  The
simplest solution is to upgrade to a current version of
<span class="sc">cvs</span>, which does not rely on external
<code>rcsmerge</code> or <code>diff3</code> programs.

     <br><dt><code>warning: unrecognized response `</code><var>text</var><code>' from cvs server</code><dd>If <var>text</var> contains a valid response (such as
&lsquo;<samp><span class="samp">ok</span></samp>&rsquo;) followed by an extra carriage return
character (on many systems this will cause the second
part of the message to overwrite the first part), then
it probably means that you are using the &lsquo;<samp><span class="samp">:ext:</span></samp>&rsquo;
access method with a version of rsh, such as most
non-unix rsh versions, which does not by default
provide a transparent data stream.  In such cases you
probably want to try &lsquo;<samp><span class="samp">:server:</span></samp>&rsquo; instead of
&lsquo;<samp><span class="samp">:ext:</span></samp>&rsquo;.  If <var>text</var> is something else, this
may signify a problem with your <span class="sc">cvs</span> server. 
Double-check your installation against the instructions
for setting up the <span class="sc">cvs</span> server. 
<!-- FIXCVS: should be printing CR as \r or \015 or some -->
<!-- such, probably. -->

     <br><dt><code>cvs commit: [</code><var>time</var><code>] waiting for </code><var>user</var><code>'s lock in </code><var>directory</var><dd>This is a normal message, not an error.  See
<a href="#Concurrency">Concurrency</a>, for more details.

     <br><dt><code>cvs commit: warning: editor session failed</code><dd><a name="index-Exit-status_002c-of-editor-811"></a>This means that the editor which <span class="sc">cvs</span> is using exits with a nonzero
exit status.  Some versions of vi will do this even when there was not
a problem editing the file.  If so, point the
<code>CVSEDITOR</code> environment variable to a small script
such as:

     <pre class="example">          #!/bin/sh
          vi $*
          exit 0
</pre>
     <br><dt><code>cvs update: warning: </code><var>file</var><code> was lost</code><dd>This means that the working copy of <var>file</var> has been deleted
but it has not been removed from <span class="sc">cvs</span>. 
This is nothing to be concerned about,
the update will just recreate the local file from the repository. 
(This is a convenient way to discard local changes to a file:
just delete it and then run <code>cvs update</code>.)

     <br><dt><code>cvs update: warning: </code><var>file</var><code> is not (any longer) pertinent</code><dd>This means that the working copy of <var>file</var> has been deleted,
it has not been removed from <span class="sc">cvs</span> in the current working directory,
but it has been removed from <span class="sc">cvs</span> in some other working directory. 
This is nothing to be concerned about,
the update would have removed the local file anyway.

   </dl>

<div class="node">
<a name="Connection"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-problems">Other problems</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Error-messages">Error messages</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Troubleshooting">Troubleshooting</a>

</div>

<h3 class="appendixsec">F.2 Trouble making a connection to a CVS server</h3>

<p>This section concerns what to do if you are having
trouble making a connection to a <span class="sc">cvs</span> server.  If
you are running the <span class="sc">cvs</span> command line client
running on Windows, first upgrade the client to
<span class="sc">cvs</span> 1.9.12 or later.  The error reporting in
earlier versions provided much less information about
what the problem was.  If the client is non-Windows,
<span class="sc">cvs</span> 1.9 should be fine.

   <p>If the error messages are not sufficient to track down
the problem, the next steps depend largely on which
access method you are using.

     
<a name="index-ext-method_002c-troubleshooting-812"></a>
<dl><dt><code>:ext:</code><dd>Try running the rsh program from the command line.  For
example: "rsh servername cvs -v" should print <span class="sc">cvs</span>
version information.  If this doesn't work, you need to
fix it before you can worry about <span class="sc">cvs</span> problems.

     <p><a name="index-server-method_002c-troubleshooting-813"></a><br><dt><code>:server:</code><dd>You don't need a command line rsh program to use this
access method, but if you have an rsh program around,
it may be useful as a debugging tool.  Follow the
directions given for :ext:.

     <p><a name="index-pserver-method_002c-troubleshooting-814"></a><br><dt><code>:pserver:</code><dd>Errors along the lines of "connection refused" typically indicate
that inetd isn't even listening for connections on port 2401
whereas errors like "connection reset by peer",
"received broken pipe signal", "recv() from server: EOF",
or "end of file from server"
typically indicate that inetd is listening for
connections but is unable to start <span class="sc">cvs</span> (this is frequently
caused by having an incorrect path in <samp><span class="file">inetd.conf</span></samp>
or by firewall software rejecting the connection). 
"unrecognized auth response" errors are caused by a bad command
line in <samp><span class="file">inetd.conf</span></samp>, typically an invalid option or forgetting
to put the &lsquo;<samp><span class="samp">pserver</span></samp>&rsquo; command at the end of the line. 
Another less common problem is invisible control characters that
your editor "helpfully" added without you noticing.

     <p>One good debugging tool is to "telnet servername
2401".  After connecting, send any text (for example
"foo" followed by return).  If <span class="sc">cvs</span> is working
correctly, it will respond with

     <pre class="example">          cvs [pserver aborted]: bad auth protocol start: foo
</pre>
     <p>If instead you get:

     <pre class="example">          Usage: cvs [cvs-options] command [command-options-and-arguments]
          ...
</pre>
     <p class="noindent">then you're missing the &lsquo;<samp><span class="samp">pserver</span></samp>&rsquo; command at the end of the
line in <samp><span class="file">inetd.conf</span></samp>; check to make sure that the entire command
is on one line and that it's complete.

     <p>Likewise, if you get something like:

     <pre class="example">          Unknown command: `pserved'
          
          CVS commands are:
                  add          Add a new file/directory to the repository
          ...
</pre>
     <p class="noindent">then you've misspelled &lsquo;<samp><span class="samp">pserver</span></samp>&rsquo; in some way.  If it isn't
obvious, check for invisible control characters (particularly
carriage returns) in <samp><span class="file">inetd.conf</span></samp>.

     <p>If it fails to work at all, then make sure inetd is working
right.  Change the invocation in <samp><span class="file">inetd.conf</span></samp> to run the
echo program instead of cvs.  For example:

     <pre class="example">          2401  stream  tcp  nowait  root /bin/echo echo hello
</pre>
     <p>After making that change and instructing inetd to
re-read its configuration file, "telnet servername
2401" should show you the text hello and then the
server should close the connection.  If this doesn't
work, you need to fix it before you can worry about
<span class="sc">cvs</span> problems.

     <p>On AIX systems, the system will often have its own
program trying to use port 2401.  This is AIX's problem
in the sense that port 2401 is registered for use with
<span class="sc">cvs</span>.  I hear that there is an AIX patch available
to address this problem.

     <p>Another good debugging tool is the &lsquo;<samp><span class="samp">-d</span></samp>&rsquo;
(debugging) option to inetd.  Consult your system
documentation for more information.

     <p>If you seem to be connecting but get errors like:

     <pre class="example">          cvs server: cannot open /root/.cvsignore: Permission denied
          cvs [server aborted]: can't chdir(/root): Permission denied
</pre>
     <p class="noindent">then you probably haven't specified &lsquo;<samp><span class="samp">-f</span></samp>&rsquo; in <samp><span class="file">inetd.conf</span></samp>. 
(In releases prior to <span class="sc">cvs</span> 1.11.1, this problem can be caused by
your system setting the <code>$HOME</code> environment variable
for programs being run by inetd.  In this case, you can either
have inetd run a shell script that unsets <code>$HOME</code> and then runs
<span class="sc">cvs</span>, or you can use <code>env</code> to run <span class="sc">cvs</span> with a pristine
environment.)

     <p>If you can connect successfully for a while but then can't,
you've probably hit inetd's rate limit. 
(If inetd receives too many requests for the same service
in a short period of time, it assumes that something is wrong
and temporarily disables the service.) 
Check your inetd documentation to find out how to adjust the
rate limit (some versions of inetd have a single rate limit,
others allow you to set the limit for each service separately.) 
</dl>

<div class="node">
<a name="Other-problems"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Connection">Connection</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Troubleshooting">Troubleshooting</a>

</div>

<h3 class="appendixsec">F.3 Other common problems</h3>

<p>Here is a list of problems which do not fit into the
above categories.  They are in no particular order.

     <ul>
<li>On Windows, if there is a 30 second or so delay when
you run a <span class="sc">cvs</span> command, it may mean that you have
your home directory set to <samp><span class="file">C:/</span></samp>, for example (see
<code>HOMEDRIVE</code> and <code>HOMEPATH</code> in
<a href="#Environment-variables">Environment variables</a>).  <span class="sc">cvs</span> expects the home
directory to not end in a slash, for example <samp><span class="file">C:</span></samp>
or <samp><span class="file">C:\cvs</span></samp>. 
<!-- FIXCVS: CVS should at least detect this and print an -->
<!-- error, presumably. -->

     <li>If you are running <span class="sc">cvs</span> 1.9.18 or older, and
<code>cvs update</code> finds a conflict and tries to
merge, as described in <a href="#Conflicts-example">Conflicts example</a>, but
doesn't tell you there were conflicts, then you may
have an old version of <span class="sc">rcs</span>.  The easiest solution
probably is to upgrade to a current version of
<span class="sc">cvs</span>, which does not rely on external <span class="sc">rcs</span>
programs. 
</ul>

<!--  -->
<div class="node">
<a name="Credits"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#BUGS">BUGS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Troubleshooting">Troubleshooting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix G Credits</h2>

<p><a name="index-Contributors-_0028manual_0029-815"></a><a name="index-Credits-_0028manual_0029-816"></a>Roland Pesch, then of Cygnus Support &lt;<tt>roland@wrs.com</tt>&gt;
wrote the manual pages which were distributed with
<span class="sc">cvs</span> 1.3.  Much of their text was copied into this
manual.  He also read an early draft
of this manual and contributed many ideas and
corrections.

   <p>The mailing-list <code>info-cvs</code> is sometimes
informative. I have included information from postings
made by the following persons:
David G. Grubbs &lt;<tt>dgg@think.com</tt>&gt;.

   <p>Some text has been extracted from the man pages for
<span class="sc">rcs</span>.

   <p>The <span class="sc">cvs</span> <span class="sc">faq</span> by David G. Grubbs has provided
useful material.  The <span class="sc">faq</span> is no longer maintained,
however, and this manual is about the closest thing there
is to a successor (with respect to documenting how to
use <span class="sc">cvs</span>, at least).

   <p>In addition, the following persons have helped by
telling me about mistakes I've made:

<pre class="display">     Roxanne Brunskill &lt;<tt>rbrunski@datap.ca</tt>&gt;,
     Kathy Dyer &lt;<tt>dyer@phoenix.ocf.llnl.gov</tt>&gt;,
     Karl Pingle &lt;<tt>pingle@acuson.com</tt>&gt;,
     Thomas A Peterson &lt;<tt>tap@src.honeywell.com</tt>&gt;,
     Inge Wallin &lt;<tt>ingwa@signum.se</tt>&gt;,
     Dirk Koschuetzki &lt;<tt>koschuet@fmi.uni-passau.de</tt>&gt;
     and Michael Brown &lt;<tt>brown@wi.extrel.com</tt>&gt;.
</pre>
   <p>The list of contributors here is not comprehensive; for a more
complete list of who has contributed to this manual see
the file <samp><span class="file">doc/ChangeLog</span></samp> in the <span class="sc">cvs</span> source
distribution.

   <p>The MirOS Project uses <span class="sc">cvs</span> heavily in MirOS BSD and the
MirPorts Framework and has enhanced it as well as packaged it
for the MirDebian "WTF" repository. Responsible:

<pre class="display">     Thorsten Glaser &lt;<tt>tg@mirbsd.org</tt>&gt;
</pre>
   <p>CVS Homepage: <a href="http://www.nongnu.org/cvs/">http://www.nongnu.org/cvs/</a>

<!--  -->
<div class="node">
<a name="BUGS"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Index">Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Credits">Credits</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix H Dealing with bugs in CVS or this manual</h2>

<p><a name="index-Bugs-in-this-manual-or-CVS-817"></a>Neither <span class="sc">cvs</span> nor this manual is perfect, and they
probably never will be.  If you are having trouble
using <span class="sc">cvs</span>, or think you have found a bug, there
are a number of things you can do about it.  Note that
if the manual is unclear, that can be considered a bug
in the manual, so these problems are often worth doing
something about as well as problems with <span class="sc">cvs</span> itself.

   <p><a name="index-Reporting-bugs-818"></a><a name="index-Bugs_002c-reporting-819"></a><a name="index-Errors_002c-reporting-820"></a>
     <ul>
<li>If you want someone to help you and fix bugs that you
report, there are companies which will do that for a
fee.  One such company is:

     <p><a name="index-Ximbiot-821"></a><a name="index-Support_002c-getting-CVS-support-822"></a>
     <pre class="example">          Ximbiot
          319 S. River St.
          Harrisburg, PA  17104-1657
          USA
          Email: info@ximbiot.com
          Phone: (717) 579-6168
          Fax:   (717) 234-3125
          <a href="http://ximbiot.com/">http://ximbiot.com/</a>
          
</pre>
     <li>If you got <span class="sc">cvs</span> through a distributor, such as an
operating system vendor or a vendor of freeware
<span class="sc">cd-rom</span>s, you may wish to see whether the
distributor provides support.  Often, they will provide
no support or minimal support, but this may vary from
distributor to distributor.

     <li>If you have the skills and time to do so, you may wish
to fix the bug yourself.  If you wish to submit your
fix for inclusion in future releases of <span class="sc">cvs</span>, see
the file <span class="sc">hacking</span> in the <span class="sc">cvs</span> source
distribution.  It contains much more information on the
process of submitting fixes.

     <li>There may be resources on the net which can help.  A
good place to start is:

     <pre class="example">          <a href="http://cvs.nongnu.org/">http://cvs.nongnu.org/</a>
</pre>
     <p>If you are so inspired, increasing the information
available on the net is likely to be appreciated.  For
example, before the standard <span class="sc">cvs</span> distribution
worked on Windows 95, there was a web page with some
explanation and patches for running <span class="sc">cvs</span> on Windows
95, and various people helped out by mentioning this
page on mailing lists or newsgroups when the subject
came up.

     <li>It is also possible to report bugs to <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a>. 
Note that someone may or may not want to do anything
with your bug report&mdash;if you need a solution consider
one of the options mentioned above.  People probably do
want to hear about bugs which are particularly severe
in consequences and/or easy to fix, however.  You can
also increase your odds by being as clear as possible
about the exact nature of the bug and any other
relevant information.  The way to report bugs is to
send email to <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a>.  Note
that submissions to <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a> may be distributed
under the terms of the <span class="sc">gnu</span> Public License, so if
you don't like this, don't submit them.  There is
usually no justification for sending mail directly to
one of the <span class="sc">cvs</span> maintainers rather than to
<a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a>; those maintainers who want to hear
about such bug reports read <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a>.  Also note
that sending a bug report to other mailing lists or
newsgroups is <em>not</em> a substitute for sending it to
<a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a>.  It is fine to discuss <span class="sc">cvs</span> bugs on
whatever forum you prefer, but there are not
necessarily any maintainers reading bug reports sent
anywhere except <a href="mailto:bug-cvs@nongnu.org">bug-cvs@nongnu.org</a>. 
</ul>

   <p><a name="index-Known-bugs-in-this-manual-or-CVS-823"></a>People often ask if there is a list of known bugs or
whether a particular bug is a known one.  The file
<span class="sc">bugs</span> in the <span class="sc">cvs</span> source distribution is one
list of known bugs, but it doesn't necessarily try to
be comprehensive.  Perhaps there will never be a
comprehensive, detailed list of known bugs.

<!--  -->
<div class="node">
<a name="Index"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#BUGS">BUGS</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Index</h2>

<p><a name="index-Index-824"></a>

<ul class="index-cp" compact>
<li><a href="#index-g_t_0021_002c-in-modules-file-603">!, in modules file</a>: <a href="#Excluding-directories">Excluding directories</a></li>
<li><a href="#index-g_t_0023cvs_002elock_002c-removing-370">#cvs.lock, removing</a>: <a href="#Concurrency">Concurrency</a></li>
<li><a href="#index-g_t_0023cvs_002elock_002c-technical-details-74">#cvs.lock, technical details</a>: <a href="#Locks">Locks</a></li>
<li><a href="#index-g_t_0023cvs_002epfl_002c-technical-details-72">#cvs.pfl, technical details</a>: <a href="#Locks">Locks</a></li>
<li><a href="#index-g_t_0023cvs_002erfl_002c-and-backups-129">#cvs.rfl, and backups</a>: <a href="#Backing-up">Backing up</a></li>
<li><a href="#index-g_t_0023cvs_002erfl_002c-removing-368">#cvs.rfl, removing</a>: <a href="#Concurrency">Concurrency</a></li>
<li><a href="#index-g_t_0023cvs_002erfl_002c-technical-details-71">#cvs.rfl, technical details</a>: <a href="#Locks">Locks</a></li>
<li><a href="#index-g_t_0023cvs_002etfl-76">#cvs.tfl</a>: <a href="#Locks">Locks</a></li>
<li><a href="#index-g_t_0023cvs_002ewfl_002c-removing-369">#cvs.wfl, removing</a>: <a href="#Concurrency">Concurrency</a></li>
<li><a href="#index-g_t_0023cvs_002ewfl_002c-technical-details-73">#cvs.wfl, technical details</a>: <a href="#Locks">Locks</a></li>
<li><a href="#index-g_t_0026_002c-in-modules-file-601">&amp;, in modules file</a>: <a href="#Ampersand-modules">Ampersand modules</a></li>
<li><a href="#index-g_t_002da_002c-in-modules-file-598">-a, in modules file</a>: <a href="#Alias-modules">Alias modules</a></li>
<li><a href="#index-g_t_002dd_002c-in-modules-file-605">-d, in modules file</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-g_t_002de_002c-in-modules-file-618">-e, in modules file</a>: <a href="#Module-program-options">Module program options</a></li>
<li><a href="#index-g_t_002de_002c-in-modules-file-607">-e, in modules file</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-g_t_002dj-_0028merging-branches_0029-287">-j (merging branches)</a>: <a href="#Merging-a-branch">Merging a branch</a></li>
<li><a href="#index-g_t_002dj-_0028merging-branches_0029_002c-and-keyword-substitution-301">-j (merging branches), and keyword substitution</a>: <a href="#Merging-and-keywords">Merging and keywords</a></li>
<li><a href="#index-g_t_002dk-_0028keyword-substitution_0029-426">-k (keyword substitution)</a>: <a href="#Substitution-modes">Substitution modes</a></li>
<li><a href="#index-g_t_002dkk_002c-to-avoid-conflicts-during-a-merge-302">-kk, to avoid conflicts during a merge</a>: <a href="#Merging-and-keywords">Merging and keywords</a></li>
<li><a href="#index-g_t_002do_002c-in-modules-file-617">-o, in modules file</a>: <a href="#Module-program-options">Module program options</a></li>
<li><a href="#index-g_t_002do_002c-in-modules-file-609">-o, in modules file</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-g_t_002ds_002c-in-modules-file-612">-s, in modules file</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-g_t_002dt_002c-in-modules-file-616">-t, in modules file</a>: <a href="#Module-program-options">Module program options</a></li>
<li><a href="#index-g_t_002dt_002c-in-modules-file-614">-t, in modules file</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-g_t_002e_0023-files-583">.# files</a>: <a href="#update-output">update output</a></li>
<li><a href="#index-g_t_002ebashrc_002c-setting-CVSROOT-in-45">.bashrc, setting CVSROOT in</a>: <a href="#Specifying-a-repository">Specifying a repository</a></li>
<li><a href="#index-g_t_002ecshrc_002c-setting-CVSROOT-in-43">.cshrc, setting CVSROOT in</a>: <a href="#Specifying-a-repository">Specifying a repository</a></li>
<li><a href="#index-g_t_002ecvsrc-file-450">.cvsrc file</a>: <a href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a></li>
<li><a href="#index-g_t_002eprofile_002c-setting-CVSROOT-in-42">.profile, setting CVSROOT in</a>: <a href="#Specifying-a-repository">Specifying a repository</a></li>
<li><a href="#index-g_t_002etcshrc_002c-setting-CVSROOT-in-44">.tcshrc, setting CVSROOT in</a>: <a href="#Specifying-a-repository">Specifying a repository</a></li>
<li><a href="#index-g_t_002fusr_002flocal_002fcvsroot_002c-as-example-repository-39">/usr/local/cvsroot, as example repository</a>: <a href="#Repository">Repository</a></li>
<li><a href="#index-g_t_003c_003c_003c_003c_003c_003c_003c-358">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-g_t_003d_003d_003d_003d_003d_003d_003d-360">=======</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-g_t_003e_003e_003e_003e_003e_003e_003e-359">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-g_t_005f_005f-files-_0028VMS_0029-584">__ files (VMS)</a>: <a href="#update-output">update output</a></li>
<li><a href="#index-Abandoning-work-389">Abandoning work</a>: <a href="#Editing-files">Editing files</a></li>
<li><a href="#index-abbreviations-for-months-507">abbreviations for months</a>: <a href="#Calendar-date-items">Calendar date items</a></li>
<li><a href="#index-Access-a-branch-276">Access a branch</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-add-_0028subcommand_0029-308">add (subcommand)</a>: <a href="#Adding-files">Adding files</a></li>
<li><a href="#index-Adding-a-tag-235">Adding a tag</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Adding-files-307">Adding files</a>: <a href="#Adding-files">Adding files</a></li>
<li><a href="#index-Admin-_0028subcommand_0029-547">Admin (subcommand)</a>: <a href="#admin">admin</a></li>
<li><a href="#index-Admin-commands_002c-logging-683">Admin commands, logging</a>: <a href="#postadmin">postadmin</a></li>
<li><a href="#index-Administrative-files-_0028intro_0029-110">Administrative files (intro)</a>: <a href="#Intro-administrative-files">Intro administrative files</a></li>
<li><a href="#index-Administrative-files-_0028reference_0029-591">Administrative files (reference)</a>: <a href="#Administrative-files">Administrative files</a></li>
<li><a href="#index-Administrative-files_002c-editing-them-115">Administrative files, editing them</a>: <a href="#Intro-administrative-files">Intro administrative files</a></li>
<li><a href="#index-Alias-modules-597">Alias modules</a>: <a href="#Alias-modules">Alias modules</a></li>
<li><a href="#index-g_t_0040samp_007bALL_007d-keyword_002c-in-lieu-of-regular-expressions-in-script-hooks-630">&lsquo;<samp><span class="samp">ALL</span></samp>&rsquo; keyword, in lieu of regular expressions in script hooks</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-Ampersand-modules-600">Ampersand modules</a>: <a href="#Ampersand-modules">Ampersand modules</a></li>
<li><a href="#index-annotate-_0028subcommand_0029-559">annotate (subcommand)</a>: <a href="#annotate">annotate</a></li>
<li><a href="#index-Atomic-transactions_002c-lack-of-371">Atomic transactions, lack of</a>: <a href="#Concurrency">Concurrency</a></li>
<li><a href="#index-Attic-68">Attic</a>: <a href="#Attic">Attic</a></li>
<li><a href="#index-Authenticated-client_002c-using-180">Authenticated client, using</a>: <a href="#Password-authentication-client">Password authentication client</a></li>
<li><a href="#index-Authenticating-server_002c-setting-up-172">Authenticating server, setting up</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-Authentication_002c-stream-455">Authentication, stream</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Author-keyword-406">Author keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-authors-of-_0040code_007bget_005fdate_007d-538">authors of <code>get_date</code></a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-Automatically-ignored-files-722">Automatically ignored files</a>: <a href="#cvsignore">cvsignore</a></li>
<li><a href="#index-Avoiding-editor-invocation-484">Avoiding editor invocation</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-Backing-up_002c-repository-127">Backing up, repository</a>: <a href="#Backing-up">Backing up</a></li>
<li><a href="#index-Base-directory_002c-in-CVS-directory-102">Base directory, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-BASE_002c-as-reserved-tag-name-234">BASE, as reserved tag name</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-BASE_002c-special-date-487">BASE, special date</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-BASE_002c-special-tag-486">BASE, special tag</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-Baserev-file_002c-in-CVS-directory-104">Baserev file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Baserev_002etmp-file_002c-in-CVS-directory-106">Baserev.tmp file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-beginning-of-time_002c-for-_0040acronym_007bPOSIX_007d-536">beginning of time, for <acronym>POSIX</acronym></a>: <a href="#Seconds-since-the-Epoch">Seconds since the Epoch</a></li>
<li><a href="#index-Bellovin_002c-Steven-M_002e-539">Bellovin, Steven M.</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-Berets_002c-Jim-541">Berets, Jim</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-Berry_002c-K_002e-546">Berry, K.</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-Bill-of-materials-438">Bill of materials</a>: <a href="#Builds">Builds</a></li>
<li><a href="#index-Binary-files-325">Binary files</a>: <a href="#Binary-files">Binary files</a></li>
<li><a href="#index-Branch-merge-example-289">Branch merge example</a>: <a href="#Merging-a-branch">Merging a branch</a></li>
<li><a href="#index-Branch-number-283">Branch number</a>: <a href="#Branches-and-revisions">Branches and revisions</a></li>
<li><a href="#index-Branch-number-222">Branch number</a>: <a href="#Revision-numbers">Revision numbers</a></li>
<li><a href="#index-Branch-tags_002c-deleting-246">Branch tags, deleting</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Branch-tags_002c-moving-250">Branch tags, moving</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Branch_002c-accessing-280">Branch, accessing</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Branch_002c-check-out-278">Branch, check out</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Branch_002c-creating-a-271">Branch, creating a</a>: <a href="#Creating-a-branch">Creating a branch</a></li>
<li><a href="#index-Branch_002c-identifying-281">Branch, identifying</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Branch_002c-retrieving-279">Branch, retrieving</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Branch_002c-vendor_002d-433">Branch, vendor-</a>: <a href="#Tracking-sources">Tracking sources</a></li>
<li><a href="#index-Branches-motivation-267">Branches motivation</a>: <a href="#Branches-motivation">Branches motivation</a></li>
<li><a href="#index-Branches_002c-copying-changes-between-264">Branches, copying changes between</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-Branches_002c-sticky-282">Branches, sticky</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Branching-259">Branching</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-Bringing-a-file-up-to-date-347">Bringing a file up to date</a>: <a href="#Updating-a-file">Updating a file</a></li>
<li><a href="#index-Bugs-in-this-manual-or-CVS-817">Bugs in this manual or CVS</a>: <a href="#BUGS">BUGS</a></li>
<li><a href="#index-Bugs_002c-reporting-819">Bugs, reporting</a>: <a href="#BUGS">BUGS</a></li>
<li><a href="#index-Builds-436">Builds</a>: <a href="#Builds">Builds</a></li>
<li><a href="#index-calendar-date-item-503">calendar date item</a>: <a href="#Calendar-date-items">Calendar date items</a></li>
<li><a href="#index-case_002c-ignored-in-dates-501">case, ignored in dates</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Changes_002c-copying-between-branches-265">Changes, copying between branches</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-Changing-a-log-message-551">Changing a log message</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-Check-out-a-branch-274">Check out a branch</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Checked-out-copy_002c-keeping-679">Checked out copy, keeping</a>: <a href="#Keeping-a-checked-out-copy">Keeping a checked out copy</a></li>
<li><a href="#index-Checking-out-source-20">Checking out source</a>: <a href="#Getting-the-source">Getting the source</a></li>
<li><a href="#index-checkout-_0028subcommand_0029-560">checkout (subcommand)</a>: <a href="#checkout">checkout</a></li>
<li><a href="#index-Checkout-program-608">Checkout program</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-Checkout_002c-as-term-for-getting-ready-to-edit-385">Checkout, as term for getting ready to edit</a>: <a href="#Editing-files">Editing files</a></li>
<li><a href="#index-Checkout_002c-example-23">Checkout, example</a>: <a href="#Getting-the-source">Getting the source</a></li>
<li><a href="#index-checkoutlist-723">checkoutlist</a>: <a href="#checkoutlist">checkoutlist</a></li>
<li><a href="#index-Choosing_002c-reserved-or-unreserved-checkouts-397">Choosing, reserved or unreserved checkouts</a>: <a href="#Choosing-a-model">Choosing a model</a></li>
<li><a href="#index-Cleaning-up-29">Cleaning up</a>: <a href="#Cleaning-up">Cleaning up</a></li>
<li><a href="#index-Client_002fServer-Operation-135">Client/Server Operation</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-Client_002fServer-Operation_002c-port-specification-166">Client/Server Operation, port specification</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-Client_002fServer-Operation_002c-port-specification-139">Client/Server Operation, port specification</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-co-_0028subcommand_0029-561">co (subcommand)</a>: <a href="#checkout">checkout</a></li>
<li><a href="#index-Command-reference-585">Command reference</a>: <a href="#Invoking-CVS">Invoking CVS</a></li>
<li><a href="#index-Command-structure-447">Command structure</a>: <a href="#Structure">Structure</a></li>
<li><a href="#index-Comment-leader-550">Comment leader</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-comments_002c-in-dates-502">comments, in dates</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-commit-_0028subcommand_0029-562">commit (subcommand)</a>: <a href="#commit">commit</a></li>
<li><a href="#index-commit-files_002c-see-Info-files-640">commit files, see Info files</a>: <a href="#commit-files">commit files</a></li>
<li><a href="#index-COMMITID_002c-internal-variable-734">COMMITID, internal variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-g_t_0040file_007bcommitinfo_007d-644"><samp><span class="file">commitinfo</span></samp></a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-commitinfo-_0028admin-file_0029-646">commitinfo (admin file)</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-commitinfo-_0028admin-file_0029_002c-exit-status-657">commitinfo (admin file), exit status</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-commitinfo-_0028admin-file_0029_002c-updating-legacy-repositories-654">commitinfo (admin file), updating legacy repositories</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-g_t_0040file_007bcommitinfo_007d_002c-command-environment-659"><samp><span class="file">commitinfo</span></samp>, command environment</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-g_t_0040file_007bcommitinfo_007d_002c-working-directory-658"><samp><span class="file">commitinfo</span></samp>, working directory</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-Commits_002c-administrative-support-files-639">Commits, administrative support files</a>: <a href="#commit-files">commit files</a></li>
<li><a href="#index-Commits_002c-precommit-verification-of-645">Commits, precommit verification of</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-Committing-changes-to-files-24">Committing changes to files</a>: <a href="#Committing-your-changes">Committing your changes</a></li>
<li><a href="#index-Committing_002c-when-to-400">Committing, when to</a>: <a href="#When-to-commit">When to commit</a></li>
<li><a href="#index-Common-options-477">Common options</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-Common-syntax-of-info-files_002c-format-strings-635">Common syntax of info files, format strings</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-Common-syntax-of-info-files_002c-updating-legacy-repositories-643">Common syntax of info files, updating legacy repositories</a>: <a href="#Updating-Commit-Files">Updating Commit Files</a></li>
<li><a href="#index-compatibility-notes_002c-commitinfo-admin-file-655">compatibility notes, commitinfo admin file</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-compatibility-notes_002c-config-admin-file-776">compatibility notes, config admin file</a>: <a href="#config">config</a></li>
<li><a href="#index-compatibility-notes_002c-loginfo-admin-file-677">compatibility notes, loginfo admin file</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-compatibility-notes_002c-taginfo-admin-file-691">compatibility notes, taginfo admin file</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-compatibility-notes_002c-verifymsg-admin-file-665">compatibility notes, verifymsg admin file</a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-Compatibility_002c-between-CVS-versions-807">Compatibility, between CVS versions</a>: <a href="#Compatibility">Compatibility</a></li>
<li><a href="#index-Compression-588">Compression</a>: <a href="#Invoking-CVS">Invoking CVS</a></li>
<li><a href="#index-Compression-475">Compression</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Compression-levels_002c-restricting-on-server-757">Compression levels, restricting on server</a>: <a href="#config">config</a></li>
<li><a href="#index-COMSPEC_002c-environment-variable-800">COMSPEC, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-config-_0028admin-file_0029_002c-import-748">config (admin file), import</a>: <a href="#config">config</a></li>
<li><a href="#index-config-_0028admin-file_0029_002c-updating-legacy-repositories-775">config (admin file), updating legacy repositories</a>: <a href="#config">config</a></li>
<li><a href="#index-config_002c-in-CVSROOT-742">config, in CVSROOT</a>: <a href="#config">config</a></li>
<li><a href="#index-configuration-file-741">configuration file</a>: <a href="#config">config</a></li>
<li><a href="#index-configuration-file-580">configuration file</a>: <a href="#server-_0026-pserver">server &amp; pserver</a></li>
<li><a href="#index-Configuring-keyword-expansion-428">Configuring keyword expansion</a>: <a href="#Configuring-keyword-expansion">Configuring keyword expansion</a></li>
<li><a href="#index-Conflict-markers-357">Conflict markers</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-Conflict-resolution-362">Conflict resolution</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-Conflicts-_0028merge-example_0029-355">Conflicts (merge example)</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-connection-method-options-144">connection method options</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-Contributors-_0028CVS-program_0029-8">Contributors (CVS program)</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-Contributors-_0028manual_0029-815">Contributors (manual)</a>: <a href="#Credits">Credits</a></li>
<li><a href="#index-Copying-a-repository-132">Copying a repository</a>: <a href="#Moving-a-repository">Moving a repository</a></li>
<li><a href="#index-Copying-changes-261">Copying changes</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-Correcting-a-log-message-553">Correcting a log message</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-Creating-a-branch-270">Creating a branch</a>: <a href="#Creating-a-branch">Creating a branch</a></li>
<li><a href="#index-Creating-a-project-207">Creating a project</a>: <a href="#Starting-a-new-project">Starting a new project</a></li>
<li><a href="#index-Creating-a-repository-123">Creating a repository</a>: <a href="#Creating-a-repository">Creating a repository</a></li>
<li><a href="#index-Credits-_0028CVS-program_0029-7">Credits (CVS program)</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-Credits-_0028manual_0029-816">Credits (manual)</a>: <a href="#Credits">Credits</a></li>
<li><a href="#index-CVS-1_002e6_002c-and-watches-396">CVS 1.6, and watches</a>: <a href="#Watches-Compatibility">Watches Compatibility</a></li>
<li><a href="#index-CVS-command-structure-446">CVS command structure</a>: <a href="#Structure">Structure</a></li>
<li><a href="#index-CVS-directory_002c-in-repository-70">CVS directory, in repository</a>: <a href="#CVS-in-repository">CVS in repository</a></li>
<li><a href="#index-CVS-directory_002c-in-working-directory-81">CVS directory, in working directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS-passwd-file-175">CVS passwd file</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-CVS_002c-history-of-6">CVS, history of</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-CVS_002c-introduction-to-4">CVS, introduction to</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-CVS_002c-versions-of-805">CVS, versions of</a>: <a href="#Compatibility">Compatibility</a></li>
<li><a href="#index-CVS_002fBase-directory-103">CVS/Base directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fBaserev-file-105">CVS/Baserev file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fBaserev_002etmp-file-107">CVS/Baserev.tmp file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fEntries-file-87">CVS/Entries file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fEntries_002eBackup-file-91">CVS/Entries.Backup file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fEntries_002eLog-file-89">CVS/Entries.Log file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fEntries_002eStatic-file-93">CVS/Entries.Static file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fNotify-file-99">CVS/Notify file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fNotify_002etmp-file-101">CVS/Notify.tmp file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fRepository-file-83">CVS/Repository file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fRoot-file-48">CVS/Root file</a>: <a href="#Specifying-a-repository">Specifying a repository</a></li>
<li><a href="#index-CVS_002fTag-file-95">CVS/Tag file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_002fTemplate-file-109">CVS/Template file</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVS_005fCLIENT_005fLOG_002c-environment-variable-796">CVS_CLIENT_LOG, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fCLIENT_005fPORT-793">CVS_CLIENT_PORT</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fIGNORE_005fREMOTE_005fROOT_002c-environment-variable-798">CVS_IGNORE_REMOTE_ROOT, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fLOCAL_005fBRANCH_005fNUM_002c-environment-variable-799">CVS_LOCAL_BRANCH_NUM, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fPASSFILE_002c-environment-variable-182">CVS_PASSFILE, environment variable</a>: <a href="#Password-authentication-client">Password authentication client</a></li>
<li><a href="#index-CVS_005fPID_002c-environment-variable-804">CVS_PID, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fPROXY_005fPORT-794">CVS_PROXY_PORT</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fPROXY_005fPORT-146">CVS_PROXY_PORT</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-CVS_005fRCMD_005fPORT_002c-environment-variable-795">CVS_RCMD_PORT, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fRSH-method-option-153">CVS_RSH method option</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-CVS_005fRSH_002c-environment-variable-792">CVS_RSH, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fSERVER-method-option-154">CVS_SERVER method option</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-CVS_005fSERVER_002c-and-fork-method-195">CVS_SERVER, and fork method</a>: <a href="#Connecting-via-fork">Connecting via fork</a></li>
<li><a href="#index-CVS_005fSERVER_002c-environment-variable-157">CVS_SERVER, environment variable</a>: <a href="#Connecting-via-rsh">Connecting via rsh</a></li>
<li><a href="#index-CVS_005fSERVER_005fSLEEP_002c-environment-variable-797">CVS_SERVER_SLEEP, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVS_005fUSER_002c-environment-variable-738">CVS_USER, environment variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-cvsadmin-548">cvsadmin</a>: <a href="#admin">admin</a></li>
<li><a href="#index-CVSEDITOR_002c-environment-variable-785">CVSEDITOR, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVSEDITOR_002c-environment-variable-26">CVSEDITOR, environment variable</a>: <a href="#Committing-your-changes">Committing your changes</a></li>
<li><a href="#index-CVSEDITOR_002c-internal-variable-730">CVSEDITOR, internal variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-CVSHeader-keyword-407">CVSHeader keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-cvsignore-_0028admin-file_0029_002c-global-718">cvsignore (admin file), global</a>: <a href="#cvsignore">cvsignore</a></li>
<li><a href="#index-CVSIGNORE_002c-environment-variable-780">CVSIGNORE, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVSREAD_002c-environment-variable-782">CVSREAD, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVSREAD_002c-overriding-472">CVSREAD, overriding</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-CVSREADONLYFS_002c-environment-variable-784">CVSREADONLYFS, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-cvsroot-40">cvsroot</a>: <a href="#Repository">Repository</a></li>
<li><a href="#index-CVSROOT-_0028file_0029-594">CVSROOT (file)</a>: <a href="#Administrative-files">Administrative files</a></li>
<li><a href="#index-CVSROOT_002c-environment-variable-46">CVSROOT, environment variable</a>: <a href="#Specifying-a-repository">Specifying a repository</a></li>
<li><a href="#index-CVSROOT_002c-internal-variable-728">CVSROOT, internal variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-CVSROOT_002c-module-name-112">CVSROOT, module name</a>: <a href="#Intro-administrative-files">Intro administrative files</a></li>
<li><a href="#index-CVSROOT_002c-multiple-repositories-121">CVSROOT, multiple repositories</a>: <a href="#Multiple-repositories">Multiple repositories</a></li>
<li><a href="#index-CVSROOT_002c-overriding-464">CVSROOT, overriding</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-CVSROOT_002c-storage-of-files-77">CVSROOT, storage of files</a>: <a href="#CVSROOT-storage">CVSROOT storage</a></li>
<li><a href="#index-CVSROOT_002fconfig-743">CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-CVSROOT_002fEmptydir-directory-85">CVSROOT/Emptydir directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-CVSROOT_002fval_002dtags-file_002c-and-read_002donly-access-to-projects-57">CVSROOT/val-tags file, and read-only access to projects</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-CVSROOT_002fval_002dtags-file_002c-forcing-tags-into-809">CVSROOT/val-tags file, forcing tags into</a>: <a href="#Error-messages">Error messages</a></li>
<li><a href="#index-CVSUMASK_002c-environment-variable-59">CVSUMASK, environment variable</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-cvswrappers-_0028admin-file_0029-619">cvswrappers (admin file)</a>: <a href="#Wrappers">Wrappers</a></li>
<li><a href="#index-CVSWRAPPERS_002c-environment-variable-781">CVSWRAPPERS, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-CVSWRAPPERS_002c-environment-variable-620">CVSWRAPPERS, environment variable</a>: <a href="#Wrappers">Wrappers</a></li>
<li><a href="#index-date-format_002c-_0040sc_007biso_007d-8601-505">date format, <span class="sc">iso</span> 8601</a>: <a href="#Calendar-date-items">Calendar date items</a></li>
<li><a href="#index-date-input-formats-488">date input formats</a>: <a href="#Date-input-formats">Date input formats</a></li>
<li><a href="#index-Date-keyword-408">Date keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Dates-479">Dates</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-day-of-week-item-516">day of week item</a>: <a href="#Day-of-week-items">Day of week items</a></li>
<li><a href="#index-Dead-state-69">Dead state</a>: <a href="#Attic">Attic</a></li>
<li><a href="#index-Decimal-revision-number-221">Decimal revision number</a>: <a href="#Revision-numbers">Revision numbers</a></li>
<li><a href="#index-g_t_0040samp_007bDEFAULT_007d-keyword_002c-in-lieu-of-regular-expressions-in-script-hooks-631">&lsquo;<samp><span class="samp">DEFAULT</span></samp>&rsquo; keyword, in lieu of regular expressions in script hooks</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-Defining-a-module-213">Defining a module</a>: <a href="#Defining-the-module">Defining the module</a></li>
<li><a href="#index-Defining-modules-_0028intro_0029-113">Defining modules (intro)</a>: <a href="#Intro-administrative-files">Intro administrative files</a></li>
<li><a href="#index-Defining-modules-_0028reference-manual_0029-596">Defining modules (reference manual)</a>: <a href="#modules">modules</a></li>
<li><a href="#index-Deleting-branch-tags-242">Deleting branch tags</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Deleting-files-311">Deleting files</a>: <a href="#Removing-files">Removing files</a></li>
<li><a href="#index-Deleting-revisions-556">Deleting revisions</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-Deleting-sticky-tags-257">Deleting sticky tags</a>: <a href="#Sticky-tags">Sticky tags</a></li>
<li><a href="#index-Deleting-tags-241">Deleting tags</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Descending-directories-305">Descending directories</a>: <a href="#Recursive-behavior">Recursive behavior</a></li>
<li><a href="#index-Device-nodes-440">Device nodes</a>: <a href="#Special-Files">Special Files</a></li>
<li><a href="#index-Diff-34">Diff</a>: <a href="#Viewing-differences">Viewing differences</a></li>
<li><a href="#index-diff-_0028subcommand_0029-563">diff (subcommand)</a>: <a href="#diff">diff</a></li>
<li><a href="#index-Differences_002c-merging-294">Differences, merging</a>: <a href="#Merging-two-revisions">Merging two revisions</a></li>
<li><a href="#index-Directories_002c-moving-321">Directories, moving</a>: <a href="#Moving-directories">Moving directories</a></li>
<li><a href="#index-Directories_002c-removing-315">Directories, removing</a>: <a href="#Removing-directories">Removing directories</a></li>
<li><a href="#index-Directory_002c-descending-304">Directory, descending</a>: <a href="#Recursive-behavior">Recursive behavior</a></li>
<li><a href="#index-Disjoint-repositories-120">Disjoint repositories</a>: <a href="#Multiple-repositories">Multiple repositories</a></li>
<li><a href="#index-displacement-of-dates-520">displacement of dates</a>: <a href="#Relative-items-in-date-strings">Relative items in date strings</a></li>
<li><a href="#index-Distributing-log-messages-673">Distributing log messages</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-driver_002ec-_0028merge-example_0029-354">driver.c (merge example)</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-edit-_0028subcommand_0029-386">edit (subcommand)</a>: <a href="#Editing-files">Editing files</a></li>
<li><a href="#index-Editing-administrative-files-114">Editing administrative files</a>: <a href="#Intro-administrative-files">Intro administrative files</a></li>
<li><a href="#index-Editing-the-modules-file-214">Editing the modules file</a>: <a href="#Defining-the-module">Defining the module</a></li>
<li><a href="#index-Editor_002c-avoiding-invocation-of-483">Editor, avoiding invocation of</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-EDITOR_002c-environment-variable-786">EDITOR, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-EDITOR_002c-environment-variable-27">EDITOR, environment variable</a>: <a href="#Committing-your-changes">Committing your changes</a></li>
<li><a href="#index-EDITOR_002c-internal-variable-731">EDITOR, internal variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-EDITOR_002c-overriding-466">EDITOR, overriding</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-editors-_0028subcommand_0029-394">editors (subcommand)</a>: <a href="#Watch-information">Watch information</a></li>
<li><a href="#index-Eggert_002c-Paul-544">Eggert, Paul</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-emerge-363">emerge</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-Emptydir_002c-in-CVSROOT-directory-84">Emptydir, in CVSROOT directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Encryption-474">Encryption</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Entries-file_002c-in-CVS-directory-86">Entries file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Entries_002eBackup-file_002c-in-CVS-directory-90">Entries.Backup file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Entries_002eLog-file_002c-in-CVS-directory-88">Entries.Log file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Entries_002eStatic-file_002c-in-CVS-directory-92">Entries.Static file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Environment-variables-778">Environment variables</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-environment-variables_002c-passed-to-administrative-files-737">environment variables, passed to administrative files</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-epoch_002c-for-_0040acronym_007bPOSIX_007d-537">epoch, for <acronym>POSIX</acronym></a>: <a href="#Seconds-since-the-Epoch">Seconds since the Epoch</a></li>
<li><a href="#index-Errors_002c-reporting-820">Errors, reporting</a>: <a href="#BUGS">BUGS</a></li>
<li><a href="#index-Example-of-a-work_002dsession-14">Example of a work-session</a>: <a href="#A-sample-session">A sample session</a></li>
<li><a href="#index-Example-of-merge-353">Example of merge</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-Example_002c-branch-merge-290">Example, branch merge</a>: <a href="#Merging-a-branch">Merging a branch</a></li>
<li><a href="#index-Excluding-directories_002c-in-modules-file-602">Excluding directories, in modules file</a>: <a href="#Excluding-directories">Excluding directories</a></li>
<li><a href="#index-Exit-status_002c-of-commitinfo-656">Exit status, of commitinfo</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-Exit-status_002c-of-CVS-449">Exit status, of CVS</a>: <a href="#Exit-status">Exit status</a></li>
<li><a href="#index-Exit-status_002c-of-editor-811">Exit status, of editor</a>: <a href="#Error-messages">Error messages</a></li>
<li><a href="#index-Exit-status_002c-of-taginfo-admin-file-692">Exit status, of taginfo admin file</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-Exit-status_002c-of-_0040file_007bverifymsg_007d-666">Exit status, of <samp><span class="file">verifymsg</span></samp></a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-export-_0028subcommand_0029-564">export (subcommand)</a>: <a href="#export">export</a></li>
<li><a href="#index-Export-program-606">Export program</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-ext-method_002c-setting-up-159">ext method, setting up</a>: <a href="#Connecting-via-rsh">Connecting via rsh</a></li>
<li><a href="#index-ext-method_002c-troubleshooting-812">ext method, troubleshooting</a>: <a href="#Connection">Connection</a></li>
<li><a href="#index-Fetching-source-21">Fetching source</a>: <a href="#Getting-the-source">Getting the source</a></li>
<li><a href="#index-File-had-conflicts-on-merge-344">File had conflicts on merge</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-File-locking-328">File locking</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-File-permissions_002c-general-53">File permissions, general</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-File-permissions_002c-Windows_002dspecific-66">File permissions, Windows-specific</a>: <a href="#Windows-permissions">Windows permissions</a></li>
<li><a href="#index-File-status-334">File status</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Files_002c-moving-318">Files, moving</a>: <a href="#Moving-files">Moving files</a></li>
<li><a href="#index-Files_002c-reference-manual-592">Files, reference manual</a>: <a href="#Administrative-files">Administrative files</a></li>
<li><a href="#index-Fixing-a-log-message-554">Fixing a log message</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-Forcing-a-tag-match-482">Forcing a tag match</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-fork-method_002c-setting-up-194">fork method, setting up</a>: <a href="#Connecting-via-fork">Connecting via fork</a></li>
<li><a href="#index-fork_002c-access-method-193">fork, access method</a>: <a href="#Connecting-via-fork">Connecting via fork</a></li>
<li><a href="#index-Form-for-log-message-714">Form for log message</a>: <a href="#rcsinfo">rcsinfo</a></li>
<li><a href="#index-Format-of-CVS-commands-448">Format of CVS commands</a>: <a href="#Structure">Structure</a></li>
<li><a href="#index-format-strings-632">format strings</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-format-strings_002c-commitinfo-admin-file-653">format strings, commitinfo admin file</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-format-strings_002c-common-syntax-633">format strings, common syntax</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-format-strings_002c-config-admin-file-774">format strings, config admin file</a>: <a href="#config">config</a></li>
<li><a href="#index-format-strings_002c-loginfo-admin-file-675">format strings, loginfo admin file</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-format-strings_002c-postadmin-admin-file-684">format strings, postadmin admin file</a>: <a href="#postadmin">postadmin</a></li>
<li><a href="#index-format-strings_002c-postproxy-admin-file-712">format strings, postproxy admin file</a>: <a href="#postproxy">postproxy</a></li>
<li><a href="#index-format-strings_002c-posttag-admin-file-697">format strings, posttag admin file</a>: <a href="#posttag">posttag</a></li>
<li><a href="#index-format-strings_002c-postwatch-admin-file-701">format strings, postwatch admin file</a>: <a href="#postwatch">postwatch</a></li>
<li><a href="#index-format-strings_002c-preproxy-admin-file-706">format strings, preproxy admin file</a>: <a href="#preproxy">preproxy</a></li>
<li><a href="#index-format-strings_002c-taginfo-admin-file-689">format strings, taginfo admin file</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-format-strings_002c-verifymsg-admin-file-663">format strings, verifymsg admin file</a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-general-date-syntax-490">general date syntax</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Getting-started-15">Getting started</a>: <a href="#A-sample-session">A sample session</a></li>
<li><a href="#index-Getting-the-source-19">Getting the source</a>: <a href="#Getting-the-source">Getting the source</a></li>
<li><a href="#index-Global-cvsignore-719">Global cvsignore</a>: <a href="#cvsignore">cvsignore</a></li>
<li><a href="#index-Global-options-453">Global options</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Group_002c-UNIX-file-permissions_002c-in-repository-55">Group, UNIX file permissions, in repository</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-gserver-_0028client_002fserver-connection-method_0029_002c-port-specification-169">gserver (client/server connection method), port specification</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-gserver-_0028client_002fserver-connection-method_0029_002c-port-specification-142">gserver (client/server connection method), port specification</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-gserver-method_002c-setting-up-187">gserver method, setting up</a>: <a href="#GSSAPI-authenticated">GSSAPI authenticated</a></li>
<li><a href="#index-GSSAPI-185">GSSAPI</a>: <a href="#GSSAPI-authenticated">GSSAPI authenticated</a></li>
<li><a href="#index-Gzip-589">Gzip</a>: <a href="#Invoking-CVS">Invoking CVS</a></li>
<li><a href="#index-Gzip-476">Gzip</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Hard-links-443">Hard links</a>: <a href="#Special-Files">Special Files</a></li>
<li><a href="#index-HEAD_002c-as-reserved-tag-name-233">HEAD, as reserved tag name</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-HEAD_002c-special-tag-485">HEAD, special tag</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-Header-keyword-410">Header keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-history-_0028subcommand_0029-565">history (subcommand)</a>: <a href="#history">history</a></li>
<li><a href="#index-History-browsing-322">History browsing</a>: <a href="#History-browsing">History browsing</a></li>
<li><a href="#index-History-file-724">History file</a>: <a href="#history-file">history file</a></li>
<li><a href="#index-History-files-50">History files</a>: <a href="#Repository-files">Repository files</a></li>
<li><a href="#index-History-of-CVS-5">History of CVS</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-HistoryLogPath_002c-in-CVSROOT_002fconfig-744">HistoryLogPath, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-HistorySearchPath_002c-in-CVSROOT_002fconfig-745">HistorySearchPath, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-HOME_002c-environment-variable-789">HOME, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-HOMEDRIVE_002c-environment-variable-791">HOMEDRIVE, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-HOMEPATH_002c-environment-variable-790">HOMEPATH, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-HTTP-proxies_002c-connecting-via-152">HTTP proxies, connecting via</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-Id-keyword-411">Id keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Ident-_0028shell-command_0029-423">Ident (shell command)</a>: <a href="#Using-keywords">Using keywords</a></li>
<li><a href="#index-Identifying-a-branch-277">Identifying a branch</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Identifying-files-404">Identifying files</a>: <a href="#Keyword-substitution">Keyword substitution</a></li>
<li><a href="#index-Ignored-files-721">Ignored files</a>: <a href="#cvsignore">cvsignore</a></li>
<li><a href="#index-Ignoring-files-720">Ignoring files</a>: <a href="#cvsignore">cvsignore</a></li>
<li><a href="#index-import-_0028subcommand_0029-566">import (subcommand)</a>: <a href="#import">import</a></li>
<li><a href="#index-import_002c-config-admin-file-747">import, config admin file</a>: <a href="#config">config</a></li>
<li><a href="#index-Importing-files-208">Importing files</a>: <a href="#From-files">From files</a></li>
<li><a href="#index-Importing-files_002c-from-other-version-control-systems-209">Importing files, from other version control systems</a>: <a href="#From-other-version-control-systems">From other version control systems</a></li>
<li><a href="#index-Importing-modules-434">Importing modules</a>: <a href="#First-import">First import</a></li>
<li><a href="#index-ImportNewFilesToVendorBranchOnly_002c-in-CVSROOT_002fconfig-746">ImportNewFilesToVendorBranchOnly, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Index-824">Index</a>: <a href="#Index">Index</a></li>
<li><a href="#index-inetd_002c-configuring-for-pserver-173">inetd, configuring for pserver</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-info-files-622">info files</a>: <a href="#Trigger-Scripts">Trigger Scripts</a></li>
<li><a href="#index-info-files_002c-commitinfo-647">info files, commitinfo</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-info-files_002c-common-syntax-625">info files, common syntax</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-info-files_002c-common-syntax_002c-format-strings-634">info files, common syntax, format strings</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-info-files_002c-common-syntax_002c-updating-legacy-repositories-641">info files, common syntax, updating legacy repositories</a>: <a href="#Updating-Commit-Files">Updating Commit Files</a></li>
<li><a href="#index-info-files_002c-precommit-verification-of-commits-650">info files, precommit verification of commits</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-info-files_002c-security-636">info files, security</a>: <a href="#Trigger-Script-Security">Trigger Script Security</a></li>
<li><a href="#index-Informing-others-364">Informing others</a>: <a href="#Informing-others">Informing others</a></li>
<li><a href="#index-init-_0028subcommand_0029-125">init (subcommand)</a>: <a href="#Creating-a-repository">Creating a repository</a></li>
<li><a href="#index-Installed-images-_0028VMS_0029-64">Installed images (VMS)</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-Internal-variables-726">Internal variables</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-Introduction-to-CVS-3">Introduction to CVS</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-Invoking-CVS-587">Invoking CVS</a>: <a href="#Invoking-CVS">Invoking CVS</a></li>
<li><a href="#index-g_t_0040sc_007biso_007d-8601-date-format-504"><span class="sc">iso</span> 8601 date format</a>: <a href="#Calendar-date-items">Calendar date items</a></li>
<li><a href="#index-Isolation-324">Isolation</a>: <a href="#History-browsing">History browsing</a></li>
<li><a href="#index-items-in-date-strings-491">items in date strings</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Join-288">Join</a>: <a href="#Merging-a-branch">Merging a branch</a></li>
<li><a href="#index-Keeping-a-checked-out-copy-678">Keeping a checked out copy</a>: <a href="#Keeping-a-checked-out-copy">Keeping a checked out copy</a></li>
<li><a href="#index-Kerberos_002c-using-gserver-method-188">Kerberos, using gserver method</a>: <a href="#GSSAPI-authenticated">GSSAPI authenticated</a></li>
<li><a href="#index-Kerberos_002c-using-kerberized-rsh-160">Kerberos, using kerberized rsh</a>: <a href="#Connecting-via-rsh">Connecting via rsh</a></li>
<li><a href="#index-Kerberos_002c-using-kserver-method-189">Kerberos, using kserver method</a>: <a href="#Kerberos-authenticated">Kerberos authenticated</a></li>
<li><a href="#index-Keyword-expansion-403">Keyword expansion</a>: <a href="#Keyword-substitution">Keyword substitution</a></li>
<li><a href="#index-Keyword-List-405">Keyword List</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Keyword-substitution-402">Keyword substitution</a>: <a href="#Keyword-substitution">Keyword substitution</a></li>
<li><a href="#index-Keyword-substitution_002c-and-merging-300">Keyword substitution, and merging</a>: <a href="#Merging-and-keywords">Merging and keywords</a></li>
<li><a href="#index-Keyword-substitution_002c-changing-modes-425">Keyword substitution, changing modes</a>: <a href="#Substitution-modes">Substitution modes</a></li>
<li><a href="#index-KeywordExpand_002c-in-CVSROOT_002fconfig-749">KeywordExpand, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Kflag-427">Kflag</a>: <a href="#Substitution-modes">Substitution modes</a></li>
<li><a href="#index-kinit-192">kinit</a>: <a href="#Kerberos-authenticated">Kerberos authenticated</a></li>
<li><a href="#index-Known-bugs-in-this-manual-or-CVS-823">Known bugs in this manual or CVS</a>: <a href="#BUGS">BUGS</a></li>
<li><a href="#index-kserver-_0028client_002fserver-connection-method_0029_002c-port-specification-168">kserver (client/server connection method), port specification</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-kserver-_0028client_002fserver-connection-method_0029_002c-port-specification-141">kserver (client/server connection method), port specification</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-kserver-method_002c-setting-up-191">kserver method, setting up</a>: <a href="#Kerberos-authenticated">Kerberos authenticated</a></li>
<li><a href="#index-language_002c-in-dates-498">language, in dates</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Layout-of-repository-37">Layout of repository</a>: <a href="#Repository">Repository</a></li>
<li><a href="#index-Left_002dhand-options-454">Left-hand options</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Linear-development-219">Linear development</a>: <a href="#Revision-numbers">Revision numbers</a></li>
<li><a href="#index-Link_002c-symbolic_002c-importing-568">Link, symbolic, importing</a>: <a href="#import-output">import output</a></li>
<li><a href="#index-List_002c-mailing-list-11">List, mailing list</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-Local-keyword-422">Local keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-local-method_002c-setting-up-41">local method, setting up</a>: <a href="#Repository">Repository</a></li>
<li><a href="#index-LocalKeyword_002c-in-CVSROOT_002fconfig-750">LocalKeyword, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Locally-Added-338">Locally Added</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Locally-Modified-337">Locally Modified</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Locally-Removed-339">Locally Removed</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-LockDir_002c-in-CVSROOT_002fconfig-751">LockDir, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Locker-keyword-413">Locker keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Locking-files-329">Locking files</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-Locks_002c-cvs_002c-and-backups-128">Locks, cvs, and backups</a>: <a href="#Backing-up">Backing up</a></li>
<li><a href="#index-Locks_002c-cvs_002c-introduction-367">Locks, cvs, introduction</a>: <a href="#Concurrency">Concurrency</a></li>
<li><a href="#index-Locks_002c-cvs_002c-technical-details-75">Locks, cvs, technical details</a>: <a href="#Locks">Locks</a></li>
<li><a href="#index-log-_0028subcommand_0029-569">log (subcommand)</a>: <a href="#log">log</a></li>
<li><a href="#index-Log-information_002c-saving-725">Log information, saving</a>: <a href="#history-file">history file</a></li>
<li><a href="#index-Log-keyword-414">Log keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Log-keyword_002c-configuring-substitution-behavior-754">Log keyword, configuring substitution behavior</a>: <a href="#config">config</a></li>
<li><a href="#index-Log-keyword_002c-configuring-substitution-behavior-417">Log keyword, configuring substitution behavior</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Log-message-entry-25">Log message entry</a>: <a href="#Committing-your-changes">Committing your changes</a></li>
<li><a href="#index-Log-message-template-715">Log message template</a>: <a href="#rcsinfo">rcsinfo</a></li>
<li><a href="#index-Log-message_002c-correcting-555">Log message, correcting</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-Log-message_002c-verifying-661">Log message, verifying</a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-Log-messages-674">Log messages</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-logging_002c-commits-717">logging, commits</a>: <a href="#rcsinfo">rcsinfo</a></li>
<li><a href="#index-logging_002c-commits-670">logging, commits</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-logging_002c-commits-662">logging, commits</a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-LogHistory_002c-in-CVSROOT_002fconfig-752">LogHistory, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Login-_0028subcommand_0029-178">Login (subcommand)</a>: <a href="#Password-authentication-client">Password authentication client</a></li>
<li><a href="#index-loginfo-_0028admin-file_0029-669">loginfo (admin file)</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-loginfo-_0028admin-file_0029_002c-updating-legacy-repositories-676">loginfo (admin file), updating legacy repositories</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-LOGNAME_002c-environment-variable-739">LOGNAME, environment variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-Logout-_0028subcommand_0029-183">Logout (subcommand)</a>: <a href="#Password-authentication-client">Password authentication client</a></li>
<li><a href="#index-ls-_0028subcommand_0029-574">ls (subcommand)</a>: <a href="#ls-_0026-rls">ls &amp; rls</a></li>
<li><a href="#index-MacKenzie_002c-David-542">MacKenzie, David</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-Mail_002c-automatic-mail-on-commit-366">Mail, automatic mail on commit</a>: <a href="#Informing-others">Informing others</a></li>
<li><a href="#index-Mailing-list-10">Mailing list</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-Mailing-log-messages-672">Mailing log messages</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-Main-trunk-and-branches-262">Main trunk and branches</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-make-437">make</a>: <a href="#Builds">Builds</a></li>
<li><a href="#index-Many-repositories-118">Many repositories</a>: <a href="#Multiple-repositories">Multiple repositories</a></li>
<li><a href="#index-Markers_002c-conflict-356">Markers, conflict</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-MaxCommentLeaderLength-415">MaxCommentLeaderLength</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-MaxCommentLeaderLength_002c-in-CVSROOT_002fconfig-753">MaxCommentLeaderLength, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-MaxCompressionLevel_002c-in-CVSROOT_002fconfig-756">MaxCompressionLevel, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Mdocdate-keyword-409">Mdocdate keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Merge_002c-an-example-352">Merge, an example</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-Merge_002c-branch-example-291">Merge, branch example</a>: <a href="#Merging-a-branch">Merging a branch</a></li>
<li><a href="#index-Merging-260">Merging</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-Merging-a-branch-286">Merging a branch</a>: <a href="#Merging-a-branch">Merging a branch</a></li>
<li><a href="#index-Merging-a-file-349">Merging a file</a>: <a href="#Updating-a-file">Updating a file</a></li>
<li><a href="#index-Merging-two-revisions-292">Merging two revisions</a>: <a href="#Merging-two-revisions">Merging two revisions</a></li>
<li><a href="#index-Merging_002c-and-keyword-substitution-299">Merging, and keyword substitution</a>: <a href="#Merging-and-keywords">Merging and keywords</a></li>
<li><a href="#index-Meyering_002c-Jim-543">Meyering, Jim</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-MinCompressionLevel_002c-in-CVSROOT_002fconfig-755">MinCompressionLevel, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-minutes_002c-time-zone-correction-by-514">minutes, time zone correction by</a>: <a href="#Time-of-day-items">Time of day items</a></li>
<li><a href="#index-mkmodules-808">mkmodules</a>: <a href="#Error-messages">Error messages</a></li>
<li><a href="#index-Modifications_002c-copying-between-branches-266">Modifications, copying between branches</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-Module-status-611">Module status</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-Module_002c-defining-215">Module, defining</a>: <a href="#Defining-the-module">Defining the module</a></li>
<li><a href="#index-Modules-_0028admin-file_0029-595">Modules (admin file)</a>: <a href="#modules">modules</a></li>
<li><a href="#index-Modules-file-111">Modules file</a>: <a href="#Intro-administrative-files">Intro administrative files</a></li>
<li><a href="#index-Modules-file-program-options-615">Modules file program options</a>: <a href="#Module-program-options">Module program options</a></li>
<li><a href="#index-Modules-file_002c-changing-216">Modules file, changing</a>: <a href="#Defining-the-module">Defining the module</a></li>
<li><a href="#index-modules_002edb-78">modules.db</a>: <a href="#CVSROOT-storage">CVSROOT storage</a></li>
<li><a href="#index-modules_002edir-80">modules.dir</a>: <a href="#CVSROOT-storage">CVSROOT storage</a></li>
<li><a href="#index-modules_002epag-79">modules.pag</a>: <a href="#CVSROOT-storage">CVSROOT storage</a></li>
<li><a href="#index-month-names-in-date-strings-506">month names in date strings</a>: <a href="#Calendar-date-items">Calendar date items</a></li>
<li><a href="#index-months_002c-written_002dout-497">months, written-out</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Motivation-for-branches-269">Motivation for branches</a>: <a href="#Branches-motivation">Branches motivation</a></li>
<li><a href="#index-Moving-a-repository-131">Moving a repository</a>: <a href="#Moving-a-repository">Moving a repository</a></li>
<li><a href="#index-Moving-branch-tags-248">Moving branch tags</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Moving-directories-319">Moving directories</a>: <a href="#Moving-directories">Moving directories</a></li>
<li><a href="#index-Moving-files-316">Moving files</a>: <a href="#Moving-files">Moving files</a></li>
<li><a href="#index-Moving-tags-247">Moving tags</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Multiple-developers-326">Multiple developers</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-Multiple-repositories-116">Multiple repositories</a>: <a href="#Multiple-repositories">Multiple repositories</a></li>
<li><a href="#index-Name-keyword-412">Name keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Name_002c-symbolic-_0028tag_0029-232">Name, symbolic (tag)</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Needs-Checkout-340">Needs Checkout</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Needs-Merge-342">Needs Merge</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Needs-Patch-341">Needs Patch</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Newsgroups-12">Newsgroups</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-notify-_0028admin-file_0029-383">notify (admin file)</a>: <a href="#Getting-Notified">Getting Notified</a></li>
<li><a href="#index-Notify-file_002c-in-CVS-directory-98">Notify file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Notify_002etmp-file_002c-in-CVS-directory-100">Notify.tmp file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Number_002c-branch-284">Number, branch</a>: <a href="#Branches-and-revisions">Branches and revisions</a></li>
<li><a href="#index-Number_002c-branch-223">Number, branch</a>: <a href="#Revision-numbers">Revision numbers</a></li>
<li><a href="#index-Number_002c-revision_002d-220">Number, revision-</a>: <a href="#Revision-numbers">Revision numbers</a></li>
<li><a href="#index-numbers_002c-written_002dout-492">numbers, written-out</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Option-defaults-451">Option defaults</a>: <a href="#g_t_007e_002f_002ecvsrc">~/.cvsrc</a></li>
<li><a href="#index-options_002c-connection-method-145">options, connection method</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-Options_002c-global-452">Options, global</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Options_002c-in-modules-file-604">Options, in modules file</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-ordinal-numbers-493">ordinal numbers</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Outdating-revisions-557">Outdating revisions</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-Overlap-351">Overlap</a>: <a href="#Updating-a-file">Updating a file</a></li>
<li><a href="#index-Overriding-CVSREAD-473">Overriding CVSREAD</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Overriding-CVSROOT-465">Overriding CVSROOT</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Overriding-EDITOR-467">Overriding EDITOR</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Overriding-RCSBIN-458">Overriding RCSBIN</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Overview-1">Overview</a>: <a href="#Overview">Overview</a></li>
<li><a href="#index-Ownership_002c-saving-in-CVS-441">Ownership, saving in CVS</a>: <a href="#Special-Files">Special Files</a></li>
<li><a href="#index-Parallel-repositories-119">Parallel repositories</a>: <a href="#Multiple-repositories">Multiple repositories</a></li>
<li><a href="#index-passwd-_0028admin-file_0029-176">passwd (admin file)</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-Password-client_002c-using-179">Password client, using</a>: <a href="#Password-authentication-client">Password authentication client</a></li>
<li><a href="#index-Password-server_002c-setting-up-171">Password server, setting up</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-PATH_002c-environment-variable-788">PATH, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-Per_002ddirectory-sticky-tags_002fdates-97">Per-directory sticky tags/dates</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Permissions_002c-general-54">Permissions, general</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-Permissions_002c-saving-in-CVS-442">Permissions, saving in CVS</a>: <a href="#Special-Files">Special Files</a></li>
<li><a href="#index-Permissions_002c-Windows_002dspecific-67">Permissions, Windows-specific</a>: <a href="#Windows-permissions">Windows permissions</a></li>
<li><a href="#index-Pinard_002c-F_002e-545">Pinard, F.</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-Policy-401">Policy</a>: <a href="#When-to-commit">When to commit</a></li>
<li><a href="#index-port_002c-specifying-for-remote-repositories-170">port, specifying for remote repositories</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-port_002c-specifying-for-remote-repositories-143">port, specifying for remote repositories</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-postadmin-_0028admin-file_0029-681">postadmin (admin file)</a>: <a href="#postadmin">postadmin</a></li>
<li><a href="#index-postproxy-_0028admin-file_0029-707">postproxy (admin file)</a>: <a href="#postproxy">postproxy</a></li>
<li><a href="#index-posttag-_0028admin-file_0029-694">posttag (admin file)</a>: <a href="#posttag">posttag</a></li>
<li><a href="#index-postwatch-_0028admin-file_0029-698">postwatch (admin file)</a>: <a href="#postwatch">postwatch</a></li>
<li><a href="#index-preproxy-_0028admin-file_0029-702">preproxy (admin file)</a>: <a href="#preproxy">preproxy</a></li>
<li><a href="#index-Primary-server-759">Primary server</a>: <a href="#config">config</a></li>
<li><a href="#index-Primary-server-197">Primary server</a>: <a href="#Write-proxies">Write proxies</a></li>
<li><a href="#index-PrimaryServer_002c-in-CVSROOT_002fconfig-758">PrimaryServer, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-PrimaryServer_002c-in-CVSROOT_002fconfig-196">PrimaryServer, in CVSROOT/config</a>: <a href="#Write-proxies">Write proxies</a></li>
<li><a href="#index-proxies_002c-HTTP_002c-connecting-via-151">proxies, HTTP, connecting via</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-proxies_002c-web_002c-connecting-via-149">proxies, web, connecting via</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-proxy_002c-method-option-147">proxy, method option</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-proxy_002c-write-761">proxy, write</a>: <a href="#config">config</a></li>
<li><a href="#index-proxy_002c-write-199">proxy, write</a>: <a href="#Write-proxies">Write proxies</a></li>
<li><a href="#index-proxyport_002c-method-option-148">proxyport, method option</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-pserver-_0028client_002fserver-connection-method_0029_002c-port-specification-167">pserver (client/server connection method), port specification</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-pserver-_0028client_002fserver-connection-method_0029_002c-port-specification-140">pserver (client/server connection method), port specification</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-pserver-_0028subcommand_0029-578">pserver (subcommand)</a>: <a href="#server-_0026-pserver">server &amp; pserver</a></li>
<li><a href="#index-pserver-_0028subcommand_0029-163">pserver (subcommand)</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-pserver-method_002c-setting-up-181">pserver method, setting up</a>: <a href="#Password-authentication-client">Password authentication client</a></li>
<li><a href="#index-pserver-method_002c-troubleshooting-814">pserver method, troubleshooting</a>: <a href="#Connection">Connection</a></li>
<li><a href="#index-pure-numbers-in-date-strings-535">pure numbers in date strings</a>: <a href="#Pure-numbers-in-date-strings">Pure numbers in date strings</a></li>
<li><a href="#index-PVCS_002c-importing-files-from-212">PVCS, importing files from</a>: <a href="#From-other-version-control-systems">From other version control systems</a></li>
<li><a href="#index-RCS-history-files-51">RCS history files</a>: <a href="#Repository-files">Repository files</a></li>
<li><a href="#index-RCS-revision-numbers-228">RCS revision numbers</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-RCS_002c-importing-files-from-210">RCS, importing files from</a>: <a href="#From-other-version-control-systems">From other version control systems</a></li>
<li><a href="#index-RCS_002dstyle-locking-333">RCS-style locking</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-RCSBIN_002c-in-CVSROOT_002fconfig-763">RCSBIN, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-RCSBIN_002c-internal-variable-729">RCSBIN, internal variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-RCSBIN_002c-overriding-457">RCSBIN, overriding</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-RCSfile-keyword-418">RCSfile keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-rcsinfo-_0028admin-file_0029-713">rcsinfo (admin file)</a>: <a href="#rcsinfo">rcsinfo</a></li>
<li><a href="#index-rdiff-_0028subcommand_0029-576">rdiff (subcommand)</a>: <a href="#rdiff">rdiff</a></li>
<li><a href="#index-Read_002donly-files_002c-and-_002dr-470">Read-only files, and -r</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Read_002donly-files_002c-and-CVSREAD-783">Read-only files, and CVSREAD</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-Read_002donly-files_002c-and-watches-376">Read-only files, and watches</a>: <a href="#Setting-a-watch">Setting a watch</a></li>
<li><a href="#index-Read_002donly-files_002c-in-repository-56">Read-only files, in repository</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-Read_002donly-mode-469">Read-only mode</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Read_002donly-repository-access-201">Read-only repository access</a>: <a href="#Read_002donly-access">Read-only access</a></li>
<li><a href="#index-Read_002donly-repository-mode-468">Read-only repository mode</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-readers-_0028admin-file_0029-202">readers (admin file)</a>: <a href="#Read_002donly-access">Read-only access</a></li>
<li><a href="#index-Recursive-_0028directory-descending_0029-303">Recursive (directory descending)</a>: <a href="#Recursive-behavior">Recursive behavior</a></li>
<li><a href="#index-Redirect_002c-method-option-155">Redirect, method option</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-Reference-manual-_0028files_0029-593">Reference manual (files)</a>: <a href="#Administrative-files">Administrative files</a></li>
<li><a href="#index-Reference-manual-for-variables-779">Reference manual for variables</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-Reference_002c-commands-586">Reference, commands</a>: <a href="#Invoking-CVS">Invoking CVS</a></li>
<li><a href="#index-Regular-expression-syntax-629">Regular expression syntax</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-Regular-modules-599">Regular modules</a>: <a href="#Regular-modules">Regular modules</a></li>
<li><a href="#index-relative-items-in-date-strings-519">relative items in date strings</a>: <a href="#Relative-items-in-date-strings">Relative items in date strings</a></li>
<li><a href="#index-release-_0028subcommand_0029-577">release (subcommand)</a>: <a href="#release">release</a></li>
<li><a href="#index-Releases_002c-revisions-and-versions-226">Releases, revisions and versions</a>: <a href="#Versions-revisions-releases">Versions revisions releases</a></li>
<li><a href="#index-Releasing-your-working-copy-32">Releasing your working copy</a>: <a href="#Cleaning-up">Cleaning up</a></li>
<li><a href="#index-Remote-repositories-134">Remote repositories</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-Remote-repositories_002c-port-specification-164">Remote repositories, port specification</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-Remote-repositories_002c-port-specification-137">Remote repositories, port specification</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-Remove-_0028subcommand_0029-312">Remove (subcommand)</a>: <a href="#Removing-files">Removing files</a></li>
<li><a href="#index-Removing-a-change-296">Removing a change</a>: <a href="#Merging-two-revisions">Merging two revisions</a></li>
<li><a href="#index-Removing-branch-tags-244">Removing branch tags</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Removing-directories-314">Removing directories</a>: <a href="#Removing-directories">Removing directories</a></li>
<li><a href="#index-Removing-files-310">Removing files</a>: <a href="#Removing-files">Removing files</a></li>
<li><a href="#index-Removing-tags-243">Removing tags</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Removing-your-working-copy-31">Removing your working copy</a>: <a href="#Cleaning-up">Cleaning up</a></li>
<li><a href="#index-Renaming-directories-320">Renaming directories</a>: <a href="#Moving-directories">Moving directories</a></li>
<li><a href="#index-Renaming-files-317">Renaming files</a>: <a href="#Moving-files">Moving files</a></li>
<li><a href="#index-Renaming-tags-251">Renaming tags</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Replacing-a-log-message-552">Replacing a log message</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-Reporting-bugs-818">Reporting bugs</a>: <a href="#BUGS">BUGS</a></li>
<li><a href="#index-Repositories_002c-multiple-117">Repositories, multiple</a>: <a href="#Multiple-repositories">Multiple repositories</a></li>
<li><a href="#index-Repositories_002c-remote-133">Repositories, remote</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-Repositories_002c-remote_002c-port-specification-165">Repositories, remote, port specification</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-Repositories_002c-remote_002c-port-specification-138">Repositories, remote, port specification</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-Repository-_0028intro_0029-35">Repository (intro)</a>: <a href="#Repository">Repository</a></li>
<li><a href="#index-Repository-file_002c-in-CVS-directory-82">Repository file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Repository_002c-backing-up-126">Repository, backing up</a>: <a href="#Backing-up">Backing up</a></li>
<li><a href="#index-Repository_002c-example-36">Repository, example</a>: <a href="#Repository">Repository</a></li>
<li><a href="#index-Repository_002c-how-data-is-stored-49">Repository, how data is stored</a>: <a href="#Repository-storage">Repository storage</a></li>
<li><a href="#index-Repository_002c-moving-130">Repository, moving</a>: <a href="#Moving-a-repository">Moving a repository</a></li>
<li><a href="#index-Repository_002c-setting-up-122">Repository, setting up</a>: <a href="#Creating-a-repository">Creating a repository</a></li>
<li><a href="#index-RereadLogAfterVerify_002c-in-CVSROOT_002fconfig-764">RereadLogAfterVerify, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Reserved-checkouts-331">Reserved checkouts</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-Resetting-sticky-tags-255">Resetting sticky tags</a>: <a href="#Sticky-tags">Sticky tags</a></li>
<li><a href="#index-Resolving-a-conflict-361">Resolving a conflict</a>: <a href="#Conflicts-example">Conflicts example</a></li>
<li><a href="#index-Restoring-old-version-of-removed-file-297">Restoring old version of removed file</a>: <a href="#Merging-two-revisions">Merging two revisions</a></li>
<li><a href="#index-Resurrecting-old-version-of-dead-file-298">Resurrecting old version of dead file</a>: <a href="#Merging-two-revisions">Merging two revisions</a></li>
<li><a href="#index-Retrieve-a-branch-275">Retrieve a branch</a>: <a href="#Accessing-branches">Accessing branches</a></li>
<li><a href="#index-Retrieving-an-old-revision-using-tags-237">Retrieving an old revision using tags</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Reverting-to-repository-version-390">Reverting to repository version</a>: <a href="#Editing-files">Editing files</a></li>
<li><a href="#index-Revision-keyword-419">Revision keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Revision-management-398">Revision management</a>: <a href="#Revision-management">Revision management</a></li>
<li><a href="#index-Revision-numbers-217">Revision numbers</a>: <a href="#Revision-numbers">Revision numbers</a></li>
<li><a href="#index-Revision-numbers-_0028branches_0029-285">Revision numbers (branches)</a>: <a href="#Branches-and-revisions">Branches and revisions</a></li>
<li><a href="#index-Revision-tree-218">Revision tree</a>: <a href="#Revision-numbers">Revision numbers</a></li>
<li><a href="#index-Revision-tree_002c-making-branches-263">Revision tree, making branches</a>: <a href="#Branching-and-merging">Branching and merging</a></li>
<li><a href="#index-Revisions_002c-merging-differences-between-293">Revisions, merging differences between</a>: <a href="#Merging-two-revisions">Merging two revisions</a></li>
<li><a href="#index-Revisions_002c-versions-and-releases-224">Revisions, versions and releases</a>: <a href="#Versions-revisions-releases">Versions revisions releases</a></li>
<li><a href="#index-Right_002dhand-options-478">Right-hand options</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-rls-_0028subcommand_0029-575">rls (subcommand)</a>: <a href="#ls-_0026-rls">ls &amp; rls</a></li>
<li><a href="#index-Root-file_002c-in-CVS-directory-47">Root file, in CVS directory</a>: <a href="#Specifying-a-repository">Specifying a repository</a></li>
<li><a href="#index-rsh-156">rsh</a>: <a href="#Connecting-via-rsh">Connecting via rsh</a></li>
<li><a href="#index-rsh-replacements-_0028Kerberized_002c-SSH_002c-_0026c_0029-162">rsh replacements (Kerberized, SSH, &amp;c)</a>: <a href="#Connecting-via-rsh">Connecting via rsh</a></li>
<li><a href="#index-rtag-_0028subcommand_0029-240">rtag (subcommand)</a>: <a href="#Tagging-by-date_002ftag">Tagging by date/tag</a></li>
<li><a href="#index-rtag-_0028subcommand_0029_002c-creating-a-branch-using-273">rtag (subcommand), creating a branch using</a>: <a href="#Creating-a-branch">Creating a branch</a></li>
<li><a href="#index-Salz_002c-Rich-540">Salz, Rich</a>: <a href="#Authors-of-get_005fdate">Authors of get_date</a></li>
<li><a href="#index-Saving-space-558">Saving space</a>: <a href="#admin-options">admin options</a></li>
<li><a href="#index-SCCS_002c-importing-files-from-211">SCCS, importing files from</a>: <a href="#From-other-version-control-systems">From other version control systems</a></li>
<li><a href="#index-script-hook_002c-postadmin-682">script hook, postadmin</a>: <a href="#postadmin">postadmin</a></li>
<li><a href="#index-script-hook_002c-postproxy-708">script hook, postproxy</a>: <a href="#postproxy">postproxy</a></li>
<li><a href="#index-script-hook_002c-posttag-695">script hook, posttag</a>: <a href="#posttag">posttag</a></li>
<li><a href="#index-script-hook_002c-postwatch-699">script hook, postwatch</a>: <a href="#postwatch">postwatch</a></li>
<li><a href="#index-script-hook_002c-preproxy-703">script hook, preproxy</a>: <a href="#preproxy">preproxy</a></li>
<li><a href="#index-script-hook_002c-taginfo-686">script hook, taginfo</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-script-hooks-624">script hooks</a>: <a href="#Trigger-Scripts">Trigger Scripts</a></li>
<li><a href="#index-script-hooks_002c-commitinfo-648">script hooks, commitinfo</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-script-hooks_002c-common-syntax-626">script hooks, common syntax</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-script-hooks_002c-precommit-verification-of-commits-651">script hooks, precommit verification of commits</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-script-hooks_002c-security-637">script hooks, security</a>: <a href="#Trigger-Script-Security">Trigger Script Security</a></li>
<li><a href="#index-Secondary-server-760">Secondary server</a>: <a href="#config">config</a></li>
<li><a href="#index-Secondary-server-198">Secondary server</a>: <a href="#Write-proxies">Write proxies</a></li>
<li><a href="#index-secondary-server_002c-pull-updates-711">secondary server, pull updates</a>: <a href="#postproxy">postproxy</a></li>
<li><a href="#index-Security_002c-file-permissions-in-repository-52">Security, file permissions in repository</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-Security_002c-GSSAPI-186">Security, GSSAPI</a>: <a href="#GSSAPI-authenticated">GSSAPI authenticated</a></li>
<li><a href="#index-Security_002c-Kerberos-190">Security, Kerberos</a>: <a href="#Kerberos-authenticated">Kerberos authenticated</a></li>
<li><a href="#index-Security_002c-of-pserver-184">Security, of pserver</a>: <a href="#Password-authentication-security">Password authentication security</a></li>
<li><a href="#index-Security_002c-setuid-63">Security, setuid</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-server-_0028subcommand_0029-579">server (subcommand)</a>: <a href="#server-_0026-pserver">server &amp; pserver</a></li>
<li><a href="#index-server-method_002c-setting-up-158">server method, setting up</a>: <a href="#Connecting-via-rsh">Connecting via rsh</a></li>
<li><a href="#index-server-method_002c-troubleshooting-813">server method, troubleshooting</a>: <a href="#Connection">Connection</a></li>
<li><a href="#index-Server_002c-CVS-136">Server, CVS</a>: <a href="#Remote-repositories">Remote repositories</a></li>
<li><a href="#index-Server_002c-temporary-directories-205">Server, temporary directories</a>: <a href="#Server-temporary-directory">Server temporary directory</a></li>
<li><a href="#index-Setgid-62">Setgid</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-Setting-up-a-repository-124">Setting up a repository</a>: <a href="#Creating-a-repository">Creating a repository</a></li>
<li><a href="#index-Setuid-61">Setuid</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-Source-keyword-420">Source keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Source_002c-getting-CVS-source-9">Source, getting CVS source</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-Source_002c-getting-from-CVS-22">Source, getting from CVS</a>: <a href="#Getting-the-source">Getting the source</a></li>
<li><a href="#index-Special-files-439">Special files</a>: <a href="#Special-Files">Special Files</a></li>
<li><a href="#index-Specifying-dates-481">Specifying dates</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-Spreading-information-365">Spreading information</a>: <a href="#Informing-others">Informing others</a></li>
<li><a href="#index-SSH-_0028rsh-replacement_0029-161">SSH (rsh replacement)</a>: <a href="#Connecting-via-rsh">Connecting via rsh</a></li>
<li><a href="#index-Starting-a-project-with-CVS-206">Starting a project with CVS</a>: <a href="#Starting-a-new-project">Starting a new project</a></li>
<li><a href="#index-State-keyword-421">State keyword</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-Status-of-a-file-335">Status of a file</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Status-of-a-module-610">Status of a module</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-Sticky-date-258">Sticky date</a>: <a href="#Sticky-tags">Sticky tags</a></li>
<li><a href="#index-Sticky-tags-253">Sticky tags</a>: <a href="#Sticky-tags">Sticky tags</a></li>
<li><a href="#index-Sticky-tags_002c-resetting-256">Sticky tags, resetting</a>: <a href="#Sticky-tags">Sticky tags</a></li>
<li><a href="#index-Sticky-tags_002fdates_002c-per_002ddirectory-96">Sticky tags/dates, per-directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Storing-log-messages-671">Storing log messages</a>: <a href="#loginfo">loginfo</a></li>
<li><a href="#index-Stream-authentication-456">Stream authentication</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Structure-445">Structure</a>: <a href="#Structure">Structure</a></li>
<li><a href="#index-Subdirectories-306">Subdirectories</a>: <a href="#Recursive-behavior">Recursive behavior</a></li>
<li><a href="#index-suck-_0028subcommand_0029-581">suck (subcommand)</a>: <a href="#suck">suck</a></li>
<li><a href="#index-Support_002c-getting-CVS-support-822">Support, getting CVS support</a>: <a href="#BUGS">BUGS</a></li>
<li><a href="#index-Symbolic-link_002c-importing-567">Symbolic link, importing</a>: <a href="#import-output">import output</a></li>
<li><a href="#index-Symbolic-links-444">Symbolic links</a>: <a href="#Special-Files">Special Files</a></li>
<li><a href="#index-Symbolic-name-_0028tag_0029-231">Symbolic name (tag)</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Syntax-of-info-files_002c-updating-legacy-repositories-642">Syntax of info files, updating legacy repositories</a>: <a href="#Updating-Commit-Files">Updating Commit Files</a></li>
<li><a href="#index-syntax-of-trigger-script-hooks-628">syntax of trigger script hooks</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-SystemAuth_002c-in-CVSROOT_002fconfig-766">SystemAuth, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-tag-_0028subcommand_0029-239">tag (subcommand)</a>: <a href="#Tagging-the-working-directory">Tagging the working directory</a></li>
<li><a href="#index-tag-_0028subcommand_0029_002c-creating-a-branch-using-272">tag (subcommand), creating a branch using</a>: <a href="#Creating-a-branch">Creating a branch</a></li>
<li><a href="#index-tag-_0028subcommand_0029_002c-introduction-229">tag (subcommand), introduction</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Tag-file_002c-in-CVS-directory-94">Tag file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Tag-program-613">Tag program</a>: <a href="#Module-options">Module options</a></li>
<li><a href="#index-taginfo-_0028admin-file_0029-685">taginfo (admin file)</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-taginfo-_0028admin-file_0029_002c-exit-status-693">taginfo (admin file), exit status</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-taginfo-_0028admin-file_0029_002c-updating-legacy-repositories-690">taginfo (admin file), updating legacy repositories</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-Tags-227">Tags</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Tags_002c-deleting-245">Tags, deleting</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Tags_002c-example-236">Tags, example</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Tags_002c-logging-696">Tags, logging</a>: <a href="#posttag">posttag</a></li>
<li><a href="#index-Tags_002c-logging-687">Tags, logging</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-Tags_002c-moving-249">Tags, moving</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Tags_002c-renaming-252">Tags, renaming</a>: <a href="#Modifying-tags">Modifying tags</a></li>
<li><a href="#index-Tags_002c-retrieving-old-revisions-238">Tags, retrieving old revisions</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Tags_002c-sticky-254">Tags, sticky</a>: <a href="#Sticky-tags">Sticky tags</a></li>
<li><a href="#index-Tags_002c-symbolic-name-230">Tags, symbolic name</a>: <a href="#Tags">Tags</a></li>
<li><a href="#index-Tags_002c-verifying-688">Tags, verifying</a>: <a href="#taginfo">taginfo</a></li>
<li><a href="#index-tc_002c-Trivial-Compiler-_0028example_0029-17">tc, Trivial Compiler (example)</a>: <a href="#A-sample-session">A sample session</a></li>
<li><a href="#index-Team-of-developers-327">Team of developers</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-Template-file_002c-in-CVS-directory-108">Template file, in CVS directory</a>: <a href="#Working-directory-storage">Working directory storage</a></li>
<li><a href="#index-Template-for-log-message-716">Template for log message</a>: <a href="#rcsinfo">rcsinfo</a></li>
<li><a href="#index-Temporary-directories_002c-and-server-204">Temporary directories, and server</a>: <a href="#Server-temporary-directory">Server temporary directory</a></li>
<li><a href="#index-temporary-directory_002c-set-in-config-769">temporary directory, set in config</a>: <a href="#config">config</a></li>
<li><a href="#index-temporary-file-directory_002c-set-via-command-line-460">temporary file directory, set via command line</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-temporary-file-directory_002c-set-via-config-462">temporary file directory, set via config</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-temporary-file-directory_002c-set-via-environment-variable-802">temporary file directory, set via environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-temporary-file-directory_002c-set-via-environment-variable-461">temporary file directory, set via environment variable</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-temporary-files_002c-location-of-803">temporary files, location of</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-temporary-files_002c-location-of-768">temporary files, location of</a>: <a href="#config">config</a></li>
<li><a href="#index-temporary-files_002c-location-of-463">temporary files, location of</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Third_002dparty-sources-429">Third-party sources</a>: <a href="#Tracking-sources">Tracking sources</a></li>
<li><a href="#index-Time-480">Time</a>: <a href="#Common-options">Common options</a></li>
<li><a href="#index-time-of-day-item-508">time of day item</a>: <a href="#Time-of-day-items">Time of day items</a></li>
<li><a href="#index-time-zone-correction-513">time zone correction</a>: <a href="#Time-of-day-items">Time of day items</a></li>
<li><a href="#index-time-zone-item-515">time zone item</a>: <a href="#Time-zone-items">Time zone items</a></li>
<li><a href="#index-time-zone-item-500">time zone item</a>: <a href="#General-date-syntax">General date syntax</a></li>
<li><a href="#index-Timezone_002c-in-output-572">Timezone, in output</a>: <a href="#log-examples">log examples</a></li>
<li><a href="#index-Timezone_002c-in-output-570">Timezone, in output</a>: <a href="#log">log</a></li>
<li><a href="#index-TMPDIR_002c-environment-variable-801">TMPDIR, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-TMPDIR_002c-environment-variable-459">TMPDIR, environment variable</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-TmpDir_002c-in-config-767">TmpDir, in config</a>: <a href="#config">config</a></li>
<li><a href="#index-TopLevelAdmin_002c-in-CVSROOT_002fconfig-770">TopLevelAdmin, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-Trace-471">Trace</a>: <a href="#Global-options">Global options</a></li>
<li><a href="#index-Traceability-323">Traceability</a>: <a href="#History-browsing">History browsing</a></li>
<li><a href="#index-Tracking-sources-430">Tracking sources</a>: <a href="#Tracking-sources">Tracking sources</a></li>
<li><a href="#index-Transactions_002c-atomic_002c-lack-of-372">Transactions, atomic, lack of</a>: <a href="#Concurrency">Concurrency</a></li>
<li><a href="#index-trigger-script-hooks_002c-common-syntax-627">trigger script hooks, common syntax</a>: <a href="#syntax">syntax</a></li>
<li><a href="#index-trigger-scripts-623">trigger scripts</a>: <a href="#Trigger-Scripts">Trigger Scripts</a></li>
<li><a href="#index-trigger-scripts_002c-commitinfo-649">trigger scripts, commitinfo</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-trigger-scripts_002c-precommit-verification-of-commits-652">trigger scripts, precommit verification of commits</a>: <a href="#commitinfo">commitinfo</a></li>
<li><a href="#index-trigger-scripts_002c-security-638">trigger scripts, security</a>: <a href="#Trigger-Script-Security">Trigger Script Security</a></li>
<li><a href="#index-Trivial-Compiler-_0028example_0029-18">Trivial Compiler (example)</a>: <a href="#A-sample-session">A sample session</a></li>
<li><a href="#index-Typical-repository-38">Typical repository</a>: <a href="#Repository">Repository</a></li>
<li><a href="#index-Umask_002c-for-repository-files-60">Umask, for repository files</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-Undoing-a-change-295">Undoing a change</a>: <a href="#Merging-two-revisions">Merging two revisions</a></li>
<li><a href="#index-unedit-_0028subcommand_0029-388">unedit (subcommand)</a>: <a href="#Editing-files">Editing files</a></li>
<li><a href="#index-Unknown-345">Unknown</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Unreserved-checkouts-332">Unreserved checkouts</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-Unresolved-Conflict-343">Unresolved Conflict</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Up_002dto_002ddate-336">Up-to-date</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-update-_0028subcommand_0029-582">update (subcommand)</a>: <a href="#update">update</a></li>
<li><a href="#index-Update_002c-introduction-350">Update, introduction</a>: <a href="#Updating-a-file">Updating a file</a></li>
<li><a href="#index-update_002c-to-display-file-status-346">update, to display file status</a>: <a href="#File-status">File status</a></li>
<li><a href="#index-Updating-a-file-348">Updating a file</a>: <a href="#Updating-a-file">Updating a file</a></li>
<li><a href="#index-UseArchiveCommentLeader-416">UseArchiveCommentLeader</a>: <a href="#Keyword-list">Keyword list</a></li>
<li><a href="#index-UseArchiveCommentLeader_002c-in-CVSROOT_002fconfig-771">UseArchiveCommentLeader, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-UseNewInfoFmtStrings_002c-in-CVSROOT_002fconfig-773">UseNewInfoFmtStrings, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-User-aliases-177">User aliases</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-User-variables-736">User variables</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-USER_002c-environment-variable-740">USER, environment variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-USER_002c-internal-variable-733">USER, internal variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-UserAdminOptions_002c-in-CVSROOT_002fconfig-777">UserAdminOptions, in CVSROOT/config</a>: <a href="#config">config</a></li>
<li><a href="#index-UserAdminOptions_002c-in-CVSROOT_002fconfig-549">UserAdminOptions, in CVSROOT/config</a>: <a href="#admin">admin</a></li>
<li><a href="#index-users-_0028admin-file_0029-384">users (admin file)</a>: <a href="#Getting-Notified">Getting Notified</a></li>
<li><a href="#index-val_002dtags-file_002c-and-read_002donly-access-to-projects-58">val-tags file, and read-only access to projects</a>: <a href="#File-permissions">File permissions</a></li>
<li><a href="#index-val_002dtags-file_002c-forcing-tags-into-810">val-tags file, forcing tags into</a>: <a href="#Error-messages">Error messages</a></li>
<li><a href="#index-Variables-727">Variables</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-Vendor-431">Vendor</a>: <a href="#Tracking-sources">Tracking sources</a></li>
<li><a href="#index-Vendor-branch-432">Vendor branch</a>: <a href="#Tracking-sources">Tracking sources</a></li>
<li><a href="#index-g_t_0040file_007bverifymsg_007d-_0028admin-file_0029-660"><samp><span class="file">verifymsg</span></samp> (admin file)</a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-verifymsg-_0028admin_002fcommit-file_0029_002c-updating-legacy-repositories-664">verifymsg (admin/commit file), updating legacy repositories</a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-g_t_0040file_007bverifymsg_007d_002c-changing-the-log-message-765"><samp><span class="file">verifymsg</span></samp>, changing the log message</a>: <a href="#config">config</a></li>
<li><a href="#index-g_t_0040file_007bverifymsg_007d_002c-changing-the-log-message-667"><samp><span class="file">verifymsg</span></samp>, changing the log message</a>: <a href="#verifymsg">verifymsg</a></li>
<li><a href="#index-verifymsg_002c-example-668">verifymsg, example</a>: <a href="#verifymsg-example">verifymsg example</a></li>
<li><a href="#index-version-_0028subcommand_0029-590">version (subcommand)</a>: <a href="#Invoking-CVS">Invoking CVS</a></li>
<li><a href="#index-Versions_002c-of-CVS-806">Versions, of CVS</a>: <a href="#Compatibility">Compatibility</a></li>
<li><a href="#index-Versions_002c-revisions-and-releases-225">Versions, revisions and releases</a>: <a href="#Versions-revisions-releases">Versions revisions releases</a></li>
<li><a href="#index-Viewing-differences-33">Viewing differences</a>: <a href="#Viewing-differences">Viewing differences</a></li>
<li><a href="#index-VISUAL_002c-environment-variable-787">VISUAL, environment variable</a>: <a href="#Environment-variables">Environment variables</a></li>
<li><a href="#index-VISUAL_002c-environment-variable-28">VISUAL, environment variable</a>: <a href="#Committing-your-changes">Committing your changes</a></li>
<li><a href="#index-VISUAL_002c-internal-variable-732">VISUAL, internal variable</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-watch-add-_0028subcommand_0029-379">watch add (subcommand)</a>: <a href="#Getting-Notified">Getting Notified</a></li>
<li><a href="#index-Watch-family-of-commands_002c-logging-700">Watch family of commands, logging</a>: <a href="#postwatch">postwatch</a></li>
<li><a href="#index-watch-off-_0028subcommand_0029-377">watch off (subcommand)</a>: <a href="#Setting-a-watch">Setting a watch</a></li>
<li><a href="#index-watch-on-_0028subcommand_0029-374">watch on (subcommand)</a>: <a href="#Setting-a-watch">Setting a watch</a></li>
<li><a href="#index-watch-remove-_0028subcommand_0029-381">watch remove (subcommand)</a>: <a href="#Getting-Notified">Getting Notified</a></li>
<li><a href="#index-watchers-_0028subcommand_0029-392">watchers (subcommand)</a>: <a href="#Watch-information">Watch information</a></li>
<li><a href="#index-Watches-373">Watches</a>: <a href="#Watches">Watches</a></li>
<li><a href="#index-wdiff-_0028import-example_0029-435">wdiff (import example)</a>: <a href="#First-import">First import</a></li>
<li><a href="#index-Web-pages_002c-maintaining-with-CVS-680">Web pages, maintaining with CVS</a>: <a href="#Keeping-a-checked-out-copy">Keeping a checked out copy</a></li>
<li><a href="#index-web-proxies_002c-connecting-via-150">web proxies, connecting via</a>: <a href="#The-connection-method">The connection method</a></li>
<li><a href="#index-What-_0028shell-command_0029-424">What (shell command)</a>: <a href="#Using-keywords">Using keywords</a></li>
<li><a href="#index-What-branches-are-good-for-268">What branches are good for</a>: <a href="#Branches-motivation">Branches motivation</a></li>
<li><a href="#index-What-is-CVS-not_003f-13">What is CVS not?</a>: <a href="#What-is-CVS-not_003f">What is CVS not?</a></li>
<li><a href="#index-What-is-CVS_003f-2">What is CVS?</a>: <a href="#What-is-CVS_003f">What is CVS?</a></li>
<li><a href="#index-When-to-commit-399">When to commit</a>: <a href="#When-to-commit">When to commit</a></li>
<li><a href="#index-Windows_002c-and-permissions-65">Windows, and permissions</a>: <a href="#Windows-permissions">Windows permissions</a></li>
<li><a href="#index-Work_002dsession_002c-example-of-16">Work-session, example of</a>: <a href="#A-sample-session">A sample session</a></li>
<li><a href="#index-Working-copy-330">Working copy</a>: <a href="#Multiple-developers">Multiple developers</a></li>
<li><a href="#index-Working-copy_002c-removing-30">Working copy, removing</a>: <a href="#Cleaning-up">Cleaning up</a></li>
<li><a href="#index-Wrappers-621">Wrappers</a>: <a href="#Wrappers">Wrappers</a></li>
<li><a href="#index-write-proxy-762">write proxy</a>: <a href="#config">config</a></li>
<li><a href="#index-write-proxy-200">write proxy</a>: <a href="#Write-proxies">Write proxies</a></li>
<li><a href="#index-Write-proxy_002c-logging-709">Write proxy, logging</a>: <a href="#postproxy">postproxy</a></li>
<li><a href="#index-Write-proxy_002c-logging-705">Write proxy, logging</a>: <a href="#preproxy">preproxy</a></li>
<li><a href="#index-Write-proxy_002c-pull-updates-710">Write proxy, pull updates</a>: <a href="#postproxy">postproxy</a></li>
<li><a href="#index-Write-proxy_002c-verifying-704">Write proxy, verifying</a>: <a href="#preproxy">preproxy</a></li>
<li><a href="#index-writers-_0028admin-file_0029-203">writers (admin file)</a>: <a href="#Read_002donly-access">Read-only access</a></li>
<li><a href="#index-Ximbiot-821">Ximbiot</a>: <a href="#BUGS">BUGS</a></li>
<li><a href="#index-xinetd_002c-configuring-for-pserver-174">xinetd, configuring for pserver</a>: <a href="#Password-authentication-server">Password authentication server</a></li>
<li><a href="#index-Zone_002c-time_002c-in-output-573">Zone, time, in output</a>: <a href="#log-examples">log examples</a></li>
<li><a href="#index-Zone_002c-time_002c-in-output-571">Zone, time, in output</a>: <a href="#log">log</a></li>
   </ul></body></html>

